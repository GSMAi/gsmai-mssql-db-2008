<?xml version="1.0" encoding="utf-8"?>
<DataSchemaModel FileFormatVersion="1.2" SchemaVersion="2.4" DspName="Microsoft.Data.Tools.Schema.Sql.Sql110DatabaseSchemaProvider" CollationLcid="1033" CollationCaseSensitive="False" xmlns="http://schemas.microsoft.com/sqlserver/dac/Serialization/2012/02">
	<Header>
		<CustomData Category="AnsiNulls">
			<Metadata Name="AnsiNulls" Value="True" />
		</CustomData>
		<CustomData Category="QuotedIdentifier">
			<Metadata Name="QuotedIdentifier" Value="True" />
		</CustomData>
		<CustomData Category="CompatibilityMode">
			<Metadata Name="CompatibilityMode" Value="110" />
		</CustomData>
		<CustomData Category="Reference" Type="SqlSchema">
			<Metadata Name="FileName" Value="E:\GSMA\GSMAI-MSSQL-DB-2008\GSMAI-MSSQL-DB\WI_IMPORT\BIN\DEBUG\WI_IMPORT.DACPAC" />
			<Metadata Name="LogicalName" Value="wi_import.dacpac" />
			<Metadata Name="ExternalParts" Value="[$(wi_import)]" />
			<Metadata Name="SuppressMissingDependenciesErrors" Value="False" />
		</CustomData>
		<CustomData Category="Reference" Type="Assembly">
			<Metadata Name="LogicalName" Value="wi_master.dll" />
			<Metadata Name="FileName" Value="E:\GSMA\GSMAI-MSSQL-DB-2008\GSMAI-MSSQL-DB\WI_MASTER\OBJ\DEBUG\WI_MASTER.DLL" />
			<Metadata Name="AssemblyName" Value="wi_master" />
			<Metadata Name="PermissionSet" Value="SAFE" />
			<Metadata Name="Owner" Value="" />
			<Metadata Name="GenerateSqlClrDdl" Value="True" />
			<Metadata Name="IsVisible" Value="True" />
			<Metadata Name="IsModelAware" Value="True" />
			<Metadata Name="SkipCreationIfEmpty" Value="True" />
			<Metadata Name="AssemblySymbolsName" Value="E:\GSMA\gsmai-mssql-db-2008\gsmai-mssql-db\wi_master\obj\Debug\wi_master.pdb" />
		</CustomData>
		<CustomData Category="SqlCmdVariables" Type="SqlCmdVariable">
			<Metadata Name="wi_import" Value="" />
		</CustomData>
	</Header>
	<Model>
		<Element Type="SqlDatabaseOptions">
			<Property Name="Collation" Value="Latin1_General_CI_AS" />
			<Property Name="IsAnsiNullDefaultOn" Value="True" />
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Property Name="IsAnsiWarningsOn" Value="True" />
			<Property Name="IsArithAbortOn" Value="True" />
			<Property Name="IsConcatNullYieldsNullOn" Value="True" />
			<Property Name="IsTornPageProtectionOn" Value="False" />
			<Property Name="IsFullTextEnabled" Value="True" />
			<Property Name="PageVerifyMode" Value="3" />
			<Property Name="DefaultLanguage" Value="" />
			<Property Name="DefaultFullTextLanguage" Value="" />
			<Relationship Name="DefaultFilegroup">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[PRIMARY]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisation_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[organisation_data].[archive]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="25" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[content_authors]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[content_authors].[confluence_id]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="26" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[group_data_view_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[group_data_view_link].[archive]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="27" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[data_sets_master_website_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[data_sets_master_website_link].[has_zone_data]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="28" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[data_sets_master_website_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[data_sets_master_website_link].[has_organisation_data]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="29" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[data_sets_master_website_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[data_sets_master_website_link].[has_regional_data]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="30" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[data_sets_master_website_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[data_sets_master_website_link].[has_group_data]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="31" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[data_sets_master_website_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[data_sets_master_website_link].[has_forecasts]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="32" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[data_sets_master_website_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[data_sets_master_website_link].[has_organisation_rank]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="33" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[data_sets_master_website_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[data_sets_master_website_link].[has_group_rank]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="34" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[data_sets_master_website_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[data_sets_master_website_link].[has_country_rank]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="35" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[data_sets_master_website_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[data_sets_master_website_link].[has_region_rank]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="36" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_data_sets]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_data_sets].[super_set_base]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="37" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_data_sets]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_data_sets].[super_set_base_zones]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="38" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[sp_run_log]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[sp_run_log].[date]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="39" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisations_copy]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[organisations_copy].[in_use]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="40" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisations_copy]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[organisations_copy].[published]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="41" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisations_copy]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[organisations_copy].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="42" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisations_copy]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[organisations_copy].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="43" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisations_copy]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[organisations_copy].[last_update_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="44" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisations_copy]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[organisations_copy].[last_update_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="45" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[organisations].[includes_m2m]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="46" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[currency_rates_copy]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[currency_rates_copy].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="47" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[currency_rates_copy]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[currency_rates_copy].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="48" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[currency_rates_copy]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[currency_rates_copy].[last_update_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="49" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[currency_rates_copy]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[currency_rates_copy].[last_update_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="50" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisation_data_tmp]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[organisation_data_tmp].[archive]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="51" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[user_logs]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[user_logs].[date]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="52" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisation_data_view_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[organisation_data_view_link].[archive]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="53" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[users]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[users].[revalidated_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="54" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[currency_rates]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[currency_rates].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="55" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[currency_rates]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[currency_rates].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="56" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[currency_rates]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[currency_rates].[last_update_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="57" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[currency_rates]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[currency_rates].[last_update_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="58" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[currency_rates_bck_20170918]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[currency_rates_bck_20170918].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="59" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[currency_rates_bck_20170918]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[currency_rates_bck_20170918].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="60" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[currency_rates_bck_20170918]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[currency_rates_bck_20170918].[last_update_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="61" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[currency_rates_bck_20170918]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[currency_rates_bck_20170918].[last_update_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="62" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[metrics]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[metrics].[parent_metric_type_id]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="63" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[sp_run_tracker]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[sp_run_tracker].[date]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="64" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[documents]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[documents].[published_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="65" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[zone_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[zone_data].[archive]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="66" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[zone_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[zone_data].[is_spot_price]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="67" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[('GSMA Intelligence')]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[data_sets_master]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[data_sets_master].[data_set_description_source]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="68" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((1000))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[data_sets_master]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[data_sets_master].[ordering]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="69" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[ds_mvnos]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[ds_mvnos].[is_branded_reseller]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="70" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[ds_mvnos]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[ds_mvnos].[full_mvno]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="71" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[content_entries]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[content_entries].[confluence_id]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="72" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[zone_data_view_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[zone_data_view_link].[archive]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="73" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((1))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[units]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[units].[multiplication]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="74" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[event_logs]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[event_logs].[event_date]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="75" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[group_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[group_data].[archive]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="76" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[data_sp_run_error_log]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[data_sp_run_error_log].[date]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="77" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[cache]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[cache].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="78" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[cache]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[cache].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="79" />
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[query_logs]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[query_logs].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="80" />
		</Element>
		<Element Type="SqlForeignKeyConstraint">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[group_data_view_link].[fk_data_view_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[group_data_view_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[data_views].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[data_views]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="81" />
		</Element>
		<Element Type="SqlForeignKeyConstraint">
			<Property Name="OnUpdateAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[group_data].[fk_attribute_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[group_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="82" />
		</Element>
		<Element Type="SqlForeignKeyConstraint">
			<Property Name="OnUpdateAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[group_data].[fk_confidence_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[group_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[confidence].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[confidence]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="83" />
		</Element>
		<Element Type="SqlForeignKeyConstraint">
			<Property Name="OnUpdateAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[group_data].[fk_currency_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[group_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[currencies].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[currencies]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="84" />
		</Element>
		<Element Type="SqlForeignKeyConstraint">
			<Property Name="OnUpdateAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[group_data].[fk_metric_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[group_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[metrics]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="85" />
		</Element>
		<Element Type="SqlForeignKeyConstraint">
			<Property Name="OnUpdateAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[group_data].[fk_organisation_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[group_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="86" />
		</Element>
		<Element Type="SqlForeignKeyConstraint">
			<Property Name="OnUpdateAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[group_data].[fk_privacy_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[group_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[privacy].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[privacy]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="87" />
		</Element>
		<Element Type="SqlForeignKeyConstraint">
			<Property Name="OnUpdateAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[group_data].[fk_source_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[group_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[sources].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[sources]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="88" />
		</Element>
		<Element Type="SqlForeignKeyConstraint">
			<Property Name="OnUpdateAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[group_data].[fk_status_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[group_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[status].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[status]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="89" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisation_data_metadata].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisation_data_metadata]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="90" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisation_data].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisation_data]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="91" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zone_data_flags_link].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[zone_data_flags_link]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="92" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisations_copy].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisations_copy]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="93" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[currency_rates_copy].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[currency_rates_copy]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="94" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[data_views].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[data_views]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="95" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[currency_rates_bck_20170918].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[currency_rates_bck_20170918]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="96" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zone_data].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[zone_data]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="97" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[data_sets_master].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[data_sets_master]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="98" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zone_data_metadata].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[zone_data_metadata]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="99" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[event_logs].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[event_logs]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="100" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[group_data].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[group_data]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="101" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisation_data_flags_link].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisation_data_flags_link]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="102" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[_backup_dc_group_data]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_group_data].[id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_group_data].[organisation_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_group_data].[ownership_threshold]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="6" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_group_data].[metric_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_group_data].[metric_order]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_group_data].[attribute_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_group_data].[attribute_order]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_group_data].[date]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_group_data].[date_type]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_group_data].[val_d]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_group_data].[val_i]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_group_data].[currency_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_group_data].[source_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_group_data].[confidence_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_group_data].[definition_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_group_data].[has_flags]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="103" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_group_data].[is_calculated]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="104" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_group_data].[is_proportionate]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_group_data].[is_spot]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_group_data].[flags]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_group_data].[location]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_group_data].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="105" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_group_data].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="106" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[_backup_dc_group_data].[IX_dc_group_data]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_dc_group_data].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[_backup_dc_group_data]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[_backup_dc_group_data].[IX_dc_group_data_metric_id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_dc_group_data].[metric_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_dc_group_data].[attribute_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_dc_group_data].[date_type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_dc_group_data].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[_backup_dc_group_data]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[_backup_dc_group_data].[IX_dc_group_data_organisation_id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_dc_group_data].[organisation_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_dc_group_data].[date_type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_dc_group_data].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[_backup_dc_group_data]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[_backup_dc_organisation_data]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_organisation_data].[id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_organisation_data].[organisation_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_organisation_data].[metric_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_organisation_data].[metric_order]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_organisation_data].[attribute_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_organisation_data].[attribute_order]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_organisation_data].[date]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_organisation_data].[date_type]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_organisation_data].[val_d]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_organisation_data].[val_i]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_organisation_data].[currency_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_organisation_data].[source_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_organisation_data].[confidence_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_organisation_data].[definition_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_organisation_data].[has_flags]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="107" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_organisation_data].[flags]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_organisation_data].[location]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_organisation_data].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="108" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_organisation_data].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="109" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[_backup_dc_organisation_data].[IX_dc_organisation_data]">
			<Property Name="IsClustered" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_dc_organisation_data].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[_backup_dc_organisation_data]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[_backup_dc_organisation_data].[IX_dc_organisation_data_currency_id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_dc_organisation_data].[currency_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[_backup_dc_organisation_data]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[_backup_dc_organisation_data].[IX_dc_organisation_data_metric_id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_dc_organisation_data].[metric_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_dc_organisation_data].[attribute_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_dc_organisation_data].[date_type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_dc_organisation_data].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[_backup_dc_organisation_data]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[_backup_dc_organisation_data].[IX_dc_organisation_data_organisation_id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_dc_organisation_data].[organisation_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_dc_organisation_data].[date_type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_dc_organisation_data].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[_backup_dc_organisation_data]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[_backup_dc_zone_data]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_zone_data].[id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_zone_data].[zone_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_zone_data].[metric_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_zone_data].[metric_order]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_zone_data].[attribute_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_zone_data].[attribute_order]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_zone_data].[date]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_zone_data].[date_type]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_zone_data].[val_d]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_zone_data].[val_i]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_zone_data].[currency_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_zone_data].[source_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_zone_data].[confidence_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_zone_data].[definition_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_zone_data].[has_flags]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="110" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_zone_data].[is_calculated]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="111" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_zone_data].[is_spot]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_zone_data].[flags]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_zone_data].[location]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_zone_data].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="112" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_dc_zone_data].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="113" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[_backup_dc_zone_data].[IX_dc_zone_data]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_dc_zone_data].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[_backup_dc_zone_data]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[_backup_dc_zone_data].[IX_dc_zone_data_metric_id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_dc_zone_data].[metric_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_dc_zone_data].[attribute_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_dc_zone_data].[date_type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_dc_zone_data].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[_backup_dc_zone_data]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[_backup_dc_zone_data].[IX_dc_zone_data_zone_id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_dc_zone_data].[zone_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_dc_zone_data].[date_type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_dc_zone_data].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[_backup_dc_zone_data]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[_backup_ds_group_data]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_group_data].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_group_data].[organisation_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_group_data].[ownership_threshold]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="6" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_group_data].[metric_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_group_data].[attribute_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_group_data].[status_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="114" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_group_data].[privacy_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="115" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_group_data].[date]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_group_data].[date_type]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_group_data].[val_d]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_group_data].[val_i]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_group_data].[currency_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_group_data].[source_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_group_data].[confidence_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_group_data].[has_flags]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="116" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_group_data].[is_calculated]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="117" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_group_data].[is_proportionate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="118" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_group_data].[is_spot]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_group_data].[import_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_group_data].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="119" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_group_data].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="120" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_group_data].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="121" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_group_data].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="122" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="123" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[_backup_ds_organisation_data]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_organisation_data].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_organisation_data].[organisation_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_organisation_data].[metric_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_organisation_data].[attribute_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_organisation_data].[status_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="124" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_organisation_data].[privacy_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="125" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_organisation_data].[date]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_organisation_data].[date_type]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_organisation_data].[val_d]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_organisation_data].[val_i]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_organisation_data].[currency_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_organisation_data].[source_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_organisation_data].[confidence_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_organisation_data].[has_flags]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="126" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_organisation_data].[is_calculated]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="127" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_organisation_data].[import_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_organisation_data].[import_merge_hash]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_organisation_data].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="128" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_organisation_data].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="129" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_organisation_data].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="130" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_organisation_data].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="131" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="132" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[_backup_ds_organisation_data].[IX_ds_organisation_data_metric_id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_ds_organisation_data].[metric_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_ds_organisation_data].[attribute_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_ds_organisation_data].[date_type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_ds_organisation_data].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[_backup_ds_organisation_data]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[_backup_ds_organisation_data].[IX_ds_organisation_data_organisation_id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_ds_organisation_data].[organisation_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[_backup_ds_organisation_data]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[_backup_ds_zone_data]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_zone_data].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_zone_data].[zone_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_zone_data].[metric_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_zone_data].[attribute_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_zone_data].[status_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="133" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_zone_data].[privacy_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="134" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_zone_data].[date]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_zone_data].[date_type]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_zone_data].[val_d]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_zone_data].[val_i]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_zone_data].[currency_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_zone_data].[source_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_zone_data].[confidence_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_zone_data].[has_flags]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="135" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_zone_data].[is_calculated]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="136" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_zone_data].[is_spot]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_zone_data].[import_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_zone_data].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="137" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_zone_data].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="138" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_zone_data].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="139" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_backup_ds_zone_data].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="140" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="141" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[_backup_ds_zone_data].[IX_ds_zone_data_metric_id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_ds_zone_data].[metric_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_ds_zone_data].[attribute_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_ds_zone_data].[date_type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_ds_zone_data].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[_backup_ds_zone_data]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[_backup_ds_zone_data].[IX_ds_zone_data_zone_id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_ds_zone_data].[zone_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_ds_zone_data].[metric_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_ds_zone_data].[attribute_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_ds_zone_data].[date_type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_ds_zone_data].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[_backup_ds_zone_data]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlView" Name="[dbo].[_backup_view_dc_group_data]">
			<Property Name="QueryScript">
				<Value><![CDATA[ select 
od.id as "id", 
od.fk_organisation_id AS "organisation_id", 
od.ownership as "ownership_threshold",
m.id AS "metric_id", 
m.[order] AS "metric_order", 
att.id AS "attribute_id", 
att.[order] AS "attribute_order", 
od.[date],
od.date_type,
NULL as "val_d",
od.val_sum "val_i", 
cur.id AS "currency_id", 
s.id AS "source_id", 
conf.id AS "confidence_id",
df.id AS "definition_id",
od.has_flags AS "has_flags",
od.is_calculated AS "is_calculated",
0 as "is_proportionate",
NULL as "is_spot",
NULL AS "flags",
dm.location AS "location",
odv.link_date AS "last_update_on",
0 AS "last_update_by"

from dbo.group_data_view_link as odv
left join group_data as od ON od.id=odv.fk_group_data_id
left join dbo.organisations as o ON o.id=od.fk_organisation_id
left join dbo.metrics as m ON m.id=od.fk_metric_id
left join dbo.attributes as att ON att.id=od.fk_attribute_id
left join dbo.sources as s ON s.id=od.fk_source_id
left join dbo.confidence as conf ON conf.id=od.fk_confidence_id
left join dbo.currencies as cur ON cur.id=od.fk_currency_id
left join dbo.organisation_zone_link as ozl ON ozl.organisation_id=od.fk_organisation_id
left join dbo.data_sets_master as ds ON (ds.fk_metric_id=od.fk_metric_id and ds.fk_attribute_id=od.fk_attribute_id)
left join dbo.definitions as df ON (ds.fk_metric_id=df.metric_id and ds.fk_attribute_id=df.attribute_id)
left join dbo.organisation_data_metadata as dm ON od.id = dm.fk_organisation_data_id 

where odv.fk_data_view_id = 4
and ds.id is not null
and o.id is not null

union all

select 
od.id as "id", 
od.fk_organisation_id AS "organisation_id", 
od.ownership as "ownership_threshold",
m.id AS "metric_id", 
m.[order] AS "metric_order", 
att.id AS "attribute_id", 
att.[order] AS "attribute_order", 
od.[date],
od.date_type,
NULL as "val_d",
od.val_proportionate "val_i", 
cur.id AS "currency_id", 
s.id AS "source_id", 
conf.id AS "confidence_id",
df.id AS "definition_id",
od.has_flags AS "has_flags",
od.is_calculated AS "is_calculated",
1 as "is_proportionate",
NULL as "is_spot",
NULL AS "flags",
dm.location AS "location",
odv.link_date AS "last_update_on",
0 AS "last_update_by"

from dbo.group_data_view_link as odv
left join group_data as od ON od.id=odv.fk_group_data_id
left join dbo.organisations as o ON o.id=od.fk_organisation_id
left join dbo.metrics as m ON m.id=od.fk_metric_id
left join dbo.attributes as att ON att.id=od.fk_attribute_id
left join dbo.sources as s ON s.id=od.fk_source_id
left join dbo.confidence as conf ON conf.id=od.fk_confidence_id
left join dbo.currencies as cur ON cur.id=od.fk_currency_id
left join dbo.organisation_zone_link as ozl ON ozl.organisation_id=od.fk_organisation_id
left join dbo.data_sets_master as ds ON (ds.fk_metric_id=od.fk_metric_id and ds.fk_attribute_id=od.fk_attribute_id)
left join dbo.definitions as df ON (ds.fk_metric_id=df.metric_id and ds.fk_attribute_id=df.attribute_id)
left join dbo.organisation_data_metadata as dm ON od.id = dm.fk_organisation_data_id 

where odv.fk_data_view_id = 4
and ds.id is not null
and o.id is not null]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_view_dc_group_data].[id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_view_dc_group_data].[organisation_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data].[fk_organisation_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_view_dc_group_data].[ownership_threshold]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data].[ownership]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_view_dc_group_data].[metric_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[metrics].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_view_dc_group_data].[metric_order]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[metrics].[order]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_view_dc_group_data].[attribute_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[attributes].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_view_dc_group_data].[attribute_order]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[attributes].[order]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_view_dc_group_data].[date]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_view_dc_group_data].[date_type]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data].[date_type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_view_dc_group_data].[val_d]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_view_dc_group_data].[val_i]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data].[val_sum]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_view_dc_group_data].[currency_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[currencies].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_view_dc_group_data].[source_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[sources].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_view_dc_group_data].[confidence_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[confidence].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_view_dc_group_data].[definition_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[definitions].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_view_dc_group_data].[has_flags]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data].[has_flags]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_view_dc_group_data].[is_calculated]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data].[is_calculated]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_view_dc_group_data].[is_proportionate]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_view_dc_group_data].[is_spot]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_view_dc_group_data].[flags]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_view_dc_group_data].[location]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data_metadata].[location]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_view_dc_group_data].[last_update_on]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data_view_link].[link_date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_view_dc_group_data].[last_update_by]" />
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References Name="[dbo].[group_data_view_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data_view_link].[fk_group_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[definitions]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[definitions].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[definitions].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata].[fk_organisation_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[ownership]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[val_sum]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[definitions].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata].[location]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data_view_link].[link_date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data_view_link].[fk_data_view_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[val_proportionate]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="3181" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE VIEW [dbo].[_backup_view_dc_group_data] AS" />
			</Annotation>
		</Element>
		<Element Type="SqlView" Name="[dbo].[_backup_views_dc_organisation_data]">
			<Property Name="QueryScript">
				<Value><![CDATA[ select 
od.id as "id", 
od.fk_organisation_id AS "organisation_id", 
m.id AS "metric_id", 
m.[order] AS "metric_order", 
att.id AS "attribute_id", 
att.[order] AS "attribute_order", 
od.[date],
od.date_type,
od.val AS "val_d", 
od.val AS "val_i", 
cur.id AS "currency_id", 
s.id AS "source_id", 
conf.id AS "confidence_id",
df.id AS "definition_id",
od.has_flags AS "has_flags",
NULL AS "flags",
dm.location AS "location",
odv.link_date AS "last_update_on",
0 AS "last_updated_by"

from dbo.organisation_data_view_link as odv
left join organisation_data as od ON od.id=odv.fk_organisation_data_id
left join dbo.organisations as o ON o.id=od.fk_organisation_id
left join dbo.metrics as m ON m.id=od.fk_metric_id
left join dbo.attributes as att ON att.id=od.fk_attribute_id
left join dbo.sources as s ON s.id=od.fk_source_id
left join dbo.confidence as conf ON conf.id=od.fk_confidence_id
left join dbo.currencies as cur ON cur.id=od.fk_currency_id
left join dbo.organisation_zone_link as ozl ON ozl.organisation_id=od.fk_organisation_id
left join dbo.zones as z ON z.id=ozl.zone_id
left join dbo.data_sets_master as ds ON (ds.fk_metric_id=od.fk_metric_id and ds.fk_attribute_id=od.fk_attribute_id)
left join dbo.definitions as df ON (ds.fk_metric_id=df.metric_id and ds.fk_attribute_id=df.attribute_id)
left join dbo.organisation_data_metadata as dm ON od.id = dm.fk_organisation_data_id 

where odv.fk_data_view_id = 4
and ds.id is not null
and o.id is not null
and not (ds.id IN (490, 497, 511, 514, 561, 562, 563, 564, 565, 566, 600, 512, 515, 513, 516) and od.[date]<'2007-01-01')
and not (ds.id IN (3, 609, 610, 611, 612, 500, 615, 618, 619, 628, 631, 634) and od.[date]<'2010-01-01')
and not (ds.id IN (65, 202) and s.id IN (3, 22))
and not (ds.id IN (88, 61, 84, 97, 65, 707) and od.[date]>GETDATE())]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_views_dc_organisation_data].[id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_views_dc_organisation_data].[organisation_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data].[fk_organisation_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_views_dc_organisation_data].[metric_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[metrics].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_views_dc_organisation_data].[metric_order]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[metrics].[order]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_views_dc_organisation_data].[attribute_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[attributes].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_views_dc_organisation_data].[attribute_order]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[attributes].[order]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_views_dc_organisation_data].[date]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_views_dc_organisation_data].[date_type]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data].[date_type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_views_dc_organisation_data].[val_d]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data].[val]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_views_dc_organisation_data].[val_i]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data].[val]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_views_dc_organisation_data].[currency_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[currencies].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_views_dc_organisation_data].[source_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[sources].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_views_dc_organisation_data].[confidence_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[confidence].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_views_dc_organisation_data].[definition_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[definitions].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_views_dc_organisation_data].[has_flags]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data].[has_flags]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_views_dc_organisation_data].[flags]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_views_dc_organisation_data].[location]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data_metadata].[location]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_views_dc_organisation_data].[last_update_on]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data_view_link].[link_date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_views_dc_organisation_data].[last_updated_by]" />
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References Name="[dbo].[organisation_data_view_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_view_link].[fk_organisation_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[definitions]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[definitions].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[definitions].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata].[fk_organisation_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[val]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[val]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[definitions].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata].[location]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_view_link].[link_date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_view_link].[fk_data_view_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1905" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE VIEW [dbo].[_backup_views_dc_organisation_data] AS" />
			</Annotation>
		</Element>
		<Element Type="SqlView" Name="[dbo].[_backup_views_dc_zone_data]">
			<Property Name="QueryScript">
				<Value><![CDATA[ select  
od.id as "id", 
od.fk_zone_id AS "zone_id",
od.fk_metric_id AS "metric_id",
m.[order] AS "metric_order",
att.id AS "attribute_id", 
att.[order] AS "attribute_order", 
od.[date] AS "date",
od.date_type AS "date_type",
od.val AS "val_d", 
od.val AS "val_i", 
cur.id AS "currency_id", 
s.id AS "source_id", 
conf.id AS "confidence_id", 
df.id AS "definition_id",
od.has_flags AS "has_flags",
od.is_calculated AS "is_calculated",
od.is_spot_price AS "is_spot",
NULL AS "flags",
dm.location AS "location",
odv.created AS "last_update_on",
0 AS "last_updated_by"

from dbo.zone_data_view_link as odv
left join zone_data as od ON od.id=odv.fk_zone_data_id
left join dbo.zones as o ON o.id=od.fk_zone_id
left join dbo.types as ot ON ot.id=o.fk_type_id
left join dbo.metrics as m ON m.id=od.fk_metric_id
left join dbo.attributes as att ON att.id=od.fk_attribute_id
left join dbo.sources as s ON s.id=od.fk_source_id
left join dbo.confidence as conf ON conf.id=od.fk_confidence_id
left join dbo.currencies as cur ON cur.id=od.fk_currency_id
left join dbo.data_sets_master as ds ON (ds.fk_metric_id=od.fk_metric_id and ds.fk_attribute_id=od.fk_attribute_id)
left join dbo.definitions as df ON (df.metric_id=od.fk_metric_id and df.attribute_id=od.fk_attribute_id)
left join dbo.zone_data_metadata as dm ON od.id = dm.fk_zone_data_id 

where odv.fk_data_view_id = 4
and ds.id is not null
and o.id is not null
and not (ds.id IN (490, 497, 511, 514, 561, 562, 563, 564, 565, 566, 600, 512, 515, 513, 516) and od.[date]<'2007-01-01')
and not (ds.id IN (3, 609, 610, 611, 612, 500, 615, 618, 619, 628, 631, 634) and od.[date]<'2010-01-01')]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_views_dc_zone_data].[id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_views_dc_zone_data].[zone_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[fk_zone_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_views_dc_zone_data].[metric_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[fk_metric_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_views_dc_zone_data].[metric_order]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[metrics].[order]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_views_dc_zone_data].[attribute_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[attributes].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_views_dc_zone_data].[attribute_order]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[attributes].[order]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_views_dc_zone_data].[date]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_views_dc_zone_data].[date_type]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[date_type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_views_dc_zone_data].[val_d]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[val]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_views_dc_zone_data].[val_i]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[val]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_views_dc_zone_data].[currency_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[currencies].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_views_dc_zone_data].[source_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[sources].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_views_dc_zone_data].[confidence_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[confidence].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_views_dc_zone_data].[definition_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[definitions].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_views_dc_zone_data].[has_flags]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[has_flags]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_views_dc_zone_data].[is_calculated]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[is_calculated]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_views_dc_zone_data].[is_spot]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[is_spot_price]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_views_dc_zone_data].[flags]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_views_dc_zone_data].[location]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data_metadata].[location]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_views_dc_zone_data].[last_update_on]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data_view_link].[created]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_backup_views_dc_zone_data].[last_updated_by]" />
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References Name="[dbo].[zone_data_view_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_view_link].[fk_zone_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[types]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[types].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[fk_type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[definitions]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[definitions].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[definitions].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_metadata]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_metadata].[fk_zone_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[val]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[val]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[definitions].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[is_spot_price]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_metadata].[location]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_view_link].[created]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_view_link].[fk_data_view_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[date]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1721" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE VIEW [dbo].[_backup_views_dc_zone_data] AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[_data_sets]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_data_sets].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_data_sets].[metric_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_data_sets].[attribute_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_data_sets].[type_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_data_sets].[default_date_type]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="142" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_data_sets].[is_live]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_data_sets].[is_live_for_organisation_data]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="143" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_data_sets].[is_live_for_group_data]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="144" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_data_sets].[is_live_for_country_data]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="145" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_data_sets].[is_live_for_region_data]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="146" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_data_sets].[is_aggregated]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="147" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_data_sets].[is_aggregated_from_organisation_data]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="148" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_data_sets].[is_aggregated_from_zone_data]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="149" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_data_sets].[has_forecasts]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="150" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_data_sets].[has_organisation_data]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="151" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_data_sets].[has_group_data]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="152" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_data_sets].[has_country_data]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="153" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_data_sets].[has_region_data]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="154" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_data_sets].[has_organisation_rank]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="155" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_data_sets].[has_group_rank]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="156" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_data_sets].[has_country_rank]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="157" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_data_sets].[has_region_rank]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="158" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_data_sets].[show_in_metrics_only]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="159" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_data_sets].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="160" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_data_sets].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="161" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_data_sets].[super_set_base]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="37" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_data_sets].[web_set_base]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_data_sets].[super_set_base_zones]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="38" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="162" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[_dc_dashboard_zone_data]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_dc_dashboard_zone_data].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_dc_dashboard_zone_data].[zone_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_dc_dashboard_zone_data].[metric_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_dc_dashboard_zone_data].[attribute_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_dc_dashboard_zone_data].[date]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_dc_dashboard_zone_data].[date_type]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_dc_dashboard_zone_data].[val_d]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_dc_dashboard_zone_data].[val_i]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_dc_dashboard_zone_data].[currency_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_dc_dashboard_zone_data].[source_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_dc_dashboard_zone_data].[confidence_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_dc_dashboard_zone_data].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="163" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_dc_dashboard_zone_data].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="164" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[_dc_dashboard_zone_data].[IX_dc_dashboard_zone_data]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_dc_dashboard_zone_data].[zone_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[_dc_dashboard_zone_data]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlView" Name="[dbo].[_latest_ranked_forecast_data]">
			<Property Name="QueryScript">
				<Value><![CDATA[ SELECT	id, rank = ROW_NUMBER() OVER (PARTITION BY organisation_id, metric_id, attribute_id, date_type, date ORDER BY created_on DESC)
FROM	[$(wi_import)].dbo.ds_organisation_forecast_data
WHERE	approved = 1]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_latest_ranked_forecast_data].[id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_forecast_data].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_latest_ranked_forecast_data].[rank]" />
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_forecast_data]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_forecast_data].[id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_forecast_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_forecast_data].[metric_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_forecast_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_forecast_data].[date_type]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_forecast_data].[date]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_forecast_data].[created_on]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_forecast_data].[approved]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="260" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE VIEW [dbo].[_latest_ranked_forecast_data] AS" />
			</Annotation>
		</Element>
		<Element Type="SqlView" Name="[dbo].[_latest_ranked_forecast_quarterly_data]">
			<Property Name="QueryScript">
				<Value><![CDATA[ SELECT	id, rank = ROW_NUMBER() OVER (PARTITION BY organisation_id, metric_id, attribute_id, date_type, date ORDER BY created_on DESC)
FROM	[$(wi_import)].dbo.ds_organisation_forecast_data
WHERE	approved = 1
AND 	date_type='Q']]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_latest_ranked_forecast_quarterly_data].[id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_forecast_data].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_latest_ranked_forecast_quarterly_data].[rank]" />
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_forecast_data]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_forecast_data].[id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_forecast_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_forecast_data].[metric_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_forecast_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_forecast_data].[date_type]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_forecast_data].[date]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_forecast_data].[created_on]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_forecast_data].[approved]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="290" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE VIEW [dbo].[_latest_ranked_forecast_quarterly_data] AS" />
			</Annotation>
		</Element>
		<Element Type="SqlView" Name="[dbo].[_latest_ranked_reported_data]">
			<Property Name="QueryScript">
				<Value><![CDATA[ SELECT	id, rank = ROW_NUMBER() OVER (PARTITION BY organisation_id, metric_id, attribute_id, date, date_type ORDER BY last_update_on DESC)
FROM	[$(wi_import)].dbo.ds_organisation_data
WHERE	approved = 1]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_latest_ranked_reported_data].[id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_latest_ranked_reported_data].[rank]" />
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[last_update_on]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[approved]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="255" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE VIEW [dbo].[_latest_ranked_reported_data] AS" />
			</Annotation>
		</Element>
		<Element Type="SqlView" Name="[dbo].[_latest_ranked_reported_quarterly_data]">
			<Property Name="QueryScript">
				<Value><![CDATA[ SELECT	id, rank = ROW_NUMBER() OVER (PARTITION BY organisation_id, metric_id, attribute_id, date_type, date ORDER BY created_on DESC)
FROM	[$(wi_import)].dbo.ds_organisation_data
WHERE	approved = 1
AND 	date_type='Q']]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_latest_ranked_reported_quarterly_data].[id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_latest_ranked_reported_quarterly_data].[rank]" />
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[created_on]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[approved]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="281" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE VIEW [dbo].[_latest_ranked_reported_quarterly_data] AS" />
			</Annotation>
		</Element>
		<Element Type="SqlView" Name="[dbo].[_latest_ranked_zone_data]">
			<Property Name="QueryScript">
				<Value><![CDATA[ SELECT	id, rank = ROW_NUMBER() OVER (PARTITION BY zone_id, metric_id, attribute_id, date_type, date ORDER BY created_on DESC)
FROM	[$(wi_import)].dbo.ds_zone_data
WHERE	approved = 1]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_latest_ranked_zone_data].[id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_data].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_latest_ranked_zone_data].[rank]" />
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_data]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_data].[id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_data].[zone_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_data].[metric_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_data].[date_type]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_data].[date]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_data].[created_on]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_data].[approved]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="232" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE VIEW [dbo].[_latest_ranked_zone_data] AS" />
				<Property Name="FooterContents" Value=";" />
			</Annotation>
		</Element>
		<Element Type="SqlView" Name="[dbo].[_latest_ranked_zone_forecasted_data]">
			<Property Name="QueryScript">
				<Value><![CDATA[ SELECT	id, rank = ROW_NUMBER() OVER (PARTITION BY zone_id, metric_id, attribute_id, date_type, date ORDER BY created_on DESC)
FROM	[$(wi_import)].dbo.ds_zone_forecast_data
WHERE	approved = 1]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_latest_ranked_zone_forecasted_data].[id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_forecast_data].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_latest_ranked_zone_forecasted_data].[rank]" />
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_forecast_data]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_forecast_data].[id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_forecast_data].[zone_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_forecast_data].[metric_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_forecast_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_forecast_data].[date_type]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_forecast_data].[date]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_forecast_data].[created_on]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_forecast_data].[approved]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="252" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE VIEW [dbo].[_latest_ranked_zone_forecasted_data] AS" />
				<Property Name="FooterContents" Value=";" />
			</Annotation>
		</Element>
		<Element Type="SqlView" Name="[dbo].[_latest_ranked_zone_forecasted_quarterly_data]">
			<Property Name="QueryScript">
				<Value><![CDATA[ SELECT	id, rank = ROW_NUMBER() OVER (PARTITION BY zone_id, metric_id, attribute_id, date_type, date ORDER BY created_on DESC)
FROM	[$(wi_import)].dbo.ds_zone_forecast_data
WHERE	approved = 1
AND 	date_type='Q']]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_latest_ranked_zone_forecasted_quarterly_data].[id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_forecast_data].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_latest_ranked_zone_forecasted_quarterly_data].[rank]" />
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_forecast_data]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_forecast_data].[id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_forecast_data].[zone_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_forecast_data].[metric_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_forecast_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_forecast_data].[date_type]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_forecast_data].[date]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_forecast_data].[created_on]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_forecast_data].[approved]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="281" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE VIEW [dbo].[_latest_ranked_zone_forecasted_quarterly_data] AS" />
			</Annotation>
		</Element>
		<Element Type="SqlView" Name="[dbo].[_latest_ranked_zone_quarterly_data]">
			<Property Name="QueryScript">
				<Value><![CDATA[ SELECT	id, rank = ROW_NUMBER() OVER (PARTITION BY zone_id, metric_id, attribute_id, date_type, date ORDER BY created_on DESC)
FROM	[$(wi_import)].dbo.ds_zone_data
WHERE	approved = 1
AND 	date_type='Q']]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_latest_ranked_zone_quarterly_data].[id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_data].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_latest_ranked_zone_quarterly_data].[rank]" />
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_data]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_data].[id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_data].[zone_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_data].[metric_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_data].[date_type]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_data].[date]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_data].[created_on]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_data].[approved]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="262" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE VIEW [dbo].[_latest_ranked_zone_quarterly_data] AS" />
				<Property Name="FooterContents" Value=";" />
			</Annotation>
		</Element>
		<Element Type="SqlView" Name="[dbo].[_merged_reported_forecasted_quarter_figures]">
			<Property Name="QueryScript">
				<Value><![CDATA[ select ofd.organisation_id, o.name AS "organisation_name", o.type_id AS "organisation_type_id", m.term AS "metric", 
att.term AS "attribute", ofd.[date], ofd.date_type, 0 AS "has_flags", 
CASE WHEN ofd.val_d IS NULL THEN ofd.val_i ELSE ofd.val_d END AS "value",
s.term AS "source", cf.term "confidence", cur.iso_code AS "currency_iso_code", z.id AS "zone_id", z.name AS "zone_name", 
z.type_id AS "zone_type_id"
	FROM [$(wi_import)].gsmai.forecast_data as fd
	LEFT JOIN [$(wi_import)].dbo.ds_organisation_forecast_data as ofd ON ofd.id=fd.id
	LEFT JOIN dbo.organisations as o ON o.id=ofd.organisation_id
	LEFT JOIN dbo.organisation_zone_link AS ozl ON ozl.organisation_id=o.id
	LEFT JOIN dbo.zones as z ON z.id=ozl.zone_id
	LEFT JOIN dbo.metrics as m ON m.id=ofd.metric_id
	LEFT JOIN dbo.attributes as att ON att.id=ofd.attribute_id
	LEFT JOIN dbo.sources as s ON s.id=ofd.source_id
	LEFT JOIN dbo.confidence as cf ON cf.id=ofd.confidence_id
	LEFT JOIN dbo.currencies as cur ON cur.id=ofd.currency_id
	
UNION ALL

select od.organisation_id, o.name AS "organisation_name", o.type_id AS "organisation_type_id", m.term AS "metric", 
att.term AS "attribute", od.[date], od.date_type, od.has_flags, 
CASE WHEN od.val_d IS NULL THEN od.val_i ELSE od.val_d END AS "value",
s.term AS "source", cf.term "confidence", cur.iso_code AS "currency_iso_code", z.id AS "zone_id", z.name AS "zone_name", 
z.type_id AS "zone_type_id"
	FROM [$(wi_import)].gsmai.reported_data as rd
	LEFT JOIN [$(wi_import)].dbo.ds_organisation_data as od ON od.id=rd.id
	LEFT JOIN dbo.organisations as o ON o.id=od.organisation_id
	LEFT JOIN dbo.organisation_zone_link AS ozl ON ozl.organisation_id=o.id
	LEFT JOIN dbo.zones as z ON z.id=ozl.zone_id
	LEFT JOIN dbo.metrics as m ON m.id=od.metric_id
	LEFT JOIN dbo.attributes as att ON att.id=od.attribute_id
	LEFT JOIN dbo.sources as s ON s.id=od.source_id
	LEFT JOIN dbo.confidence as cf ON cf.id=od.confidence_id
	LEFT JOIN dbo.currencies as cur ON cur.id=od.currency_id]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_merged_reported_forecasted_quarter_figures].[organisation_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_forecast_data].[organisation_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_merged_reported_forecasted_quarter_figures].[organisation_name]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisations].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_merged_reported_forecasted_quarter_figures].[organisation_type_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisations].[type_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_merged_reported_forecasted_quarter_figures].[metric]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[metrics].[term]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_merged_reported_forecasted_quarter_figures].[attribute]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[attributes].[term]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_merged_reported_forecasted_quarter_figures].[date]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_forecast_data].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_merged_reported_forecasted_quarter_figures].[date_type]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_forecast_data].[date_type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_merged_reported_forecasted_quarter_figures].[has_flags]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_merged_reported_forecasted_quarter_figures].[value]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_merged_reported_forecasted_quarter_figures].[source]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[sources].[term]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_merged_reported_forecasted_quarter_figures].[confidence]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[confidence].[term]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_merged_reported_forecasted_quarter_figures].[currency_iso_code]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[currencies].[iso_code]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_merged_reported_forecasted_quarter_figures].[zone_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zones].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_merged_reported_forecasted_quarter_figures].[zone_name]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zones].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_merged_reported_forecasted_quarter_figures].[zone_type_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zones].[type_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[gsmai].[forecast_data]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_forecast_data]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_forecast_data].[id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[gsmai].[forecast_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_forecast_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_forecast_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_forecast_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources].[id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_forecast_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence].[id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_forecast_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_forecast_data].[currency_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_forecast_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[term]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[term]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_forecast_data].[date]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_forecast_data].[date_type]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_forecast_data].[val_d]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_forecast_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources].[term]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence].[term]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[iso_code]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[type_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[gsmai].[reported_data]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[gsmai].[reported_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources].[id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence].[id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[term]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[term]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[has_flags]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources].[term]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence].[term]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[iso_code]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[type_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="2086" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE VIEW [dbo].[_merged_reported_forecasted_quarter_figures] AS" />
			</Annotation>
		</Element>
		<Element Type="SqlView" Name="[dbo].[_merged_zone_reported_forecasted_quarter_figures]">
			<Property Name="QueryScript">
				<Value><![CDATA[ select z.id AS "zone_id", z.name AS "zone_name", z.type_id AS "zone_type_id", m.term AS "metric", 
att.term AS "attribute", zfd.[date], zfd.date_type, 0 AS "has_flags", 
CASE WHEN zfd.val_d IS NULL THEN zfd.val_i ELSE zfd.val_d END AS "value",
s.term AS "source", cf.term "confidence", cur.iso_code AS "currency_iso_code", p.term AS "privacy", 0 AS "is_spot"
	FROM [$(wi_import)].gsmai.zone_forecast_data as fd
	LEFT JOIN [$(wi_import)].dbo.ds_zone_forecast_data as zfd ON zfd.id=fd.id
	LEFT JOIN dbo.zones as z ON z.id=zfd.zone_id
	LEFT JOIN dbo.metrics as m ON m.id=zfd.metric_id
	LEFT JOIN dbo.attributes as att ON att.id=zfd.attribute_id
	LEFT JOIN dbo.sources as s ON s.id=zfd.source_id
	LEFT JOIN dbo.confidence as cf ON cf.id=zfd.confidence_id
	LEFT JOIN dbo.currencies as cur ON cur.id=zfd.currency_id
	LEFT JOIN dbo.privacy as p ON p.id=zfd.privacy_id
	
UNION ALL

select z.id AS "zone_id", z.name AS "zone_name", z.type_id AS "zone_type_id", m.term AS "metric", 
att.term AS "attribute", zfd.[date], zfd.date_type, 0 AS "has_flags", 
CASE WHEN zfd.val_d IS NULL THEN zfd.val_i ELSE zfd.val_d END AS "value",
s.term AS "source", cf.term "confidence", cur.iso_code AS "currency_iso_code", p.term AS "privacy", 0 AS "is_spot"
	FROM [$(wi_import)].gsmai.zone_reported_data as fd
	LEFT JOIN [$(wi_import)].dbo.ds_zone_data as zfd ON zfd.id=fd.id
	LEFT JOIN dbo.zones as z ON z.id=zfd.zone_id
	LEFT JOIN dbo.metrics as m ON m.id=zfd.metric_id
	LEFT JOIN dbo.attributes as att ON att.id=zfd.attribute_id
	LEFT JOIN dbo.sources as s ON s.id=zfd.source_id
	LEFT JOIN dbo.confidence as cf ON cf.id=zfd.confidence_id
	LEFT JOIN dbo.currencies as cur ON cur.id=zfd.currency_id
	LEFT JOIN dbo.privacy as p ON p.id=zfd.privacy_id]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_merged_zone_reported_forecasted_quarter_figures].[zone_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zones].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_merged_zone_reported_forecasted_quarter_figures].[zone_name]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zones].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_merged_zone_reported_forecasted_quarter_figures].[zone_type_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zones].[type_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_merged_zone_reported_forecasted_quarter_figures].[metric]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[metrics].[term]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_merged_zone_reported_forecasted_quarter_figures].[attribute]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[attributes].[term]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_merged_zone_reported_forecasted_quarter_figures].[date]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_forecast_data].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_merged_zone_reported_forecasted_quarter_figures].[date_type]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_forecast_data].[date_type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_merged_zone_reported_forecasted_quarter_figures].[has_flags]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_merged_zone_reported_forecasted_quarter_figures].[value]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_merged_zone_reported_forecasted_quarter_figures].[source]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[sources].[term]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_merged_zone_reported_forecasted_quarter_figures].[confidence]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[confidence].[term]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_merged_zone_reported_forecasted_quarter_figures].[currency_iso_code]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[currencies].[iso_code]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_merged_zone_reported_forecasted_quarter_figures].[privacy]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[privacy].[term]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_merged_zone_reported_forecasted_quarter_figures].[is_spot]" />
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[gsmai].[zone_forecast_data]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_forecast_data]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_forecast_data].[id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[gsmai].[zone_forecast_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_forecast_data].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_forecast_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_forecast_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources].[id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_forecast_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence].[id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_forecast_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_forecast_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[privacy]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[privacy].[id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_forecast_data].[privacy_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[term]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[term]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_forecast_data].[date]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_forecast_data].[date_type]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_forecast_data].[val_d]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_forecast_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources].[term]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence].[term]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[iso_code]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[privacy].[term]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[gsmai].[zone_reported_data]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_data]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_data].[id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[gsmai].[zone_reported_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_data].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources].[id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence].[id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[privacy].[id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_data].[privacy_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[term]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[term]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_data].[date]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_data].[date_type]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_data].[val_d]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_zone_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources].[term]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence].[term]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[iso_code]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[privacy].[term]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1825" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE VIEW [dbo].[_merged_zone_reported_forecasted_quarter_figures] AS" />
			</Annotation>
		</Element>
		<Element Type="SqlView" Name="[dbo].[_networks_data]">
			<Property Name="QueryScript">
				<Value><![CDATA[ SELECT  DISTINCT
        o.id organisation_id,
        o.name organisation,
        CASE o.status_id WHEN 1308 THEN 0 ELSE o.status_id END organisation_status_id,
        t.id technology_id,
        t.name technology,
        t.[order] technology_order,
        c.id country_id,
        c.name country,
        c.iso_code,
        c.iso_short_code,
        s.id subregion_id,
        s.name subregion,
        r.id region_id,
        r.name region,
        CASE n.status_id WHEN 1308 THEN 0 ELSE n.status_id END status_id,
        CASE n.status_id WHEN 81 THEN 0 ELSE 1 END status_order, -- Show planned networks before live as most won't have a (future) launch date
        n.launch_date,
        n.closure_date,
        n.downlink_rate,
        n.downlink_rate_unit_id,
        n.uplink_rate,
        n.uplink_rate_unit_id,
        LEFT(f.frequencies, LEN(f.frequencies)-1) frequencies,
        n.vendors
        
FROM    networks n INNER JOIN
        organisations o ON n.organisation_id = o.id INNER JOIN
        attributes t ON n.technology_id = t.id INNER JOIN
        organisation_zone_link oz ON o.id = oz.organisation_id INNER JOIN
        zones c ON oz.zone_id = c.id INNER JOIN
        zone_link zl ON c.id = zl.subzone_id INNER JOIN
        zones s ON zl.zone_id = s.id INNER JOIN
        zone_link zl2 ON s.id = zl2.subzone_id INNER JOIN 
        zones r ON zl2.zone_id = r.id INNER JOIN
        zone_link zl3 ON r.id = zl3.subzone_id INNER JOIN
        zones g ON zl3.zone_id = g.id LEFT JOIN
        (
            SELECT  DISTINCT
                    nf2.network_id,
                    (
                        SELECT  f.name + '/' AS [text()]
                        
                        FROM    network_frequency_link nf1 INNER JOIN
                                attributes f ON nf1.frequency_id = f.id
                                
                        WHERE   nf1.network_id = nf2.network_id
                                
                        ORDER BY f.[order]
                        
                        FOR XML PATH ('')
                    ) frequencies
                    
            FROM    network_frequency_link nf2
        ) f ON n.id = f.network_id
        
WHERE   c.id = COALESCE(null, c.id) AND
        s.id = COALESCE(null, s.id) AND
        r.id = COALESCE(null, r.id) AND
        g.id = 3936 AND
        (
            (0 = 0 AND t.id = COALESCE(null, t.id) AND t.published=1 AND 
                t.id IN (602,603,616,619,621,624,823,824,825,870,931,936,937,941,996,1124,1201,1238,
                    1245,1293,1307,1472,1473,1474,1512,1513,1514,1515,1545,1595,1600, 1620, 1621, 
                    1622, 1625, 1626, 1601, 1603, 1604, 1394, 1591, 1615, 1623, 1624)) OR
            (0 = 1 AND t.id IN (SELECT DISTINCT attribute_id FROM attribute_family_link WHERE family_id = null))
        ) AND
        (
            (0 = 0 AND n.status_id IN (0,1308)) OR -- Special case for 'live'; include 'missing'
            (n.status_id = COALESCE(0, n.status_id))
        ) AND
        n.status_id NOT IN (1309, 1574) -- No 'verified' networks (fixed-wireless etc.)]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_networks_data].[organisation_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisations].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_networks_data].[organisation]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisations].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_networks_data].[organisation_status_id]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_networks_data].[technology_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[attributes].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_networks_data].[technology]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[attributes].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_networks_data].[technology_order]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[attributes].[order]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_networks_data].[country_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zones].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_networks_data].[country]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zones].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_networks_data].[iso_code]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zones].[iso_code]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_networks_data].[iso_short_code]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zones].[iso_short_code]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_networks_data].[subregion_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zones].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_networks_data].[subregion]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zones].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_networks_data].[region_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zones].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_networks_data].[region]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zones].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_networks_data].[status_id]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_networks_data].[status_order]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_networks_data].[launch_date]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[networks].[launch_date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_networks_data].[closure_date]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[networks].[closure_date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_networks_data].[downlink_rate]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[networks].[downlink_rate]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_networks_data].[downlink_rate_unit_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[networks].[downlink_rate_unit_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_networks_data].[uplink_rate]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[networks].[uplink_rate]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_networks_data].[uplink_rate_unit_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[networks].[uplink_rate_unit_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_networks_data].[frequencies]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_networks_data].[vendors]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[networks].[vendors]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References Name="[dbo].[networks]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[networks].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[networks].[technology_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[network_frequency_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[network_frequency_link].[network_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[network_frequency_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[network_frequency_link].[frequency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[network_frequency_link].[network_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[network_frequency_link].[network_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[networks].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[network_frequency_link].[network_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[iso_code]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[iso_short_code]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[networks].[status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[networks].[launch_date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[networks].[closure_date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[networks].[downlink_rate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[networks].[downlink_rate_unit_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[networks].[uplink_rate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[networks].[uplink_rate_unit_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[networks].[vendors]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[published]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attribute_family_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attribute_family_link].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attribute_family_link].[family_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="3229" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE VIEW [dbo].[_networks_data] AS" />
			</Annotation>
		</Element>
		<Element Type="SqlView" Name="[dbo].[_research_download_counts]">
			<Property Name="QueryScript">
				<Value><![CDATA[ SELECT	o.name as 'organisation_name',
		z.name as 'country',
		t.name as 'organisation_type',
		COUNT(dt.id) as "downloads"

FROM	documents d INNER JOIN
		document_tracking dt ON d.id = dt.document_id INNER JOIN
		users u ON dt.user_id = u.id INNER JOIN
		user_organisation_link uo ON u.id = uo.user_id INNER JOIN
		organisations o ON uo.organisation_id = o.id LEFT JOIN
		organisation_zone_link oz ON o.id = oz.organisation_id LEFT JOIN
		zones z ON oz.zone_id = z.id LEFT JOIN
		types t ON o.type_id = t.id


WHERE	dt.created_on >= '2016-04-01' AND
		dt.created_on < '2017-03-31'

GROUP BY o.name, z.name, t.name]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_research_download_counts].[organisation_name]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisations].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_research_download_counts].[country]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zones].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_research_download_counts].[organisation_type]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[types].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[_research_download_counts].[downloads]" />
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References Name="[dbo].[documents]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[document_tracking]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[documents].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[document_tracking].[document_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[users]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[document_tracking].[user_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[users].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_organisation_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[users].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_organisation_link].[user_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_organisation_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[types]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[types].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[types].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[document_tracking].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[document_tracking].[created_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[types].[name]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="681" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE VIEW [dbo].[_research_download_counts] AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[_tmp_radar_users]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_tmp_radar_users].[name]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="120" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[_tmp_radar_users].[email]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="120" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[aggregate_groups]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[

DECLARE @ownership_threshold decimal(6,4)

CREATE TABLE #attributes (id int, processed bit)
CREATE TABLE #data (id bigint, group_id int, organisation_id int, ownership decimal(6,4), is_consolidated bit, metric_id int, attribute_id int, date datetime, date_type char(1) COLLATE DATABASE_DEFAULT, value decimal(22,6))	-- Calculate to a greater accuracy than we store, to inform last digit rounding
CREATE TABLE #calc (id bigint, group_id int, ownership_threshold decimal(6,4), metric_id int, attribute_id int, date datetime, date_type char(1) COLLATE DATABASE_DEFAULT, value decimal(22,6), is_decimal bit, processed bit)

INSERT INTO #attributes
SELECT attribute_id, 0 FROM data_sets WHERE metric_id = 3 AND attribute_id IS NOT null AND is_aggregated = 1 AND is_aggregated_from_organisation_data = 1


-- Fetch operator-level data and ownership
INSERT INTO #data
SELECT	ds.id,
		ds2.group_id,
		ds2.organisation_id,
		ds2.value,
		ds2.is_consolidated,
		ds.metric_id,
		ds.attribute_id,
		ds.date,
		ds.date_type,
		ds.val_i

FROM	ds_organisation_data ds INNER JOIN
		ds_group_ownership ds2 ON (ds.organisation_id = ds2.organisation_id AND ds.date = ds2.date AND ds.date_type = ds2.date_type)

WHERE	ds.metric_id = 3 AND
		ds.attribute_id IN (SELECT id FROM #attributes) AND
		ds2.metric_id = 72 AND
		ds2.attribute_id = 0 AND
		ds.date >= @date_start AND
		ds.date < @date_end AND
		ds.date_type IN ('Q','H','Y')

ORDER BY ds2.group_id, ds2.organisation_id, ds.date, ds.date_type


-- Weight by ownership if @is_proportionate
IF @is_proportionate = 1
BEGIN
	UPDATE #data SET value = value * CAST(ownership AS decimal(22,6))
END


SET @ownership_threshold = 0.0

WHILE @ownership_threshold <= 1.0
BEGIN
	-- Create the aggregates for this @ownership_threshold

	-- Connections (3)
	INSERT INTO #calc
	SELECT	null, d.group_id, @ownership_threshold, 3, d.attribute_id, d.date, d.date_type, SUM(d.value), 0, 0
	FROM	#data d
	WHERE	d.ownership >= @ownership_threshold
	GROUP BY d.group_id, d.attribute_id, d.date, d.date_type

	IF @ownership_threshold = 0.5
	BEGIN
		-- Special additional aggregation for 'majority ownership', stored as @ownership_threshold = 0.51
		INSERT INTO #calc
		SELECT	null, d.group_id, 0.51, 3, d.attribute_id, d.date, d.date_type, SUM(d.value), 0, 0
		FROM	#data d
		WHERE	d.ownership > 0.5 OR d.is_consolidated = 1
		GROUP BY d.group_id, d.attribute_id, d.date, d.date_type
	END

	SET @ownership_threshold = @ownership_threshold + 0.1
END


-- Calculate the derivatives

-- Net additions (36)
INSERT INTO #calc
SELECT	null, c2.group_id, c2.ownership_threshold, 36, c2.attribute_id, c2.date, c2.date_type, c2.value-c1.value, 0, 0
FROM	#calc c1 INNER JOIN #calc c2 ON (c1.group_id = c2.group_id AND c1.ownership_threshold = c2.ownership_threshold AND c1.metric_id = c2.metric_id AND c1.attribute_id = c2.attribute_id AND c2.date = DATEADD(month, CASE c1.date_type WHEN 'Q' THEN 3 WHEN 'H' THEN 6 WHEN 'Y' THEN 12 END, c1.date) AND c1.date_type = c2.date_type)
WHERE	c1.metric_id = 3 AND c2.metric_id = 3 AND c1.value <> 0 AND c1.value IS NOT null AND c2.value <> 0 AND c2.value IS NOT null

-- % connections (53)
INSERT INTO #calc
SELECT	null, c2.group_id, c2.ownership_threshold, 53, c2.attribute_id, c2.date, c2.date_type, c2.value/c1.value, 1, 0
FROM	#calc c1 INNER JOIN #calc c2 ON (c1.group_id = c2.group_id AND c1.ownership_threshold = c2.ownership_threshold AND c1.metric_id = c2.metric_id AND c1.date = c2.date AND c1.date_type = c2.date_type)
WHERE	c1.metric_id = 3 AND c2.metric_id = 3 AND c1.attribute_id = 0 AND c2.attribute_id <> 0 AND c1.value <> 0 AND c1.value IS NOT null AND c2.value <> 0 AND c2.value IS NOT null

-- Growth, sequential (56)
INSERT INTO #calc
SELECT	null, c2.group_id, c2.ownership_threshold, 56, c2.attribute_id, c2.date, c2.date_type, (c2.value-c1.value)/c1.value, 1, 0
FROM	#calc c1 INNER JOIN #calc c2 ON (c1.group_id = c2.group_id AND c1.ownership_threshold = c2.ownership_threshold AND c1.metric_id = c2.metric_id AND c1.attribute_id = c2.attribute_id AND c2.date = DATEADD(month, CASE c1.date_type WHEN 'Q' THEN 3 WHEN 'H' THEN 6 WHEN 'Y' THEN 12 END, c1.date) AND c1.date_type = c2.date_type)
WHERE	c1.metric_id = 3 AND c2.metric_id = 3 AND c1.date_type <> 'Y' AND c1.value <> 0 AND c1.value IS NOT null AND c2.value <> 0 AND c2.value IS NOT null

-- Growth, annual (61)
INSERT INTO #calc
SELECT	null, c2.group_id, c2.ownership_threshold, 61, c2.attribute_id, c2.date, c2.date_type, (c2.value-c1.value)/c1.value, 1, 0
FROM	#calc c1 INNER JOIN #calc c2 ON (c1.group_id = c2.group_id AND c1.ownership_threshold = c2.ownership_threshold AND c1.metric_id = c2.metric_id AND c1.attribute_id = c2.attribute_id AND c2.date = DATEADD(month, 12, c1.date) AND c1.date_type = c2.date_type)
WHERE	c1.metric_id = 3 AND c2.metric_id = 3 AND c1.value <> 0 AND c1.value IS NOT null AND c2.value <> 0 AND c2.value IS NOT null


-- Get any existing ids which we can UPDATE on
UPDATE	c
SET		c.id = ds.id
FROM	#calc c INNER JOIN ds_group_data ds ON (c.group_id = ds.organisation_id AND c.ownership_threshold = ds.ownership_threshold AND c.metric_id = ds.metric_id AND c.attribute_id = ds.attribute_id AND c.date = ds.date AND c.date_type = ds.date_type AND ds.is_proportionate = @is_proportionate)

-- Remove any NULL data
DELETE FROM #calc WHERE value IS null


IF @debug = 0
BEGIN
	-- UPDATE the values that already exist
	UPDATE	ds
	SET		ds.val_d = CASE c.is_decimal WHEN 1 THEN ROUND(c.value, 4) ELSE null END, ds.val_i = CASE c.is_decimal WHEN 1 THEN null ELSE ROUND(c.value, 0) END, ds.source_id = 6, ds.confidence_id = 194, ds.last_update_on = CASE WHEN (c.is_decimal = 1 AND ds.val_d = ROUND(c.value, 4)) OR (c.is_decimal = 0 AND ds.val_i = ROUND(c.value, 0)) THEN ds.last_update_on ELSE GETDATE() END, ds.last_update_by = CASE WHEN (c.is_decimal = 1 AND ds.val_d = ROUND(c.value, 4)) OR (c.is_decimal = 0 AND ds.val_i = ROUND(c.value, 0)) THEN ds.last_update_by ELSE 11770 END
	FROM	ds_group_data ds INNER JOIN #calc c ON ds.id = c.id
	WHERE	ds.is_calculated = 1 AND c.processed = 0

	-- INSERT the remainder
	INSERT INTO ds_group_data (organisation_id, ownership_threshold, metric_id, attribute_id, date, date_type, val_d, val_i, currency_id, source_id, confidence_id, is_calculated, is_proportionate, created_by)
	SELECT	c.group_id, c.ownership_threshold, c.metric_id, c.attribute_id, c.date, c.date_type, CASE c.is_decimal WHEN 1 THEN ROUND(c.value, 4) ELSE null END, CASE c.is_decimal WHEN 1 THEN null ELSE ROUND(c.value, 0) END, 0, 6, 194, 1, @is_proportionate, 11770
	FROM	#calc c
	WHERE	c.id IS null AND c.processed = 0
END

IF @debug = 1
BEGIN
	SELECT * FROM #calc ORDER BY group_id, ownership_threshold, metric_id, attribute_id, date, date_type
END


SELECT 'Finished: aggregate_groups (17s)'

DROP TABLE #attributes
DROP TABLE #data
DROP TABLE #calc]]></Value>
			</Property>
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#attributes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets].[is_aggregated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets].[is_aggregated_from_organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[group_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[is_consolidated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[@date_start]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[@date_end]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[@is_proportionate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#data].[value]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#data].[ownership]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#data].[group_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#data].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#data].[ownership]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#data].[is_consolidated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc].[group_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc].[group_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc].[ownership_threshold]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc].[ownership_threshold]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc].[group_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc].[ownership_threshold]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[ownership_threshold]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[is_proportionate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[@debug]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc].[is_decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[last_update_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[last_update_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[last_update_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[last_update_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc].[processed]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[ownership_threshold]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[is_proportionate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[created_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc].[group_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc].[ownership_threshold]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc].[is_decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc].[processed]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc].[group_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc].[ownership_threshold]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[aggregate_groups].[#calc].[date_type]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[aggregate_groups].[#attributes]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[aggregate_groups].[#attributes].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[aggregate_groups].[#attributes].[processed]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[aggregate_groups].[#data]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[aggregate_groups].[#data].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[aggregate_groups].[#data].[group_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[aggregate_groups].[#data].[organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[aggregate_groups].[#data].[ownership]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="6" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[aggregate_groups].[#data].[is_consolidated]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[aggregate_groups].[#data].[metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[aggregate_groups].[#data].[attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[aggregate_groups].[#data].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[aggregate_groups].[#data].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[aggregate_groups].[#data].[value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="6" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[aggregate_groups].[#calc]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[aggregate_groups].[#calc].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[aggregate_groups].[#calc].[group_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[aggregate_groups].[#calc].[ownership_threshold]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="6" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[aggregate_groups].[#calc].[metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[aggregate_groups].[#calc].[attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[aggregate_groups].[#calc].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[aggregate_groups].[#calc].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[aggregate_groups].[#calc].[value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="6" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[aggregate_groups].[#calc].[is_decimal]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[aggregate_groups].[#calc].[processed]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[aggregate_groups].[@date_start]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[aggregate_groups].[@date_end]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[aggregate_groups].[@is_proportionate]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[aggregate_groups].[@debug]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="7094" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[aggregate_groups]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@date_start datetime,&#xD;&#xA;&#x9;@date_end datetime,&#xD;&#xA;&#x9;@is_proportionate bit = 0,&#xD;&#xA;&#x9;@debug bit = 1&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[api_counter]">
			<Property Name="BodyScript">
				<Value><![CDATA[

DECLARE @quarter datetime, @begin bigint, @end bigint, @days_in_quarter int, @is_leap_year bit

SET @quarter			= dbo.current_reporting_quarter()
SET @is_leap_year		= dbo.is_leap_year(DATEPART(year, DATEADD(month, 3, @quarter)))
SET @days_in_quarter	= CASE DATEPART(month, DATEADD(month, 3, @quarter)) WHEN 1 THEN (CASE @is_leap_year WHEN 1 THEN 91 ELSE 90 END) WHEN 4 THEN 91 WHEN 7 THEN 92 WHEN 10 THEN 92 END

SET @begin				= (SELECT TOP 1 val_i FROM dc_zone_data WHERE zone_id = @zone_id AND metric_id = 3 AND attribute_id = @technology_id AND date = @quarter)
SET @end				= (SELECT TOP 1 val_i FROM dc_zone_data WHERE zone_id = @zone_id AND metric_id = 3 AND attribute_id = @technology_id AND date = DATEADD(month, 3, @quarter))

IF @begin > 0 OR @end > 0
BEGIN
	SELECT	z.id zone_id,
			z.name zone,
			t.id technology_id,
			t.name technology,
			@quarter current_quarter,
			@begin [begin],
			@end [end],
			@days_in_quarter days_in_quarter
			
	FROM	zones z, 
			attributes t

	WHERE	z.id = @zone_id AND
			t.id = @technology_id
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bigint]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bigint]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[current_reporting_quarter]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[is_leap_year]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_counter].[@zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_counter].[@technology_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[api_counter].[@technology_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[api_counter].[@zone_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[3826]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="1170" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[api_counter]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@technology_id int = 0,&#xD;&#xA;&#x9;@zone_id int = 3826&#xD;&#xA;)&#xD;&#xA;&#x9;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[api_currencies_in_use]">
			<Property Name="BodyScript">
				<Value><![CDATA[

DECLARE @date_start datetime, @date_end datetime, @date_type char(1), @xml xml 

SET @date_start	= '2000-01-01'
SET @date_end	= '2021-01-01'
SET @date_type	= 'Q'


IF @q = 2
BEGIN
	-- Financial model
	CREATE TABLE #currencies (organisation_id int, currency_id int)

	;WITH r AS
	(
		SELECT	DISTINCT
				ds.organisation_id,
				ds.currency_id,
				DENSE_RANK() OVER (PARTITION BY ds.organisation_id ORDER BY ds.metric_order, ds.attribute_order, ds.date DESC) rank

		FROM	dc_organisation_data ds INNER JOIN
				organisation_zone_link oz ON ds.organisation_id = oz.organisation_id INNER JOIN
				currencies c ON ds.currency_id = c.id

		WHERE	oz.zone_id = @zone_id AND
				(
					-- Financial metrics only
					(ds.metric_id IN (10,18,29,34,65,66) AND ds.attribute_id IN (0,69,436,826,827,828,834,1518))
				) AND
				ds.date >= @date_start AND
				ds.date < @date_end AND
				ds.date_type = @date_type
	)

	INSERT INTO #currencies
	SELECT organisation_id, currency_id FROM r WHERE rank = 1

	
	IF @show = 1
	BEGIN
		-- Most recent currency id by operator
		SELECT * FROM #currencies
	END


	IF @show = 2
	BEGIN
		-- Exchange rates for above currencies
		SELECT	cr.from_currency_id currency_id,
				cr.date,
				cr.date_type,
				CASE WHEN cr.value = 0 THEN 0 ELSE 1/cr.value END value

		FROM	currency_rates cr

		WHERE	cr.date >= @date_start AND
				cr.date < @date_end AND
				cr.to_currency_id = @currency_id AND
				cr.from_currency_id IN (SELECT DISTINCT currency_id FROM #currencies) -- Because we only store all:major and not vice-versa

		ORDER BY cr.from_currency_id, cr.date_type, cr.date
	END


	DROP TABLE #currencies
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[char]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[xml]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_currencies_in_use].[@q]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[metric_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[attribute_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_currencies_in_use].[@zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_currencies_in_use].[#currencies]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_currencies_in_use].[@show]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_currencies_in_use].[@currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_currencies_in_use].[#currencies].[currency_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[api_currencies_in_use].[#currencies]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_currencies_in_use].[#currencies].[organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_currencies_in_use].[#currencies].[currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[api_currencies_in_use].[CTE1].[r]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[api_currencies_in_use].[CTE1].[r].[organisation_id]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[dc_organisation_data].[organisation_id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[api_currencies_in_use].[CTE1].[r].[currency_id]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[dc_organisation_data].[currency_id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[api_currencies_in_use].[CTE1].[r].[rank]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[api_currencies_in_use].[@q]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[api_currencies_in_use].[@show]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[tinyint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[api_currencies_in_use].[@zone_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[api_currencies_in_use].[@currency_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="1824" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[api_currencies_in_use]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@q int,&#xD;&#xA;&#x9;@show tinyint,&#xD;&#xA;&#x9;@zone_id int,&#xD;&#xA;&#x9;@currency_id int&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[api_curve_fit]">
			<Property Name="BodyScript">
				<Value><![CDATA[

DECLARE @xy_data xy_data, @xy_data_2 xy_data, @xy_outliers xy_data, @xy_forecasts xy_data
DECLARE @periods ordered_iterator, @period char(8), @y_bar float, @r2_bar float, @years int, @weight_1 float, @weight_2 float, @weight_3 float, @weight_4 float, @year_1 int, @year_2 int, @year_3 int, @year_4 int, @date datetime, @value float, @fk char(32)

CREATE TABLE #data (organisation_id int, metric_id int, attribute_id int, date_type char(1), date datetime, date_excel int, value float)
CREATE TABLE #net_additions (date datetime, input float, input_2 float, value float, value_weighted float, processed bit)
CREATE TABLE #fitted_data (fk char(32), period char(8), include_seasonality bit, exclude_outliers bit, type char(8), x float, y float, x_datetime datetime)
CREATE TABLE #fit (fk char(32), period char(8), include_seasonality bit, exclude_outliers bit, type char(8), a float, b float, c float, d float, r2 float, y_bar float, max_variance float, yoy_multiplier float, has_criteria bit)


-- Fetch existing connections data up to and including @last_historic_quarter
INSERT INTO #data
SELECT	organisation_id, metric_id, attribute_id, date_type, date, dbo.datetime_to_excel_serial(date), CAST(val_i AS float)
FROM	ds_organisation_data
WHERE	organisation_id = @organisation_id AND metric_id = 3 AND attribute_id = 0 AND date_type = 'Q' AND date >= DATEADD(quarter, -16, @last_historic_quarter) AND date <= @last_historic_quarter		-- Require 17 quarters of data for a full 16 quarters of net additions


-- Require at least 9 rows of data in order to get a half-decent statistical fit
IF (SELECT COUNT(*) FROM #data) >= 9
BEGIN
	-- Prepare an xy forecast series for trending
	INSERT INTO @xy_data
	SELECT d.* FROM (SELECT TOP 16 date_excel, value FROM #data ORDER BY date DESC) d ORDER BY d.date_excel

	-- A second xy set contains an additional row for x as the outlier detection works on net additions; row will be discarded, see dbo.remove_outliers
	INSERT INTO @xy_data_2
	SELECT d.* FROM (SELECT TOP 17 date_excel, value FROM #data ORDER BY date DESC) d ORDER BY d.date_excel

	INSERT INTO @xy_forecasts
	SELECT dbo.datetime_to_excel_serial(DATEADD(quarter, 1, @last_historic_quarter)), null UNION ALL
	SELECT dbo.datetime_to_excel_serial(DATEADD(quarter, 2, @last_historic_quarter)), null UNION ALL
	SELECT dbo.datetime_to_excel_serial(DATEADD(quarter, 3, @last_historic_quarter)), null UNION ALL
	SELECT dbo.datetime_to_excel_serial(DATEADD(quarter, 4, @last_historic_quarter)), null

	-- Iterate 2-, 3- and 4-year periods (if available) and return the base fitting data
	SET @years = (SELECT CEILING(CAST(COUNT(x)/4 AS float)) FROM @xy_data)

	INSERT INTO @periods
	SELECT 1, '4-year', 0 UNION ALL
	SELECT 2, '3-year', 0 UNION ALL
	SELECT 3, '2-year', 0

	WHILE EXISTS (SELECT * FROM @periods WHERE processed = 0)
	BEGIN
		SET @period	= (SELECT TOP 1 term FROM @periods WHERE processed = 0 ORDER BY [order])

		-- Create fits for baseline data
		SET @y_bar	= (SELECT AVG(y) FROM @xy_data)

		INSERT INTO #fit
		SELECT	null, @period, 0, 0, *, @y_bar, null, null, 0
		FROM	curve_best_fit_coefficients_only(@xy_data, 0)

		INSERT INTO #fitted_data
		SELECT	null, @period, 0, 0, *, dbo.excel_serial_to_datetime(x)
		FROM	curve_best_fit(@xy_data, @xy_forecasts, 0)

		-- Remove outliers and re-run the fit, if appropriate
		INSERT INTO @xy_outliers
		SELECT * FROM dbo.remove_outliers(@xy_data_2, @max_outlier_multiplier)

		IF (SELECT COUNT(*) FROM @xy_outliers) > 0
		BEGIN
			SET @y_bar	= (SELECT AVG(y) FROM @xy_outliers)

			INSERT INTO #fit
			SELECT	null, @period, 0, 1, *, @y_bar, null, null, 0
			FROM	curve_best_fit_coefficients_only(@xy_outliers, 0)

			INSERT INTO #fitted_data
			SELECT	null, @period, 0, 1, *, dbo.excel_serial_to_datetime(x)
			FROM	curve_best_fit(@xy_outliers, @xy_forecasts, 0)
		END

		DELETE FROM @xy_data WHERE x IN (SELECT TOP 4 x FROM @xy_data ORDER BY x)
		DELETE FROM @xy_data_2 WHERE x IN (SELECT TOP 4 x FROM @xy_data_2 ORDER BY x)
		DELETE FROM @xy_outliers

		UPDATE @periods SET processed = 1 WHERE term = @period
	END


	-- Then map the fitted data against the original data set to calculate AVG(variance) over all Q1/2/3/4s in the set to assess seasonality and feed this back in as a separate variation of the fitted model
	CREATE TABLE #seasonality_variance (period char(8), exclude_outliers bit, quarter int, value float)

	INSERT INTO #seasonality_variance
	SELECT		fd.period, fd.exclude_outliers, DATEPART(quarter, d.date), AVG(d.value - fd.y)
	FROM		#fitted_data fd INNER JOIN #data d ON fd.x_datetime = d.date
	WHERE		fd.x_datetime <= @last_historic_quarter
	GROUP BY	fd.period, fd.exclude_outliers, DATEPART(quarter, d.date)

	INSERT INTO #fitted_data
	SELECT		null, fd.period, 1, fd.exclude_outliers, fd.type, fd.x, fd.y + sv.value, dbo.excel_serial_to_datetime(x)
	FROM		#fitted_data fd INNER JOIN #seasonality_variance sv ON (fd.period = sv.period AND fd.exclude_outliers = sv.exclude_outliers AND sv.quarter = DATEPART(quarter, fd.x_datetime))

	DROP TABLE #seasonality_variance


	-- Add a row key to reduce required joins
	UPDATE #fit SET fk = RTRIM(period) + '|' + RTRIM(type) + '|' + CAST(include_seasonality AS char(1)) + '|' + CAST(exclude_outliers AS char(1))
	UPDATE #fitted_data SET fk = RTRIM(period) + '|' + RTRIM(type) + '|' + CAST(include_seasonality AS char(1)) + '|' + CAST(exclude_outliers AS char(1))


	-- Insert combinations of the model that don't yet exist in the statistics table but have been computed as adjusted-fit models
	INSERT INTO #fit (period, include_seasonality, exclude_outliers, type, has_criteria)
	SELECT		DISTINCT fd.period, fd.include_seasonality, fd.exclude_outliers, fd.type, 0
	FROM		#fitted_data fd LEFT JOIN #fit f ON f.fk = fd.fk
	WHERE		f.fk IS null

	UPDATE f SET f.y_bar = f2.y_bar FROM #fit f INNER JOIN #fit f2 ON f.period = f2.period WHERE f.y_bar IS null
	UPDATE #fit SET fk = RTRIM(period) + '|' + RTRIM(type) + '|' + CAST(include_seasonality AS char(1)) + '|' + CAST(exclude_outliers AS char(1))
	UPDATE #fitted_data SET fk = RTRIM(period) + '|' + RTRIM(type) + '|' + CAST(include_seasonality AS char(1)) + '|' + CAST(exclude_outliers AS char(1))


	-- Finally insert a "fallback" model that uses a basic weighted net additions calculation (ensures that one model is always returned)
	SET @period 	= (SELECT CASE @years WHEN 2 THEN '2-year' WHEN 3 THEN '3-year' WHEN 4 THEN '4-year' ELSE null END)

	IF (@period IS NOT null)
	BEGIN
		SET @year_4		= (SELECT CASE @years WHEN 4 THEN (SELECT MAX(DATEPART(year, date)) FROM #data) ELSE 0 END)
		SET @year_3		= (SELECT CASE @years WHEN 4 THEN @year_4 - 1 WHEN 3 THEN (SELECT MAX(DATEPART(year, date)) FROM #data) ELSE 0 END)
		SET @year_2		= (SELECT CASE @years WHEN 4 THEN @year_4 - 2 WHEN 3 THEN @year_3 - 1 WHEN 2 THEN (SELECT MAX(DATEPART(year, date)) FROM #data) ELSE 0 END)
		SET @year_1		= (SELECT CASE @years WHEN 4 THEN @year_4 - 3 WHEN 3 THEN @year_3 - 2 WHEN 2 THEN @year_2 -1 ELSE 0 END)

		SET @weight_1	= (SELECT CASE @period WHEN '2-year' THEN 0.4 WHEN '3-year' THEN 0.2 ELSE 0.1 END)
		SET @weight_2	= (SELECT CASE @period WHEN '2-year' THEN 0.6 WHEN '3-year' THEN 0.3 ELSE 0.2 END)
		SET @weight_3	= (SELECT CASE @period WHEN '3-year' THEN 0.5 WHEN '4-year' THEN 0.3 ELSE 0 END)
		SET @weight_4	= (SELECT CASE @period WHEN '4-year' THEN 0.4 ELSE 0 END)

		INSERT INTO #net_additions
		SELECT	d2.date, d.value, d2.value, d2.value - d.value, null, 0
		FROM	#data d INNER JOIN #data d2 ON d2.date = DATEADD(quarter, 1, d.date)

		UPDATE #net_additions SET value_weighted = value * @weight_1 WHERE DATEPART(year, date) = @year_1
		UPDATE #net_additions SET value_weighted = value * @weight_2 WHERE DATEPART(year, date) = @year_2
		UPDATE #net_additions SET value_weighted = value * @weight_3 WHERE DATEPART(year, date) = @year_3
		UPDATE #net_additions SET value_weighted = value * @weight_4 WHERE DATEPART(year, date) = @year_4

		-- Finally, add in the forecast quarters
		INSERT INTO #net_additions
		SELECT	dbo.excel_serial_to_datetime(x), null, null, 0, 0, 0
		FROM	@xy_forecasts

		-- Set starting value and iterate each quarter to calculate the model
		SET @value = (SELECT input FROM #net_additions WHERE date = (SELECT MIN(date) FROM #net_additions))
		SET @fk = RTRIM(@period) + '|fallback|0|0'

		WHILE EXISTS (SELECT * FROM #net_additions WHERE processed = 0)
		BEGIN
			SET @date	= (SELECT TOP 1 date FROM #net_additions WHERE processed = 0 ORDER BY date)
			SET @value	= @value + (SELECT SUM(value_weighted) FROM #net_additions WHERE DATEPART(quarter, date) = DATEPART(quarter, @date))

			INSERT INTO #fitted_data
			SELECT	@fk, @period, 0, 0, 'fallback', dbo.datetime_to_excel_serial(@date), @value, @date

			UPDATE #net_additions SET processed = 1 WHERE date = @date
		END

		INSERT INTO #fit (fk, period, include_seasonality, exclude_outliers, type, has_criteria) VALUES (@fk, @period, 0, 0, 'fallback', 1)
	END


	-- Calculate R-squared for all models (this should be more accurate even for those models where it has been computed using only the coefficients)
	UPDATE		f
	SET			f.r2 = f2.r2
	FROM		#fit f INNER JOIN
				(
					SELECT		fd.fk, 1 - SUM(SQUARE(d.value - fd.y)) / SUM(SQUARE(d.value - f.y_bar)) r2
					FROM		#fit f INNER JOIN #fitted_data fd ON f.fk = fd.fk INNER JOIN #data d ON fd.x_datetime = d.date
					WHERE		fd.x_datetime <= @last_historic_quarter
					GROUP BY	fd.fk
				) f2 ON f.fk = f2.fk

	-- Calculate MAX(ABS(variance)) as the % difference between all fitted and original values, updating the statistics tables
	UPDATE		f
	SET			f.max_variance = f2.max_variance
	FROM		#fit f INNER JOIN
				(
					SELECT		fd.fk, MAX(ABS(fd.y - d.value) / d.value) max_variance
					FROM		#fit f INNER JOIN #fitted_data fd ON f.fk = fd.fk INNER JOIN #data d ON fd.x_datetime = d.date
					WHERE		fd.x_datetime <= @last_historic_quarter
					GROUP BY	fd.fk
				) f2 ON f.fk = f2.fk

	-- Calculate the year-on-year multiplier for the predicted period versus that of the n periods preceding in the model (either 1, 2 or 3 sets of year-on-year net additions for only the quarter that matches that of @last_historic_quarter)
	UPDATE		f
	SET			f.yoy_multiplier = f2.value / f3.value
	FROM		#fit f INNER JOIN
				(
					SELECT		fd.fk, ABS((fd.y - fd2.y) / fd2.y * 100) value
					FROM		#fit f INNER JOIN #fitted_data fd ON f.fk = fd.fk INNER JOIN #fitted_data fd2 ON (fd.fk = fd2.fk AND fd.x_datetime = DATEADD(year, 1, fd2.x_datetime))
					WHERE		fd2.x_datetime = @last_historic_quarter		-- This provides the forecast year-on-year % change
				) f2 ON f.fk = f2.fk INNER JOIN
				(
					SELECT		fd.fk, AVG(ABS((fd.y - fd2.y) / fd2.y * 100)) value
					FROM		#fit f INNER JOIN #fitted_data fd ON f.fk = fd.fk INNER JOIN #fitted_data fd2 ON (fd.fk = fd2.fk AND fd.x_datetime = DATEADD(year, 1, fd2.x_datetime))
					WHERE		DATEPART(quarter, fd.x_datetime) = DATEPART(quarter, @last_historic_quarter) AND fd2.x_datetime <> @last_historic_quarter
					GROUP BY	fd.fk										-- And this provides the average of all the periods, _except_ the forecast one
				) f3 ON f.fk = f3.fk


	-- Finally score whether the model passes all of the checks for statistical fit
	-- Note: models with outliers removed are unlikely to satisfy R-squared, so exlcude them here, but return all the equivalent outlier-removed models for their counterparts that pass the criteria
	SET @r2_bar = (SELECT AVG(r2) FROM #fit)
	UPDATE #fit SET has_criteria = 1 WHERE (r2 > @r2_bar OR r2 > @min_r2) AND max_variance < @max_variance AND yoy_multiplier < @max_yoy_multiplier AND exclude_outliers = 0


	-- Fetch results
	IF @show = 1
	BEGIN
		SELECT	LEFT(fk, LEN(RTRIM(fk))-2) fk, period, type, include_seasonality, r2, max_variance, yoy_multiplier, has_criteria
		FROM	#fit
		WHERE	has_criteria = 1
		ORDER BY has_criteria DESC, r2 DESC
	END

	IF @show = 2
	BEGIN
		SELECT	RTRIM(fk) fk, period, type, x_datetime, x, y
		FROM	#fitted_data
		WHERE	LEFT(fk, LEN(RTRIM(fk))-2) IN (SELECT LEFT(fk, LEN(RTRIM(fk))-2) FROM #fit WHERE has_criteria = 1)		-- Also include outlier-removed models for the equivalent criteria passing fits
	END
END
ELSE
BEGIN
	IF @show = 1
	BEGIN
		SELECT '' fk, 'Period too short' period, 'no fit' type
	END

	IF @show = 2
	BEGIN
		SELECT	RTRIM(fk) fk, period, type, x_datetime, x, y		-- Will be empty, but return an empty set for the API view
		FROM	#fitted_data
	END
END


DROP TABLE #fitted_data
DROP TABLE #fit
DROP TABLE #net_additions
DROP TABLE #data]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[xy_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[xy_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[xy_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[xy_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ordered_iterator]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[char]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[float]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[float]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[float]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[float]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[float]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[float]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[float]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[char]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[datetime_to_excel_serial]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[float]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[@organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[@last_historic_quarter]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#data].[date_excel]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#data].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#data].[date_excel]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[datetime_to_excel_serial]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[float]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[@xy_data].[x]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[@periods].[processed]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[@periods].[term]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[@periods].[order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[@xy_data].[y]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_best_fit_coefficients_only]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fitted_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_best_fit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_best_fit].[x]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[excel_serial_to_datetime]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[@max_outlier_multiplier]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[remove_outliers]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[@xy_outliers].[y]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[@xy_data].[x]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[@xy_data_2].[x]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[@xy_data_2].[x]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[@periods].[processed]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[@periods].[term]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#seasonality_variance]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fitted_data].[x_datetime]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fitted_data].[period]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fitted_data].[exclude_outliers]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#data].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fitted_data].[y]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fitted_data].[period]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#seasonality_variance].[period]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fitted_data].[exclude_outliers]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#seasonality_variance].[exclude_outliers]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#seasonality_variance].[quarter]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fitted_data].[x_datetime]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fitted_data].[type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fitted_data].[x]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fitted_data].[y]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#seasonality_variance].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fitted_data].[x]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[excel_serial_to_datetime]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fit].[fk]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fit].[period]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fit].[type]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[char]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fit].[include_seasonality]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[char]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fit].[exclude_outliers]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fitted_data].[fk]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fitted_data].[period]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fitted_data].[type]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[char]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fitted_data].[include_seasonality]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[char]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fitted_data].[exclude_outliers]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fit].[has_criteria]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fit].[fk]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fitted_data].[fk]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fitted_data].[period]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fitted_data].[include_seasonality]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fitted_data].[exclude_outliers]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fitted_data].[type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fit].[period]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fit].[period]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fit].[y_bar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fit].[y_bar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[char]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[char]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[char]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[char]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#net_additions]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#data].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#data].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#net_additions].[value_weighted]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#net_additions].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#net_additions].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[@xy_forecasts].[x]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[excel_serial_to_datetime]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#net_additions].[input]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#net_additions].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#net_additions].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#net_additions].[processed]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#net_additions].[value_weighted]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#net_additions].[processed]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fit].[fk]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fitted_data].[fk]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fitted_data].[x_datetime]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fitted_data].[fk]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#data].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fitted_data].[y]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fit].[y_bar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fit].[fk]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fitted_data].[fk]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fit].[r2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fit].[max_variance]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fitted_data].[fk]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fitted_data].[x_datetime]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fitted_data].[x_datetime]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fitted_data].[y]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fitted_data].[y]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fitted_data].[fk]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fitted_data].[fk]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fit].[yoy_multiplier]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fit].[r2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fit].[r2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[@min_r2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fit].[max_variance]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[@max_variance]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fit].[yoy_multiplier]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[@max_yoy_multiplier]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[@show]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fitted_data].[x_datetime]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fitted_data].[x]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fitted_data].[y]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fit].[fk]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_curve_fit].[#fit].[has_criteria]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[api_curve_fit].[#data]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[#data].[organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[#data].[metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[#data].[attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[#data].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[#data].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[#data].[date_excel]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[#data].[value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[api_curve_fit].[#net_additions]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[#net_additions].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[#net_additions].[input]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[#net_additions].[input_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[#net_additions].[value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[#net_additions].[value_weighted]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[#net_additions].[processed]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[api_curve_fit].[#fitted_data]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[#fitted_data].[fk]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="32" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[#fitted_data].[period]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="8" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[#fitted_data].[include_seasonality]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[#fitted_data].[exclude_outliers]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[#fitted_data].[type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="8" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[#fitted_data].[x]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[#fitted_data].[y]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[#fitted_data].[x_datetime]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[api_curve_fit].[#fit]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[#fit].[fk]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="32" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[#fit].[period]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="8" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[#fit].[include_seasonality]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[#fit].[exclude_outliers]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[#fit].[type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="8" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[#fit].[a]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[#fit].[b]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[#fit].[c]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[#fit].[d]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[#fit].[r2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[#fit].[y_bar]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[#fit].[max_variance]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[#fit].[yoy_multiplier]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[#fit].[has_criteria]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[api_curve_fit].[#seasonality_variance]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[#seasonality_variance].[period]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="8" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[#seasonality_variance].[exclude_outliers]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[#seasonality_variance].[quarter]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[#seasonality_variance].[value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[api_curve_fit].[@xy_data]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[@xy_data].[x]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[@xy_data].[y]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[api_curve_fit].[@xy_data_2]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[@xy_data_2].[x]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[@xy_data_2].[y]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[api_curve_fit].[@xy_outliers]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[@xy_outliers].[x]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[@xy_outliers].[y]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[api_curve_fit].[@xy_forecasts]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[@xy_forecasts].[x]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[@xy_forecasts].[y]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[api_curve_fit].[@periods]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[@periods].[order]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[@periods].[term]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="8" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[api_curve_fit].[@periods].[processed]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[api_curve_fit].[@show]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[tinyint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[api_curve_fit].[@organisation_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[api_curve_fit].[@last_historic_quarter]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[api_curve_fit].[@min_r2]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0.9]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[api_curve_fit].[@max_variance]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0.03]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[api_curve_fit].[@max_yoy_multiplier]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[1.5]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[api_curve_fit].[@max_outlier_multiplier]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[2.5]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="13165" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[api_curve_fit]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@show tinyint = 1,&#xD;&#xA;&#x9;@organisation_id int,&#xD;&#xA;&#x9;@last_historic_quarter datetime,&#xD;&#xA;&#x9;@min_r2 float&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;= 0.9,&#x9;&#x9;-- Minimum value of R-square for fit to pass&#xD;&#xA;&#x9;@max_variance float&#x9;&#x9;&#x9;&#x9;&#x9;= 0.03,&#x9;&#x9;-- Maximum variance of any value for fit to pass&#xD;&#xA;&#x9;@max_yoy_multiplier float&#x9;&#x9;&#x9;= 1.5,&#x9;&#x9;-- Maximum year-on-year additions for fit to pass&#xD;&#xA;&#x9;@max_outlier_multiplier float&#x9;&#x9;= 2.5&#x9;&#x9;-- Maximum net additions multiplier for outlier detection&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[api_data]">
			<Property Name="BodyScript">
				<Value><![CDATA[

DECLARE @date_start datetime, @date_end datetime, @date_spot datetime, @date_type char(1), @xml xml 

SET @date_start	= '2000-01-01'
SET @date_end	= '2021-01-01'
SET @date_spot	= dbo.current_reporting_quarter()
SET @date_type	= 'Q'


IF @q = 1
BEGIN
	-- M2M
	IF @show = 2
	BEGIN
		SELECT	ds.*,
				CASE WHEN ds.val_i IS null THEN ds.val_d ELSE CAST(ds.val_i AS DECIMAL(22,4)) END value

		FROM	dc_zone_data ds

		WHERE	ds.zone_id = @zone_id AND
				ds.metric_id = 3 AND
				ds.attribute_id = 0 AND
				ds.date >= @date_start AND
				ds.date < @date_end AND
				ds.date_type = @date_type
				
		ORDER BY ds.zone_id, ds.metric_id, ds.attribute_id, ds.date_type, ds.date
	END


	IF @show = 3
	BEGIN
		SELECT	ds.*,
				CASE WHEN ds.val_i IS null THEN ds.val_d ELSE CAST(ds.val_i AS DECIMAL(22,4)) END value,
				c.iso_code currency_iso_code

		FROM	dc_organisation_data ds INNER JOIN
				organisation_zone_link oz ON ds.organisation_id = oz.organisation_id INNER JOIN
				currencies c ON ds.currency_id = c.id

		WHERE	oz.zone_id = @zone_id AND
				ds.metric_id = 3 AND
				ds.attribute_id IN (0,755,796,799,99,822,1251) AND
				ds.date >= @date_start AND
				ds.date < @date_end AND
				ds.date_type = @date_type
				
		ORDER BY ds.organisation_id, ds.metric_id, ds.attribute_id, ds.date_type, ds.date
	END
END


IF @q = 2
BEGIN
	-- Financials
	IF @show = 2
	BEGIN
		SELECT	ds.*,
				CASE WHEN ds.val_i IS null THEN ds.val_d ELSE CAST(ds.val_i AS DECIMAL(22,4)) END value

		FROM	dc_zone_data ds

		WHERE	ds.zone_id = @zone_id AND
				ds.metric_id IN (3,43,286) AND
				ds.attribute_id = 0 AND
				ds.date >= @date_start AND
				ds.date < @date_end AND
				ds.date_type = CASE ds.metric_id WHEN 286 THEN 'Y' ELSE @date_type END
				
		ORDER BY ds.zone_id, ds.metric_id, ds.attribute_id, ds.date_type, ds.date
	END


	IF @show = 3
	BEGIN
		IF @currency_id IS null
		BEGIN
			-- Local currencies (as reported)
			SELECT	ds.*,
					CASE WHEN ds.val_i IS null THEN ds.val_d ELSE CAST(ds.val_i AS DECIMAL(22,4)) END value,
					c.iso_code currency_iso_code

			FROM	ds_organisation_data ds INNER JOIN
					organisation_zone_link oz ON ds.organisation_id = oz.organisation_id INNER JOIN
					currencies c ON ds.currency_id = c.id

			WHERE	oz.zone_id = @zone_id AND
					(
						-- Financial metrics only
						(ds.metric_id IN (10,18,29,34,65,66) AND ds.attribute_id IN (0,69,436,826,827,828,834,1518) AND ds.source_id NOT IN (3,22))
					) AND
					ds.date >= @date_start AND
					ds.date < @date_end AND
					ds.date_type = @date_type
				
			ORDER BY ds.organisation_id, ds.metric_id, ds.attribute_id, ds.date_type, ds.date
		END
		ELSE
		BEGIN
			-- Currency conversion
			SELECT	ds.*,
					CASE WHEN ds.val_i IS null THEN ds.val_d * cr.value ELSE CAST(ds.val_i * cr.value AS DECIMAL(22,4)) END value,
					c.iso_code currency_iso_code

			FROM	ds_organisation_data ds INNER JOIN
					organisation_zone_link oz ON ds.organisation_id = oz.organisation_id INNER JOIN
					currency_rates cr ON ds.currency_id = cr.from_currency_id INNER JOIN
					currencies c ON cr.to_currency_id = c.id

			WHERE	oz.zone_id = @zone_id AND
					(
						(ds.metric_id IN (3,53,162) AND ds.attribute_id IN (0,755,799,1292)) OR
						(ds.metric_id IN (10,18,29,34,65,66) AND ds.attribute_id IN (0,69,436,826,827,828,834,1518) AND ds.source_id NOT IN (3,22)) OR
						(ds.metric_id IN (58,24) AND ds.attribute_id = 0)
					) AND
					ds.date >= @date_start AND
					ds.date < @date_end AND
					ds.date_type = @date_type AND
					cr.date = @date_spot AND -- Spot
					cr.date_type = 'Q' AND
					cr.to_currency_id = @currency_id
				
			ORDER BY ds.organisation_id, ds.metric_id, ds.attribute_id, ds.date_type, ds.date
		END
	END
END


IF @q = 3
BEGIN
	-- MMU
	IF @show = 2
	BEGIN
		SELECT	ds.*,
				CASE WHEN ds.val_i IS null THEN ds.val_d ELSE CAST(ds.val_i AS DECIMAL(22,4)) END value

		FROM	dc_zone_data ds

		WHERE	ds.zone_id = @zone_id AND
				ds.metric_id IN (1,3) AND
				ds.attribute_id = 0 AND
				ds.date >= @date_start AND
				ds.date < @date_end AND
				ds.date_type = @date_type
				
		ORDER BY ds.zone_id, ds.metric_id, ds.attribute_id, ds.date_type, ds.date
	END


	IF @show = 3
	BEGIN
		SELECT	ds.*,
				CASE WHEN ds.val_i IS null THEN ds.val_d ELSE CAST(ds.val_i AS DECIMAL(22,4)) END value,
				c.iso_code currency_iso_code

		FROM	dc_organisation_data ds INNER JOIN
				organisation_zone_link oz ON ds.organisation_id = oz.organisation_id INNER JOIN
				currencies c ON ds.currency_id = c.id

		WHERE	oz.zone_id = @zone_id AND
				ds.metric_id = 3 AND
				ds.attribute_id = 0 AND
				ds.date >= @date_start AND
				ds.date < @date_end AND
				ds.date_type = @date_type
				
		ORDER BY ds.organisation_id, ds.metric_id, ds.attribute_id, ds.date_type, ds.date
	END
END


IF @q = 4
BEGIN
	-- Smartphones (legacy v1 model)
	IF @show = 2
	BEGIN
		IF @zone_ids IS NOT null
		BEGIN
			-- Multiple zone query
			SET @xml = CAST('<a>' + REPLACE(@zone_ids, ',', '</a><a>') + '</a>' AS xml)
			
			SELECT	ds.*,
					CASE WHEN ds.val_i IS null THEN ds.val_d ELSE CAST(ds.val_i AS DECIMAL(22,4)) END value

			FROM	dc_zone_data ds

			WHERE	ds.zone_id IN (SELECT t.value('.', 'int') value FROM @xml.nodes('/a') as x(t)) AND
					(
						(ds.metric_id = 3 AND ds.attribute_id = 0) OR
						(ds.metric_id = 53 AND ds.attribute_id = 1554)
					) AND
					ds.date >= @date_start AND
					ds.date < @date_end AND
					ds.date_type = @date_type
					
			ORDER BY ds.zone_id, ds.metric_id, ds.attribute_id, ds.date_type, ds.date
		END
		ELSE
		BEGIN
			-- Single zone query
			SELECT	ds.*,
					CASE WHEN ds.val_i IS null THEN ds.val_d ELSE CAST(ds.val_i AS DECIMAL(22,4)) END value

			FROM	dc_zone_data ds

			WHERE	ds.zone_id = @zone_id AND
					ds.metric_id = 3 AND
					ds.attribute_id = 0 AND
					ds.date >= @date_start AND
					ds.date < @date_end AND
					ds.date_type = @date_type
					
			ORDER BY ds.zone_id, ds.metric_id, ds.attribute_id, ds.date_type, ds.date
		END
	END


	IF @show = 3
	BEGIN
		SELECT	ds.*,
				CASE ds.metric_id WHEN 184 THEN 53 ELSE ds.metric_id END metric_id,
				CASE ds.metric_id WHEN 184 THEN 1432 ELSE ds.attribute_id END attribute_id,
				CASE WHEN ds.val_i IS null THEN ds.val_d ELSE CAST(ds.val_i AS DECIMAL(22,4)) END value,
				c.iso_code currency_iso_code

		FROM	ds_organisation_data ds INNER JOIN
				organisation_zone_link oz ON ds.organisation_id = oz.organisation_id INNER JOIN
				currencies c ON ds.currency_id = c.id

		WHERE	oz.zone_id = @zone_id AND
				(
					(ds.metric_id IN (3,53) AND ds.attribute_id = 1432 AND ds.source_id IN (11,20) AND ds.confidence_id = 192) OR	-- Reported smartphone data points
					(ds.metric_id = 53 AND ds.attribute_id = 1554) OR																-- % 3G/4G connections
					(ds.metric_id IN (3,184) AND ds.attribute_id = 0)																-- Total connections, smartphone adoption
				) AND
				ds.date >= @date_start AND
				ds.date < @date_end AND
				ds.date_type = @date_type
				
		ORDER BY ds.organisation_id, ds.metric_id, ds.attribute_id, ds.date_type, ds.date
	END
END


IF @q = 5
BEGIN
	-- Mobile Internet subscribers
	IF @show = 2
	BEGIN
		SET @xml = CAST('<a>' + REPLACE(@zone_ids, ',', '</a><a>') + '</a>' AS xml)
		
		SELECT	ds.*,
				CASE WHEN ds.val_i IS null THEN ds.val_d ELSE CAST(ds.val_i AS DECIMAL(22,4)) END value

		FROM	dc_zone_data ds

		WHERE	ds.zone_id IN (SELECT t.value('.', 'int') value FROM @xml.nodes('/a') as x(t)) AND
				(
					(ds.metric_id IN (43,322) AND ds.attribute_id = 0) OR
					(ds.metric_id = 3 AND ds.attribute_id IN (0,204,755,796,798,799,1529))
				) AND
				ds.date >= @date_start AND
				ds.date < @date_end AND
				ds.date_type = @date_type
				
		ORDER BY ds.zone_id, ds.metric_id, ds.attribute_id, ds.date_type, ds.date
	END
END


IF @q = 6
BEGIN
	-- Vision 2025 data sets
	IF @show = 2
	BEGIN
		SET @date_start	= '2012-01-01'
		SET @date_end	= '2021-01-01'

		SELECT	ds.*,
				CASE WHEN ds.val_i IS null THEN ds.val_d ELSE CAST(ds.val_i AS DECIMAL(22,4)) END value

		FROM	dc_zone_data ds

		WHERE	(
					(ds.metric_id IN (322,3,18,43) AND ds.attribute_id = 0) OR					-- NEW total subscribers, connections, revenue and population
					(ds.metric_id = 3 AND ds.attribute_id IN (798,796,755,799,1432,1556)) OR	-- Connections by technology generation and smartphone connections
					(ds.metric_id = 190 AND ds.attribute_id IN (1251,1546,1547,1548))			-- Total M2M connections and by generation
				) AND
				ds.date >= @date_start AND
				ds.date < @date_end AND
				ds.date_type = @date_type AND
				ds.currency_id IN (0,2) AND
				(ds.is_spot IS null OR ds.is_spot = 1)
				
		ORDER BY ds.zone_id, ds.metric_id, ds.attribute_id, ds.date_type, ds.date
	END
END


IF @q = 7
BEGIN
	-- Smartphones (v2 model)
	IF @show = 2
	BEGIN
		IF @zone_ids IS NOT null
		BEGIN
			-- Multiple zone query
			SET @xml = CAST('<a>' + REPLACE(@zone_ids, ',', '</a><a>') + '</a>' AS xml)
		
			SELECT	ds.*,
					CASE WHEN ds.val_i IS null THEN ds.val_d ELSE CAST(ds.val_i AS DECIMAL(22,4)) END value

			FROM	dc_zone_data ds

			WHERE	ds.zone_id IN (SELECT t.value('.', 'int') value FROM @xml.nodes('/a') as x(t)) AND
					(
						(ds.metric_id = 3 AND ds.attribute_id = 0) OR
						(ds.metric_id IN (53) AND ds.attribute_id IN (1432,1554,1555,1556))	-- % smartphones/feature phones/data terminals, 3G/4G
					) AND
					ds.date >= @date_start AND
					ds.date < @date_end AND
					ds.date_type = @date_type
				
			ORDER BY ds.zone_id, ds.metric_id, ds.attribute_id, ds.date_type, ds.date
		END
		ELSE
		BEGIN
			-- Single zone query
			SELECT 'Not implemented'
		END
	END


	IF @show = 3
	BEGIN
		SELECT 'Not implemented'
	END
END


IF @q = 8
BEGIN
	SET @date_start	= '2000-01-01'
	SET @date_end	= '2031-01-01'

	-- Subscribers/connections (v4 model)
	IF @show = 2
	BEGIN
		SELECT	ds.*,
				CASE WHEN ds.val_i IS null THEN ds.val_d ELSE CAST(ds.val_i AS DECIMAL(22,4)) END value

		FROM	ds_zone_data ds

		WHERE	ds.zone_id = @zone_id AND
				(
					(ds.metric_id IN (43,181) AND ds.attribute_id = 0) OR					-- Population, unique susbcriber penetration
					(ds.metric_id = 305 AND ds.attribute_id = 1581)							-- % internet subscribers
				) AND
				ds.date >= @date_start AND
				ds.date < @date_end AND
				ds.date_type = @date_type
				
		ORDER BY ds.zone_id, ds.metric_id, ds.attribute_id, ds.date_type, ds.date
	END
END


IF @q = 9
BEGIN
	SET @date_start	= '2000-01-01'
	SET @date_end	= '2021-01-01'
	
	-- Subscribers/connections raw data (v4 model); used only to build the historic data set
	IF @show = 3
	BEGIN
		SELECT	ds.*,
				CASE WHEN ds.val_i IS null THEN ds.val_d ELSE CAST(ds.val_i AS DECIMAL(22,4)) END value

		FROM	ds_organisation_data ds INNER JOIN
				organisation_zone_link oz ON ds.organisation_id = oz.organisation_id

		WHERE	oz.zone_id = @zone_id AND
				ds.metric_id IN (3,53,190,162) AND
				ds.attribute_id IN (0,283,1251,99,822,603,616,619,621,755,796,799,825,870,929,936,1124,1384,1385,1432,1472,1529,1554,1555,1556) AND
				ds.date >= @date_start AND
				ds.date < @date_end AND
				ds.date_type = @date_type
				
		ORDER BY ds.organisation_id, ds.metric_id, ds.attribute_id, ds.date_type, ds.date
	END
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[char]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[xml]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[current_reporting_quarter]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_data].[@q]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_data].[@show]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[val_d]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_data].[@zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[iso_code]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_data].[@currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[iso_code]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[value]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[iso_code]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[api_data].[@zone_ids]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[xml]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[xml]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[is_spot]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[xml]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[val_d]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[api_data].[@q]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[api_data].[@show]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[tinyint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[api_data].[@zone_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[api_data].[@zone_ids]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[api_data].[@organisation_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[api_data].[@organisation_ids]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[api_data].[@currency_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="11719" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[api_data]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@q int,&#xD;&#xA;&#x9;@show tinyint,&#xD;&#xA;&#x9;@zone_id int,&#xD;&#xA;&#x9;@zone_ids varchar(max),&#xD;&#xA;&#x9;@organisation_id int,&#xD;&#xA;&#x9;@organisation_ids varchar(max),&#xD;&#xA;&#x9;@currency_id int&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[api_keys]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[api_keys].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[api_keys].[key]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[api_keys].[organisation_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[api_keys].[domain]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[api_keys].[status]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="165" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[api_keys].[allow_apis]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="166" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[api_keys].[allow_queries]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="167" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[api_keys].[allow_sso]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="168" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[api_keys].[note]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[api_keys].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="169" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[api_keys].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="170" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="171" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[api_keys].[IX_api_keys]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[api_keys].[key]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[api_keys].[organisation_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[api_keys]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[attribute_dimval_legacy_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[attribute_dimval_legacy_link].[dimval_id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Property Name="IdentitySeed" Value="1915749" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[attribute_dimval_legacy_link].[dimension_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[attribute_dimval_legacy_link].[metric_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[attribute_dimval_legacy_link].[attribute_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="172" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[attribute_family_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[attribute_family_link].[family_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[attribute_family_link].[attribute_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[attributes]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[attributes].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[attributes].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[attributes].[term]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[attributes].[type_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[attributes].[order]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[attributes].[published]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="173" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[attributes].[deleted]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="174" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[attributes].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="175" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[attributes].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="176" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[attributes].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="177" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[attributes].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="178" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="179" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[attributes].[PT_attributes_comb]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[attributes].[type_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[attributes].[order]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[attributes].[published]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[attributes].[deleted]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[auction_awards]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auction_awards].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auction_awards].[auction_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auction_awards].[organisation_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auction_awards].[status_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auction_awards].[duration]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auction_awards].[duration_extension]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auction_awards].[issue_date]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auction_awards].[expiry_date]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auction_awards].[block]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auction_awards].[block_paired]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auction_awards].[block_unpaired]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auction_awards].[downlink_band]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auction_awards].[uplink_band]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auction_awards].[note]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auction_awards].[obligations]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auction_awards].[terms]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auction_awards].[price]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auction_awards].[price_usd]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auction_awards].[price_per_mhz]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auction_awards].[price_per_mhz_usd]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auction_awards].[price_per_mhz_usd_ppp]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auction_awards].[price_currency_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auction_awards].[reserve]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auction_awards].[reserve_currency_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auction_awards].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="180" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auction_awards].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="181" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auction_awards].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="182" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auction_awards].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="183" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="184" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[auction_awards].[IX_auction_awards]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[auction_awards].[auction_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[auction_awards]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[auction_awards].[IX_auction_awards_organisation]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[auction_awards].[organisation_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[auction_awards]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[auction_frequency_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auction_frequency_link].[auction_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auction_frequency_link].[organisation_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auction_frequency_link].[frequency_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auction_frequency_link].[frequency_3gpp_bands]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[auction_frequency_link].[IX_auction_frequency_link_auction]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[auction_frequency_link].[auction_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[auction_frequency_link].[organisation_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[auction_frequency_link]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[auction_frequency_link].[IX_auction_frequency_link_frequency]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[auction_frequency_link].[frequency_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[auction_frequency_link]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[auction_frequency_link].[IX_auction_frequency_link_organisation]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[auction_frequency_link].[organisation_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[auction_frequency_link].[auction_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[auction_frequency_link]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[auction_service_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auction_service_link].[auction_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auction_service_link].[organisation_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auction_service_link].[service_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[auction_service_link].[IX_auction_service_link_auction]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[auction_service_link].[auction_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[auction_service_link].[organisation_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[auction_service_link]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[auction_service_link].[IX_auction_service_link_organisation]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[auction_service_link].[organisation_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[auction_service_link].[auction_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[auction_service_link]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[auction_service_link].[IX_auction_service_link_service]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[auction_service_link].[service_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[auction_service_link]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[auctions]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auctions].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auctions].[zone_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auctions].[status_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auctions].[type_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auctions].[date]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auctions].[date_type]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="185" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auctions].[block]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auctions].[block_paired]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auctions].[block_unpaired]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auctions].[downlink_band]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auctions].[uplink_band]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auctions].[note]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auctions].[obligations]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auctions].[terms]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auctions].[applicants]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auctions].[bidders]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auctions].[winners]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auctions].[price]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auctions].[price_usd]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auctions].[price_per_mhz]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auctions].[price_per_mhz_usd]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auctions].[price_per_mhz_usd_ppp]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auctions].[price_currency_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auctions].[reserve]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auctions].[reserve_currency_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auctions].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="186" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auctions].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="187" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auctions].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="188" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[auctions].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="189" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="190" />
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[backup_ds_tables]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[

-- Clear up backup tables
execute [dbo].[clear_backup_ds_tables];


-- Backup DS tables
insert into [wi_backups].[dbo].[ds_organisation_data]
SELECT od.*, @dateObject
FROM [wi_master].[dbo].[ds_organisation_data] as od;


insert into [wi_backups].[dbo].[ds_zone_data]
SELECT zd.*, @dateObject
FROM [wi_master].[dbo].[ds_zone_data] as zd;


insert into [wi_backups].[dbo].[ds_group_data]
SELECT gd.*, @dateObject
FROM [wi_master].[dbo].[ds_group_data] as gd;


insert into [wi_backups].[dbo].[ds_group_ownership]
SELECT go.*, @dateObject
FROM [wi_master].[dbo].[ds_group_ownership] as go;


insert into [wi_backups].[dbo].[ds_mvnos]
SELECT mvn.*, @dateObject
FROM [wi_master].[dbo].[ds_mvnos] as mvn;


insert into [wi_backups].[dbo].[ds_service_data]
SELECT sd.*, @dateObject
FROM [wi_master].[dbo].[ds_service_data] as sd;


insert into [wi_backups].[dbo].[ds_survey_data]
SELECT sd.*, @dateObject
FROM [wi_master].[dbo].[ds_survey_data] as sd;]]></Value>
			</Property>
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[clear_backup_ds_tables]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry>
					<References Name="[dbo].[backup_ds_tables].[@dateObject]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[backup_ds_tables].[@dateObject]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1064" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[backup_ds_tables]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@dateObject datetime&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[blog_entries]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[blog_entries].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[blog_entries].[blog_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[blog_entries].[title]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[blog_entries].[subtitle]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[blog_entries].[permalink]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[blog_entries].[preview]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[blog_entries].[body]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[blog_entries].[status]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[tinyint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="191" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[blog_entries].[is_stub]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="192" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[blog_entries].[is_search_only]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="193" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[blog_entries].[published_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="194" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[blog_entries].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="195" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[blog_entries].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="196" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[blog_entries].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="197" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[blog_entries].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="198" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="199" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[blog_entries].[IX_blog_entries]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[blog_entries].[blog_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Property Name="IsAscending" Value="False" />
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[blog_entries].[published_on]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[blog_entries]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[blog_entry_tag_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[blog_entry_tag_link].[entry_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[blog_entry_tag_link].[tag_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[blog_entry_tag_link].[IX_blog_entry_tag_link_entry_id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[blog_entry_tag_link].[entry_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[blog_entry_tag_link]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[blog_entry_tag_link].[IX_blog_entry_tag_link_tag_id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[blog_entry_tag_link].[tag_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[blog_entry_tag_link]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[blog_entry_user_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[blog_entry_user_link].[entry_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[blog_entry_user_link].[user_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[blog_entry_user_link].[IX_blog_entry_user_link_entry_id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[blog_entry_user_link].[entry_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[blog_entry_user_link]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[blog_entry_user_link].[IX_blog_entry_user_link_user_id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[blog_entry_user_link].[user_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[blog_entry_user_link]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[cache]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[cache].[id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[cache].[sp]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[cache].[hash]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[cache].[type]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="8" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[cache].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="78" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[cache].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="79" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[cache].[IX_cache]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[cache].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[cache].[type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[cache]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[calculate_absolute_from_percentage]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[

CREATE TABLE #calc (id bigint, organisation_id int, metric_id int, attribute_id int, date datetime, date_type char(1) COLLATE DATABASE_DEFAULT, value decimal(22,8), value_percentage decimal(22,8), value_total decimal(22,8), source_id int, confidence_id int, processed bit)

-- Fetch the % shares and absolute totals
INSERT INTO #calc
SELECT	null, ds.organisation_id, @absolute_metric_id, ds.attribute_id, ds.date, ds.date_type, null, ds.val_d, null, ds.source_id, ds.confidence_id, 0
FROM	ds_organisation_data ds
WHERE	ds.metric_id = @metric_id AND ds.attribute_id = @attribute_id AND ds.date >= @date_start AND ds.date < @date_end AND ds.date_type IN ('Q','H','Y')
ORDER BY ds.organisation_id, ds.attribute_id

UPDATE	c
SET		c.value_total = CAST(ds.val_i AS decimal(22,8))
FROM	#calc c INNER JOIN ds_organisation_data ds ON (ds.organisation_id = c.organisation_id AND ds.date = c.date AND ds.date_type = c.date_type)
WHERE	ds.metric_id = @absolute_metric_id AND ds.attribute_id = @absolute_total_attribute_id AND ds.status_id = 3


-- Calculate the absolutes for the attribute
UPDATE #calc SET value = value_percentage * value_total


-- Get any existing ids which we can UPDATE on
UPDATE	c
SET		c.id = ds.id
FROM	#calc c INNER JOIN ds_organisation_data ds ON (c.organisation_id = ds.organisation_id AND c.metric_id = ds.metric_id AND c.attribute_id = ds.attribute_id AND c.date = ds.date AND c.date_type = ds.date_type)

-- Remove any NULL data
DELETE FROM #calc WHERE value IS null


IF @debug = 0
BEGIN
	-- UPDATE the _calculated_ values that already exist (ie don't overwrite reported/imported absolutes)
	UPDATE	ds
	SET		ds.val_d = null, ds.val_i = ROUND(c.value, 0), ds.source_id = c.source_id, ds.confidence_id = c.confidence_id, ds.last_update_on = CASE WHEN ds.val_i = c.value THEN ds.last_update_on ELSE GETDATE() END, ds.last_update_by = CASE WHEN ds.val_i = c.value THEN ds.last_update_by ELSE 11770 END
	FROM	ds_organisation_data ds INNER JOIN #calc c ON ds.id = c.id
	WHERE	ds.is_calculated = 1 AND c.processed = 0

	-- INSERT the remainder
	INSERT INTO ds_organisation_data (organisation_id, metric_id, attribute_id, date, date_type, val_d, val_i, currency_id, source_id, confidence_id, is_calculated, created_by)
	SELECT	organisation_id, metric_id, attribute_id, date, date_type, null, ROUND(value, 0), 0, source_id, confidence_id, 1, 11770
	FROM	#calc
	WHERE	id IS null AND processed = 0
END

IF @debug = 1
BEGIN
	SELECT * FROM #calc ORDER BY organisation_id, attribute_id, date
END


-- TODO: add benchmark by passing a start time to an audit function
SELECT 'Finished: calculate_absolute_from_percentage (2s)'

DROP TABLE #calc]]></Value>
			</Property>
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[calculate_absolute_from_percentage].[#calc]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_absolute_from_percentage].[@absolute_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_absolute_from_percentage].[@metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_absolute_from_percentage].[@attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_absolute_from_percentage].[@date_start]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_absolute_from_percentage].[@date_end]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_absolute_from_percentage].[#calc].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_absolute_from_percentage].[#calc].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_absolute_from_percentage].[#calc].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_absolute_from_percentage].[#calc].[value_total]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_absolute_from_percentage].[@absolute_total_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_absolute_from_percentage].[#calc].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_absolute_from_percentage].[#calc].[value_percentage]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_absolute_from_percentage].[#calc].[value_total]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_absolute_from_percentage].[#calc].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_absolute_from_percentage].[#calc].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_absolute_from_percentage].[#calc].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_absolute_from_percentage].[@debug]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_absolute_from_percentage].[#calc].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_absolute_from_percentage].[#calc].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_absolute_from_percentage].[#calc].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_absolute_from_percentage].[#calc].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_absolute_from_percentage].[#calc].[processed]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[created_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_absolute_from_percentage].[#calc].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_absolute_from_percentage].[#calc].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_absolute_from_percentage].[#calc].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_absolute_from_percentage].[#calc].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_absolute_from_percentage].[#calc].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_absolute_from_percentage].[#calc].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_absolute_from_percentage].[#calc].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_absolute_from_percentage].[#calc].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_absolute_from_percentage].[#calc].[processed]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[calculate_absolute_from_percentage].[#calc]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_absolute_from_percentage].[#calc].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_absolute_from_percentage].[#calc].[organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_absolute_from_percentage].[#calc].[metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_absolute_from_percentage].[#calc].[attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_absolute_from_percentage].[#calc].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_absolute_from_percentage].[#calc].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_absolute_from_percentage].[#calc].[value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_absolute_from_percentage].[#calc].[value_percentage]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_absolute_from_percentage].[#calc].[value_total]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_absolute_from_percentage].[#calc].[source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_absolute_from_percentage].[#calc].[confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_absolute_from_percentage].[#calc].[processed]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_absolute_from_percentage].[@metric_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_absolute_from_percentage].[@attribute_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_absolute_from_percentage].[@absolute_metric_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_absolute_from_percentage].[@absolute_total_attribute_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_absolute_from_percentage].[@date_start]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_absolute_from_percentage].[@date_end]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_absolute_from_percentage].[@debug]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="2943" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[calculate_absolute_from_percentage]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@metric_id int,&#xD;&#xA;&#x9;@attribute_id int,&#xD;&#xA;&#x9;@absolute_metric_id int,&#xD;&#xA;&#x9;@absolute_total_attribute_id int,&#xD;&#xA;&#x9;@date_start datetime,&#xD;&#xA;&#x9;@date_end datetime,&#xD;&#xA;&#x9;@debug bit = 1&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[calculate_connections_families]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[

CREATE TABLE #calc (id bigint, organisation_id int, metric_id int, attribute_id int, attribute_family_id int, date datetime, date_type char(1) COLLATE DATABASE_DEFAULT, value bigint, source_id int, confidence_id int, processed bit)

INSERT INTO #calc
SELECT	ds.id,
		ds.organisation_id,
		ds.metric_id,
		ds.attribute_id,
		af.family_id,
		ds.date,
		ds.date_type,
		ds.val_i,
		ds.source_id,
		ds.confidence_id,
		0

FROM	ds_organisation_data ds INNER JOIN
		attribute_family_link af ON ds.attribute_id = af.attribute_id

WHERE	ds.metric_id = 3 AND
		ds.date >= @date_start AND
		ds.date < @date_end AND
		ds.date_type IN ('Q','H','Y')

ORDER BY ds.organisation_id, af.family_id, ds.attribute_id

-- Normalise historicly used source values to supress odd source/conf combinations later
UPDATE #calc SET source_id = 5 WHERE source_id IN (6,8,13,21)
UPDATE #calc SET source_id = 11 WHERE source_id IN (17,19)

-- Sum the families
INSERT INTO #calc
SELECT	null, organisation_id, metric_id, attribute_family_id, attribute_family_id, date, date_type, SUM(value), SUM(source_id), SUM(confidence_id), 0
FROM	#calc
GROUP BY organisation_id, metric_id, attribute_family_id, date, date_type

-- Remove operator data and normalise source/confidence
DELETE FROM #calc WHERE attribute_id <> attribute_family_id

UPDATE #calc SET confidence_id = 192 WHERE confidence_id % 192 = 0
UPDATE #calc SET confidence_id = 194 WHERE confidence_id <> 192

UPDATE #calc SET source_id = 11 WHERE source_id % 11 = 0 AND confidence_id = 192
UPDATE #calc SET source_id = 20 WHERE source_id % 20 = 0 AND confidence_id = 192
UPDATE #calc SET source_id = 6 WHERE source_id NOT IN (11,20) OR confidence_id = 194


-- Get any existing ids which we can UPDATE on
UPDATE	c
SET		c.id = ds.id
FROM	#calc c INNER JOIN ds_organisation_data ds ON (c.organisation_id = ds.organisation_id AND c.metric_id = ds.metric_id AND c.attribute_id = ds.attribute_id AND c.date = ds.date AND c.date_type = ds.date_type)

-- Remove any NULL data
DELETE FROM #calc WHERE value IS null


IF @debug = 0
BEGIN
	-- UPDATE the values that already exist
	UPDATE	ds
	SET		ds.val_d = null, ds.val_i = ROUND(c.value, 0), ds.source_id = c.source_id, ds.confidence_id = c.confidence_id, ds.is_calculated = 1, ds.last_update_on = CASE WHEN ds.val_i = c.value THEN ds.last_update_on ELSE GETDATE() END, ds.last_update_by = CASE WHEN ds.val_i = c.value THEN ds.last_update_by ELSE 11770 END
	FROM	ds_organisation_data ds INNER JOIN #calc c ON ds.id = c.id
	WHERE	c.processed = 0

	-- INSERT the remainder
	INSERT INTO ds_organisation_data (organisation_id, metric_id, attribute_id, date, date_type, val_d, val_i, currency_id, source_id, confidence_id, is_calculated, created_by)
	SELECT	organisation_id, metric_id, attribute_id, date, date_type, null, ROUND(value, 0), 0, source_id, confidence_id, 1, 11770
	FROM	#calc
	WHERE	id IS null AND processed = 0
	
	
	-- Update the families that share single technologies (to eliminate double-counting)
	
	-- Remove "Family + 4G" numbers where they are only equal to 4G
	DELETE	ds

	FROM	ds_organisation_data ds INNER JOIN
			ds_organisation_data ds2 ON (ds.organisation_id = ds2.organisation_id AND ds.metric_id = ds2.metric_id AND ds.date = ds2.date AND ds.date_type = ds2.date_type)
			
	WHERE	ds.metric_id = 3 AND
			ds.attribute_id IN (1538,1540,1541) AND
			ds2.metric_id = 3 AND
			ds2.attribute_id = 799 AND
			ds.val_i = ds2.val_i
			
	-- Adjust "CDMA (Family) + 4G" numbers so we don't double count connections where operators run CDMA and WCDMA as well as 4G
	UPDATE	ds

	SET		ds.val_i = ds.val_i - ds2.val_i

	FROM	ds_organisation_data ds INNER JOIN
			ds_organisation_data ds2 ON (ds.organisation_id = ds2.organisation_id AND ds.metric_id = ds2.metric_id AND ds.date = ds2.date AND ds.date_type = ds2.date_type) INNER JOIN
			(
				SELECT	organisation_id,
						date,
						date_type
						
				FROM	ds_organisation_data

				WHERE	metric_id = 3 AND
						attribute_id IN (1538,1540,1541,799)
						
				GROUP BY organisation_id, date, date_type
				HAVING COUNT(val_i) = 3
			) ds3 ON (ds.organisation_id = ds3.organisation_id AND ds.date = ds3.date AND ds.date_type = ds3.date_type)
			
	WHERE	ds.metric_id = 3 AND
			ds.attribute_id = 1538 AND
			ds2.metric_id = 3 AND
			ds2.attribute_id = 799

	-- Finally, "4G-only" should exist for those that don't have "Family + 4G" figures (over the time series!)
	DELETE	ds
	
	FROM	ds_organisation_data ds INNER JOIN
			ds_organisation_data ds2 ON (ds.organisation_id = ds2.organisation_id AND ds.metric_id = ds2.metric_id AND ds.date = ds2.date AND ds.date_type = ds2.date_type)
			
	WHERE	ds.metric_id = 3 AND
			ds.attribute_id = 1543 AND
			ds2.attribute_id IN (1538,1540,1541)
END

IF @debug = 1
BEGIN
	SELECT * FROM #calc ORDER BY organisation_id, attribute_id, date
END


-- TODO: add benchmark by passing a start time to an audit function
SELECT 'Finished: calculate_connections_families (17s)'

DROP TABLE #calc]]></Value>
			</Property>
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[calculate_connections_families].[#calc]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attribute_family_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attribute_family_link].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attribute_family_link].[family_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_connections_families].[@date_start]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_connections_families].[@date_end]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_connections_families].[#calc].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_connections_families].[#calc].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_connections_families].[#calc].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_connections_families].[#calc].[attribute_family_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_connections_families].[#calc].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_connections_families].[#calc].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_connections_families].[#calc].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_connections_families].[#calc].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_connections_families].[#calc].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_connections_families].[#calc].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_connections_families].[#calc].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_connections_families].[#calc].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_connections_families].[#calc].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_connections_families].[#calc].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_connections_families].[#calc].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_connections_families].[@debug]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_connections_families].[#calc].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_connections_families].[#calc].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_connections_families].[#calc].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_connections_families].[#calc].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_connections_families].[#calc].[processed]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[created_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_connections_families].[#calc].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_connections_families].[#calc].[processed]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[calculate_connections_families].[#calc]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_connections_families].[#calc].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_connections_families].[#calc].[organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_connections_families].[#calc].[metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_connections_families].[#calc].[attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_connections_families].[#calc].[attribute_family_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_connections_families].[#calc].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_connections_families].[#calc].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_connections_families].[#calc].[value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_connections_families].[#calc].[source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_connections_families].[#calc].[confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_connections_families].[#calc].[processed]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_connections_families].[@date_start]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_connections_families].[@date_end]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_connections_families].[@debug]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="5218" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[calculate_connections_families]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@date_start datetime,&#xD;&#xA;&#x9;@date_end datetime,&#xD;&#xA;&#x9;@debug bit = 1&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[calculate_difference]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[

DECLARE @is_decimal bit = dbo.metric_is_decimal(@metric_id)
DECLARE @is_decimal_2 bit = dbo.metric_is_decimal(@metric_id_2)
DECLARE @is_decimal_3 bit = dbo.metric_is_decimal(@metric_id_3)

DECLARE @is_currency_based bit = dbo.metric_is_currency_based(@metric_id)

-- Calculation tables
CREATE TABLE #data (id bigint, organisation_id int, metric_id int, attribute_id int, date datetime, date_type char(1) COLLATE DATABASE_DEFAULT, value decimal(26,8), currency_id int, source_id int, confidence_id int, id_2 bigint, metric_id_2 int, attribute_id_2 int, value_2 decimal(26,8), currency_id_2 int, source_id_2 int, confidence_id_2 int, currency_rate decimal(26,8))
CREATE TABLE #calc (id bigint, organisation_id int, metric_id int, attribute_id int, date datetime, date_type char(1) COLLATE DATABASE_DEFAULT, value decimal(26,8), currency_id int, source_id int, confidence_id int, is_calculated bit, processed bit)

-- Collect all operator figures for both input metrics
INSERT INTO #data
SELECT	DISTINCT
		null,
		ds.organisation_id,
		@metric_id_2,
		@attribute_id_2,
		ds.date,
		ds.date_type,
		null,
		null,
		null,
		null,
		null,
		@metric_id_3,
		@attribute_id_3,
		null,
		null,
		null,
		null,
		null
		
FROM	ds_organisation_data ds INNER JOIN
		organisations o ON ds.organisation_id = o.id

WHERE	(
			(ds.metric_id = @metric_id_2 AND ds.attribute_id = @attribute_id_2) OR
			(ds.metric_id = @metric_id_3 AND ds.attribute_id = @attribute_id_3)
		) AND
		ds.date >= @date_start AND
		ds.date < @date_end AND
		ds.date_type = @date_type AND
		ds.status_id = 3 AND
		o.type_id = 1089
		
ORDER BY ds.organisation_id, ds.date_type, ds.date

UPDATE	d
SET		d.id = ds.id, d.value = CASE @is_decimal_2 WHEN 1 THEN ds.val_d ELSE CAST(ds.val_i AS decimal(26,8)) END, d.currency_id = ds.currency_id, d.source_id = ds.source_id, d.confidence_id = ds.confidence_id
FROM	ds_organisation_data ds INNER JOIN #data d ON (ds.organisation_id = d.organisation_id AND ds.metric_id = d.metric_id AND ds.attribute_id = d.attribute_id AND ds.date = d.date AND ds.date_type = d.date_type)
WHERE	ds.metric_id = @metric_id_2 AND ds.attribute_id = @attribute_id_2

UPDATE	d
SET		d.id_2 = ds.id, d.value_2 = CASE @is_decimal_3 WHEN 1 THEN ds.val_d ELSE CAST(ds.val_i AS decimal(26,8)) END, d.currency_id_2 = ds.currency_id, d.source_id_2 = ds.source_id, d.confidence_id_2 = ds.confidence_id
FROM	ds_organisation_data ds INNER JOIN #data d ON (ds.organisation_id = d.organisation_id AND ds.metric_id = d.metric_id_2 AND ds.attribute_id = d.attribute_id_2 AND ds.date = d.date AND ds.date_type = d.date_type)
WHERE	ds.metric_id = @metric_id_3 AND ds.attribute_id = @attribute_id_3


-- Get the exchange rate conversion if @metric_id_2 is reported in a different currency to @metric_id_3, using a common intermediary currency
UPDATE	d
SET		d.currency_rate = CASE cr.value WHEN 0 THEN 0 ELSE cr2.value/cr.value END
FROM	#data d INNER JOIN currency_rates cr ON (d.currency_id = cr.from_currency_id AND cr.to_currency_id = 2 AND d.date = cr.date AND d.date_type = cr.date_type) INNER JOIN currency_rates cr2 ON (d.currency_id_2 = cr2.from_currency_id AND cr2.to_currency_id = 2 AND d.date = cr2.date AND d.date_type = cr2.date_type)
WHERE	d.currency_id <> d.currency_id_2 AND d.currency_id <> 0 AND d.currency_id_2 <> 0

-- Else, we can divide the data as-reported
UPDATE	#data SET currency_rate = 1 WHERE currency_rate IS null


-- Update missing source and confidence
UPDATE #data SET currency_id_2 = currency_id WHERE currency_id_2 IS null
UPDATE #data SET source_id_2 = source_id WHERE source_id_2 IS null
UPDATE #data SET confidence_id_2 = confidence_id WHERE confidence_id_2 IS null


-- Calculate sum based on values
INSERT INTO #calc
SELECT	null,
		d.organisation_id,
		@metric_id,
		@attribute_id,
		d.date,
		d.date_type,
		d.value - (d.value_2 * d.currency_rate),
		CASE @is_currency_based WHEN 1 THEN d.currency_id ELSE 0 END,
		CASE WHEN d.source_id < d.source_id_2 THEN d.source_id ELSE d.source_id_2 END, -- MIN() only works over columns
		CASE WHEN d.confidence_id > d.confidence_id_2 THEN d.confidence_id ELSE d.confidence_id_2 END, -- MAX() only works over columns
		1,
		0

FROM	#data d

WHERE	d.value IS NOT null AND
		d.value_2 IS NOT null

ORDER BY d.organisation_id, d.date_type, d.date

-- Update with corresponding existing data points
UPDATE	c
SET		c.id = ds.id, c.is_calculated = ds.is_calculated
FROM	ds_organisation_data ds INNER JOIN #calc c ON (ds.organisation_id = c.organisation_id AND ds.metric_id = c.metric_id AND ds.attribute_id = c.attribute_id AND ds.date = c.date AND ds.date_type = c.date_type)
WHERE	ds.metric_id = @metric_id AND ds.attribute_id = @attribute_id


-- Remove any NULL data
DELETE FROM #calc WHERE value IS null


IF @debug = 0
BEGIN
	-- UPDATE the _calculated_ values that already exist
	UPDATE	ds
	SET		ds.val_d = CASE @is_decimal WHEN 1 THEN ROUND(c.value, 4) ELSE null END, ds.val_i = CASE @is_decimal WHEN 1 THEN null ELSE ROUND(c.value, 0) END, ds.currency_id = c.currency_id, ds.is_calculated = c.is_calculated, ds.source_id = c.source_id, ds.confidence_id = c.confidence_id, ds.last_update_on = CASE WHEN CAST(ds.val_i AS decimal(26,8)) = c.value THEN ds.last_update_on ELSE GETDATE() END, ds.last_update_by = CASE WHEN CAST(ds.val_i AS decimal(26,8)) = c.value THEN ds.last_update_by ELSE 11770 END
	FROM	ds_organisation_data ds INNER JOIN #calc c ON ds.id = c.id
	WHERE	ds.is_calculated = 1 AND c.value IS NOT null

	-- INSERT the remainder
	INSERT INTO ds_organisation_data (organisation_id, metric_id, attribute_id, date, date_type, val_d, val_i, currency_id, source_id, confidence_id, is_calculated, created_by)
	SELECT	c.organisation_id, c.metric_id, c.attribute_id, c.date, c.date_type, CASE @is_decimal WHEN 1 THEN ROUND(c.value, 4) ELSE null END, CASE @is_decimal WHEN 1 THEN null ELSE ROUND(c.value, 0) END, c.currency_id, c.source_id, c.confidence_id, 1, 11770
	FROM	#calc c
	WHERE	c.id IS null AND c.value IS NOT null
END

IF @debug = 1
BEGIN
	SELECT * FROM #calc ORDER BY organisation_id, date_type, date
END


-- TODO: add benchmark by passing a start time to an audit function
SELECT 'Finished: calculate_difference (11s)'

DROP TABLE #data
DROP TABLE #calc]]></Value>
			</Property>
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metric_is_decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[@metric_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[@metric_id_2]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[@metric_id_3]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metric_is_currency_based]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[@attribute_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[@attribute_id_3]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[@date_start]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[@date_end]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[@date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#data].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#data].[metric_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#data].[attribute_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#data].[id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#data].[value_2]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#data].[currency_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#data].[source_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#data].[confidence_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#data].[currency_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#data].[currency_rate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#data].[currency_rate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#data].[currency_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#data].[source_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#data].[confidence_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#calc]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[@attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#calc].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#calc].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#calc].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#calc].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#calc].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#calc].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#calc].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#calc].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[@debug]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#calc].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#calc].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#calc].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#calc].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#calc].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#calc].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_on]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_by]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[created_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#calc].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#calc].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#calc].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#calc].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#calc].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#calc].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#calc].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#calc].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#calc].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#calc].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#calc].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_difference].[#calc].[date]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[calculate_difference].[#data]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_difference].[#data].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_difference].[#data].[organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_difference].[#data].[metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_difference].[#data].[attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_difference].[#data].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_difference].[#data].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_difference].[#data].[value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="26" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_difference].[#data].[currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_difference].[#data].[source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_difference].[#data].[confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_difference].[#data].[id_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_difference].[#data].[metric_id_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_difference].[#data].[attribute_id_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_difference].[#data].[value_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="26" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_difference].[#data].[currency_id_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_difference].[#data].[source_id_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_difference].[#data].[confidence_id_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_difference].[#data].[currency_rate]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="26" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[calculate_difference].[#calc]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_difference].[#calc].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_difference].[#calc].[organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_difference].[#calc].[metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_difference].[#calc].[attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_difference].[#calc].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_difference].[#calc].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_difference].[#calc].[value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="26" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_difference].[#calc].[currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_difference].[#calc].[source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_difference].[#calc].[confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_difference].[#calc].[is_calculated]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_difference].[#calc].[processed]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_difference].[@metric_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_difference].[@attribute_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_difference].[@metric_id_2]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_difference].[@attribute_id_2]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_difference].[@metric_id_3]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_difference].[@attribute_id_3]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_difference].[@date_start]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_difference].[@date_end]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_difference].[@date_type]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA['Q']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_difference].[@debug]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="6756" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[calculate_difference]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@metric_id int,&#x9;&#x9;&#x9;&#x9;-- Output metric.id&#xD;&#xA;&#x9;@attribute_id int,&#x9;&#x9;&#x9;-- Output attribute.id&#xD;&#xA;&#x9;@metric_id_2 int,&#x9;&#x9;&#x9;-- Input metric.id&#xD;&#xA;&#x9;@attribute_id_2 int,&#x9;&#x9;-- Input attribute.id&#xD;&#xA;&#x9;@metric_id_3 int,&#x9;&#x9;&#x9;-- Input metric.id&#xD;&#xA;&#x9;@attribute_id_3 int,&#x9;&#x9;-- Input attribute.id&#xD;&#xA;&#x9;@date_start datetime,&#xD;&#xA;&#x9;@date_end datetime,&#xD;&#xA;&#x9;@date_type char(1) = 'Q',&#xD;&#xA;&#x9;@debug bit = 1&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[calculate_hy_fy_sum]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[

DECLARE @is_decimal bit, @is_currency_based bit, @currency_id int, @is_spot bit

SET @is_decimal = dbo.metric_is_decimal(@metric_id)
SET @is_currency_based = dbo.metric_is_currency_based(@metric_id)


-- Calculation tables; use twice the precision as the final stored value to allow for accuracy when converting currencies
CREATE TABLE #data (id bigint, organisation_id int, metric_id int, attribute_id int, date datetime, date_type char(1) COLLATE DATABASE_DEFAULT, value decimal(22,8), currency_id int, period_ending_currency_id int, rate decimal(22,8), source_id int, confidence_id int)
CREATE TABLE #calc (id bigint, organisation_id int, metric_id int, attribute_id int, date datetime, date_type char(1) COLLATE DATABASE_DEFAULT, value decimal(22,8), currency_id int, source_id int, confidence_id int)


-- Fetch all quarterly operator values for this metric
INSERT INTO #data
SELECT	ds.id, ds.organisation_id, ds.metric_id, ds.attribute_id, ds.date, ds.date_type, CASE @is_decimal WHEN 1 THEN ds.val_d ELSE ds.val_i END, ds.currency_id, null, 1, ds.source_id, ds.confidence_id
FROM	ds_organisation_data ds INNER JOIN organisations o ON ds.organisation_id = o.id
WHERE	ds.metric_id = @metric_id AND ds.attribute_id = @attribute_id AND ds.date >= @date_start AND ds.date < @date_end AND ds.date_type = 'Q' AND ds.status_id = 3 AND o.type_id = 1089


-- Normalise currencies that switch mid-half
UPDATE	d
SET		d.period_ending_currency_id = d2.currency_id
FROM	#data d INNER JOIN
		#data d2 ON (d.organisation_id = d2.organisation_id AND d.metric_id = d2.metric_id AND d.attribute_id = d2.attribute_id AND DATEPART(year, d.date) = DATEPART(year, d2.date) AND CASE DATEPART(month, d.date) WHEN 1 THEN 0 WHEN 4 THEN 0 ELSE 1 END = CASE DATEPART(month, d2.date) WHEN 1 THEN 0 WHEN 4 THEN 0 ELSE 1 END)
WHERE	DATEPART(month, d2.date) IN (4,10)

UPDATE #data SET rate = 1
UPDATE #data SET period_ending_currency_id = currency_id WHERE period_ending_currency_id IS null

IF @is_currency_based = 1
BEGIN
	UPDATE	d
	SET		d.rate = cr.value / cr2.value
	FROM	#data d INNER JOIN
			currency_rates cr ON (d.currency_id = cr.from_currency_id AND d.date = cr.date AND d.date_type = cr.date_type) INNER JOIN
			currency_rates cr2 ON (d.period_ending_currency_id = cr2.from_currency_id AND d.date = cr.date AND d.date_type = cr.date_type AND cr.to_currency_id = cr2.to_currency_id)
	WHERE	d.currency_id <> d.period_ending_currency_id AND cr.to_currency_id = 2
END

-- Calculate HY sums
INSERT INTO #calc
SELECT	null, d.organisation_id, d.metric_id, d.attribute_id, MIN(d.date), 'H', SUM(d.value * d.rate), d.period_ending_currency_id, MIN(d.source_id), MAX(d.confidence_id) 	-- Will produce 2000-01-01 and 2000-07-01
FROM	#data d
GROUP BY d.organisation_id, d.metric_id, d.attribute_id, DATEPART(year, d.date), CASE DATEPART(month, d.date) WHEN 1 THEN 0 WHEN 4 THEN 0 ELSE 1 END, d.period_ending_currency_id


-- Normalise currencies that switch mid-year
UPDATE	d
SET		d.period_ending_currency_id = d2.currency_id
FROM	#data d INNER JOIN
		#data d2 ON (d.organisation_id = d2.organisation_id AND d.metric_id = d2.metric_id AND d.attribute_id = d2.attribute_id AND DATEPART(year, d.date) = DATEPART(year, d2.date))
WHERE	DATEPART(month, d2.date) = 10

UPDATE #data SET rate = 1
UPDATE #data SET period_ending_currency_id = currency_id WHERE period_ending_currency_id IS null

IF @is_currency_based = 1
BEGIN
	UPDATE	d
	SET		d.rate = cr.value / cr2.value
	FROM	#data d INNER JOIN
			currency_rates cr ON (d.currency_id = cr.from_currency_id AND d.date = cr.date AND d.date_type = cr.date_type) INNER JOIN
			currency_rates cr2 ON (d.period_ending_currency_id = cr2.from_currency_id AND d.date = cr.date AND d.date_type = cr.date_type AND cr.to_currency_id = cr2.to_currency_id)
	WHERE	d.currency_id <> d.period_ending_currency_id AND cr.to_currency_id = 2
END

-- Calculate FY sums
INSERT INTO #calc
SELECT	null, d.organisation_id, d.metric_id, d.attribute_id, MIN(d.date), 'Y', SUM(d.value * d.rate), d.period_ending_currency_id, MIN(d.source_id), MAX(d.confidence_id)	-- Will produce 2000-01-01
FROM	#data d
GROUP BY d.organisation_id, d.metric_id, d.attribute_id, DATEPART(year, d.date), d.period_ending_currency_id


-- Update HY and FY dates where quarterly data doesn't start until Q2/Q4, throwing off MIN(d.date)
UPDATE #calc SET date = CAST(CAST(DATEPART(year, date) AS varchar) + '-01-01' AS datetime) WHERE date_type = 'H' AND DATEPART(month, date) = 4
UPDATE #calc SET date = CAST(CAST(DATEPART(year, date) AS varchar) + '-07-01' AS datetime) WHERE date_type = 'H' AND DATEPART(month, date) = 10
UPDATE #calc SET date = CAST(CAST(DATEPART(year, date) AS varchar) + '-01-01' AS datetime) WHERE date_type = 'Y' AND DATEPART(month, date) <> 1


-- Fetch existing ids so we can UPDATE against these rows (but only where calculated, not reported)
UPDATE	c
SET		c.id = ds.id
FROM	#calc c INNER JOIN ds_organisation_data ds ON (c.organisation_id = ds.organisation_id AND c.metric_id = ds.metric_id AND c.attribute_id = ds.attribute_id AND c.date = ds.date AND c.date_type = ds.date_type)

-- Remove any NULL data
DELETE FROM #calc WHERE value IS null


IF @debug = 0
BEGIN
	-- UPDATE the values that already exist
	UPDATE	ds
	SET		ds.val_d = CASE @is_decimal WHEN 1 THEN ROUND(c.value, 4) ELSE null END, ds.val_i = CASE @is_decimal WHEN 1 THEN null ELSE ROUND(c.value, 0) END, ds.currency_id = c.currency_id, ds.source_id = c.source_id, ds.confidence_id = c.confidence_id, ds.last_update_on = CASE WHEN ds.val_d = c.value OR ds.val_i = c.value THEN ds.last_update_on ELSE GETDATE() END, ds.last_update_by = CASE WHEN ds.val_d = c.value OR ds.val_i = c.value THEN ds.last_update_by ELSE 11770 END
	FROM	ds_organisation_data ds INNER JOIN #calc c ON ds.id = c.id
	WHERE	ds.is_calculated = 1

	-- INSERT the remainder
	INSERT INTO ds_organisation_data (organisation_id, metric_id, attribute_id, date, date_type, val_d, val_i, currency_id, source_id, confidence_id, is_calculated, created_by)
	SELECT	organisation_id, metric_id, attribute_id, date, date_type, CASE @is_decimal WHEN 1 THEN ROUND(value, 4) ELSE null END, CASE @is_decimal WHEN 1 THEN null ELSE ROUND(value, 0) END, currency_id, source_id, confidence_id, 1, 11770
	FROM	#calc
	WHERE	id IS null
END

IF @debug = 1
BEGIN
	--SELECT * FROM #data
	SELECT * FROM #calc
END


-- TODO: add benchmark by passing a start time to an audit function
SELECT 'Finished: calculate_hy_fy_sum (19s)'

DROP TABLE #calc
DROP TABLE #data]]></Value>
			</Property>
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metric_is_decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[@metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metric_is_currency_based]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[@attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[@date_start]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[@date_end]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#data].[period_ending_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#data].[rate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#data].[period_ending_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#data].[period_ending_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#data].[rate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#calc]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#data].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#calc].[date]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#calc].[date_type]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#calc].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#calc].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#calc].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#calc].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#calc].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#calc].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#calc].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[@debug]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#calc].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#calc].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#calc].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#calc].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#calc].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[created_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#calc].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#calc].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#calc].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#calc].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#calc].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#calc].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_hy_fy_sum].[#calc].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[calculate_hy_fy_sum].[#data]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_hy_fy_sum].[#data].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_hy_fy_sum].[#data].[organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_hy_fy_sum].[#data].[metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_hy_fy_sum].[#data].[attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_hy_fy_sum].[#data].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_hy_fy_sum].[#data].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_hy_fy_sum].[#data].[value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_hy_fy_sum].[#data].[currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_hy_fy_sum].[#data].[period_ending_currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_hy_fy_sum].[#data].[rate]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_hy_fy_sum].[#data].[source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_hy_fy_sum].[#data].[confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[calculate_hy_fy_sum].[#calc]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_hy_fy_sum].[#calc].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_hy_fy_sum].[#calc].[organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_hy_fy_sum].[#calc].[metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_hy_fy_sum].[#calc].[attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_hy_fy_sum].[#calc].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_hy_fy_sum].[#calc].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_hy_fy_sum].[#calc].[value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_hy_fy_sum].[#calc].[currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_hy_fy_sum].[#calc].[source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_hy_fy_sum].[#calc].[confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_hy_fy_sum].[@metric_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_hy_fy_sum].[@attribute_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_hy_fy_sum].[@date_start]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_hy_fy_sum].[@date_end]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_hy_fy_sum].[@debug]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="6742" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[calculate_hy_fy_sum]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@metric_id int,&#xD;&#xA;&#x9;@attribute_id int,&#xD;&#xA;&#x9;@date_start datetime,&#xD;&#xA;&#x9;@date_end datetime,&#xD;&#xA;&#x9;@debug bit = 1&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[calculate_membership]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[


DECLARE @tier_currency_id int, @dues_currency_id int, @dues_per_vote decimal(22,4), @vote_cap decimal(22,4)

SET @tier_currency_id	= 2
SET @dues_currency_id	= 3

SET @dues_per_vote		= 875
SET @vote_cap			= 500

IF @date_spot IS null
BEGIN
	SET @date_spot = dbo.current_reporting_quarter()
END


CREATE TABLE #data (organisation_id int, date datetime, date_type char(1) COLLATE DATABASE_DEFAULT, connections decimal(22,4), connections_source int, revenue_total decimal(22,4), revenue_total_currency int, revenue_total_fx decimal(22,6), revenue_total_source int, revenue_recurring decimal(22,4), revenue_recurring_currency int, revenue_recurring_fx decimal(22,6), revenue_recurring_source int, arpu decimal(22,4), arpu_currency int, arpu_source int)
CREATE TABLE #metadata (organisation_id int, total_source int, total_source_min int, total_source_max int, recurring_source int, recurring_source_min int, recurring_source_max int)
CREATE TABLE #regional (organisation_id int, mapped_organisation_id int, attribute_id int, date datetime, date_type char(1) COLLATE DATABASE_DEFAULT, connections decimal(22,4), connections_source int)


IF @debug = 0
BEGIN
	SELECT * FROM gsma.ds_membership_data WHERE date = @date AND date_type = @date_type
END

-- *Specific organisation update
update dbo.organisations SET status_id = 81 where id = 6143;
update dbo.organisations SET status_id = 81 where id = 6211;
update dbo.organisations SET status_id = 81 where id = 5822;
update dbo.organisations SET status_id = 81 where id = 4405;
update dbo.organisations SET status_id = 81 where id = 3677;
update dbo.organisations SET status_id = 81 where id = 6578;
update dbo.organisations SET status_id = 81 where id = 5622;
update dbo.organisations SET status_id = 81 where id = 6154;
update dbo.organisations SET status_id = 81 where id = 6341;
-- *udpate end

-- Populate with connections data set as base data
INSERT INTO #data (organisation_id, date, date_type, connections, connections_source)
SELECT 	d.organisation_id, d.date, d.date_type, d.val_i, d.source_id
FROM 	ds_organisation_data d INNER JOIN organisations o ON d.organisation_id = o.id
WHERE	d.metric_id = 3 AND d.attribute_id = 0 AND d.date >= DATEADD(year, -1, @date) AND d.date <= @date AND d.date_type = @date_type AND o.type_id = 1089

-- Get revenue data set
UPDATE	ds
SET		ds.revenue_total = d.val_i, ds.revenue_total_currency = d.currency_id, ds.revenue_total_source = d.source_id
FROM	ds_organisation_data d INNER JOIN #data ds ON (d.organisation_id = ds.organisation_id AND d.date = ds.date AND d.date_type = ds.date_type)
WHERE	d.metric_id = 18 AND d.attribute_id = 0

-- Get recurring revenue data set
UPDATE	ds
SET		ds.revenue_recurring = d.val_i, ds.revenue_recurring_currency = d.currency_id, ds.revenue_recurring_source = d.source_id
FROM	ds_organisation_data d INNER JOIN #data ds ON (d.organisation_id = ds.organisation_id AND d.date = ds.date AND d.date_type = ds.date_type)
WHERE	d.metric_id = 18 AND d.attribute_id = 826

-- Get ARPU data set
UPDATE	ds
SET		ds.arpu = d.val_d, ds.arpu_currency = d.currency_id, ds.arpu_source = d.source_id
FROM	ds_organisation_data d INNER JOIN #data ds ON (d.organisation_id = ds.organisation_id AND d.date = ds.date AND d.date_type = ds.date_type)
WHERE	d.metric_id = 10 AND d.attribute_id = 0


-- Populate regional connections (India)
INSERT INTO #regional
SELECT 	o.id, null, d.attribute_id, d.date, d.date_type, d.val_i, d.source_id
FROM	ds_organisation_data d INNER JOIN organisations o ON d.organisation_id = o.id
WHERE	d.metric_id = 3 AND d.attribute_id IN (906,907,908,909,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,1225) AND d.date >= DATEADD(year, -1, @date) AND d.date <= @date AND d.date_type = 'Q' AND o.type_id = 1089

-- Airtel (Bharti)
UPDATE #regional SET mapped_organisation_id = 4405 WHERE organisation_id = 47 AND attribute_id IN (917,924)
UPDATE #regional SET mapped_organisation_id = 4804 WHERE organisation_id = 47 AND attribute_id IN (906,907,908,909,910,911,912,913,914,915,916,918,919,920,921,922,923,925,927,1225)

-- Populate regional connections sums
INSERT INTO #data (organisation_id, date, date_type, connections, connections_source)
SELECT	mapped_organisation_id, date, date_type, SUM(connections), MAX(connections_source)
FROM	#regional
WHERE	mapped_organisation_id IS NOT null
GROUP BY mapped_organisation_id, date, date_type

-- Weight regional operators' revenue by their national parents' total
UPDATE	ds

SET		ds.revenue_total = ds.connections / d.connections * d.revenue_total,
		ds.revenue_recurring = ds.connections / d.connections * d.revenue_recurring,
		ds.arpu = d.arpu,
		
		ds.revenue_total_currency = d.revenue_total_currency,
		ds.revenue_recurring_currency = d.revenue_recurring_currency,
		ds.arpu_currency = d.arpu_currency,

		ds.revenue_total_source = 5,
		ds.revenue_recurring_source = 5,
		ds.arpu_source = d.arpu_source

FROM	#data ds INNER JOIN (SELECT DISTINCT organisation_id, mapped_organisation_id FROM #regional) r ON ds.organisation_id = r.mapped_organisation_id INNER JOIN #data d ON r.organisation_id = d.organisation_id

WHERE	ds.date = d.date AND ds.date_type = d.date_type

IF @debug = 1
BEGIN
	SELECT * FROM #data WHERE organisation_id IN (47,4405,4804)
	SELECT * FROM #regional
END

-- Remove the original national operators for regional subsidaries
-- [Removed by Alex - as requested by Jon Groves to expose the org 47]
-- DELETE FROM #data WHERE organisation_id = 47


-- Add recurring revenue estimates from operator ARPU
UPDATE #data SET revenue_recurring = connections * arpu * 3, revenue_recurring_currency = arpu_currency, revenue_recurring_source = 5 WHERE revenue_total IS null AND revenue_recurring IS null AND arpu IS NOT null

-- Fix mixed-currency issues, honour most recent currency
/*UPDATE	ds
SET		ds.?
FROM	#data ds INNER JOIN
		(
			SELECT	organisation_id, revenue_total_currency, RANK() OVER (PARTITION BY organisation_id, date ORDER BY date DESC) rank
			FROM	#data
			WHERE	revenue_total_currency IS NOT null
		) c
WHERE	c.rank = 1*/

-- Cross update revenue with historical exchange rates per quarter
UPDATE	ds
SET		ds.revenue_total_fx = cr.value
FROM	currency_rates cr INNER JOIN #data ds ON (ds.revenue_total_currency = cr.from_currency_id AND ds.date = cr.date AND ds.date_type = cr.date_type)
WHERE	cr.to_currency_id = @tier_currency_id

UPDATE	ds
SET		ds.revenue_recurring_fx = cr.value
FROM	currency_rates cr INNER JOIN #data ds ON (ds.revenue_recurring_currency = cr.from_currency_id AND ds.date = cr.date AND ds.date_type = cr.date_type)
WHERE	cr.to_currency_id = @tier_currency_id

-- Establish the correct sourcing to use for each operator
INSERT INTO #metadata
SELECT	organisation_id,
		null,
		MIN(revenue_total_source),
		MAX(revenue_total_source),
		null,
		MIN(revenue_recurring_source),
		MAX(revenue_recurring_source)
FROM	#data
WHERE	revenue_total IS NOT null OR revenue_recurring IS NOT null
GROUP BY organisation_id

UPDATE #metadata SET total_source = total_source_min WHERE total_source_min = total_source_max
UPDATE #metadata SET total_source = 20 WHERE total_source_min = 11 AND total_source_max = 20
UPDATE #metadata SET total_source = 5 WHERE total_source IS null
UPDATE #metadata SET recurring_source = recurring_source_min WHERE recurring_source_min = recurring_source_max
UPDATE #metadata SET recurring_source = 20 WHERE recurring_source_min = 11 AND recurring_source_max = 20
UPDATE #metadata SET recurring_source = 5 WHERE recurring_source IS null


IF @debug = 1
BEGIN
	SELECT 'Revenue data points with missing FX rates:'
	SELECT * FROM #data WHERE (revenue_total IS NOT null and revenue_total_fx IS null) OR (revenue_recurring IS NOT null and revenue_recurring_fx IS null)
END

IF @debug = 0
BEGIN
	-- Take a revision of this data
	DECLARE @revision_id int, @revision datetime

	SET @revision 		= GETDATE()
	SET @revision_id	= (SELECT MAX(revision_id) FROM wi_revisions.gsma.ds_membership_data) + 1

	INSERT INTO wi_revisions.gsma.ds_membership_data (revision_id, revision, organisation_id, group_id, date, date_type, connections, connections_source, connections_tier, revenue, revenue_currency, revenue_source, revenue_attribute, revenue_normalised, revenue_tier, tier, votes, votes_adjusted, dues, dues_adjusted, dues_currency, is_member, is_special_case, created_on, created_by, last_update_on, last_update_by)
	SELECT	@revision_id, @revision, organisation_id, group_id, date, date_type, connections, connections_source, connections_tier, revenue, revenue_currency, revenue_source, revenue_attribute, revenue_normalised, revenue_tier, tier, votes, votes_adjusted, dues, dues_adjusted, dues_currency, is_member, is_special_case, created_on, created_by, last_update_on, last_update_by
	FROM	gsma.ds_membership_data
	WHERE	date = @date AND date_type = @date_type

	-- Remove existing data set for this period
	DELETE FROM gsma.ds_membership_data WHERE date = @date


	-- Repopulate the data set from these calculations
	INSERT INTO gsma.ds_membership_data (organisation_id, date, date_type, connections, connections_source)
	SELECT	organisation_id, date, date_type, connections, connections_source
	FROM	#data
	WHERE	date = @date
	
	
	-- Now populate revenue... prefer recurring revenue first for the period (n-3)–n quarters (and excluding any figures from country/region/world ARPU at this stage; source > 0)
	UPDATE	ds
	SET		ds.revenue = d.revenue, ds.revenue_normalised = d.revenue_normalised, ds.revenue_attribute = 826
	FROM	(
				SELECT	organisation_id, SUM(revenue_recurring) revenue, SUM(revenue_recurring * revenue_recurring_fx) revenue_normalised
				FROM	#data
				WHERE	date >= DATEADD(month, -9, @date) AND date <= @date
				GROUP BY organisation_id HAVING COUNT(revenue_recurring) = 4
			) d INNER JOIN gsma.ds_membership_data ds ON ds.organisation_id = d.organisation_id
	WHERE	ds.revenue IS null AND ds.date = @date
	
	-- Or the (n-4)–(n-1) period if n has yet to be reported
	UPDATE	ds
	SET		ds.revenue = d.revenue, ds.revenue_normalised = d.revenue_normalised, ds.revenue_attribute = 826
	FROM	(
				SELECT	organisation_id, SUM(revenue_recurring) revenue, SUM(revenue_recurring * revenue_recurring_fx) revenue_normalised
				FROM	#data
				WHERE	date >= DATEADD(month, -12, @date) AND date <= DATEADD(month, -3, @date)
				GROUP BY organisation_id HAVING COUNT(revenue_recurring) = 4
			) d INNER JOIN gsma.ds_membership_data ds ON ds.organisation_id = d.organisation_id
	WHERE	ds.revenue IS null AND ds.date = @date
	
	-- Then either the (n-1)–n or (n-2)–(n-1) or (n-3)–(n-2) or (n-4)–(n-3) period (HY) multiplied by two (prefer more recent data)
	UPDATE	ds
	SET		ds.revenue = d.revenue * 2, ds.revenue_normalised = d.revenue_normalised * 2, ds.revenue_source = 5, ds.revenue_attribute = 826
	FROM	(
				SELECT	organisation_id, SUM(revenue_recurring) revenue, SUM(revenue_recurring * revenue_recurring_fx) revenue_normalised
				FROM	#data
				WHERE	date >= DATEADD(month, -3, @date) AND date <= @date
				GROUP BY organisation_id HAVING COUNT(revenue_recurring) = 2
			) d INNER JOIN gsma.ds_membership_data ds ON ds.organisation_id = d.organisation_id
	WHERE	ds.revenue IS null AND ds.date = @date
	
	UPDATE	ds
	SET		ds.revenue = d.revenue * 2, ds.revenue_normalised = d.revenue_normalised * 2, ds.revenue_source = 5, ds.revenue_attribute = 826
	FROM	(
				SELECT	organisation_id, SUM(revenue_recurring) revenue, SUM(revenue_recurring * revenue_recurring_fx) revenue_normalised
				FROM	#data
				WHERE	date >= DATEADD(month, -6, @date) AND date <= DATEADD(month, -3, @date)
				GROUP BY organisation_id HAVING COUNT(revenue_recurring) = 2
			) d INNER JOIN gsma.ds_membership_data ds ON ds.organisation_id = d.organisation_id
	WHERE	ds.revenue IS null AND ds.date = @date
	
	UPDATE	ds
	SET		ds.revenue = d.revenue * 2, ds.revenue_normalised = d.revenue_normalised * 2, ds.revenue_source = 5, ds.revenue_attribute = 826
	FROM	(
				SELECT	organisation_id, SUM(revenue_recurring) revenue, SUM(revenue_recurring * revenue_recurring_fx) revenue_normalised
				FROM	#data
				WHERE	date >= DATEADD(month, -9, @date) AND date <= DATEADD(month, -6, @date)
				GROUP BY organisation_id HAVING COUNT(revenue_recurring) = 2
			) d INNER JOIN gsma.ds_membership_data ds ON ds.organisation_id = d.organisation_id
	WHERE	ds.revenue IS null AND ds.date = @date
	
	UPDATE	ds
	SET		ds.revenue = d.revenue * 2, ds.revenue_normalised = d.revenue_normalised * 2, ds.revenue_source = 5, ds.revenue_attribute = 826
	FROM	(
				SELECT	organisation_id, SUM(revenue_recurring) revenue, SUM(revenue_recurring * revenue_recurring_fx) revenue_normalised
				FROM	#data
				WHERE	date >= DATEADD(month, -12, @date) AND date <= DATEADD(month, -9, @date)
				GROUP BY organisation_id HAVING COUNT(revenue_recurring) = 2
			) d INNER JOIN gsma.ds_membership_data ds ON ds.organisation_id = d.organisation_id
	WHERE	ds.revenue IS null AND ds.date = @date
	
	-- If all else, still prefer any single quarterly recurring revenue multiplied by four
	UPDATE	ds
	SET		ds.revenue = d.revenue * 4, ds.revenue_normalised = d.revenue_normalised * 4, ds.revenue_source = 5, ds.revenue_attribute = 826
	FROM	(
				SELECT	organisation_id, SUM(revenue_recurring) revenue, SUM(revenue_recurring * revenue_recurring_fx) revenue_normalised
				FROM	#data
				WHERE	date >= DATEADD(month, -12, @date) AND date <= @date
				GROUP BY organisation_id HAVING COUNT(revenue_recurring) = 1
			) d INNER JOIN gsma.ds_membership_data ds ON ds.organisation_id = d.organisation_id
	WHERE	ds.revenue IS null AND ds.date = @date
	
	
	-- Then use the same four rules for total revenue instead of recurring
	UPDATE	ds -- FY
	SET		ds.revenue = d.revenue, ds.revenue_normalised = d.revenue_normalised, ds.revenue_attribute = 0
	FROM	(
				SELECT	organisation_id, SUM(revenue_total) revenue, SUM(revenue_total * revenue_total_fx) revenue_normalised
				FROM	#data
				WHERE	date >= DATEADD(month, -9, @date) AND date <= @date
				GROUP BY organisation_id HAVING COUNT(revenue_total) = 4
			) d INNER JOIN gsma.ds_membership_data ds ON ds.organisation_id = d.organisation_id
	WHERE	ds.revenue IS null AND ds.date = @date
	
	UPDATE	ds -- FY from n-1 quarter
	SET		ds.revenue = d.revenue, ds.revenue_normalised = d.revenue_normalised, ds.revenue_attribute = 0
	FROM	(
				SELECT	organisation_id, SUM(revenue_total) revenue, SUM(revenue_total * revenue_total_fx) revenue_normalised
				FROM	#data
				WHERE	date >= DATEADD(month, -12, @date) AND date <= DATEADD(month, -3, @date)
				GROUP BY organisation_id HAVING COUNT(revenue_total) = 4
			) d INNER JOIN gsma.ds_membership_data ds ON ds.organisation_id = d.organisation_id
	WHERE	ds.revenue IS null AND ds.date = @date
	
	UPDATE	ds -- HY * 2
	SET		ds.revenue = d.revenue * 2, ds.revenue_normalised = d.revenue_normalised * 2, ds.revenue_source = 5, ds.revenue_attribute = 0
	FROM	(
				SELECT	organisation_id, SUM(revenue_total) revenue, SUM(revenue_total * revenue_total_fx) revenue_normalised
				FROM	#data
				WHERE	date >= DATEADD(month, -3, @date) AND date <= @date
				GROUP BY organisation_id HAVING COUNT(revenue_total) = 2
			) d INNER JOIN gsma.ds_membership_data ds ON ds.organisation_id = d.organisation_id
	WHERE	ds.revenue IS null AND ds.date = @date
	
	UPDATE	ds -- HY * 2
	SET		ds.revenue = d.revenue * 2, ds.revenue_normalised = d.revenue_normalised * 2, ds.revenue_source = 5, ds.revenue_attribute = 0
	FROM	(
				SELECT	organisation_id, SUM(revenue_total) revenue, SUM(revenue_total * revenue_total_fx) revenue_normalised
				FROM	#data
				WHERE	date >= DATEADD(month, -6, @date) AND date <= DATEADD(month, -3, @date)
				GROUP BY organisation_id HAVING COUNT(revenue_total) = 2
			) d INNER JOIN gsma.ds_membership_data ds ON ds.organisation_id = d.organisation_id
	WHERE	ds.revenue IS null AND ds.date = @date
	
	UPDATE	ds -- HY * 2
	SET		ds.revenue = d.revenue * 2, ds.revenue_normalised = d.revenue_normalised * 2, ds.revenue_source = 5, ds.revenue_attribute = 0
	FROM	(
				SELECT	organisation_id, SUM(revenue_total) revenue, SUM(revenue_total * revenue_total_fx) revenue_normalised
				FROM	#data
				WHERE	date >= DATEADD(month, -9, @date) AND date <= DATEADD(month, -6, @date)
				GROUP BY organisation_id HAVING COUNT(revenue_total) = 2
			) d INNER JOIN gsma.ds_membership_data ds ON ds.organisation_id = d.organisation_id
	WHERE	ds.revenue IS null AND ds.date = @date
	
	UPDATE	ds -- HY * 2
	SET		ds.revenue = d.revenue * 2, ds.revenue_normalised = d.revenue_normalised * 2, ds.revenue_source = 5, ds.revenue_attribute = 0
	FROM	(
				SELECT	organisation_id, SUM(revenue_total) revenue, SUM(revenue_total * revenue_total_fx) revenue_normalised
				FROM	#data
				WHERE	date >= DATEADD(month, -12, @date) AND date <= DATEADD(month, -9, @date)
				GROUP BY organisation_id HAVING COUNT(revenue_total) = 2
			) d INNER JOIN gsma.ds_membership_data ds ON ds.organisation_id = d.organisation_id
	WHERE	ds.revenue IS null AND ds.date = @date
	
	UPDATE	ds -- Q * 4
	SET		ds.revenue = d.revenue * 4, ds.revenue_normalised = d.revenue_normalised * 4, ds.revenue_source = 5, ds.revenue_attribute = 0
	FROM	(
				SELECT	organisation_id, SUM(revenue_total) revenue, SUM(revenue_total * revenue_total_fx) revenue_normalised
				FROM	#data
				WHERE	date >= DATEADD(month, -12, @date) AND date <= @date
				GROUP BY organisation_id HAVING COUNT(revenue_total) = 1
			) d INNER JOIN gsma.ds_membership_data ds ON ds.organisation_id = d.organisation_id
	WHERE	ds.revenue IS null AND ds.date = @date
	
	
	-- Add source information for fully reported data
	UPDATE	ds
	SET		ds.revenue_source = CASE ds.revenue_attribute WHEN 0 THEN m.total_source WHEN 826 THEN m.recurring_source ELSE 5 END
	FROM	#metadata m INNER JOIN gsma.ds_membership_data ds ON m.organisation_id = ds.organisation_id
	WHERE	ds.revenue IS NOT null AND ds.revenue_source IS null AND ds.date = @date
END


-- Nullify revenue data set for operators using country/region/global ARPU revenue approximations
UPDATE #data SET revenue_total = null, revenue_total_currency = null, revenue_total_fx = null, revenue_total_source = null, revenue_recurring = null, revenue_recurring_currency = null, revenue_recurring_fx = null, revenue_recurring_source = null, arpu = null, arpu_currency = null, arpu_source = null

-- Get country ARPU data set
UPDATE	ds
SET		ds.arpu = d.val_d, ds.arpu_currency = d.currency_id, ds.arpu_source = -1
FROM	ds_zone_data d INNER JOIN organisation_zone_link oz ON d.zone_id = oz.zone_id INNER JOIN #data ds ON (oz.organisation_id = ds.organisation_id AND ds.date = d.date AND ds.date_type = d.date_type)
WHERE	d.metric_id = 10 AND d.attribute_id = 0 AND ds.arpu IS null AND ds.revenue_recurring IS null AND d.currency_id = @tier_currency_id AND d.is_spot = 0

UPDATE #data SET revenue_recurring = connections * arpu * 3, revenue_recurring_currency = arpu_currency, revenue_recurring_source = arpu_source WHERE revenue_recurring IS null AND arpu IS NOT null

-- Get regional ARPU data set
UPDATE	ds
SET		ds.arpu = d.val_d, ds.arpu_currency = d.currency_id, ds.arpu_source = -2
FROM	ds_zone_data d INNER JOIN zone_link zl ON d.zone_id = zl.zone_id INNER JOIN zone_link zl2 ON zl.subzone_id = zl2.zone_id INNER JOIN organisation_zone_link oz ON zl2.subzone_id = oz.zone_id INNER JOIN #data ds ON (oz.organisation_id = ds.organisation_id AND ds.date = d.date AND ds.date_type = d.date_type)
WHERE	d.metric_id = 10 AND d.attribute_id = 0 AND ds.arpu IS null AND ds.revenue_recurring IS null AND d.currency_id = @tier_currency_id AND d.is_spot = 0 AND d.zone_id BETWEEN 3908 AND 3912

UPDATE #data SET revenue_recurring = connections * arpu * 3, revenue_recurring_currency = arpu_currency, revenue_recurring_source = arpu_source WHERE revenue_recurring IS null AND arpu IS NOT null

-- Get global ARPU data set
UPDATE	ds
SET		ds.arpu = d.val_d, ds.arpu_currency = d.currency_id, ds.arpu_source = -3
FROM	ds_zone_data d INNER JOIN zone_link zl ON d.zone_id = zl.zone_id INNER JOIN organisation_zone_link oz ON zl.subzone_id = oz.zone_id INNER JOIN #data ds ON (oz.organisation_id = ds.organisation_id AND ds.date = d.date AND ds.date_type = d.date_type)
WHERE	d.metric_id = 10 AND d.attribute_id = 0 AND ds.arpu IS null AND ds.revenue_recurring IS null AND d.currency_id = @tier_currency_id AND d.is_spot = 0 AND d.zone_id = 3826

UPDATE #data SET revenue_recurring = connections * arpu * 3, revenue_recurring_currency = arpu_currency, revenue_recurring_source = arpu_source WHERE revenue_recurring IS null AND arpu IS NOT null


IF @debug = 1
BEGIN
	SELECT 'All data:'
	SELECT * FROM #data ORDER BY organisation_id
END

IF @debug = 0
BEGIN
	-- Overwrite calculations with any (private) imported data
	UPDATE	ds
	SET		ds.connections = ds2.connections, ds.connections_source = ds2.connections_source, ds.revenue = ds2.revenue, ds.revenue_source = ds2.revenue_source, ds.revenue_currency = ds2.revenue_currency, ds.revenue_attribute = ds2.revenue_attribute, ds.revenue_normalised = ds2.revenue_normalised
	FROM	gsma.ds_membership_data ds INNER JOIN wi_import.gsma.ds_membership_data ds2 ON (ds.organisation_id = ds2.organisation_id AND ds.date = ds2.date AND ds.date_type = ds2.date_type)
	WHERE	ds.date = @date


	-- Use country/region/global ARPU revenue estimates for operators without any revenue data
	UPDATE	ds -- (n-3)–n period
	SET		ds.revenue = d.revenue, ds.revenue_normalised = d.revenue, ds.revenue_source = d.source, ds.revenue_attribute = 826
	FROM	(
				SELECT	organisation_id, SUM(revenue_recurring) revenue, MIN(revenue_recurring_source) source -- Potential for mixed global, regional, country ARPU; set worse-case source
				FROM	#data
				WHERE	date >= DATEADD(month, -9, @date) AND date <= @date
				GROUP BY organisation_id HAVING COUNT(revenue_recurring) = 4
			) d INNER JOIN gsma.ds_membership_data ds ON ds.organisation_id = d.organisation_id
	WHERE	ds.revenue IS null AND ds.date = @date
	
	UPDATE	ds -- (n-4)–(n-1) period
	SET		ds.revenue = d.revenue, ds.revenue_normalised = d.revenue, ds.revenue_source = d.source, ds.revenue_attribute = 826
	FROM	(
				SELECT	organisation_id, SUM(revenue_recurring) revenue, MIN(revenue_recurring_source) source
				FROM	#data
				WHERE	date >= DATEADD(month, -12, @date) AND date <= DATEADD(month, -3, @date)
				GROUP BY organisation_id HAVING COUNT(revenue_recurring) = 4
			) d INNER JOIN gsma.ds_membership_data ds ON ds.organisation_id = d.organisation_id
	WHERE	ds.revenue IS null AND ds.date = @date

	
	-- Add regulators
	INSERT INTO gsma.ds_membership_data (organisation_id, date, date_type, connections, connections_source, revenue_source)
	SELECT	o.id, @date, @date_type, null, 1227, 1227
	FROM	organisations o
	WHERE	o.type_id = 1227 AND o.status_id = 0 AND o.id NOT IN (SELECT organisation_id FROM gsma.ds_membership_data WHERE date = @date AND date_type = @date_type)
	
	-- Add operators from USA 'Other'
	INSERT INTO gsma.ds_membership_data (organisation_id, date, date_type, connections, connections_source, revenue_source)
	SELECT	DISTINCT o.id, @date, @date_type, null, 836, 836
	FROM	gsma.ic_organisation_link ic INNER JOIN organisations o ON ic.organisation_id = o.id
	WHERE	ic.mapped_organisation_id = 901 AND o.status_id IN (0,1309) AND o.id NOT IN (SELECT organisation_id FROM gsma.ds_membership_data WHERE date = @date AND date_type = @date_type)
	
	-- Add operators that aren't yet merged in Infocentre
	INSERT INTO gsma.ds_membership_data (organisation_id, date, date_type, connections, connections_source, revenue_source, is_special_case)
	SELECT	ic.organisation_id, @date, @date_type, ds.value, CASE WHEN ds.source IS null THEN 85 ELSE ds.source END, 85, 1
	FROM	gsma.ic_organisation_link ic LEFT JOIN
			(
				SELECT 	o.id organisation_id, d.date, d.val_i value, d.source_id source, RANK() OVER (PARTITION BY o.id ORDER BY d.date DESC) rank
				FROM 	ds_organisation_data d INNER JOIN organisations o ON d.organisation_id = o.id
				WHERE	d.metric_id = 3 AND d.attribute_id = 0 AND d.date_type = @date_type AND o.id IN (SELECT organisation_id FROM gsma.ic_organisation_link WHERE is_member = 1 AND is_special_case = 1)
			) ds ON (ic.organisation_id = ds.organisation_id AND ds.rank = 1)
	WHERE	ic.is_member = 1 AND ic.is_special_case = 1 AND ic.organisation_id NOT IN (SELECT organisation_id FROM gsma.ds_membership_data WHERE date = @date)

	-- Add any (private) imported data due to delayed Infocentre mergers
	UPDATE	ds
	SET		ds.connections			= CASE WHEN ds2.connections IS NOT null THEN ds2.connections ELSE ds.connections END,
			ds.connections_source	= CASE WHEN ds2.connections IS NOT null THEN ds2.connections_source ELSE ds.connections_source END,
			ds.revenue				= CASE WHEN ds2.revenue IS NOT null THEN ds2.revenue ELSE ds.revenue END,
			ds.revenue_source		= CASE WHEN ds2.revenue IS NOT null THEN ds2.revenue_source ELSE ds.revenue_source END,
			ds.revenue_currency		= CASE WHEN ds2.revenue IS NOT null THEN ds2.revenue_currency ELSE ds.revenue_currency END,
			ds.revenue_attribute	= CASE WHEN ds2.revenue IS NOT null THEN ds2.revenue_attribute ELSE ds.revenue_attribute END,
			ds.revenue_normalised	= CASE WHEN ds2.revenue IS NOT null THEN ds2.revenue_normalised ELSE ds.revenue_normalised END
	FROM	gsma.ds_membership_data ds INNER JOIN wi_import.gsma.ds_membership_data ds2 ON (ds.organisation_id = ds2.organisation_id AND ds.date = ds2.date AND ds.date_type = ds2.date_type)
	WHERE	ds.date = @date AND ds.is_special_case = 1
	
	-- Add "missing" operators
	INSERT INTO gsma.ds_membership_data (organisation_id, date, date_type, connections, connections_source, revenue_source)
	SELECT	o.id, @date, @date_type, null, 1308, 1308
	FROM	organisations o
	WHERE	o.type_id = 1089 AND o.status_id = 1308 AND o.id NOT IN (SELECT organisation_id FROM gsma.ds_membership_data WHERE date = @date AND date_type = @date_type)
	
	-- Add planned operators
	INSERT INTO gsma.ds_membership_data (organisation_id, date, date_type, connections, connections_source, revenue, revenue_source, revenue_attribute, revenue_normalised)
	SELECT	o.id, @date, @date_type, 0, 81, 0, 81, 0, 0
	FROM	organisations o
	WHERE	o.status_id = 81 AND o.type_id = 1089 AND o.id NOT IN (SELECT organisation_id FROM gsma.ds_membership_data WHERE date = @date AND date_type = @date_type)

	-- Finally, add operators that launch _after_ Q3, but are no longer planned!
	-- ...

	
	-- Round data to the nearest unit
	UPDATE gsma.ds_membership_data SET connections = ROUND(connections, 0)
	UPDATE gsma.ds_membership_data SET revenue = ROUND(revenue, 0)
	UPDATE gsma.ds_membership_data SET revenue_normalised = ROUND(revenue_normalised, 0)
	
	
	-- Set connections tier
	UPDATE gsma.ds_membership_data SET connections_tier = null WHERE date = @date AND date_type = @date_type
	
	UPDATE gsma.ds_membership_data SET connections_tier = 0 WHERE connections >= 200000000 AND date = @date AND date_type = @date_type
	UPDATE gsma.ds_membership_data SET connections_tier = 1 WHERE connections >= 125000000 AND connections_tier IS null AND date = @date AND date_type = @date_type
	UPDATE gsma.ds_membership_data SET connections_tier = 2 WHERE connections >=  75000000 AND connections_tier IS null AND date = @date AND date_type = @date_type
	UPDATE gsma.ds_membership_data SET connections_tier = 3 WHERE connections >=  35000000 AND connections_tier IS null AND date = @date AND date_type = @date_type
	UPDATE gsma.ds_membership_data SET connections_tier = 4 WHERE connections >=  15000000 AND connections_tier IS null AND date = @date AND date_type = @date_type
	UPDATE gsma.ds_membership_data SET connections_tier = 5 WHERE connections >=   5000000 AND connections_tier IS null AND date = @date AND date_type = @date_type
	UPDATE gsma.ds_membership_data SET connections_tier = 6 WHERE connections >=   1000000 AND connections_tier IS null AND date = @date AND date_type = @date_type
	UPDATE gsma.ds_membership_data SET connections_tier = 7 WHERE connections_tier IS null AND date = @date AND date_type = @date_type
	
	-- Set revenue tier
	UPDATE gsma.ds_membership_data SET revenue_tier = null WHERE date = @date AND date_type = @date_type
	
	UPDATE gsma.ds_membership_data SET revenue_tier = 0 WHERE revenue_normalised >= 25000000000 AND date = @date AND date_type = @date_type
	UPDATE gsma.ds_membership_data SET revenue_tier = 1 WHERE revenue_normalised >= 15000000000 AND revenue_tier IS null AND date = @date AND date_type = @date_type
	UPDATE gsma.ds_membership_data SET revenue_tier = 2 WHERE revenue_normalised >= 10000000000 AND revenue_tier IS null AND date = @date AND date_type = @date_type
	UPDATE gsma.ds_membership_data SET revenue_tier = 3 WHERE revenue_normalised >=  6000000000 AND revenue_tier IS null AND date = @date AND date_type = @date_type
	UPDATE gsma.ds_membership_data SET revenue_tier = 4 WHERE revenue_normalised >=  4000000000 AND revenue_tier IS null AND date = @date AND date_type = @date_type
	UPDATE gsma.ds_membership_data SET revenue_tier = 5 WHERE revenue_normalised >=  2000000000 AND revenue_tier IS null AND date = @date AND date_type = @date_type
	UPDATE gsma.ds_membership_data SET revenue_tier = 6 WHERE revenue_normalised >=  1000000000 AND revenue_tier IS null AND date = @date AND date_type = @date_type
	UPDATE gsma.ds_membership_data SET revenue_tier = 7 WHERE revenue_tier IS null AND date = @date AND date_type = @date_type
	
	-- Set tier, votes, dues
	UPDATE gsma.ds_membership_data SET tier  = CASE WHEN connections_tier < revenue_tier THEN connections_tier ELSE revenue_tier END WHERE date = @date AND date_type = @date_type
	UPDATE gsma.ds_membership_data SET votes = CASE tier WHEN 0 THEN 500 WHEN 1 THEN 230 WHEN 2 THEN 155 WHEN 3 THEN 95 WHEN 4 THEN 60 WHEN 5 THEN 30 WHEN 6 THEN 15 ELSE 10 END WHERE date = @date AND date_type = @date_type
	UPDATE gsma.ds_membership_data SET dues  = votes * @dues_per_vote, dues_currency = @dues_currency_id WHERE date = @date AND date_type = @date_type	-- WIR008
	
	-- Mark members/non-members
	UPDATE	ds
	SET		ds.is_member = CASE WHEN ic.is_member IS null THEN 0 ELSE ic.is_member END
	FROM	gsma.ds_membership_data ds LEFT JOIN (SELECT * FROM gsma.ic_organisation_link WHERE is_member = 1) ic ON ds.organisation_id = ic.organisation_id -- Avoid joining on multiple entries for is_member = 0 and 1
	WHERE	ds.date = @date AND ds.date_type = @date_type

	-- Mark membership for those currently considered to be regional
	UPDATE gsma.ds_membership_data SET is_member = 1 WHERE date = @date AND date_type = @date_type AND organisation_id IN (47)
	
	-- Set group affinity (require economic ownership of 50% plus one share)
	UPDATE	ds
	SET		ds.group_id = w.group_id
	FROM	(
				SELECT	organisation_id, group_id, RANK() OVER (PARTITION BY organisation_id, date, date_type ORDER BY value DESC) rank
				FROM	ds_group_ownership
				WHERE	date = @date AND date_type = @date_type AND (value > 0.5 OR is_consolidated = 1) -- Majority ownership
		 	) w INNER JOIN gsma.ds_membership_data ds ON w.organisation_id = ds.organisation_id
	WHERE	ds.date = @date AND ds.date_type = @date_type AND w.rank LIKE 
	CASE WHEN (w.organisation_id = 464) THEN 2 ELSE 1 END

	-- TODO: Compound exclusions via group_id NOT IN (920,922,923,1441,1455,2094,4497,5283)
	
	-- Set group affinity for regional operators
	UPDATE	ds
	SET		ds.group_id = w.group_id
	FROM	(
				SELECT	ic.organisation_id, w.group_id, RANK() OVER (PARTITION BY w.organisation_id, w.date, w.date_type ORDER BY w.value DESC) rank
				FROM	ds_group_ownership w INNER JOIN gsma.ic_organisation_link ic ON w.organisation_id = ic.mapped_organisation_id
				WHERE	ic.mapped_organisation_id IN (47) AND w.date = @date AND w.date_type = @date_type AND (w.value > 0.5 OR w.is_consolidated = 1) -- Majority ownership
			) w INNER JOIN gsma.ds_membership_data ds ON w.organisation_id = ds.organisation_id
	WHERE	ds.date = @date AND ds.date_type = @date_type AND w.rank = 1

	-- "Fix" regional operators so their votes only count for the equivalent of a single merged entity (TODO: programatic update based on current parent figures)

	-- Airtel (Bharti)
	UPDATE gsma.ds_membership_data SET votes = 21 WHERE organisation_id = 4405 AND date = @date AND date_type = @date_type
	UPDATE gsma.ds_membership_data SET votes = 209 WHERE organisation_id = 4804 AND date = @date AND date_type = @date_type

	
	-- Finally, impose a group cap of 500 votes by weighting their subsidaries and adjusting for the delta
	UPDATE	ds
	SET		ds.votes_adjusted = FLOOR(CAST(ds.votes AS decimal(22,4)) * @vote_cap/v.sum_votes) -- Floor here to arrive under the @vote_cap
	FROM	(
				SELECT	group_id, CAST(SUM(votes) AS decimal(22,4)) sum_votes
				FROM	gsma.ds_membership_data
				WHERE	date = @date AND date_type = @date_type AND is_member = 1
				GROUP BY group_id HAVING SUM(votes) > @vote_cap
			) v INNER JOIN gsma.ds_membership_data ds ON (v.group_id = ds.group_id)
	WHERE	ds.date = @date AND ds.date_type = @date_type AND ds.group_id IS NOT null
	
	UPDATE	ds
	SET		ds.votes_adjusted = ds.votes_adjusted + 1 -- Add one vote...
	FROM	gsma.ds_membership_data ds INNER JOIN
			(
				SELECT	organisation_id, group_id, RANK() OVER (PARTITION BY group_id ORDER BY connections DESC) rank
				FROM	gsma.ds_membership_data
				WHERE	date = @date AND date_type = @date_type AND group_id IS NOT null AND is_member = 1
			) r ON (ds.group_id = r.group_id AND ds.organisation_id = r.organisation_id) INNER JOIN
			(
				SELECT	group_id, SUM(votes_adjusted) sum_votes, @vote_cap - SUM(votes_adjusted) deficit_votes
				FROM	gsma.ds_membership_data
				WHERE	date = @date AND date_type = @date_type AND group_id IS NOT null AND is_member = 1
				GROUP BY group_id HAVING SUM(votes) > @vote_cap AND SUM(votes_adjusted) <> @vote_cap
			) v ON (r.group_id = v.group_id AND r.rank <= v.deficit_votes) -- ... to each of the largest subsidaries up to a limit equal to the current deficit from @vote_cap
	WHERE	ds.date = @date AND ds.date_type = @date_type
	
	UPDATE gsma.ds_membership_data SET dues_adjusted = votes_adjusted * @dues_per_vote WHERE votes_adjusted IS NOT null AND date = @date AND date_type = @date_type

	
	-- *Specific organisation update
	update dbo.organisations SET status_id = 0 where id = 6143;
	update dbo.organisations SET status_id = 0 where id = 6211;
	update dbo.organisations SET status_id = 0 where id = 5822;
	update dbo.organisations SET status_id = 1309 where id = 4405;
	update dbo.organisations SET status_id = 0 where id = 3677;
	update dbo.organisations SET status_id = 0 where id = 6578;
	update dbo.organisations SET status_id = 0 where id = 5622;
	update dbo.organisations SET status_id = 0 where id = 6154;
	update dbo.organisations SET status_id = 0 where id = 6341;
	-- *udpate end
	
	-- *Specific organisation delete (deleting international organisations)
	delete from gsma.ds_membership_data where organisation_id IN (6322, 4776, 3281);
	-- *delete end


END

SELECT 'Done'

DROP TABLE #data
DROP TABLE #metadata
DROP TABLE #regional]]></Value>
			</Property>
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[@date_spot]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[current_reporting_quarter]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[@debug]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[@date]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[@date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[connections]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[connections_source]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[revenue_total]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[revenue_total_currency]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[revenue_total_source]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[revenue_recurring]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[revenue_recurring_currency]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[revenue_recurring_source]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[arpu]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[arpu_currency]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[arpu_source]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#regional]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#regional].[mapped_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#regional].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#regional].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#regional].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#regional].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#regional].[connections]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#regional].[connections_source]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#regional].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#regional].[mapped_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#regional].[mapped_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#regional].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[connections]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[connections]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[revenue_total]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[revenue_recurring]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[arpu]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[revenue_total_currency]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[revenue_recurring_currency]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[arpu_currency]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[arpu_source]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[revenue_recurring]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[arpu]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[revenue_recurring_currency]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[arpu_currency]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[revenue_recurring_source]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[revenue_total]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[revenue_total_currency]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[revenue_total_fx]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[revenue_recurring_currency]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[revenue_recurring_fx]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#metadata]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[revenue_total_source]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#metadata].[total_source]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#metadata].[total_source_min]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#metadata].[total_source_max]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#metadata].[recurring_source]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#metadata].[recurring_source_min]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#metadata].[recurring_source_max]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[revenue_total_fx]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[revenue_recurring_fx]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[gsma].[ds_membership_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[group_id]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[connections]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[connections_source]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[connections_tier]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[revenue]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[revenue_currency]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[revenue_source]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[revenue_attribute]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[revenue_normalised]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[revenue_tier]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[tier]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[votes]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[votes_adjusted]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[dues]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[dues_adjusted]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[dues_currency]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[is_member]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[is_special_case]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[created_on]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[created_by]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[last_update_on]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[last_update_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[revenue_recurring]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[revenue_recurring_fx]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[revenue]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[revenue_normalised]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[revenue_attribute]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[revenue_source]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[revenue_total]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[revenue_total_fx]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#metadata].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[revenue_attribute]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#metadata].[total_source]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#metadata].[recurring_source]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[revenue]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[revenue_source]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[revenue_total_currency]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[arpu_source]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[arpu]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[revenue_recurring]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[is_spot]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[arpu]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[revenue_recurring]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[is_spot]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[gsma].[ds_membership_data].[date_type]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[gsma].[ds_membership_data].[connections]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[gsma].[ds_membership_data].[connections_source]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[gsma].[ds_membership_data].[revenue_currency]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[dbo].[calculate_membership].[#data].[revenue_recurring_source]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[status_id]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ic_organisation_link]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ic_organisation_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ic_organisation_link].[mapped_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[status_id]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ic_organisation_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ic_organisation_link].[is_member]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ic_organisation_link].[is_special_case]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ic_organisation_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ic_organisation_link].[is_member]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ic_organisation_link].[is_special_case]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[is_special_case]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ic_organisation_link].[is_member]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ic_organisation_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[is_member]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ic_organisation_link].[is_member]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[group_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[is_consolidated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[group_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[group_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ic_organisation_link].[mapped_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ic_organisation_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[group_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[is_consolidated]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ic_organisation_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[group_id]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[group_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[votes]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[is_member]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[group_id]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[votes_adjusted]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[votes]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[connections]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[group_id]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[votes_adjusted]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[calculate_membership].[#data]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_membership].[#data].[organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_membership].[#data].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_membership].[#data].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_membership].[#data].[connections]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_membership].[#data].[connections_source]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_membership].[#data].[revenue_total]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_membership].[#data].[revenue_total_currency]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_membership].[#data].[revenue_total_fx]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="6" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_membership].[#data].[revenue_total_source]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_membership].[#data].[revenue_recurring]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_membership].[#data].[revenue_recurring_currency]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_membership].[#data].[revenue_recurring_fx]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="6" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_membership].[#data].[revenue_recurring_source]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_membership].[#data].[arpu]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_membership].[#data].[arpu_currency]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_membership].[#data].[arpu_source]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[calculate_membership].[#metadata]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_membership].[#metadata].[organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_membership].[#metadata].[total_source]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_membership].[#metadata].[total_source_min]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_membership].[#metadata].[total_source_max]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_membership].[#metadata].[recurring_source]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_membership].[#metadata].[recurring_source_min]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_membership].[#metadata].[recurring_source_max]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[calculate_membership].[#regional]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_membership].[#regional].[organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_membership].[#regional].[mapped_organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_membership].[#regional].[attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_membership].[#regional].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_membership].[#regional].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_membership].[#regional].[connections]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_membership].[#regional].[connections_source]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_membership].[@date]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_membership].[@date_type]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA['Q']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_membership].[@date_spot]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_membership].[@debug]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="35615" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[calculate_membership]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@date datetime,&#xD;&#xA;&#x9;@date_type char(1) = 'Q',&#xD;&#xA;&#x9;@date_spot datetime = null,&#xD;&#xA;&#x9;@debug bit = 1&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[calculate_moving_mean]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[

DECLARE @is_decimal bit = dbo.metric_is_decimal(@metric_id)
DECLARE @is_decimal_2 bit = dbo.metric_is_decimal(@metric_id_2)
DECLARE @is_decimal_3 bit = dbo.metric_is_decimal(@metric_id_3)

DECLARE @is_currency_based bit = dbo.metric_is_currency_based(@metric_id)

-- Calculation table; use twice the precision as the final stored value to allow for accuracy when converting currencies
CREATE TABLE #data (id bigint, organisation_id int, metric_id int, attribute_id int, date datetime, date_type char(1) COLLATE DATABASE_DEFAULT, value decimal(22,6), currency_id int, source_id int, confidence_id int, id_2 bigint, metric_id_2 int, attribute_id_2 int, value_2 decimal(22,6), currency_id_2 int, source_id_2 int, confidence_id_2 int, currency_rate decimal(22,6))
CREATE TABLE #calc (id bigint, organisation_id int, metric_id int, attribute_id int, date datetime, date_type char(1) COLLATE DATABASE_DEFAULT, value decimal(22,6), currency_id int, source_id int, confidence_id int, is_calculated bit, processed bit)

-- Collect all operator figures for both input metrics
INSERT INTO #data
SELECT	DISTINCT
		null,
		ds.organisation_id,
		@metric_id_2,
		@attribute_id_2,
		ds.date,
		ds.date_type,
		null,
		null,
		null,
		null,
		null,
		@metric_id_3,
		@attribute_id_3,
		null,
		null,
		null,
		null,
		null
		
FROM	ds_organisation_data ds INNER JOIN
		organisations o ON ds.organisation_id = o.id

WHERE	(
			(ds.metric_id = @metric_id_2 AND ds.attribute_id = @attribute_id_2) OR
			(ds.metric_id = @metric_id_3 AND ds.attribute_id = @attribute_id_3)
		) AND
		ds.date >= @date_start AND
		ds.date < @date_end AND
		ds.date_type = @date_type AND
		ds.status_id = 3 AND
		o.type_id = 1089
		
ORDER BY ds.organisation_id, ds.date_type, ds.date

UPDATE	d
SET		d.id = ds.id, d.value = CASE @is_decimal_2 WHEN 1 THEN ds.val_d ELSE CAST(ds.val_i AS decimal(22,6)) END, d.currency_id = ds.currency_id, d.source_id = ds.source_id, d.confidence_id = ds.confidence_id
FROM	ds_organisation_data ds INNER JOIN #data d ON (ds.organisation_id = d.organisation_id AND ds.metric_id = d.metric_id AND ds.attribute_id = d.attribute_id AND ds.date = d.date AND ds.date_type = d.date_type)
WHERE	ds.metric_id = @metric_id_2 AND ds.attribute_id = @attribute_id_2

UPDATE	d
SET		d.id_2 = ds.id, d.value_2 = CASE @is_decimal_3 WHEN 1 THEN ds.val_d ELSE CAST(ds.val_i AS decimal(22,6)) END, d.currency_id_2 = ds.currency_id, d.source_id_2 = ds.source_id, d.confidence_id_2 = ds.confidence_id
FROM	ds_organisation_data ds INNER JOIN #data d ON (ds.organisation_id = d.organisation_id AND ds.metric_id = d.metric_id_2 AND ds.attribute_id = d.attribute_id_2 AND ds.date = d.date AND ds.date_type = d.date_type)
WHERE	ds.metric_id = @metric_id_3 AND ds.attribute_id = @attribute_id_3


-- Get the exchange rate conversion if @metric_id_2 is reported in a different currency to @metric_id_3, using a common intermediary currency
UPDATE	d
SET		d.currency_rate = CASE cr.value WHEN 0 THEN 0 ELSE cr2.value/cr.value END
FROM	#data d INNER JOIN currency_rates cr ON (d.currency_id = cr.from_currency_id AND cr.to_currency_id = 2 AND d.date = cr.date AND d.date_type = cr.date_type) INNER JOIN currency_rates cr2 ON (d.currency_id_2 = cr2.from_currency_id AND cr2.to_currency_id = 2 AND d.date = cr2.date AND d.date_type = cr2.date_type)
WHERE	d.currency_id <> d.currency_id_2 AND d.currency_id <> 0 AND d.currency_id_2 <> 0

-- Else, we can divide the data as-reported
UPDATE	#data SET currency_rate = 1 WHERE currency_rate IS null


-- Update missing values, source and confidence
UPDATE #data SET value_2 = 0 WHERE value_2 IS null
UPDATE #data SET currency_id_2 = currency_id WHERE currency_id_2 IS null
UPDATE #data SET source_id_2 = source_id WHERE source_id_2 IS null
UPDATE #data SET confidence_id_2 = confidence_id WHERE confidence_id_2 IS null


-- Calculate moving ratio based on values
INSERT INTO #calc
SELECT	null,
		d.organisation_id,
		@metric_id,
		@attribute_id,
		d.date,
		d.date_type,
		CASE WHEN d3.summed_value IS null THEN null WHEN d3.summed_value = 0 THEN null ELSE d2.summed_value/d3.summed_value END,
		CASE @is_currency_based WHEN 1 THEN d.currency_id ELSE 0 END,
		CASE WHEN d.source_id < d.source_id_2 THEN d.source_id ELSE d.source_id_2 END, -- MIN() only works over columns
		CASE WHEN d.confidence_id > d.confidence_id_2 THEN d.confidence_id ELSE d.confidence_id_2 END, -- MAX() only works over columns
		1,
		0

FROM	#data d INNER JOIN
		(
			-- Moving sum 
			SELECT	d.organisation_id, d.date, SUM(d2.value) summed_value
			FROM	#data d INNER JOIN #data d2 ON (d.organisation_id = d2.organisation_id AND d2.value <> 0 AND d2.date > DATEADD(quarter, CASE @date_type WHEN 'Q' THEN -@date_period WHEN 'H' THEN -@date_period * 2 WHEN 'Y' THEN -@date_period * 4 END, d.date) AND d2.date <= d.date)
			GROUP BY d.organisation_id, d.date
			HAVING COUNT(d2.value) >= 4
		) d2 ON d.organisation_id = d2.organisation_id AND d.date = d2.date INNER JOIN
		(
			SELECT	d.organisation_id, d.date, SUM(d2.value_2 * d2.currency_rate) summed_value
			FROM	#data d INNER JOIN #data d2 ON (d.organisation_id = d2.organisation_id AND d2.value_2 <> 0 AND d2.date > DATEADD(quarter, CASE @date_type WHEN 'Q' THEN -@date_period WHEN 'H' THEN -@date_period * 2 WHEN 'Y' THEN -@date_period * 4 END, d.date) AND d2.date <= d.date)
			GROUP BY d.organisation_id, d.date
			HAVING COUNT(d2.value_2) >= 4
		) d3 ON d.organisation_id = d3.organisation_id AND d.date = d3.date

ORDER BY d.organisation_id, d.date

-- Update with corresponding existing data point ids
UPDATE	c
SET		c.id = ds.id, c.is_calculated = ds.is_calculated
FROM	ds_organisation_data ds INNER JOIN #calc c ON (ds.organisation_id = c.organisation_id AND ds.metric_id = c.metric_id AND ds.attribute_id = c.attribute_id AND ds.date = c.date AND ds.date_type = c.date_type)
WHERE	ds.metric_id = @metric_id AND ds.attribute_id = @attribute_id


-- Remove any NULL data
DELETE FROM #calc WHERE value IS null


IF @debug = 0
BEGIN
	-- UPDATE the _calculated_ values that already exist
	UPDATE	ds
	SET		ds.val_d = CASE @is_decimal WHEN 1 THEN ROUND(c.value, 4) ELSE null END, ds.val_i = CASE @is_decimal WHEN 1 THEN null ELSE ROUND(c.value, 0) END, ds.currency_id = c.currency_id, ds.is_calculated = c.is_calculated, ds.source_id = c.source_id, ds.confidence_id = c.confidence_id, ds.last_update_on = CASE WHEN CAST(ds.val_i AS decimal(22,6)) = c.value THEN ds.last_update_on ELSE GETDATE() END, ds.last_update_by = CASE WHEN CAST(ds.val_i AS decimal(22,6)) = c.value THEN ds.last_update_by ELSE 11770 END
	FROM	ds_organisation_data ds INNER JOIN #calc c ON ds.id = c.id
	WHERE	ds.is_calculated = 1 AND c.value IS NOT null

	-- INSERT the remainder
	INSERT INTO ds_organisation_data (organisation_id, metric_id, attribute_id, date, date_type, val_d, val_i, currency_id, source_id, confidence_id, is_calculated, created_by)
	SELECT	c.organisation_id, c.metric_id, c.attribute_id, c.date, c.date_type, CASE @is_decimal WHEN 1 THEN ROUND(c.value, 4) ELSE null END, CASE @is_decimal WHEN 1 THEN null ELSE ROUND(c.value, 0) END, c.currency_id, c.source_id, c.confidence_id, 1, 11770
	FROM	#calc c
	WHERE	c.id IS null AND c.value IS NOT null
END

IF @debug = 1
BEGIN
	SELECT * FROM #calc ORDER BY organisation_id, date
END


-- TODO: add benchmark by passing a start time to an audit function
SELECT 'Finished: calculate_moving_mean (17s)'

DROP TABLE #data
DROP TABLE #calc]]></Value>
			</Property>
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metric_is_decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[@metric_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[@metric_id_2]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[@metric_id_3]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metric_is_currency_based]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[@attribute_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[@attribute_id_3]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[@date_start]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[@date_end]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[@date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[metric_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[attribute_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[value_2]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[currency_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[source_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[confidence_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[currency_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[currency_rate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[currency_rate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[value_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[currency_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[source_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[confidence_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#calc]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[@date_period]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[value_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[currency_rate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[@attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#calc].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#calc].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#calc].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#calc].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#calc].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#calc].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#calc].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#calc].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[@debug]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#calc].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#calc].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#calc].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#calc].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#calc].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#calc].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_on]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_by]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[created_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#calc].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#calc].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#calc].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#calc].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#calc].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#calc].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#calc].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#calc].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#calc].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#calc].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_moving_mean].[#calc].[date]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[calculate_moving_mean].[#data]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_moving_mean].[#data].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_moving_mean].[#data].[organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_moving_mean].[#data].[metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_moving_mean].[#data].[attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_moving_mean].[#data].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_moving_mean].[#data].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_moving_mean].[#data].[value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="6" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_moving_mean].[#data].[currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_moving_mean].[#data].[source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_moving_mean].[#data].[confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_moving_mean].[#data].[id_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_moving_mean].[#data].[metric_id_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_moving_mean].[#data].[attribute_id_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_moving_mean].[#data].[value_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="6" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_moving_mean].[#data].[currency_id_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_moving_mean].[#data].[source_id_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_moving_mean].[#data].[confidence_id_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_moving_mean].[#data].[currency_rate]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="6" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[calculate_moving_mean].[#calc]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_moving_mean].[#calc].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_moving_mean].[#calc].[organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_moving_mean].[#calc].[metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_moving_mean].[#calc].[attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_moving_mean].[#calc].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_moving_mean].[#calc].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_moving_mean].[#calc].[value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="6" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_moving_mean].[#calc].[currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_moving_mean].[#calc].[source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_moving_mean].[#calc].[confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_moving_mean].[#calc].[is_calculated]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_moving_mean].[#calc].[processed]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_moving_mean].[@metric_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_moving_mean].[@attribute_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_moving_mean].[@metric_id_2]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_moving_mean].[@attribute_id_2]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_moving_mean].[@metric_id_3]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_moving_mean].[@attribute_id_3]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_moving_mean].[@date_start]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_moving_mean].[@date_end]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_moving_mean].[@date_type]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA['Q']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_moving_mean].[@date_period]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[4]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_moving_mean].[@debug]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="4" />
				<Property Name="Length" Value="8093" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [dbo].[calculate_moving_mean]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@metric_id int,&#x9;&#x9;&#x9;&#x9;-- Output metric.id&#xD;&#xA;&#x9;@attribute_id int,&#x9;&#x9;&#x9;-- Output attribute.id&#xD;&#xA;&#x9;@metric_id_2 int,&#x9;&#x9;&#x9;-- Input metric.id, the dividend&#xD;&#xA;&#x9;@attribute_id_2 int,&#x9;&#x9;-- Input attribute.id&#xD;&#xA;&#x9;@metric_id_3 int,&#x9;&#x9;&#x9;-- Input metric.id, the divisor&#xD;&#xA;&#x9;@attribute_id_3 int,&#x9;&#x9;-- Input attribute.id&#xD;&#xA;&#x9;@date_start datetime,&#xD;&#xA;&#x9;@date_end datetime,&#xD;&#xA;&#x9;@date_type char(1) = 'Q',&#xD;&#xA;&#x9;@date_period int = 4,&#x9;&#x9;-- Corresponds in unit to the date_type when calculating the moving average&#xD;&#xA;&#x9;@debug bit = 1&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[calculate_normalised_splits]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[

-- Get all metric data, totals and splits for the current @metric_id/@attribute_id and @type_id
CREATE TABLE #calc (id bigint, organisation_id int, metric_id int, attribute_id int, date datetime, date_type char(1) COLLATE DATABASE_DEFAULT, value decimal(22,8), new_value decimal(22,8), source_id int, confidence_id int, delta bit, total decimal(22,8), sum_estimated_values decimal(22,8), sum_reported_values decimal(22,8), weighting_value decimal(22,8), sum_new_estimated_values decimal(22,8), process bit, processed bit)

INSERT INTO #calc
SELECT	ds.id,
		ds.organisation_id,
		ds.metric_id,
		ds.attribute_id,
		ds.date,
		ds.date_type,
		CAST(ds.val_i AS decimal(22,8)),
		null,
		ds.source_id,
		ds.confidence_id,
		0,
		null,
		null,
		null,
		null,
		null,
		0,
		1

FROM	ds_organisation_data ds INNER JOIN 
		organisations o ON ds.organisation_id = o.id INNER JOIN
		attributes a ON ds.attribute_id = a.id

WHERE	ds.metric_id = @metric_id AND
		(a.id = @attribute_id OR a.type_id = @type_id) AND
		ds.date >= @date_start AND
		ds.date < @date_end AND
		ds.date_type = 'Q' AND
		o.type_id = 1089 

ORDER BY ds.organisation_id, ds.date_type, ds.date, ds.val_i DESC


-- Create a table showing a count of the splits and any deltas
CREATE TABLE #normalisation (organisation_id int, date datetime, date_type char(1) COLLATE DATABASE_DEFAULT, total decimal(22,8), count int, sum decimal(22,8), delta decimal(22,8))

INSERT INTO #normalisation
SELECT	c.organisation_id,
		c.date,
		c.date_type,
		null,
		COUNT(c.value),
		SUM(c.value),
		null

FROM	#calc c

WHERE	c.attribute_id <> @attribute_id

GROUP BY c.organisation_id, c.date, c.date_type

-- Update table with the "total" value and calculate split delta against it
UPDATE	n
SET		n.total = c.value
		
FROM	#normalisation n INNER JOIN
		#calc c ON (n.organisation_id = c.organisation_id AND n.date = c.date AND n.date_type = c.date_type)
		
WHERE	c.attribute_id = @attribute_id

UPDATE #normalisation SET delta = total - sum


-- Simply match value/source/confidence in any quarters in which operators have a single split
UPDATE	c1
SET		c1.new_value = c2.value, 
		c1.source_id = c2.source_id,
		c1.confidence_id = c2.confidence_id,
		c1.process = 1
		
FROM	#calc c1 INNER JOIN
		#calc c2 ON (c1.organisation_id = c2.organisation_id AND c1.date = c2.date AND c1.date_type = c2.date_type) INNER JOIN
		#normalisation n ON (c1.organisation_id = n.organisation_id AND c1.date = n.date AND c1.date_type = n.date_type)
		
WHERE	c1.attribute_id <> @attribute_id AND
		c2.attribute_id = @attribute_id AND
		n.count = 1 AND
		(
			n.delta <> 0 OR
			c1.source_id <> c2.source_id OR
			c1.confidence_id <> c2.confidence_id
		)


-- Mark operators and quarters with a flag where deltas remain
UPDATE	c
SET		c.delta = 1

FROM	#calc c INNER JOIN
		#normalisation n ON (c.organisation_id = n.organisation_id AND c.date = n.date AND c.date_type = n.date_type)
		
WHERE	n.count > 1 AND
		n.delta <> 0

-- Normalise data in quarters with 2 or more splits, netting off the largest split
-- First get the old sum of estimated splits to calculate a weighting between them which we apply to the new (total - reported splits)
UPDATE	c1
SET		c1.sum_estimated_values = c2.sum

FROM	#calc c1 INNER JOIN
		(
			SELECT	organisation_id,
					date,
					date_type,
					SUM(value) sum
					
			FROM	#calc
			
			WHERE	attribute_id <> @attribute_id AND
					confidence_id <> 192 AND -- Exclude reported split data which is simply netted off, not weighted
					delta = 1
				
			GROUP BY organisation_id, date, date_type
		) c2 ON (c1.organisation_id = c2.organisation_id AND c1.date = c2.date AND c1.date_type = c2.date_type)

WHERE	c1.attribute_id <> @attribute_id AND
		c1.delta = 1

-- Set the sum of reported splits
UPDATE	c1
SET		c1.sum_reported_values = c2.sum

FROM	#calc c1 INNER JOIN
		(
			SELECT	organisation_id,
					date,
					date_type,
					SUM(value) sum
					
			FROM	#calc
			
			WHERE	attribute_id <> @attribute_id AND
					confidence_id = 192 AND -- Only reported splits
					delta = 1
				
			GROUP BY organisation_id, date, date_type
		) c2 ON (c1.organisation_id = c2.organisation_id AND c1.date = c2.date AND c1.date_type = c2.date_type)

WHERE	c1.attribute_id <> @attribute_id AND
		c1.delta = 1

UPDATE #calc SET sum_reported_values = 0 WHERE delta = 1 AND attribute_id <> @attribute_id AND sum_reported_values IS null

-- Set the value of the "total"
UPDATE	c1
SET		c1.total = c2.value

FROM	#calc c1 INNER JOIN
		#calc c2 ON (c1.organisation_id = c2.organisation_id AND c1.date = c2.date AND c1.date_type = c2.date_type)

WHERE	c1.attribute_id <> @attribute_id AND
		c1.delta = 1 AND
		c2.attribute_id = @attribute_id
		
UPDATE #calc SET weighting_value = value / sum_estimated_values WHERE delta = 1 AND attribute_id <> @attribute_id AND confidence_id <> 192 AND sum_estimated_values <> 0
UPDATE #calc SET new_value = ROUND((total - sum_reported_values) * weighting_value, 0) WHERE delta = 1 AND attribute_id <> @attribute_id AND confidence_id <> 192 AND weighting_value <> 0

-- Now that we have correctly weighted the splits against the new total, find any rounding net-off using the largest estimated split to absorb the difference
UPDATE	c1
SET		c1.sum_new_estimated_values = c2.sum

FROM	#calc c1 INNER JOIN
		(
			SELECT	organisation_id,
					date,
					date_type,
					SUM(new_value) sum
			
			FROM	(
						SELECT	organisation_id,
								date,
								date_type,
								new_value,
								RANK() OVER (PARTITION BY organisation_id, date, date_type ORDER BY new_value DESC, attribute_id) rank -- In the event of equal value ranks, we still need distinct ranks
			
						FROM	#calc
			
						WHERE	attribute_id <> @attribute_id AND
								confidence_id <> 192 AND
								delta = 1
					) c3
			
			WHERE	rank <> 1
			
			GROUP BY organisation_id, date, date_type
		) c2 ON (c1.organisation_id = c2.organisation_id AND c1.date = c2.date AND c1.date_type = c2.date_type)

WHERE	c1.attribute_id <> @attribute_id AND
		c1.delta = 1

UPDATE #calc SET sum_new_estimated_values = 0 WHERE delta = 1 AND attribute_id <> @attribute_id AND sum_new_estimated_values IS null

-- Finally, net sum_new_estimated_values and sum_reported_values from the total using the largest estimated split
UPDATE	c1
SET		c1.processed = 0

FROM	#calc c1 INNER JOIN
		(
			SELECT	organisation_id,
					date,
					date_type,
					attribute_id
			
			FROM	(
						SELECT	organisation_id,
								date,
								date_type,
								attribute_id,
								RANK() OVER (PARTITION BY organisation_id, date, date_type ORDER BY new_value DESC, attribute_id) rank -- In the event of equal value ranks, we still need distinct ranks
			
						FROM	#calc
			
						WHERE	attribute_id <> @attribute_id AND
								confidence_id <> 192 AND
								delta = 1
					) c3
			
			WHERE	rank = 1
		) c2 ON (c1.organisation_id = c2.organisation_id AND c1.attribute_id = c2.attribute_id AND c1.date = c2.date AND c1.date_type = c2.date_type)

WHERE	c1.attribute_id <> @attribute_id AND
		c1.delta = 1

UPDATE #calc SET new_value = total - sum_reported_values - sum_new_estimated_values WHERE delta = 1 AND attribute_id <> @attribute_id AND confidence_id <> 192 AND processed = 0
UPDATE #calc SET new_value = null WHERE new_value <= 0


-- Commit all new values to database
IF @debug = 0
BEGIN
	-- Remove any NULL data
	DELETE FROM #calc WHERE new_value IS null

	-- UPDATE the values that already exist
	DECLARE @last_update_on datetime = GETDATE()
	
	UPDATE	ds
	SET		ds.val_d = null,
			ds.val_i = CAST(c.new_value AS bigint),
			ds.source_id = c.source_id,
			ds.confidence_id = c.confidence_id,
			ds.last_update_on = @last_update_on,
			ds.last_update_by = 11770
	
	FROM	ds_organisation_data ds INNER JOIN
			#calc c ON ds.id = c.id
	
	WHERE	c.attribute_id <> @attribute_id AND		-- Don't include a conf <> 192 condition as we want to update single-split values too which inherit source/confidence from total
			(
				c.new_value <> c.value OR
				c.process = 1						-- Update source/confidence only
			)
END

IF @debug = 1
BEGIN
	--SELECT * FROM #normalisation ORDER BY organisation_id, date_type, date
	--SELECT * FROM #calc ORDER BY organisation_id, date_type, date, attribute_id
	
	--SELECT * FROM #normalisation WHERE delta <> 0 ORDER BY organisation_id, date, date_type
	--SELECT * FROM #calc WHERE delta = 1 ORDER BY organisation_id, date_type, date, attribute_id
	
	--SELECT * FROM #calc WHERE new_value < 0 ORDER BY organisation_id, date_type, date, attribute_id
	SELECT * FROM #calc WHERE organisation_id = 107
END


-- TODO: add benchmark by passing a start time to an audit function
SELECT 'Finished: calculate_normalised_connections (7s)'

DROP TABLE #normalisation
DROP TABLE #calc]]></Value>
			</Property>
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[@metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[@attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[@type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[@date_start]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[@date_end]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#normalisation]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#normalisation].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#normalisation].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#normalisation].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#normalisation].[total]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#normalisation].[delta]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#normalisation].[total]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#normalisation].[sum]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[new_value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[process]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#normalisation].[count]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#normalisation].[delta]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[delta]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[delta]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[sum_estimated_values]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[delta]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[sum_reported_values]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[sum_reported_values]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[delta]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[total]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[weighting_value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[sum_estimated_values]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[new_value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[total]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[new_value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[delta]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[new_value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[sum_new_estimated_values]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[sum_new_estimated_values]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[processed]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[processed]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[@debug]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bigint]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[new_value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[process]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_normalised_splits].[#calc].[organisation_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[calculate_normalised_splits].[#calc]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_normalised_splits].[#calc].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_normalised_splits].[#calc].[organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_normalised_splits].[#calc].[metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_normalised_splits].[#calc].[attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_normalised_splits].[#calc].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_normalised_splits].[#calc].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_normalised_splits].[#calc].[value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_normalised_splits].[#calc].[new_value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_normalised_splits].[#calc].[source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_normalised_splits].[#calc].[confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_normalised_splits].[#calc].[delta]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_normalised_splits].[#calc].[total]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_normalised_splits].[#calc].[sum_estimated_values]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_normalised_splits].[#calc].[sum_reported_values]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_normalised_splits].[#calc].[weighting_value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_normalised_splits].[#calc].[sum_new_estimated_values]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_normalised_splits].[#calc].[process]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_normalised_splits].[#calc].[processed]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[calculate_normalised_splits].[#normalisation]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_normalised_splits].[#normalisation].[organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_normalised_splits].[#normalisation].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_normalised_splits].[#normalisation].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_normalised_splits].[#normalisation].[total]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_normalised_splits].[#normalisation].[count]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_normalised_splits].[#normalisation].[sum]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_normalised_splits].[#normalisation].[delta]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_normalised_splits].[@metric_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_normalised_splits].[@attribute_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_normalised_splits].[@type_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_normalised_splits].[@date_start]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_normalised_splits].[@date_end]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_normalised_splits].[@debug]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="9173" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[calculate_normalised_splits]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@metric_id int,&#xD;&#xA;&#x9;@attribute_id int,&#xD;&#xA;&#x9;@type_id int,&#xD;&#xA;&#x9;@date_start datetime,&#xD;&#xA;&#x9;@date_end datetime,&#xD;&#xA;&#x9;@debug bit = 1&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[calculate_opex]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[

DECLARE @is_decimal bit
SET @is_decimal = dbo.metric_is_decimal(65)

-- Calculation table; use twice the precision as the final stored value to allow for accuracy when converting currencies
CREATE TABLE #calc (id bigint, organisation_id int, metric_id int, attribute_id int, date datetime, date_type char(1) COLLATE DATABASE_DEFAULT, value decimal(32,8), currency_id int, is_calculated bit, source_id int, confidence_id int, calc_value decimal(32,8), calc_currency_id int, calc_value_2 decimal(32,8), calc_currency_id_2 int, currency_rate decimal(32,8), calc_currency_rate decimal(32,8), calc_currency_rate_2 decimal(32,8), processed bit)

-- Get all data points for these mixed metrics as a reference set
INSERT INTO #calc
SELECT	DISTINCT null, ds.organisation_id, null, null, ds.date, ds.date_type, null, null, 0, null, null, null, null, null, null, null, null, null, 0
FROM	ds_organisation_data ds
WHERE	ds.metric_id IN (18,29,65) AND ds.attribute_id = 0 AND ds.date >= @date_start AND ds.date < @date_end

-- Update with corresponding opex data points
UPDATE	c
SET		c.id = ds.id, c.metric_id = ds.metric_id, c.attribute_id = ds.attribute_id, c.value = CASE WHEN ds.val_d IS null THEN CAST(ds.val_i AS decimal(32,8)) ELSE ds.val_d END, c.currency_id = ds.currency_id, c.is_calculated = ds.is_calculated, c.source_id = ds.source_id, c.confidence_id = ds.confidence_id
FROM	ds_organisation_data ds INNER JOIN #calc c ON (ds.organisation_id = c.organisation_id AND ds.date = c.date AND ds.date_type = c.date_type)
WHERE	ds.metric_id = 65 AND ds.attribute_id = 0

-- Update with corresponding revenue data points
UPDATE	c
SET		c.calc_value = CASE WHEN ds.val_d IS null THEN CAST(ds.val_i AS decimal(32,8)) ELSE ds.val_d END, c.calc_currency_id = ds.currency_id
FROM	ds_organisation_data ds INNER JOIN #calc c ON (ds.organisation_id = c.organisation_id AND ds.date = c.date AND ds.date_type = c.date_type)
WHERE	ds.metric_id = 18 AND ds.attribute_id = 0

-- Update with corresponding EBITDA data points
UPDATE	c
SET		c.calc_value_2 = CASE WHEN ds.val_d IS null THEN CAST(ds.val_i AS decimal(32,8)) ELSE ds.val_d END, c.calc_currency_id_2 = ds.currency_id
FROM	ds_organisation_data ds INNER JOIN #calc c ON (ds.organisation_id = c.organisation_id AND ds.date = c.date AND ds.date_type = c.date_type)
WHERE	ds.metric_id = 29 AND ds.attribute_id = 0


-- Get the exchange rate conversion if revenue is reported in a different currency to EBITDA
UPDATE #calc SET currency_rate = 1 WHERE calc_currency_id = calc_currency_id_2

UPDATE	c
SET		c.calc_currency_id = cr.value, c.calc_currency_id_2 = cr2.value
FROM	#calc c INNER JOIN currency_rates cr ON (c.calc_currency_id = cr.from_currency_id AND cr.to_currency_id = 2 AND c.date = cr.date AND c.date_type = cr.date_type) INNER JOIN currency_rates cr2 ON (c.calc_currency_id_2 = cr2.from_currency_id AND cr2.to_currency_id = 2 AND c.date = cr2.date AND c.date_type = cr2.date_type)
WHERE	c.calc_currency_id <> c.calc_currency_id_2

-- Since we don't hold every relationship between currencies, simply use the ratio of conversions between USD
UPDATE #calc SET currency_rate = calc_currency_rate_2 / calc_currency_rate WHERE calc_currency_id <> calc_currency_id_2


-- Update _calculated_ values, leaving reported values untouched
UPDATE	c
SET		c.value = c.calc_value - (c.calc_value_2 * c.currency_rate), c.currency_id = c.calc_currency_id, c.is_calculated = 1, c.source_id = 6, c.confidence_id = 194
FROM	#calc c
WHERE	(c.is_calculated = 1 OR c.is_calculated IS null) AND c.calc_value IS NOT null AND c.calc_value_2 IS NOT null

-- Remove any NULL data
DELETE FROM #calc WHERE value IS null


IF @debug = 0
BEGIN
	-- UPDATE the _calculated_ values that already exist
	UPDATE	ds
	SET		ds.val_d = CASE @is_decimal WHEN 1 THEN ROUND(c.value, 4) ELSE null END, ds.val_i = CASE @is_decimal WHEN 1 THEN null ELSE ROUND(c.value, 0) END, ds.currency_id = c.currency_id, ds.is_calculated = c.is_calculated, ds.source_id = c.source_id, ds.confidence_id = c.confidence_id, ds.last_update_on = CASE WHEN CAST(ds.val_i AS decimal(32,8)) = c.value THEN ds.last_update_on ELSE GETDATE() END, ds.last_update_by = CASE WHEN CAST(ds.val_i AS decimal(32,8)) = c.value THEN ds.last_update_by ELSE 11770 END
	FROM	ds_organisation_data ds INNER JOIN #calc c ON ds.id = c.id
	WHERE	ds.is_calculated = 1 AND c.value IS NOT null

	-- INSERT the remainder
	INSERT INTO ds_organisation_data (organisation_id, metric_id, attribute_id, date, date_type, val_d, val_i, currency_id, source_id, confidence_id, is_calculated, created_by)
	SELECT	c.organisation_id, c.metric_id, c.attribute_id, c.date, c.date_type, CASE @is_decimal WHEN 1 THEN ROUND(c.value, 4) ELSE null END, CASE @is_decimal WHEN 1 THEN null ELSE ROUND(c.value, 0) END, c.currency_id, c.source_id, c.confidence_id, 1, 11770
	FROM	#calc c
	WHERE	c.id IS null AND c.value IS NOT null
END

IF @debug = 1
BEGIN
	SELECT * FROM #calc ORDER BY organisation_id, date_type, date
END


-- TODO: add benchmark by passing a start time to an audit function
SELECT 'Finished: calculate_opex (3s)'

DROP TABLE #calc]]></Value>
			</Property>
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metric_is_decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[#calc]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[@date_start]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[@date_end]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[#calc].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[#calc].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[#calc].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[#calc].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[#calc].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[#calc].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[#calc].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[#calc].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[#calc].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[#calc].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[#calc].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[#calc].[calc_value]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[#calc].[calc_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[#calc].[calc_value_2]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[#calc].[calc_currency_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[#calc].[currency_rate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[#calc].[calc_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[#calc].[calc_currency_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[#calc].[calc_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[#calc].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[#calc].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[#calc].[calc_currency_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[#calc].[calc_currency_rate_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[#calc].[calc_currency_rate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[#calc].[currency_rate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[#calc].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[@debug]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[#calc].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[#calc].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[#calc].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[#calc].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[#calc].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[#calc].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_on]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_by]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[created_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[#calc].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[#calc].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[#calc].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[#calc].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[#calc].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_opex].[#calc].[date]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[calculate_opex].[#calc]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_opex].[#calc].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_opex].[#calc].[organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_opex].[#calc].[metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_opex].[#calc].[attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_opex].[#calc].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_opex].[#calc].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_opex].[#calc].[value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="32" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_opex].[#calc].[currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_opex].[#calc].[is_calculated]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_opex].[#calc].[source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_opex].[#calc].[confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_opex].[#calc].[calc_value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="32" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_opex].[#calc].[calc_currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_opex].[#calc].[calc_value_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="32" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_opex].[#calc].[calc_currency_id_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_opex].[#calc].[currency_rate]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="32" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_opex].[#calc].[calc_currency_rate]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="32" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_opex].[#calc].[calc_currency_rate_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="32" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_opex].[#calc].[processed]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_opex].[@date_start]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_opex].[@date_end]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_opex].[@debug]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="5276" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[calculate_opex]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@date_start datetime,&#xD;&#xA;&#x9;@date_end datetime,&#xD;&#xA;&#x9;@debug bit = 1&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[calculate_product]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[

DECLARE @is_decimal bit = dbo.metric_is_decimal(@metric_id)
DECLARE @is_decimal_2 bit = dbo.metric_is_decimal(@metric_id_2)
DECLARE @is_decimal_3 bit = dbo.metric_is_decimal(@metric_id_3)

DECLARE @is_currency_based bit = dbo.metric_is_currency_based(@metric_id)

-- Calculation tables
CREATE TABLE #data (id bigint, organisation_id int, metric_id int, attribute_id int, date datetime, date_type char(1) COLLATE DATABASE_DEFAULT, value decimal(22,8), currency_id int, source_id int, confidence_id int, id_2 bigint, metric_id_2 int, attribute_id_2 int, value_2 decimal(22,8), currency_id_2 int, source_id_2 int, confidence_id_2 int, currency_rate decimal(22,8))
CREATE TABLE #calc (id bigint, organisation_id int, metric_id int, attribute_id int, date datetime, date_type char(1) COLLATE DATABASE_DEFAULT, value decimal(22,8), currency_id int, source_id int, confidence_id int, is_calculated bit, processed bit)

-- Collect all operator figures for both input metrics
INSERT INTO #data
SELECT	DISTINCT
		null,
		ds.organisation_id,
		@metric_id_2,
		@attribute_id_2,
		ds.date,
		ds.date_type,
		null,
		null,
		null,
		null,
		null,
		@metric_id_3,
		@attribute_id_3,
		null,
		null,
		null,
		null,
		null
		
FROM	ds_organisation_data ds INNER JOIN
		organisations o ON ds.organisation_id = o.id

WHERE	(
			(ds.metric_id = @metric_id_2 AND ds.attribute_id = @attribute_id_2) OR
			(ds.metric_id = @metric_id_3 AND ds.attribute_id = @attribute_id_3)
		) AND
		ds.date >= @date_start AND
		ds.date < @date_end AND
		ds.date_type = @date_type AND
		ds.status_id = 3 AND
		o.type_id = 1089
		
ORDER BY ds.organisation_id, ds.date_type, ds.date

UPDATE	d
SET		d.id = ds.id, d.value = CASE @is_decimal_2 WHEN 1 THEN ds.val_d ELSE CAST(ds.val_i AS decimal(22,8)) END, d.currency_id = ds.currency_id, d.source_id = ds.source_id, d.confidence_id = ds.confidence_id
FROM	ds_organisation_data ds INNER JOIN #data d ON (ds.organisation_id = d.organisation_id AND ds.metric_id = d.metric_id AND ds.attribute_id = d.attribute_id AND ds.date = d.date AND ds.date_type = d.date_type)
WHERE	ds.metric_id = @metric_id_2 AND ds.attribute_id = @attribute_id_2

UPDATE	d
SET		d.id_2 = ds.id, d.value_2 = CASE @is_decimal_3 WHEN 1 THEN ds.val_d ELSE CAST(ds.val_i AS decimal(22,8)) END, d.currency_id_2 = ds.currency_id, d.source_id_2 = ds.source_id, d.confidence_id_2 = ds.confidence_id
FROM	ds_organisation_data ds INNER JOIN #data d ON (ds.organisation_id = d.organisation_id AND ds.metric_id = d.metric_id_2 AND ds.attribute_id = d.attribute_id_2 AND ds.date = d.date AND ds.date_type = d.date_type)
WHERE	ds.metric_id = @metric_id_3 AND ds.attribute_id = @attribute_id_3


-- Get the exchange rate conversion if @metric_id_2 is reported in a different currency to @metric_id_3, using a common intermediary currency
UPDATE	d
SET		d.currency_rate = CASE cr.value WHEN 0 THEN 0 ELSE cr2.value/cr.value END
FROM	#data d INNER JOIN currency_rates cr ON (d.currency_id = cr.from_currency_id AND cr.to_currency_id = 2 AND d.date = cr.date AND d.date_type = cr.date_type) INNER JOIN currency_rates cr2 ON (d.currency_id_2 = cr2.from_currency_id AND cr2.to_currency_id = 2 AND d.date = cr2.date AND d.date_type = cr2.date_type)
WHERE	d.currency_id <> d.currency_id_2

-- Else, we can divide the data as-reported
UPDATE	#data SET currency_rate = 1 WHERE currency_rate IS null


-- Update missing values, source and confidence
UPDATE #data SET value_2 = 0 WHERE value_2 IS null
UPDATE #data SET currency_id_2 = currency_id WHERE currency_id_2 IS null
UPDATE #data SET source_id_2 = source_id WHERE source_id_2 IS null
UPDATE #data SET confidence_id_2 = confidence_id WHERE confidence_id_2 IS null


-- Calculate product based on values
INSERT INTO #calc
SELECT	null,
		d.organisation_id,
		@metric_id,
		@attribute_id,
		d.date,
		d.date_type,
		CASE @use_mean_value_of_metric_id_2 WHEN 1 THEN (d.value + d2.value)/2 ELSE d.value END * d.value_2 * d.currency_rate * @periodicity_factor_metric_id_3,
		CASE @is_currency_based WHEN 1 THEN d.currency_id ELSE 0 END,
		CASE WHEN d.source_id < d.source_id_2 THEN d.source_id ELSE d.source_id_2 END, -- MIN() only works over columns
		CASE WHEN d.confidence_id > d.confidence_id_2 THEN d.confidence_id ELSE d.confidence_id_2 END, -- MAX() only works over columns
		1,
		0

FROM	#data d LEFT JOIN
		#data d2 ON (d.organisation_id = d2.organisation_id AND d.date_type = d2.date_type AND d.date = DATEADD(quarter, CASE @date_type WHEN 'Q' THEN 1 WHEN 'H' THEN 2 WHEN 'Y' THEN 4 END, d2.date))

ORDER BY d.organisation_id, d.date_type, d.date

-- Update with corresponding existing data points
UPDATE	c
SET		c.id = ds.id, c.is_calculated = ds.is_calculated
FROM	ds_organisation_data ds INNER JOIN #calc c ON (ds.organisation_id = c.organisation_id AND ds.metric_id = c.metric_id AND ds.attribute_id = c.attribute_id AND ds.date = c.date AND ds.date_type = c.date_type)
WHERE	ds.metric_id = @metric_id AND ds.attribute_id = @attribute_id


-- Remove any empty data
DELETE FROM #calc WHERE value IS null OR value = 0


IF @debug = 0
BEGIN
	-- UPDATE the _calculated_ values that already exist
	UPDATE	ds
	SET		ds.val_d = CASE @is_decimal WHEN 1 THEN ROUND(c.value, 4) ELSE null END, ds.val_i = CASE @is_decimal WHEN 1 THEN null ELSE ROUND(c.value, 0) END, ds.currency_id = c.currency_id, ds.is_calculated = c.is_calculated, ds.source_id = c.source_id, ds.confidence_id = c.confidence_id, ds.last_update_on = CASE WHEN CAST(ds.val_i AS decimal(22,8)) = c.value THEN ds.last_update_on ELSE GETDATE() END, ds.last_update_by = CASE WHEN CAST(ds.val_i AS decimal(22,8)) = c.value THEN ds.last_update_by ELSE 11770 END
	FROM	ds_organisation_data ds INNER JOIN #calc c ON ds.id = c.id
	WHERE	ds.is_calculated = 1 AND c.value IS NOT null

	-- INSERT the remainder
	INSERT INTO ds_organisation_data (organisation_id, metric_id, attribute_id, date, date_type, val_d, val_i, currency_id, source_id, confidence_id, is_calculated, created_by)
	SELECT	c.organisation_id, c.metric_id, c.attribute_id, c.date, c.date_type, CASE @is_decimal WHEN 1 THEN ROUND(c.value, 4) ELSE null END, CASE @is_decimal WHEN 1 THEN null ELSE ROUND(c.value, 0) END, c.currency_id, c.source_id, c.confidence_id, 1, 11770
	FROM	#calc c
	WHERE	c.id IS null AND c.value IS NOT null
END

IF @debug = 1
BEGIN
	SELECT * FROM #calc ORDER BY organisation_id, date_type, date
END


-- TODO: add benchmark by passing a start time to an audit function
SELECT 'Finished: calculate_product (11s)'

DROP TABLE #data
DROP TABLE #calc]]></Value>
			</Property>
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metric_is_decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[@metric_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[@metric_id_2]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[@metric_id_3]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metric_is_currency_based]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[@attribute_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[@attribute_id_3]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[@date_start]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[@date_end]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[@date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#data].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#data].[metric_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#data].[attribute_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#data].[id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#data].[value_2]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#data].[currency_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#data].[source_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#data].[confidence_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#data].[currency_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#data].[currency_rate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#data].[currency_rate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#data].[value_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#data].[currency_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#data].[source_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#data].[confidence_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#calc]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[@attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[@use_mean_value_of_metric_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#data].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[@periodicity_factor_metric_id_3]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#calc].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#calc].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#calc].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#calc].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#calc].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#calc].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#calc].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#calc].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[@debug]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#calc].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#calc].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#calc].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#calc].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#calc].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#calc].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_on]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_by]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[created_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#calc].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#calc].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#calc].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#calc].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#calc].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#calc].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#calc].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#calc].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#calc].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#calc].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#calc].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product].[#calc].[date]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[calculate_product].[#data]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product].[#data].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product].[#data].[organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product].[#data].[metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product].[#data].[attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product].[#data].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product].[#data].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product].[#data].[value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product].[#data].[currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product].[#data].[source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product].[#data].[confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product].[#data].[id_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product].[#data].[metric_id_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product].[#data].[attribute_id_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product].[#data].[value_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product].[#data].[currency_id_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product].[#data].[source_id_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product].[#data].[confidence_id_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product].[#data].[currency_rate]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[calculate_product].[#calc]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product].[#calc].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product].[#calc].[organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product].[#calc].[metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product].[#calc].[attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product].[#calc].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product].[#calc].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product].[#calc].[value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product].[#calc].[currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product].[#calc].[source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product].[#calc].[confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product].[#calc].[is_calculated]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product].[#calc].[processed]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_product].[@metric_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_product].[@attribute_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_product].[@metric_id_2]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_product].[@attribute_id_2]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_product].[@metric_id_3]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_product].[@attribute_id_3]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_product].[@date_start]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_product].[@date_end]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_product].[@date_type]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA['Q']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_product].[@use_mean_value_of_metric_id_2]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_product].[@periodicity_factor_metric_id_3]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[3]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_product].[@debug]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="7388" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[calculate_product]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@metric_id int,&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;-- Output metric.id&#xD;&#xA;&#x9;@attribute_id int,&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;-- Output attribute.id&#xD;&#xA;&#x9;@metric_id_2 int,&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;-- Input metric.id&#xD;&#xA;&#x9;@attribute_id_2 int,&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;-- Input attribute.id&#xD;&#xA;&#x9;@metric_id_3 int,&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;-- Input metric.id&#xD;&#xA;&#x9;@attribute_id_3 int,&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;-- Input attribute.id&#xD;&#xA;&#x9;@date_start datetime,&#xD;&#xA;&#x9;@date_end datetime,&#xD;&#xA;&#x9;@date_type char(1) = 'Q',&#xD;&#xA;&#x9;@use_mean_value_of_metric_id_2 bit = 1,&#x9;&#x9;-- Calculate the mean value of @metric_id_2 over the period, or use the value as-is&#xD;&#xA;&#x9;@periodicity_factor_metric_id_3 int = 3,&#x9;-- A periodicity multiple that convert @metric_id_3 to the period of @metric_id_2 (eg a monthly metric has a periodicty factor of 3 to scale to quarterly)&#xD;&#xA;&#x9;@debug bit = 1&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[calculate_product_quotient_pair]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[

DECLARE @is_decimal bit = dbo.metric_is_decimal(@metric_id)
DECLARE @is_decimal_2 bit = dbo.metric_is_decimal(@metric_id_2)
DECLARE @is_decimal_3 bit = dbo.metric_is_decimal(@metric_id_3)

-- Calculation tables
CREATE TABLE #data (id bigint, organisation_id int, date datetime, date_type char(1) COLLATE DATABASE_DEFAULT, metric_id int, attribute_id int, value decimal(22,8), currency_id int, source_id int, confidence_id int, is_calculated bit, id_2 bigint, metric_id_2 int, attribute_id_2 int, value_2 decimal(22,8), currency_id_2 int, source_id_2 int, confidence_id_2 int, is_calculated_2 bit, id_3 bigint, metric_id_3 int, attribute_id_3 int, value_3 decimal(22,8), currency_id_3 int, source_id_3 int, confidence_id_3 int)
CREATE TABLE #calc (id bigint, organisation_id int, metric_id int, attribute_id int, date datetime, date_type char(1) COLLATE DATABASE_DEFAULT, value decimal(22,8), currency_id int, source_id int, confidence_id int, is_calculated bit, processed bit)

-- Collect all operator figures for both input metrics
INSERT INTO #data
SELECT	DISTINCT
		null,
		ds.organisation_id,
		ds.date,
		ds.date_type,
		@metric_id,
		@attribute_id,
		null,
		null,
		null,
		null,
		null,
		null,
		@metric_id_2,
		@attribute_id_2,
		null,
		null,
		null,
		null,
		null,
		null,
		@metric_id_3 int,
		@attribute_id_3 int,
		null,
		null,
		null,
		null
		
FROM	ds_organisation_data ds INNER JOIN
		organisations o ON ds.organisation_id = o.id

WHERE	(
			(ds.metric_id = @metric_id AND ds.attribute_id = @attribute_id) OR
			(ds.metric_id = @metric_id_2 AND ds.attribute_id = @attribute_id_2)
		) AND
		ds.date >= @date_start AND
		ds.date < @date_end AND
		ds.date_type = @date_type AND
		ds.status_id = 3 AND
		o.type_id = 1089
		
ORDER BY ds.organisation_id, ds.date_type, ds.date

UPDATE	d
SET		d.id = ds.id, d.value = CASE @is_decimal WHEN 1 THEN ds.val_d ELSE CAST(ds.val_i AS decimal(22,8)) END, d.currency_id = ds.currency_id, d.source_id = ds.source_id, d.confidence_id = ds.confidence_id, d.is_calculated = ds.is_calculated
FROM	ds_organisation_data ds INNER JOIN #data d ON (ds.organisation_id = d.organisation_id AND ds.metric_id = d.metric_id AND ds.attribute_id = d.attribute_id AND ds.date = d.date AND ds.date_type = d.date_type)
WHERE	ds.metric_id = @metric_id AND ds.attribute_id = @attribute_id

UPDATE	d
SET		d.id_2 = ds.id, d.value_2 = CASE @is_decimal_2 WHEN 1 THEN ds.val_d ELSE CAST(ds.val_i AS decimal(22,8)) END, d.currency_id_2 = ds.currency_id, d.source_id_2 = ds.source_id, d.confidence_id_2 = ds.confidence_id, d.is_calculated_2 = ds.is_calculated
FROM	ds_organisation_data ds INNER JOIN #data d ON (ds.organisation_id = d.organisation_id AND ds.metric_id = d.metric_id_2 AND ds.attribute_id = d.attribute_id_2 AND ds.date = d.date AND ds.date_type = d.date_type)
WHERE	ds.metric_id = @metric_id_2 AND ds.attribute_id = @attribute_id_2

UPDATE	d
SET		d.id_3 = ds.id, d.value_3 = CASE @is_decimal_3 WHEN 1 THEN ds.val_d ELSE CAST(ds.val_i AS decimal(22,8)) END, d.currency_id_3 = ds.currency_id, d.source_id_3 = ds.source_id, d.confidence_id_3 = ds.confidence_id
FROM	ds_organisation_data ds INNER JOIN #data d ON (ds.organisation_id = d.organisation_id AND ds.metric_id = d.metric_id_3 AND ds.attribute_id = d.attribute_id_3 AND ds.date = d.date AND ds.date_type = d.date_type)
WHERE	ds.metric_id = @metric_id_3 AND ds.attribute_id = @attribute_id_3


-- TODO: exchange rate conversion if @metric_id is reported in a different currency to @metric_id_2? Is this ever needed?


-- (Re-)calculate missing products and quotients based on values
INSERT INTO #calc
SELECT	d.id,
		d.organisation_id,
		@metric_id,
		@attribute_id,
		d.date,
		d.date_type,
		d.value_2 * d.value_3 * @periodicity_factor,
		d.currency_id_2,
		CASE WHEN d.source_id_2 < d.source_id_3 THEN d.source_id_2 ELSE d.source_id_3 END, -- MIN() only works over columns
		CASE WHEN d.confidence_id_2 > d.confidence_id_3 THEN d.confidence_id_2 ELSE d.confidence_id_3 END, -- MAX() only works over columns
		1,
		0

FROM	#data d

WHERE	d.value IS null OR
		d.is_calculated = 1

ORDER BY d.organisation_id, d.date_type, d.date

INSERT INTO #calc
SELECT	d.id_2,
		d.organisation_id,
		@metric_id_2,
		@attribute_id_2,
		d.date,
		d.date_type,
		d.value / d.value_3 / @periodicity_factor,
		d.currency_id_2,
		CASE WHEN d.source_id < d.source_id_3 THEN d.source_id ELSE d.source_id_3 END, -- MIN() only works over columns
		CASE WHEN d.confidence_id > d.confidence_id_3 THEN d.confidence_id ELSE d.confidence_id_3 END, -- MAX() only works over columns
		1,
		0

FROM	#data d

WHERE	d.value_2 IS null OR
		d.is_calculated_2 = 1

ORDER BY d.organisation_id, d.date_type, d.date


-- Remove any empty data
DELETE FROM #calc WHERE value IS null OR value = 0


IF @debug = 0
BEGIN
	-- UPDATE the _calculated_ values that already exist
	UPDATE	ds
	SET		ds.val_d = CASE @is_decimal WHEN 1 THEN ROUND(c.value, 4) ELSE null END, ds.val_i = CASE @is_decimal WHEN 1 THEN null ELSE ROUND(c.value, 0) END, ds.currency_id = c.currency_id, ds.is_calculated = c.is_calculated, ds.source_id = c.source_id, ds.confidence_id = c.confidence_id, ds.last_update_on = CASE WHEN CAST(ds.val_i AS decimal(22,8)) = c.value THEN ds.last_update_on ELSE GETDATE() END, ds.last_update_by = CASE WHEN CAST(ds.val_i AS decimal(22,8)) = c.value THEN ds.last_update_by ELSE 11770 END
	FROM	ds_organisation_data ds INNER JOIN #calc c ON ds.id = c.id
	WHERE	ds.is_calculated = 1 AND c.value IS NOT null

	-- INSERT the remainder
	INSERT INTO ds_organisation_data (organisation_id, metric_id, attribute_id, date, date_type, val_d, val_i, currency_id, source_id, confidence_id, is_calculated, created_by)
	SELECT	c.organisation_id, c.metric_id, c.attribute_id, c.date, c.date_type, CASE @is_decimal WHEN 1 THEN ROUND(c.value, 4) ELSE null END, CASE @is_decimal WHEN 1 THEN null ELSE ROUND(c.value, 0) END, c.currency_id, c.source_id, c.confidence_id, 1, 11770
	FROM	#calc c
	WHERE	c.id IS null AND c.value IS NOT null
END

IF @debug = 1
BEGIN
	SELECT * FROM #data ORDER BY organisation_id, date_type, date
	SELECT * FROM #calc ORDER BY organisation_id, date_type, date
END


-- TODO: add benchmark by passing a start time to an audit function
SELECT 'Finished: calculate_product_quotient_pair (11s)'

DROP TABLE #data
DROP TABLE #calc]]></Value>
			</Property>
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metric_is_decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[@metric_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[@metric_id_2]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[@metric_id_3]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[@attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[@attribute_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[@attribute_id_3]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[@date_start]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[@date_end]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[@date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#data].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#data].[metric_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#data].[attribute_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#data].[id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#data].[value_2]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#data].[currency_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#data].[source_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#data].[confidence_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#data].[is_calculated_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#data].[metric_id_3]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#data].[attribute_id_3]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#data].[id_3]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#data].[value_3]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#data].[currency_id_3]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#data].[source_id_3]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#data].[confidence_id_3]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#calc]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[@periodicity_factor]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#calc].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[@debug]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#calc].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#calc].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#calc].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#calc].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#calc].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#calc].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_on]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_by]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[created_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#calc].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#calc].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#calc].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#calc].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#calc].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#calc].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#calc].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#calc].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#calc].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#calc].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#calc].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#calc].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_product_quotient_pair].[#calc].[date]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[calculate_product_quotient_pair].[#data]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product_quotient_pair].[#data].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product_quotient_pair].[#data].[organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product_quotient_pair].[#data].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product_quotient_pair].[#data].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product_quotient_pair].[#data].[metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product_quotient_pair].[#data].[attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product_quotient_pair].[#data].[value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product_quotient_pair].[#data].[currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product_quotient_pair].[#data].[source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product_quotient_pair].[#data].[confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product_quotient_pair].[#data].[is_calculated]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product_quotient_pair].[#data].[id_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product_quotient_pair].[#data].[metric_id_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product_quotient_pair].[#data].[attribute_id_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product_quotient_pair].[#data].[value_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product_quotient_pair].[#data].[currency_id_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product_quotient_pair].[#data].[source_id_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product_quotient_pair].[#data].[confidence_id_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product_quotient_pair].[#data].[is_calculated_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product_quotient_pair].[#data].[id_3]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product_quotient_pair].[#data].[metric_id_3]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product_quotient_pair].[#data].[attribute_id_3]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product_quotient_pair].[#data].[value_3]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product_quotient_pair].[#data].[currency_id_3]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product_quotient_pair].[#data].[source_id_3]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product_quotient_pair].[#data].[confidence_id_3]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[calculate_product_quotient_pair].[#calc]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product_quotient_pair].[#calc].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product_quotient_pair].[#calc].[organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product_quotient_pair].[#calc].[metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product_quotient_pair].[#calc].[attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product_quotient_pair].[#calc].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product_quotient_pair].[#calc].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product_quotient_pair].[#calc].[value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product_quotient_pair].[#calc].[currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product_quotient_pair].[#calc].[source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product_quotient_pair].[#calc].[confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product_quotient_pair].[#calc].[is_calculated]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_product_quotient_pair].[#calc].[processed]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_product_quotient_pair].[@metric_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_product_quotient_pair].[@attribute_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_product_quotient_pair].[@metric_id_2]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_product_quotient_pair].[@attribute_id_2]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_product_quotient_pair].[@metric_id_3]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_product_quotient_pair].[@attribute_id_3]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_product_quotient_pair].[@date_start]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_product_quotient_pair].[@date_end]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_product_quotient_pair].[@date_type]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA['Q']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_product_quotient_pair].[@periodicity_factor]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[3]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_product_quotient_pair].[@debug]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="7103" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[calculate_product_quotient_pair]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@metric_id int,&#x9;&#x9;&#x9;&#x9;&#x9;-- Output metric.id&#xD;&#xA;&#x9;@attribute_id int,&#x9;&#x9;&#x9;&#x9;-- Output attribute.id&#xD;&#xA;&#x9;@metric_id_2 int,&#x9;&#x9;&#x9;&#x9;-- Output metric.id&#xD;&#xA;&#x9;@attribute_id_2 int,&#x9;&#x9;&#x9;-- Output attribute.id&#xD;&#xA;&#x9;@metric_id_3 int,&#x9;&#x9;&#x9;&#x9;-- Input metric.id, typically used as a weighting multiplier/divisor&#xD;&#xA;&#x9;@attribute_id_3 int,&#x9;&#x9;&#x9;-- Input attribute.id&#xD;&#xA;&#x9;@date_start datetime,&#xD;&#xA;&#x9;@date_end datetime,&#xD;&#xA;&#x9;@date_type char(1) = 'Q',&#xD;&#xA;&#x9;@periodicity_factor int = 3,&#x9;-- A periodicity multiple that converts between @metric_id and @metric_id_2 (eg a monthly metric has a periodicty factor of 3 to scale to quarterly)&#xD;&#xA;&#x9;@debug bit = 1&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[calculate_spectrum]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[


-- Aggregate blocks and pricing
CREATE TABLE #calc (auction_id int, count int, organisations int, block decimal(22,4), block_paired decimal(22,4), block_unpaired decimal(22,4), count_block int, price decimal(22,4), price_per_mhz decimal(22,4), count_price int, price_currency_id int)

INSERT INTO #calc
SELECT	aw.auction_id, COUNT(aw.auction_id), COUNT(DISTINCT aw.organisation_id), SUM(aw.block), SUM(aw.block_paired), SUM(aw.block_unpaired), COUNT(aw.block), SUM(aw.price), SUM(CASE WHEN aw.block IS null THEN null ELSE aw.price END)/SUM(CASE WHEN aw.price IS null THEN null ELSE aw.block END), COUNT(aw.price), MIN(aw.price_currency_id)	-- Relies on having a single currency per auction
FROM	auction_awards aw
GROUP BY aw.auction_id

IF @debug = 0
BEGIN
	-- Update auction aggregates
	UPDATE	a
	SET		a.block = CASE WHEN c.count = c.count_block THEN c.block ELSE null END,						-- Only show total block/price where all individual awards have data
			a.block_paired = CASE WHEN c.count = c.count_block THEN c.block_paired ELSE null END,
			a.block_unpaired = CASE WHEN c.count = c.count_block THEN c.block_unpaired ELSE null END,
			a.winners = c.organisations,
			a.price = CASE WHEN c.count = c.count_price THEN c.price ELSE null END,
			--a.price_per_mhz = c.price_per_mhz,														-- Don't use this weighted value, instead there shouldn't be a value where all of the operator data available for all participants
			a.price_currency_id = c.price_currency_id
	FROM	auctions a INNER JOIN #calc c ON a.id = c.auction_id


	-- Calculate price per MHz per population for each award and auction (local, US$ and US$ PPP-adjusted)
	UPDATE	aw
	SET		aw.price_usd = aw.price * cr.value,
			aw.price_per_mhz = aw.price/aw.block/ds.val_i,
			aw.price_per_mhz_usd = aw.price/aw.block/ds.val_i * cr.value

	FROM	auction_awards aw INNER JOIN
			auctions a ON aw.auction_id = a.id INNER JOIN
			currency_rates cr ON (aw.price_currency_id = cr.from_currency_id AND DATEPART(year, a.date) = DATEPART(year, cr.date) AND DATEPART(quarter, a.date) = DATEPART(quarter, cr.date)) LEFT JOIN
			ds_zone_data ds ON (ds.metric_id = 43 AND ds.attribute_id = 0 AND ds.date_type = 'Q' AND a.zone_id = ds.zone_id AND DATEPART(year, a.date) = DATEPART(year, ds.date) AND DATEPART(quarter, a.date) = DATEPART(quarter, ds.date))

	WHERE	cr.to_currency_id = 2 AND
			cr.date_type = 'Q'

	UPDATE	a
	SET		a.price_usd = a.price * cr.value,
			--a.price_per_mhz = a.price_per_mhz/ds.val_i,												-- Don't use this weighted value, instead there shouldn't be a value where all of the operator data available for all participants
			--a.price_per_mhz_usd = a.price_per_mhz/ds.val_i * cr.value
			a.price_per_mhz = a.price/a.block/ds.val_i,
			a.price_per_mhz_usd = a.price/a.block/ds.val_i * cr.value
			
	
	FROM	auctions a INNER JOIN
			currency_rates cr ON (a.price_currency_id = cr.from_currency_id AND DATEPART(year, a.date) = DATEPART(year, cr.date) AND DATEPART(quarter, a.date) = DATEPART(quarter, cr.date)) LEFT JOIN
			ds_zone_data ds ON (ds.metric_id = 43 AND ds.attribute_id = 0 AND ds.date_type = 'Q' AND a.zone_id = ds.zone_id AND DATEPART(year, a.date) = DATEPART(year, ds.date) AND DATEPART(quarter, a.date) = DATEPART(quarter, ds.date))
	
	WHERE	cr.to_currency_id = 2 AND
			cr.date_type = 'Q'


	-- In many cases, PPP-adjustment rates aren't available for the exact year, so we use the closest rate
	UPDATE	aw
	SET		aw.price_per_mhz_usd_ppp = aw.price_per_mhz_usd/
			(
				SELECT	TOP 1 ds.val_d
				FROM	ds_zone_data ds
				WHERE	ds.zone_id = a.zone_id AND
						ds.metric_id = 175 AND
						ds.attribute_id = 1509 AND
						ds.date_type = 'Y' AND
						ds.date <= a.date
				ORDER BY ds.date DESC
			)
	FROM	auction_awards aw INNER JOIN auctions a ON aw.auction_id = a.id
	WHERE	aw.price_per_mhz_usd IS NOT null

	UPDATE	a
	SET		a.price_per_mhz_usd_ppp = a.price_per_mhz_usd/
			(
				SELECT	TOP 1 ds.val_d
				FROM	ds_zone_data ds
				WHERE	ds.zone_id = a.zone_id AND
						ds.metric_id = 175 AND
						ds.attribute_id = 1509 AND
						ds.date_type = 'Y' AND
						ds.date <= a.date
				ORDER BY ds.date DESC
			)
	FROM	auctions a
	WHERE	a.price_per_mhz_usd IS NOT null
END

IF @debug = 1
BEGIN
	SELECT * FROM #calc
END


-- TODO: add benchmark by passing a start time to an audit function
SELECT 'Finished: calculate_spectrum (1s)'

DROP TABLE #calc]]></Value>
			</Property>
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[calculate_spectrum].[#calc]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_awards]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_awards].[auction_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_awards].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_awards].[block]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_awards].[block_paired]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_awards].[block_unpaired]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_awards].[price]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_awards].[price_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_spectrum].[@debug]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_spectrum].[#calc].[auction_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[block]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_spectrum].[#calc].[count]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_spectrum].[#calc].[count_block]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_spectrum].[#calc].[block]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[block_paired]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_spectrum].[#calc].[block_paired]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[block_unpaired]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_spectrum].[#calc].[block_unpaired]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[winners]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_spectrum].[#calc].[organisations]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[price]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_spectrum].[#calc].[count_price]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_spectrum].[#calc].[price]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[price_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_spectrum].[#calc].[price_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_awards].[auction_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_awards].[price_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_awards].[price_usd]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_awards].[price]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_awards].[price_per_mhz]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_awards].[block]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_awards].[price_per_mhz_usd]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[price_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[price_usd]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[price]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[price_per_mhz]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[block]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[price_per_mhz_usd]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_awards].[price_per_mhz_usd_ppp]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_awards].[price_per_mhz_usd]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[price_per_mhz_usd_ppp]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[date]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[calculate_spectrum].[#calc]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_spectrum].[#calc].[auction_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_spectrum].[#calc].[count]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_spectrum].[#calc].[organisations]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_spectrum].[#calc].[block]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_spectrum].[#calc].[block_paired]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_spectrum].[#calc].[block_unpaired]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_spectrum].[#calc].[count_block]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_spectrum].[#calc].[price]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_spectrum].[#calc].[price_per_mhz]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_spectrum].[#calc].[count_price]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_spectrum].[#calc].[price_currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_spectrum].[@debug]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="4516" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[calculate_spectrum]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@debug bit = 1&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[calculate_sum]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[

DECLARE @is_decimal bit = dbo.metric_is_decimal(@metric_id)
DECLARE @is_decimal_2 bit = dbo.metric_is_decimal(@metric_id_2)
DECLARE @is_decimal_3 bit = dbo.metric_is_decimal(@metric_id_3)

DECLARE @is_currency_based bit = dbo.metric_is_currency_based(@metric_id)

-- Calculation tables
CREATE TABLE #data (id bigint, organisation_id int, metric_id int, attribute_id int, date datetime, date_type char(1) COLLATE DATABASE_DEFAULT, value decimal(22,8), currency_id int, source_id int, confidence_id int, id_2 bigint, metric_id_2 int, attribute_id_2 int, value_2 decimal(22,8), currency_id_2 int, source_id_2 int, confidence_id_2 int, currency_rate decimal(22,8))
CREATE TABLE #calc (id bigint, organisation_id int, metric_id int, attribute_id int, date datetime, date_type char(1) COLLATE DATABASE_DEFAULT, value decimal(22,8), currency_id int, source_id int, confidence_id int, is_calculated bit, processed bit)

-- Collect all operator figures for both input metrics
INSERT INTO #data
SELECT	DISTINCT
		null,
		ds.organisation_id,
		@metric_id_2,
		@attribute_id_2,
		ds.date,
		ds.date_type,
		null,
		null,
		null,
		null,
		null,
		@metric_id_3,
		@attribute_id_3,
		null,
		null,
		null,
		null,
		null
		
FROM	ds_organisation_data ds INNER JOIN
		organisations o ON ds.organisation_id = o.id

WHERE	(
			(ds.metric_id = @metric_id_2 AND ds.attribute_id = @attribute_id_2) OR
			(ds.metric_id = @metric_id_3 AND ds.attribute_id = @attribute_id_3)
		) AND
		ds.date >= @date_start AND
		ds.date < @date_end AND
		ds.date_type = @date_type AND
		ds.status_id = 3 AND
		o.type_id = 1089
		
ORDER BY ds.organisation_id, ds.date_type, ds.date

UPDATE	d
SET		d.id = ds.id, d.value = CASE @is_decimal_2 WHEN 1 THEN ds.val_d ELSE CAST(ds.val_i AS decimal(22,8)) END, d.currency_id = ds.currency_id, d.source_id = ds.source_id, d.confidence_id = ds.confidence_id
FROM	ds_organisation_data ds INNER JOIN #data d ON (ds.organisation_id = d.organisation_id AND ds.metric_id = d.metric_id AND ds.attribute_id = d.attribute_id AND ds.date = d.date AND ds.date_type = d.date_type)
WHERE	ds.metric_id = @metric_id_2 AND ds.attribute_id = @attribute_id_2

UPDATE	d
SET		d.id_2 = ds.id, d.value_2 = CASE @is_decimal_3 WHEN 1 THEN ds.val_d ELSE CAST(ds.val_i AS decimal(22,8)) END, d.currency_id_2 = ds.currency_id, d.source_id_2 = ds.source_id, d.confidence_id_2 = ds.confidence_id
FROM	ds_organisation_data ds INNER JOIN #data d ON (ds.organisation_id = d.organisation_id AND ds.metric_id = d.metric_id_2 AND ds.attribute_id = d.attribute_id_2 AND ds.date = d.date AND ds.date_type = d.date_type)
WHERE	ds.metric_id = @metric_id_3 AND ds.attribute_id = @attribute_id_3


-- Get the exchange rate conversion if @metric_id_2 is reported in a different currency to @metric_id_3, using a common intermediary currency
UPDATE	d
SET		d.currency_rate = CASE cr.value WHEN 0 THEN 0 ELSE cr2.value/cr.value END
FROM	#data d INNER JOIN currency_rates cr ON (d.currency_id = cr.from_currency_id AND cr.to_currency_id = 2 AND d.date = cr.date AND d.date_type = cr.date_type) INNER JOIN currency_rates cr2 ON (d.currency_id_2 = cr2.from_currency_id AND cr2.to_currency_id = 2 AND d.date = cr2.date AND d.date_type = cr2.date_type)
WHERE	d.currency_id <> d.currency_id_2 AND d.currency_id <> 0 AND d.currency_id_2 <> 0

-- Else, we can divide the data as-reported
UPDATE	#data SET currency_rate = 1 WHERE currency_rate IS null


IF @use_null_as_zero = 1
BEGIN
	-- Update missing values, source and confidence
	UPDATE #data SET value_2 = 0 WHERE value_2 IS null
	UPDATE #data SET currency_id_2 = currency_id WHERE currency_id_2 IS null
	UPDATE #data SET source_id_2 = source_id WHERE source_id_2 IS null
	UPDATE #data SET confidence_id_2 = confidence_id WHERE confidence_id_2 IS null
END


-- Calculate sum based on values
INSERT INTO #calc
SELECT	null,
		d.organisation_id,
		@metric_id,
		@attribute_id,
		d.date,
		d.date_type,
		d.value + (d.value_2 * d.currency_rate),
		CASE @is_currency_based WHEN 1 THEN d.currency_id ELSE 0 END,
		CASE WHEN d.source_id < d.source_id_2 THEN d.source_id ELSE d.source_id_2 END, -- MIN() only works over columns
		CASE WHEN d.confidence_id > d.confidence_id_2 THEN d.confidence_id ELSE d.confidence_id_2 END, -- MAX() only works over columns
		1,
		0

FROM	#data d

ORDER BY d.organisation_id, d.date_type, d.date

-- Update with corresponding existing data points
UPDATE	c
SET		c.id = ds.id, c.is_calculated = ds.is_calculated
FROM	ds_organisation_data ds INNER JOIN #calc c ON (ds.organisation_id = c.organisation_id AND ds.metric_id = c.metric_id AND ds.attribute_id = c.attribute_id AND ds.date = c.date AND ds.date_type = c.date_type)
WHERE	ds.metric_id = @metric_id AND ds.attribute_id = @attribute_id


-- Remove any NULL data
DELETE FROM #calc WHERE value IS null


IF @debug = 0
BEGIN
	-- UPDATE the _calculated_ values that already exist
	UPDATE	ds
	SET		ds.val_d = CASE @is_decimal WHEN 1 THEN ROUND(c.value, 4) ELSE null END, ds.val_i = CASE @is_decimal WHEN 1 THEN null ELSE ROUND(c.value, 0) END, ds.currency_id = c.currency_id, ds.is_calculated = c.is_calculated, ds.source_id = c.source_id, ds.confidence_id = c.confidence_id, ds.last_update_on = CASE WHEN CAST(ds.val_i AS decimal(22,8)) = c.value THEN ds.last_update_on ELSE GETDATE() END, ds.last_update_by = CASE WHEN CAST(ds.val_i AS decimal(22,8)) = c.value THEN ds.last_update_by ELSE 11770 END
	FROM	ds_organisation_data ds INNER JOIN #calc c ON ds.id = c.id
	WHERE	ds.is_calculated = 1 AND c.value IS NOT null

	-- INSERT the remainder
	INSERT INTO ds_organisation_data (organisation_id, metric_id, attribute_id, date, date_type, val_d, val_i, currency_id, source_id, confidence_id, is_calculated, created_by)
	SELECT	c.organisation_id, c.metric_id, c.attribute_id, c.date, c.date_type, CASE @is_decimal WHEN 1 THEN ROUND(c.value, 4) ELSE null END, CASE @is_decimal WHEN 1 THEN null ELSE ROUND(c.value, 0) END, c.currency_id, c.source_id, c.confidence_id, 1, 11770
	FROM	#calc c
	WHERE	c.id IS null AND c.value IS NOT null
END

IF @debug = 1
BEGIN
	SELECT * FROM #calc
	--SELECT * FROM #calc ORDER BY organisation_id, date_type, date
END


-- TODO: add benchmark by passing a start time to an audit function
SELECT 'Finished: calculate_sum (11s)'

DROP TABLE #data
DROP TABLE #calc]]></Value>
			</Property>
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metric_is_decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[@metric_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[@metric_id_2]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[@metric_id_3]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metric_is_currency_based]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[@attribute_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[@attribute_id_3]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[@date_start]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[@date_end]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[@date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#data].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#data].[metric_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#data].[attribute_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#data].[id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#data].[value_2]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#data].[currency_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#data].[source_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#data].[confidence_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#data].[currency_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#data].[currency_rate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#data].[currency_rate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[@use_null_as_zero]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#data].[value_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#data].[currency_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#data].[source_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#data].[confidence_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#calc]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[@attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#calc].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#calc].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#calc].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#calc].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#calc].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#calc].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#calc].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#calc].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[@debug]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#calc].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#calc].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#calc].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#calc].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#calc].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#calc].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_on]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_by]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[created_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#calc].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#calc].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#calc].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#calc].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#calc].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#calc].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#calc].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#calc].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum].[#calc].[confidence_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[calculate_sum].[#data]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum].[#data].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum].[#data].[organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum].[#data].[metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum].[#data].[attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum].[#data].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum].[#data].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum].[#data].[value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum].[#data].[currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum].[#data].[source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum].[#data].[confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum].[#data].[id_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum].[#data].[metric_id_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum].[#data].[attribute_id_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum].[#data].[value_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum].[#data].[currency_id_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum].[#data].[source_id_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum].[#data].[confidence_id_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum].[#data].[currency_rate]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[calculate_sum].[#calc]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum].[#calc].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum].[#calc].[organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum].[#calc].[metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum].[#calc].[attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum].[#calc].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum].[#calc].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum].[#calc].[value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum].[#calc].[currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum].[#calc].[source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum].[#calc].[confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum].[#calc].[is_calculated]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum].[#calc].[processed]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_sum].[@metric_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_sum].[@attribute_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_sum].[@metric_id_2]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_sum].[@attribute_id_2]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_sum].[@metric_id_3]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_sum].[@attribute_id_3]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_sum].[@date_start]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_sum].[@date_end]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_sum].[@date_type]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA['Q']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_sum].[@use_null_as_zero]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_sum].[@debug]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="6953" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[calculate_sum]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@metric_id int,&#x9;&#x9;&#x9;&#x9;-- Output metric.id&#xD;&#xA;&#x9;@attribute_id int,&#x9;&#x9;&#x9;-- Output attribute.id&#xD;&#xA;&#x9;@metric_id_2 int,&#x9;&#x9;&#x9;-- Input metric.id&#xD;&#xA;&#x9;@attribute_id_2 int,&#x9;&#x9;-- Input attribute.id&#xD;&#xA;&#x9;@metric_id_3 int,&#x9;&#x9;&#x9;-- Input metric.id&#xD;&#xA;&#x9;@attribute_id_3 int,&#x9;&#x9;-- Input attribute.id&#xD;&#xA;&#x9;@date_start datetime,&#xD;&#xA;&#x9;@date_end datetime,&#xD;&#xA;&#x9;@date_type char(1) = 'Q',&#xD;&#xA;&#x9;@use_null_as_zero bit = 0,&#x9;-- Whether or not to treat non-existent @metric_id_3 values as zero (otherwise usual SQL null behaviour applies)&#xD;&#xA;&#x9;@debug bit = 1&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[calculate_sum_by_flag]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[

DECLARE @is_decimal bit = dbo.metric_is_decimal(@metric_id)
DECLARE @is_decimal_2 bit = dbo.metric_is_decimal(@metric_id_2)
DECLARE @is_decimal_3 bit = dbo.metric_is_decimal(@metric_id_3)

DECLARE @is_currency_based bit = dbo.metric_is_currency_based(@metric_id)

-- Calculation tables
CREATE TABLE #data (id bigint, organisation_id int, metric_id int, attribute_id int, date datetime, date_type char(1) COLLATE DATABASE_DEFAULT, value decimal(22,8), currency_id int, source_id int, confidence_id int, id_2 bigint, metric_id_2 int, attribute_id_2 int, value_2 decimal(22,8), currency_id_2 int, source_id_2 int, confidence_id_2 int, currency_rate decimal(22,8), has_flag bit)
CREATE TABLE #calc (id bigint, organisation_id int, metric_id int, attribute_id int, date datetime, date_type char(1) COLLATE DATABASE_DEFAULT, value decimal(22,8), currency_id int, source_id int, confidence_id int, is_calculated bit, processed bit)

-- Collect all operator figures for both input metrics
INSERT INTO #data
SELECT	DISTINCT
		null,
		ds.organisation_id,
		@metric_id_2,
		@attribute_id_2,
		ds.date,
		ds.date_type,
		null,
		null,
		null,
		null,
		null,
		@metric_id_3,
		@attribute_id_3,
		null,
		null,
		null,
		null,
		null,
		0
		
FROM	ds_organisation_data ds INNER JOIN
		organisations o ON ds.organisation_id = o.id

WHERE	(
			(ds.metric_id = @metric_id_2 AND ds.attribute_id = @attribute_id_2) OR
			(ds.metric_id = @metric_id_3 AND ds.attribute_id = @attribute_id_3)
		) AND
		ds.date >= @date_start AND
		ds.date < @date_end AND
		ds.date_type = @date_type AND
		ds.status_id = 3 AND
		o.type_id = 1089
		
ORDER BY ds.organisation_id, ds.date_type, ds.date

UPDATE	d
SET		d.id = ds.id, d.value = CASE @is_decimal_2 WHEN 1 THEN ds.val_d ELSE CAST(ds.val_i AS decimal(22,8)) END, d.currency_id = ds.currency_id, d.source_id = ds.source_id, d.confidence_id = ds.confidence_id
FROM	ds_organisation_data ds INNER JOIN #data d ON (ds.organisation_id = d.organisation_id AND ds.metric_id = d.metric_id AND ds.attribute_id = d.attribute_id AND ds.date = d.date AND ds.date_type = d.date_type)
WHERE	ds.metric_id = @metric_id_2 AND ds.attribute_id = @attribute_id_2

UPDATE	d
SET		d.id_2 = ds.id, d.value_2 = CASE @is_decimal_3 WHEN 1 THEN ds.val_d ELSE CAST(ds.val_i AS decimal(22,8)) END, d.currency_id_2 = ds.currency_id, d.source_id_2 = ds.source_id, d.confidence_id_2 = ds.confidence_id
FROM	ds_organisation_data ds INNER JOIN #data d ON (ds.organisation_id = d.organisation_id AND ds.metric_id = d.metric_id_2 AND ds.attribute_id = d.attribute_id_2 AND ds.date = d.date AND ds.date_type = d.date_type)
WHERE	ds.metric_id = @metric_id_3 AND ds.attribute_id = @attribute_id_3


-- Get the exchange rate conversion if @metric_id_2 is reported in a different currency to @metric_id_3, using a common intermediary currency
UPDATE	d
SET		d.currency_rate = CASE cr.value WHEN 0 THEN 0 ELSE cr2.value/cr.value END
FROM	#data d INNER JOIN currency_rates cr ON (d.currency_id = cr.from_currency_id AND cr.to_currency_id = 2 AND d.date = cr.date AND d.date_type = cr.date_type) INNER JOIN currency_rates cr2 ON (d.currency_id_2 = cr2.from_currency_id AND cr2.to_currency_id = 2 AND d.date = cr2.date AND d.date_type = cr2.date_type)
WHERE	d.currency_id <> d.currency_id_2 AND d.currency_id <> 0 AND d.currency_id_2 <> 0

-- Else, we can divide the data as-reported
UPDATE	#data SET currency_rate = 1 WHERE currency_rate IS null


-- Update with all operator flags
UPDATE	d
SET		d.has_flag = 1
FROM	flag_organisation_link fo INNER JOIN #data d ON fo.organisation_id = d.organisation_id
WHERE	fo.flag_id = @flag_id

UPDATE #data SET has_flag = 0 WHERE has_flag IS null


-- Update missing values, source and confidence
UPDATE #data SET value_2 = 0 WHERE value_2 IS null
UPDATE #data SET currency_id_2 = currency_id WHERE currency_id_2 IS null
UPDATE #data SET source_id_2 = source_id WHERE source_id_2 IS null
UPDATE #data SET confidence_id_2 = confidence_id WHERE confidence_id_2 IS null


-- Calculate sum based on values, flag
INSERT INTO #calc
SELECT	null,
		d.organisation_id,
		@metric_id,
		@attribute_id,
		d.date,
		d.date_type,
		CASE d.has_flag WHEN 0 THEN d.value + (d.value_2 * d.currency_rate) ELSE d.value END,
		CASE @is_currency_based WHEN 1 THEN d.currency_id ELSE 0 END,
		CASE WHEN d.source_id < d.source_id_2 THEN d.source_id ELSE d.source_id_2 END, -- MIN() only works over columns
		CASE WHEN d.confidence_id > d.confidence_id_2 THEN d.confidence_id ELSE d.confidence_id_2 END, -- MAX() only works over columns
		1,
		0

FROM	#data d

ORDER BY d.organisation_id, d.date_type, d.date

-- Update with corresponding existing data points
UPDATE	c
SET		c.id = ds.id, c.is_calculated = ds.is_calculated
FROM	ds_organisation_data ds INNER JOIN #calc c ON (ds.organisation_id = c.organisation_id AND ds.metric_id = c.metric_id AND ds.attribute_id = c.attribute_id AND ds.date = c.date AND ds.date_type = c.date_type)
WHERE	ds.metric_id = @metric_id AND ds.attribute_id = @attribute_id


-- Remove any NULL data
--DELETE FROM #calc WHERE value IS null


IF @debug = 0
BEGIN
	-- UPDATE the _calculated_ values that already exist
	UPDATE	ds
	SET		ds.val_d = CASE @is_decimal WHEN 1 THEN ROUND(c.value, 4) ELSE null END, ds.val_i = CASE @is_decimal WHEN 1 THEN null ELSE ROUND(c.value, 0) END, ds.currency_id = c.currency_id, ds.is_calculated = c.is_calculated, ds.source_id = c.source_id, ds.confidence_id = c.confidence_id, ds.last_update_on = CASE WHEN CAST(ds.val_i AS decimal(22,8)) = c.value THEN ds.last_update_on ELSE GETDATE() END, ds.last_update_by = CASE WHEN CAST(ds.val_i AS decimal(22,8)) = c.value THEN ds.last_update_by ELSE 11770 END
	FROM	ds_organisation_data ds INNER JOIN #calc c ON ds.id = c.id
	WHERE	ds.is_calculated = 1 AND c.value IS NOT null

	-- INSERT the remainder
	INSERT INTO ds_organisation_data (organisation_id, metric_id, attribute_id, date, date_type, val_d, val_i, currency_id, source_id, confidence_id, is_calculated, created_by)
	SELECT	c.organisation_id, c.metric_id, c.attribute_id, c.date, c.date_type, CASE @is_decimal WHEN 1 THEN ROUND(c.value, 4) ELSE null END, CASE @is_decimal WHEN 1 THEN null ELSE ROUND(c.value, 0) END, c.currency_id, c.source_id, c.confidence_id, 1, 11770
	FROM	#calc c
	WHERE	c.id IS null AND c.value IS NOT null
END

IF @debug = 1
BEGIN
	SELECT * FROM #calc ORDER BY organisation_id, date_type, date
END


-- TODO: add benchmark by passing a start time to an audit function
SELECT 'Finished: calculate_sum_by_flag (11s)'

DROP TABLE #data
DROP TABLE #calc]]></Value>
			</Property>
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metric_is_decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[@metric_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[@metric_id_2]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[@metric_id_3]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metric_is_currency_based]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[@attribute_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[@attribute_id_3]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[@date_start]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[@date_end]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[@date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#data].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#data].[metric_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#data].[attribute_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#data].[id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#data].[value_2]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#data].[currency_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#data].[source_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#data].[confidence_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#data].[currency_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#data].[currency_rate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#data].[currency_rate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[flag_organisation_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[flag_organisation_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#data].[has_flag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[flag_organisation_link].[flag_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[@flag_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#data].[has_flag]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#data].[value_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#data].[currency_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#data].[source_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#data].[confidence_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#calc]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[@attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#calc].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#calc].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#calc].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#calc].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#calc].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#calc].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#calc].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[@debug]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#calc].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#calc].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#calc].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#calc].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#calc].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#calc].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_on]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_by]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[created_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#calc].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#calc].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#calc].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#calc].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#calc].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#calc].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#calc].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#calc].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#calc].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#calc].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#calc].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[calculate_sum_by_flag].[#calc].[date]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[calculate_sum_by_flag].[#data]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum_by_flag].[#data].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum_by_flag].[#data].[organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum_by_flag].[#data].[metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum_by_flag].[#data].[attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum_by_flag].[#data].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum_by_flag].[#data].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum_by_flag].[#data].[value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum_by_flag].[#data].[currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum_by_flag].[#data].[source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum_by_flag].[#data].[confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum_by_flag].[#data].[id_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum_by_flag].[#data].[metric_id_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum_by_flag].[#data].[attribute_id_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum_by_flag].[#data].[value_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum_by_flag].[#data].[currency_id_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum_by_flag].[#data].[source_id_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum_by_flag].[#data].[confidence_id_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum_by_flag].[#data].[currency_rate]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum_by_flag].[#data].[has_flag]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[calculate_sum_by_flag].[#calc]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum_by_flag].[#calc].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum_by_flag].[#calc].[organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum_by_flag].[#calc].[metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum_by_flag].[#calc].[attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum_by_flag].[#calc].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum_by_flag].[#calc].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum_by_flag].[#calc].[value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum_by_flag].[#calc].[currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum_by_flag].[#calc].[source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum_by_flag].[#calc].[confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum_by_flag].[#calc].[is_calculated]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[calculate_sum_by_flag].[#calc].[processed]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_sum_by_flag].[@metric_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_sum_by_flag].[@attribute_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_sum_by_flag].[@metric_id_2]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_sum_by_flag].[@attribute_id_2]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_sum_by_flag].[@metric_id_3]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_sum_by_flag].[@attribute_id_3]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_sum_by_flag].[@flag_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_sum_by_flag].[@date_start]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_sum_by_flag].[@date_end]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_sum_by_flag].[@date_type]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA['Q']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[calculate_sum_by_flag].[@debug]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="7135" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[calculate_sum_by_flag]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@metric_id int,&#x9;&#x9;&#x9;&#x9;-- Output metric.id&#xD;&#xA;&#x9;@attribute_id int,&#x9;&#x9;&#x9;-- Output attribute.id&#xD;&#xA;&#x9;@metric_id_2 int,&#x9;&#x9;&#x9;-- Input metric.id&#xD;&#xA;&#x9;@attribute_id_2 int,&#x9;&#x9;-- Input attribute.id&#xD;&#xA;&#x9;@metric_id_3 int,&#x9;&#x9;&#x9;-- Input metric.id&#xD;&#xA;&#x9;@attribute_id_3 int,&#x9;&#x9;-- Input attribute.id&#xD;&#xA;&#x9;@flag_id int,&#x9;&#x9;&#x9;&#x9;-- Flag indicates _inclusive_ data&#xD;&#xA;&#x9;@date_start datetime,&#xD;&#xA;&#x9;@date_end datetime,&#xD;&#xA;&#x9;@date_type char(1) = 'Q',&#xD;&#xA;&#x9;@debug bit = 1&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[clear_backup_ds_tables]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[

-- Clear up backup tables
TRUNCATE TABLE [wi_backups].[dbo].[ds_organisation_data];
TRUNCATE TABLE [wi_backups].[dbo].[ds_zone_data];
TRUNCATE TABLE [wi_backups].[dbo].[ds_group_data];
TRUNCATE TABLE [wi_backups].[dbo].[ds_group_ownership];
TRUNCATE TABLE [wi_backups].[dbo].[ds_mvnos];
TRUNCATE TABLE [wi_backups].[dbo].[ds_service_data];
TRUNCATE TABLE [wi_backups].[dbo].[ds_survey_data];]]></Value>
			</Property>
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="BodyDependencies">
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="455" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[clear_backup_ds_tables]&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[collect_data_insert_errors]">
			<Property Name="BodyScript">
				<Value><![CDATA[  
insert into [dbo].[data_sp_run_error_log]
SELECT  
    ERROR_NUMBER() AS errorNumber  
    ,ERROR_SEVERITY() AS errorSeverity  
    ,ERROR_STATE() AS errorState  
    ,ERROR_PROCEDURE() AS errorProcedure  
    ,ERROR_LINE() AS errorLine  
    ,ERROR_MESSAGE() AS errorMessage,
    getdate() as "date",
    @query_string as "queryString";]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[data_sp_run_error_log]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[collect_data_insert_errors].[@query_string]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[collect_data_insert_errors].[@query_string]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2000" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="447" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[collect_data_insert_errors]  &#xD;&#xA;(&#xD;&#xA;&#x9;@query_string char(2000) = null&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[collect_errors]">
			<Property Name="BodyScript">
				<Value><![CDATA[  
insert into [dbo].[sp_run_error_log]
SELECT  
    ERROR_NUMBER() AS errorNumber  
    ,ERROR_SEVERITY() AS errorSeverity  
    ,ERROR_STATE() AS errorState  
    ,ERROR_PROCEDURE() AS errorProcedure  
    ,ERROR_LINE() AS errorLine  
    ,ERROR_MESSAGE() AS errorMessage,
    getdate() as "date",
    @query_string as "queryString";]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[sp_run_error_log]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[collect_errors].[@query_string]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[collect_errors].[@query_string]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2000" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="430" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[collect_errors]  &#xD;&#xA;(&#xD;&#xA;&#x9;@query_string char(2000) = null&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[confidence]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[confidence].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[confidence].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[confidence].[term]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[confidence].[excel_term]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[confidence].[published]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="200" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[confidence].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="201" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[confidence].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="202" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[confidence].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="203" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[confidence].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="204" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="205" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[content_authors]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_authors].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_authors].[user_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_authors].[name]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_authors].[url]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_authors].[job_title]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_authors].[biography]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_authors].[show_in_team]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="206" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_authors].[date_joined]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_authors].[date_retired]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_authors].[statistics]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_authors].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="207" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_authors].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="208" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_authors].[confluence_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="26" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="209" />
		</Element>
		<Element Type="SqlFullTextIndex" Name="[dbo].[content_entries]" Disambiguator="4">
			<Relationship Name="Catalog">
				<Entry>
					<References Name="[search]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlFullTextIndexColumnSpecifier">
						<Property Name="LanguageId" Value="1033" />
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[content_entries].[title]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlFullTextIndexColumnSpecifier">
						<Property Name="LanguageId" Value="1033" />
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[content_entries].[subtitle]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlFullTextIndexColumnSpecifier">
						<Property Name="LanguageId" Value="1033" />
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[content_entries].[body]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[content_entries]" />
				</Entry>
			</Relationship>
			<Relationship Name="KeyName">
				<Entry>
					<References Name="[dbo].[PK_content_entries]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[content_entries]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entries].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Property Name="IdentitySeed" Value="576" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entries].[type_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="210" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entries].[type_entity_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="211" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entries].[title]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entries].[subtitle]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entries].[permalink]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entries].[preview]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entries].[body]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entries].[content_type]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="212" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entries].[status]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[tinyint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="213" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entries].[has_documents]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="214" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entries].[documents_require_subscription]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="215" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entries].[thumbnail_document_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entries].[thumbnail_is_landscape]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="216" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entries].[is_featured]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="217" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entries].[is_hidden]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="218" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entries].[is_stub]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="219" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entries].[published_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="220" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entries].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="221" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entries].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="222" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entries].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="223" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entries].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="224" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entries].[confluence_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="72" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="225" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[content_entry_author_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entry_author_link].[entry_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entry_author_link].[author_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entry_author_link].[is_contributor]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="226" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[content_entry_document_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entry_document_link].[entry_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entry_document_link].[document_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[content_entry_entity_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entry_entity_link].[entry_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entry_entity_link].[entity_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entry_entity_link].[scheme]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[content_entry_links]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entry_links].[entry_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entry_links].[title]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entry_links].[set]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entry_links].[url]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entry_links].[order]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="227" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entry_links].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="228" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entry_links].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="229" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[content_entry_permission_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entry_permission_link].[entry_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entry_permission_link].[permission_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[content_entry_tag_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entry_tag_link].[entry_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[content_entry_tag_link].[tag_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[coverage_maps]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[coverage_maps].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[coverage_maps].[organisation_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[coverage_maps].[technology_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[coverage_maps].[status_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[coverage_maps].[frequencies]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[coverage_maps].[launch_date]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[coverage_maps].[has_map]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="230" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[coverage_maps].[layer_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[coverage_maps].[is_frequency_specific]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="231" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[coverage_maps].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="232" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[coverage_maps].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="233" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[coverage_maps].[IX_coverage_maps]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[coverage_maps].[organisation_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[coverage_maps].[status_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[coverage_maps]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[currencies]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currencies].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currencies].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currencies].[iso_code]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currencies].[note]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currencies].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="234" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currencies].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="235" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currencies].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="236" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currencies].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="237" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="238" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[currency_rates]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates].[from_currency_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates].[to_currency_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates].[date]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates].[date_type]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates].[value]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="8" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="55" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="56" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="57" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="58" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="239" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[currency_rates].[IX_currency_rates_from]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[currency_rates].[from_currency_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[currency_rates].[to_currency_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[currency_rates].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[currency_rates]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[currency_rates].[IX_currency_rates_to]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[currency_rates].[to_currency_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[currency_rates].[from_currency_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[currency_rates].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[currency_rates]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[currency_rates_bck_20170918]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates_bck_20170918].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates_bck_20170918].[from_currency_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates_bck_20170918].[to_currency_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates_bck_20170918].[date]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates_bck_20170918].[date_type]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates_bck_20170918].[value]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="8" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates_bck_20170918].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="59" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates_bck_20170918].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="60" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates_bck_20170918].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="61" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates_bck_20170918].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="62" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="96" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[currency_rates_bck_20170918].[IX_currency_rates_from]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[currency_rates_bck_20170918].[from_currency_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[currency_rates_bck_20170918].[to_currency_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[currency_rates_bck_20170918].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[currency_rates_bck_20170918]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[currency_rates_bck_20170918].[IX_currency_rates_to]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[currency_rates_bck_20170918].[to_currency_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[currency_rates_bck_20170918].[from_currency_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[currency_rates_bck_20170918].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[currency_rates_bck_20170918]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[currency_rates_bkp_20180110]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates_bkp_20180110].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates_bkp_20180110].[from_currency_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates_bkp_20180110].[to_currency_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates_bkp_20180110].[date]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates_bkp_20180110].[date_type]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates_bkp_20180110].[value]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="8" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates_bkp_20180110].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates_bkp_20180110].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates_bkp_20180110].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates_bkp_20180110].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[currency_rates_copy]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates_copy].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates_copy].[from_currency_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates_copy].[to_currency_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates_copy].[date]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates_copy].[date_type]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates_copy].[value]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="8" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates_copy].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="47" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates_copy].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="48" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates_copy].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="49" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates_copy].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="50" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="94" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[currency_rates_copy].[IX_currency_rates_from]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[currency_rates_copy].[from_currency_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[currency_rates_copy].[to_currency_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[currency_rates_copy].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[currency_rates_copy]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[currency_rates_copy].[IX_currency_rates_to]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[currency_rates_copy].[to_currency_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[currency_rates_copy].[from_currency_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[currency_rates_copy].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[currency_rates_copy]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[currency_rates_test_20180110]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates_test_20180110].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates_test_20180110].[from_currency_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates_test_20180110].[to_currency_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates_test_20180110].[date]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates_test_20180110].[date_type]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates_test_20180110].[value]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="8" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates_test_20180110].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates_test_20180110].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates_test_20180110].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_rates_test_20180110].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[currency_zone_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_zone_link].[currency_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[currency_zone_link].[zone_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlScalarFunction" Name="[dbo].[current_calendar_quarter]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
BEGIN
	DECLARE @quarter int, @month varchar(2), @year varchar(4)

	SET @quarter = DATEPART(quarter, GETDATE())
	SET @year = CAST(DATEPART(year, GETDATE()) AS varchar(4))
	
	SELECT @month =
		CASE @quarter
			WHEN 1 THEN '01'
			WHEN 2 THEN '04'
			WHEN 3 THEN '07'
			WHEN 4 THEN '10'
		END

	RETURN CAST(@year + '-' + @month + '-01' AS datetime)
END]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="CreateOffset" Value="2" />
							<Property Name="Length" Value="449" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE FUNCTION [dbo].[current_calendar_quarter]&#xD;&#xA;&#xD;&#xA;()&#xD;&#xA;&#xD;&#xA;RETURNS datetime&#xD;&#xA;&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[datetime]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlScalarFunction" Name="[dbo].[current_reporting_quarter]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
BEGIN
	DECLARE @m int, @y int, @month varchar(2), @year varchar(4)

	SET @m = DATEPART(month, GETDATE())
	SET @y = DATEPART(year, GETDATE())

	SELECT @month =
		CASE @m
			WHEN 4 THEN '01'
			WHEN 5 THEN '01'
			WHEN 6 THEN '01'

			WHEN 7 THEN '04'
			WHEN 8 THEN '04'
			WHEN 9 THEN '04'

			WHEN 10 THEN '07'
			WHEN 11 THEN '07'
			WHEN 12 THEN '07'

			WHEN 1 THEN '10'
			WHEN 2 THEN '10'
			WHEN 3 THEN '10'
		END

	SELECT @year =
		CASE @month
			WHEN '10' THEN CAST(@y-1 AS varchar)
			ELSE CAST(@y AS varchar)
		END

	RETURN CAST(@year + '-' + @month + '-01' AS datetime)
END]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="CreateOffset" Value="2" />
							<Property Name="Length" Value="702" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE FUNCTION [dbo].[current_reporting_quarter]&#xD;&#xA;&#xD;&#xA;()&#xD;&#xA;&#xD;&#xA;RETURNS datetime&#xD;&#xA;&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[datetime]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlMultiStatementTableValuedFunction" Name="[dbo].[curve_best_fit]">
			<Property Name="ReturnTableVariable" Value="@ds" />
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[iterator]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[char]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[xy_coefficients]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[xy_coefficients]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_best_fit].[@types].[processed]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_best_fit].[@types].[term]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_best_fit].[@xy_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_coefficients]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_coefficients].[a]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_coefficients].[b]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_coefficients].[c]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_coefficients].[d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_coefficients].[r2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_data].[x]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_data].[y]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_best_fit].[@xy_forecasts]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_best_fit].[@xy_forecasts].[x]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_best_fit].[@types].[processed]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_best_fit].[@types].[term]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_best_fit].[@return_best_fit_only]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_best_fit].[type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_best_fit].[@coefficients].[type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_best_fit].[@coefficients].[r2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_best_fit].[@coefficients].[r2]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[curve_best_fit].[type]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="8" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[curve_best_fit].[x]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[curve_best_fit].[y]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[curve_best_fit].[@types]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[curve_best_fit].[@types].[term]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="8" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[curve_best_fit].[@types].[processed]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[curve_best_fit].[@coefficients]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[curve_best_fit].[@coefficients].[type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="8" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[curve_best_fit].[@coefficients].[a]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[curve_best_fit].[@coefficients].[b]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[curve_best_fit].[@coefficients].[c]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[curve_best_fit].[@coefficients].[d]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[curve_best_fit].[@coefficients].[r2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[curve_best_fit].[@xy_coefficients]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[curve_best_fit].[@xy_coefficients].[type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="8" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[curve_best_fit].[@xy_coefficients].[a]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[curve_best_fit].[@xy_coefficients].[b]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[curve_best_fit].[@xy_coefficients].[c]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[curve_best_fit].[@xy_coefficients].[d]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[curve_best_fit].[@xy_coefficients].[r2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[curve_best_fit].[@xy_data]" Disambiguator="10">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[curve_best_fit].[@xy_data].[x]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[curve_best_fit].[@xy_data].[y]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[curve_best_fit].[@xy_forecasts]" Disambiguator="11">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[curve_best_fit].[@xy_forecasts].[x]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[curve_best_fit].[@xy_forecasts].[y]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[

BEGIN
	DECLARE @types iterator, @type char(8), @coefficients xy_coefficients, @xy_coefficients xy_coefficients

	INSERT INTO @types
	SELECT 'linear', 0 UNION ALL
	SELECT 'poly2', 0 UNION ALL
	SELECT 'poly3', 0 UNION ALL
	SELECT 'exp', 0 UNION ALL
	--SELECT 'log', 0 UNION ALL
	SELECT 'power', 0


	WHILE EXISTS (SELECT * FROM @types WHERE processed = 0)
	BEGIN
		SET @type = (SELECT TOP 1 term FROM @types WHERE processed = 0)

		INSERT INTO @xy_coefficients									-- Get coefficients for this type
		SELECT	@type, a, b, c, d, r2
		FROM	dbo.curve_fit_coefficients(@xy_data, @type)

		INSERT INTO @coefficients										-- Keep track of all coefficients (and fit) for all types
		SELECT * FROM @xy_coefficients

		INSERT INTO @ds													-- Get the fitted data set for this type and coefficients
		SELECT	@type, x, y
		FROM	dbo.curve_fit_data(@xy_data, @xy_coefficients, @type)

		IF (SELECT COUNT(x) FROM @xy_forecasts) > 0
		BEGIN
			INSERT INTO @ds												-- Also fit the predicted forecast data set, if passed
			SELECT	@type, x, y
			FROM	dbo.curve_fit_data(@xy_forecasts, @xy_coefficients, @type)
		END

		DELETE FROM @xy_coefficients
		UPDATE @types SET processed = 1 WHERE term = @type
	END


	IF @return_best_fit_only = 1
	BEGIN
		DELETE
		FROM	@ds
		WHERE	type <> (SELECT TOP 1 type FROM @coefficients WHERE r2 = (SELECT MAX(r2) FROM @coefficients))
	END

	RETURN
END]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="1831" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [dbo].[curve_best_fit]&#xD;&#xA;(&#xD;&#xA;&#x9;@xy_data xy_data READONLY,&#xD;&#xA;&#x9;@xy_forecasts xy_data READONLY,&#xD;&#xA;&#x9;@return_best_fit_only bit = 0&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;-- Returns mapped time series data for given curve fits; to return only the fitted curve formulae, see curve_best_fit_coefficients_only&#xD;&#xA;&#xD;&#xA;-- See curve_fit_coefficients() for coefficient labels&#xD;&#xA;RETURNS @ds TABLE (type char(8), x float, y float)&#xD;&#xA;&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[curve_best_fit].[@xy_data]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[dbo].[xy_data]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[curve_best_fit].[@xy_forecasts]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[dbo].[xy_data]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[curve_best_fit].[@return_best_fit_only]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlMultiStatementTableValuedFunction" Name="[dbo].[curve_best_fit_coefficients_only]">
			<Property Name="ReturnTableVariable" Value="@coefficients" />
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[curve_best_fit_coefficients_only].[@xy_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_coefficients]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_coefficients].[a]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_coefficients].[b]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_coefficients].[c]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_coefficients].[d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_coefficients].[r2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_best_fit_coefficients_only].[@return_best_fit_only]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_best_fit_coefficients_only].[r2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_best_fit_coefficients_only].[r2]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[curve_best_fit_coefficients_only].[type]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="8" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[curve_best_fit_coefficients_only].[a]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[curve_best_fit_coefficients_only].[b]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[curve_best_fit_coefficients_only].[c]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[curve_best_fit_coefficients_only].[d]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[curve_best_fit_coefficients_only].[r2]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[curve_best_fit_coefficients_only].[@xy_data]" Disambiguator="8">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[curve_best_fit_coefficients_only].[@xy_data].[x]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[curve_best_fit_coefficients_only].[@xy_data].[y]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[

BEGIN
	INSERT INTO @coefficients
	SELECT	'linear', a, b, c, d, r2
	FROM	dbo.curve_fit_coefficients(@xy_data, 'linear')

	INSERT INTO @coefficients
	SELECT	'poly2', a, b, c, d, r2
	FROM	dbo.curve_fit_coefficients(@xy_data, 'poly2')

	INSERT INTO @coefficients
	SELECT	'poly3', a, b, c, d, r2
	FROM	dbo.curve_fit_coefficients(@xy_data, 'poly3')

	INSERT INTO @coefficients
	SELECT	'exp', a, b, c, d, r2
	FROM	dbo.curve_fit_coefficients(@xy_data, 'exp')

	--INSERT INTO @coefficients
	--SELECT	'log', a, b, c, d, r2
	--FROM	dbo.curve_fit_coefficients(@xy_data, 'log')

	INSERT INTO @coefficients
	SELECT	'power', a, b, c, d, r2
	FROM	dbo.curve_fit_coefficients(@xy_data, 'power')

	IF @return_best_fit_only = 1
	BEGIN
		DELETE
		FROM	@coefficients
		WHERE	r2 <> (SELECT MAX(r2) FROM @coefficients)
	END

	RETURN
END]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="1294" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [dbo].[curve_best_fit_coefficients_only]&#xD;&#xA;(&#xD;&#xA;&#x9;@xy_data xy_data READONLY,&#xD;&#xA;&#x9;@return_best_fit_only bit = 0&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;-- Variant of curve_best_fit that returns only the coefficients&#xD;&#xA;&#xD;&#xA;-- Must match dbo.xy_coefficients (but T-SQL doesn't allow you to return a user-definied data type)&#xD;&#xA;-- See curve_fit_coefficients() for coefficient labels&#xD;&#xA;RETURNS @coefficients TABLE (type char(8), a float, b float, c float, d float, r2 float)&#xD;&#xA;&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[curve_best_fit_coefficients_only].[@xy_data]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[dbo].[xy_data]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[curve_best_fit_coefficients_only].[@return_best_fit_only]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlMultiStatementTableValuedFunction" Name="[dbo].[curve_fit_coefficients]">
			<Property Name="ReturnTableVariable" Value="@p" />
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[float]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[float]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[float]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[float]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[float]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[float]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[float]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[float]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[float]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[float]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[float]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[float]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_coefficients].[@type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_coefficients].[@xy_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_polynomial_coefficients]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_coefficients].[@r].[coefficient]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_coefficients].[@r].[power_x]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_coefficients].[@r].[r2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_coefficients].[@xy_data].[x]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_coefficients].[@xy_data].[y]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[curve_fit_coefficients].[a]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[curve_fit_coefficients].[b]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[curve_fit_coefficients].[c]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[curve_fit_coefficients].[d]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[curve_fit_coefficients].[r2]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[curve_fit_coefficients].[@r]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[curve_fit_coefficients].[@r].[power_x]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[curve_fit_coefficients].[@r].[coefficient]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[curve_fit_coefficients].[@r].[r2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[curve_fit_coefficients].[@xy_data]" Disambiguator="12">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[curve_fit_coefficients].[@xy_data].[x]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[curve_fit_coefficients].[@xy_data].[y]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[

/*  Accepts @xy_data TABLE(x, y), @type for fit:
 *
 *  @type		Curve fit			Equation
 *  linear		Linear				y = a + b*x
 *  exp			Exponential			y = a*e^(b*x)						(for a > 0)
 *  log			Logarithmic			y = a + b*ln(x)
 *  power		Power				y = a*x^b							(for a > 0)
 *  poly2		Polynomial^2		y = a + b*x + c*x^2
 *  poly3		Polynomial^3		y = a + b*x + c*x^2 + d*x^3
 *  polyn		Polynomial^n		y = a + b*x + c*x^2 + ... + z*x^n	(n > 3 requires additional return columns, not implemented)
 */

BEGIN
	DECLARE	@n float, @x float, @x2 float, @y float, @xy float, @y2 float, @cf float, @a float, @b float, @c float, @d float, @r2 float

	IF LEFT(@type, 4) = 'poly'
	BEGIN
		-- Evaluate polynomial fit
		DECLARE @order int = CAST(REPLACE(@type, 'poly', '') AS int)
		DECLARE @r TABLE (power_x int, coefficient float, r2 float)

		IF @order < 2
			RETURN
		
		INSERT INTO @r
		SELECT * FROM dbo.curve_fit_polynomial_coefficients(@xy_data, @order)

		SELECT	@a	= (SELECT coefficient FROM @r WHERE power_x = 0),
				@b	= (SELECT coefficient FROM @r WHERE power_x = 1),
				@c  = (SELECT coefficient FROM @r WHERE power_x = 2),
				@d  = CASE WHEN @order > 2 THEN (SELECT coefficient FROM @r WHERE power_x = 3) ELSE null END,
				@r2 = (SELECT r2 FROM @r WHERE power_x = 0)
	END
	ELSE
	BEGIN
		-- Evaluate linear or log()~linear fits
		SELECT	@n =	COUNT(*),
				@x =	CASE
							WHEN @type = 'log'		THEN SUM(LOG(x))
							WHEN @type = 'power'	THEN SUM(LOG(x))
							ELSE					SUM(x)
						END,
				@x2 =	CASE
							WHEN @type = 'log'		THEN SUM(LOG(x) * LOG(x))
							WHEN @type = 'power'	THEN SUM(LOG(x) * LOG(x))
							ELSE					SUM(x * x)
						END,
				@y =	CASE
							WHEN @type = 'exp'		THEN SUM(LOG(y))
							WHEN @type = 'log'		THEN SUM(y)
							WHEN @type = 'power'	THEN SUM(LOG(y))
							ELSE					SUM(y)
						END,
				@xy =	CASE
							WHEN @type = 'exp'		THEN SUM(x * LOG(y))
							WHEN @type = 'log'		THEN SUM(LOG(x) * y)
							WHEN @type = 'power'	THEN SUM(LOG(x) * LOG(y))
							ELSE					SUM(x * y)
						END,
				@y2 =	CASE
							WHEN @type = 'exp'		THEN SUM(LOG(y) * LOG(y))
							WHEN @type = 'power'	THEN SUM(LOG(y) * LOG(y))
							ELSE					SUM(y * y)
						END,
				@cf =	@n * @x2 - @x * @x
		FROM	@xy_data

		IF @cf = 0
			RETURN

		SELECT	@a	= (@x2 * @y - @x * @xy) / @cf,
				@b	= (@n * @xy - @x * @y) / @cf,
				@c  = null,
				@d  = null,
				@r2 = (@a * @y + @b * @xy - @y * @y / @n) / (@y2 - @y * @y / @n)
	END

	INSERT	@p
	SELECT	CASE
				WHEN @type = 'exp'		THEN EXP(@a)
				WHEN @type = 'power'	THEN EXP(@a)
				ELSE					@a
			END,
			@b, @c, @d, @r2

	RETURN
END]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="CreateOffset" Value="2" />
							<Property Name="Length" Value="2859" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE FUNCTION [dbo].[curve_fit_coefficients]&#xD;&#xA;(&#xD;&#xA;&#x9;@xy_data xy_data READONLY,&#xD;&#xA;&#x9;@type char(8) = 'linear'&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;RETURNS @p TABLE (a float, b float, c float, d float, r2 float)&#xD;&#xA;&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[curve_fit_coefficients].[@xy_data]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[dbo].[xy_data]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[curve_fit_coefficients].[@type]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA['linear']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="8" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlMultiStatementTableValuedFunction" Name="[dbo].[curve_fit_data]">
			<Property Name="ReturnTableVariable" Value="@ds" />
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[float]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[float]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[float]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[float]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_data].[@xy_coefficients]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_data].[@xy_coefficients].[a]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_data].[@xy_coefficients].[b]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_data].[@xy_coefficients].[c]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_data].[@xy_coefficients].[d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_data].[@xy_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_data].[@type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_data].[@xy_data].[x]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[curve_fit_data].[type]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="8" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[curve_fit_data].[x]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[curve_fit_data].[y]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[curve_fit_data].[@xy_data]" Disambiguator="13">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[curve_fit_data].[@xy_data].[x]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[curve_fit_data].[@xy_data].[y]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[curve_fit_data].[@xy_coefficients]" Disambiguator="14">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[curve_fit_data].[@xy_coefficients].[type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="8" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[curve_fit_data].[@xy_coefficients].[a]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[curve_fit_data].[@xy_coefficients].[b]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[curve_fit_data].[@xy_coefficients].[c]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[curve_fit_data].[@xy_coefficients].[d]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[curve_fit_data].[@xy_coefficients].[r2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[

/*  Accepts @xy_data TABLE(x, y), @type for fit:
 *
 *  @type		Curve fit			Equation
 *  linear		Linear				y = a + b*x
 *  exp			Exponential			y = a*e^(b*x)						(for a > 0)
 *  log			Logarithmic			y = a + b*log(x)
 *  power		Power				y = a*x^b							(for a > 0)
 *  poly2		Polynomial^2		y = a + b*x + c*x^2
 *  poly3		Polynomial^3		y = a + b*x + c*x^2 + d*x^3
 *  polyn		Polynomial^n		y = a + b*x + c*x^2 + ... + z*x^n	(n > 3 requires additional return columns, not implemented)
 */

BEGIN
	DECLARE @a float, @b float, @c float, @d float

	SELECT @a = (SELECT a FROM @xy_coefficients)
	SELECT @b = (SELECT b FROM @xy_coefficients)
	SELECT @c = (SELECT c FROM @xy_coefficients)
	SELECT @d = (SELECT d FROM @xy_coefficients)

	INSERT INTO @ds
	SELECT	@type,
			x,
			CASE	WHEN @type = 'linear'	THEN @a + @b * x
					WHEN @type = 'exp'		THEN @a * EXP(@b * x)
					WHEN @type = 'log'		THEN @a + @b * LOG(x)
					WHEN @type = 'power'	THEN @a * POWER(x, @b)
					WHEN @type = 'poly2'	THEN @a + @b * x + @c * POWER(x, 2)
					WHEN @type = 'poly3'	THEN @a + @b * x + @c * POWER(x, 2) + @d * POWER(x, 3)	-- Poly n would need to use the logic from @curve_fit_polynomial_coefficients if ever implemented using TABLE(coefficient, power)
					ELSE					null
			END

	FROM	@xy_data

	ORDER BY x

	RETURN
END]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="CreateOffset" Value="2" />
							<Property Name="Length" Value="1540" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE FUNCTION [dbo].[curve_fit_data]&#xD;&#xA;(&#xD;&#xA;&#x9;@xy_data xy_data READONLY,&#xD;&#xA;&#x9;@xy_coefficients xy_coefficients READONLY,&#xD;&#xA;&#x9;@type char(8) = 'linear'&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;RETURNS @ds TABLE (type char(8), x float, y float)&#xD;&#xA;&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[curve_fit_data].[@xy_data]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[dbo].[xy_data]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[curve_fit_data].[@xy_coefficients]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[dbo].[xy_coefficients]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[curve_fit_data].[@type]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA['linear']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="8" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlMultiStatementTableValuedFunction" Name="[dbo].[curve_fit_polynomial_coefficients]">
			<Property Name="ReturnTableVariable" Value="@p" />
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_polynomial_coefficients].[@xy_data]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[float]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_polynomial_coefficients].[@matrix].[m_row]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_polynomial_coefficients].[@matrix].[m_col]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[float]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_polynomial_coefficients].[@matrix].[m_value]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[float]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_polynomial_coefficients].[@xy_data_fit].[y]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_polynomial_coefficients].[@order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_polynomial_coefficients].[@xy_data].[x]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_polynomial_coefficients].[@xy_data].[y]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_polynomial_coefficients].[CTE1].[num_projection].[current_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_polynomial_coefficients].[@xy_data].[x]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_polynomial_coefficients].[@xy_data].[y]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_polynomial_coefficients].[@matrix].[m_row]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_polynomial_coefficients].[@matrix].[m_value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_polynomial_coefficients].[@matrix].[m_row]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_polynomial_coefficients].[@matrix].[m_row]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_polynomial_coefficients].[@matrix].[m_col]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_polynomial_coefficients].[@matrix].[m_col]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_polynomial_coefficients].[@matrix].[m_col]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_polynomial_coefficients].[@matrix].[m_row]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_polynomial_coefficients].[@matrix].[m_value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_polynomial_coefficients].[@matrix].[m_value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_polynomial_coefficients].[@matrix].[m_value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_polynomial_coefficients].[power_x]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_polynomial_coefficients].[coefficient]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_polynomial_coefficients].[r2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_polynomial_coefficients].[@matrix].[m_col]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_polynomial_coefficients].[@xy_data_fit].[y_fit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_polynomial_coefficients].[@xy_data_fit].[x]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_polynomial_coefficients].[coefficient]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_polynomial_coefficients].[power_x]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_polynomial_coefficients].[@xy_data_fit].[y]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[curve_fit_polynomial_coefficients].[@xy_data_fit].[y_fit]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[curve_fit_polynomial_coefficients].[power_x]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[curve_fit_polynomial_coefficients].[coefficient]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[curve_fit_polynomial_coefficients].[r2]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[curve_fit_polynomial_coefficients].[@matrix]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[curve_fit_polynomial_coefficients].[@matrix].[m_row]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[curve_fit_polynomial_coefficients].[@matrix].[m_col]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[curve_fit_polynomial_coefficients].[@matrix].[m_value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[curve_fit_polynomial_coefficients].[@xy_data_fit]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[curve_fit_polynomial_coefficients].[@xy_data_fit].[x]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[curve_fit_polynomial_coefficients].[@xy_data_fit].[y]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[curve_fit_polynomial_coefficients].[@xy_data_fit].[y_fit]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[curve_fit_polynomial_coefficients].[CTE1].[num_projection]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[curve_fit_polynomial_coefficients].[CTE1].[num_projection].[current_number]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[curve_fit_polynomial_coefficients].[@xy_data]" Disambiguator="9">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[curve_fit_polynomial_coefficients].[@xy_data].[x]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[curve_fit_polynomial_coefficients].[@xy_data].[y]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
BEGIN
	-- Step 1: Convert @xy_data into a matrix
	DECLARE @matrix TABLE (m_row int, m_col int, m_value float)
	DECLARE @r int = 0, @c int = 0

	IF @order > 0
	BEGIN
		-- Find the optimal solution for a polynomial fit of order n = @order
		WHILE @r <= @order
		BEGIN
			SET @c = 0

			WHILE @c <= @order
			BEGIN
				-- Create an n x n matrix for this order
				INSERT INTO @matrix
				SELECT	@r, @c, (SELECT SUM(POWER(x, @c + @r)) FROM @xy_data)		-- SUM(x^n) as row, column iterator

				SET @c = @c + 1

				IF @c > @order
				BEGIN
					-- Append y values as column n
					INSERT INTO @matrix
					SELECT @r, @c, (SELECT SUM(POWER(x, @r) * y) FROM @xy_data)		-- SUM(x^n) * y as row, column iterator (appended, but treated as prepend logic of @c = 0 to avoid matrix transforms below)
				END
			END

			SET @r = @r + 1
		END
	END
	ELSE
	BEGIN
		-- Else, find the optimal solution for a polynomial of order n = @total_points (ie perfect fit polynomial)
		DECLARE @total_points int = (SELECT COUNT(1) FROM @xy_data);

		WITH num_projection(current_number) AS
		(
				SELECT 1
				UNION ALL
				SELECT 1+current_number FROM num_projection WHERE current_number < @total_points
		)
        
		INSERT INTO @matrix
		SELECT	seq-1,									-- Single row per point
				np.current_number-1,					-- Column per power of x
				CASE
					WHEN np.current_number = 1 THEN 1	-- First column is always x^0 = 1
					ELSE POWER(x, np.current_number-1)  -- Raise nth column to power n-1
				END
		FROM	num_projection np,						-- Cross join numeric point data and column indexes
				(
					SELECT  ROW_NUMBER() OVER (ORDER BY x, y) seq, x, y
					FROM    @xy_data
				) vals;

		-- Append y values as nth column
		INSERT INTO @matrix
		SELECT  ROW_NUMBER() OVER (ORDER BY x, y) - 1 seq, @total_points, y
		FROM    @xy_data
	END

	-- Step 2: Compute row echelon form of matrix
	DECLARE @lead int = 0, @index int = 0, @current float

	DECLARE @rows int = (SELECT MAX(m_row) FROM @matrix)
	DECLARE @cols int = (SELECT MAX(m_col) FROM @matrix)
        
	DECLARE @solved int	-- 0 = unsolvable #sadface, 1 = solved #party

	SET @r = 0
	WHILE @r <= @rows
	BEGIN
			IF @cols <= @lead
			BEGIN
				-- Cannot solve this one
				SET @solved = 0
				BREAK
			END

			SET @index = @r

			-- Determine if any row swaps are needed.
			WHILE (SELECT m_value FROM @matrix WHERE m_row = @index AND m_col = @lead) = 0
					BEGIN
						SET @index = @index + 1
						IF @rows = @index
						BEGIN
							SET @index = @r
							SET @lead = @lead + 1
							IF @cols = @lead
								BEGIN
									-- Cannot solve
									SET @solved = 0
									BREAK
								END
						END
					END

			-- Move this row to the correct position if needed.
			IF @index <> @r
			BEGIN
				-- Swap rows
				UPDATE @matrix
				SET m_row = CASE m_row
								WHEN @r THEN @index
								WHEN @index THEN @r
							END
				WHERE m_row IN (@index, @r)
			END

			-- Divide this row by its lead column value, so that the row's lead is 1 (this will actually multiply/increase the value if lead < 0)
			DECLARE @divisor float = (SELECT m_value FROM @matrix WHERE m_row = @r AND m_col = @lead)
			If @divisor <> 1
			BEGIN
				UPDATE @matrix SET m_value = m_value / @divisor WHERE m_row = @r
			END

			-- Update other rows and divide them by the appropriate multiple of this row in order to zero the current lead column.
			UPDATE  i
			SET     m_value = i.m_value - (m.m_value * r.m_value)
			FROM    @matrix i INNER JOIN
					@matrix m ON m.m_row = i.m_row AND m.m_col = @lead INNER JOIN
					@matrix r ON r.m_col = i.m_col AND r.m_row = @r AND r.m_row <> i.m_row

			SET @lead = @lead + 1

			-- Move to next
			SET @r = @r + 1
	END

	-- If we didn't BREAK, @matrix has a solution
	IF @solved IS null
	BEGIN
		SET @solved = 1
	END


	-- Step 3: Produce coefficients list (final column in ref)
	IF @solved = 1
	BEGIN
		INSERT INTO @p (power_x, coefficient, r2)
		SELECT  m_row, m_value, null
		FROM    @matrix
		WHERE   m_col = @cols

		-- Add R-squared value for this fit
		DECLARE @xy_data_fit TABLE (x float, y float, y_fit float)

		INSERT INTO @xy_data_fit
		SELECT x, y, 0 FROM @xy_data

		DECLARE @y_bar float = (SELECT AVG(y) FROM @xy_data_fit)

		DECLARE @n int = 0
		WHILE @n < @cols
		BEGIN
			UPDATE @xy_data_fit SET y_fit = y_fit + (POWER(x, @n) * (SELECT coefficient FROM @p WHERE power_x = @n))
			SET @n = @n + 1
		END

		UPDATE	@p
		SET		r2 = 1 - (SELECT SUM(SQUARE(y - y_fit)) FROM @xy_data_fit) / (SELECT SUM(SQUARE(y - @y_bar)) FROM @xy_data_fit)
		WHERE	power_x = 0
	END

	RETURN
END]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="CreateOffset" Value="2" />
							<Property Name="Length" Value="4898" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE FUNCTION [dbo].[curve_fit_polynomial_coefficients]&#xD;&#xA;(&#xD;&#xA;        @xy_data xy_data READONLY,&#xD;&#xA;&#x9;&#x9;@order int = null&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;RETURNS @p TABLE (power_x int, coefficient float, r2 float)&#xD;&#xA;&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[curve_fit_polynomial_coefficients].[@xy_data]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[dbo].[xy_data]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[curve_fit_polynomial_coefficients].[@order]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[data_auctions]">
			<Property Name="BodyScript">
				<Value><![CDATA[

DECLARE @frequency_is_family bit, @status_is_family bit

--SET @frequency_is_family = (SELECT COUNT(DISTINCT family_id) FROM attribute_family_link WHERE family_id = @frequency_id)
SET @status_is_family = (SELECT COUNT(DISTINCT family_id) FROM attribute_family_link WHERE family_id = @status_id)

IF @geoscheme_id IS NULL
BEGIN
	SET @geoscheme_id = dbo.default_geoscheme_id()
END

IF @subregion_id IN (3899,3900)
BEGIN
	-- Developed/developing split can return results from any geosceheme
	-- TODO: better solution!
	SET @geoscheme_id = 3937
END


CREATE TABLE #auctions (id int, zone_id int, date datetime, status_id int)
CREATE TABLE #auction_awards (id int, auction_id int, organisation_id int, status_id int)

-- Country-level data for auctions
INSERT INTO #auctions
SELECT	a.id,
		a.zone_id,
		a.date,
		a.status_id
		
FROM	auctions a INNER JOIN
		zones c ON a.zone_id = c.id INNER JOIN
		zone_link zl ON c.id = zl.subzone_id INNER JOIN
		zones s ON zl.zone_id = s.id INNER JOIN
		zone_link zl2 ON s.id = zl2.subzone_id INNER JOIN 
		zones r ON zl2.zone_id = r.id INNER JOIN
		zone_link zl3 ON r.id = zl3.subzone_id INNER JOIN
		zones g ON zl3.zone_id = g.id
		
WHERE	a.id = COALESCE(@auction_id, a.id) AND
		c.id = COALESCE(@country_id, c.id) AND
		s.id = COALESCE(@subregion_id, s.id) AND
		r.id = COALESCE(@region_id, r.id) AND
		g.id = @geoscheme_id AND
		(
			(@status_is_family = 0 AND a.status_id = COALESCE(@status_id, a.status_id)) OR
			(@status_is_family = 1 AND a.status_id IN (SELECT DISTINCT attribute_id FROM attribute_family_link WHERE family_id = @status_id))
		)


IF @show = 2
BEGIN
	-- Operator-level data for awards
	INSERT INTO #auction_awards
	SELECT	aw.id,
			aw.auction_id,
			aw.organisation_id,
			aw.status_id
			
	FROM	auction_awards aw INNER JOIN
			auctions a ON aw.auction_id = a.id INNER JOIN
			zones c ON a.zone_id = c.id INNER JOIN
			zone_link zl ON c.id = zl.subzone_id INNER JOIN
			zones s ON zl.zone_id = s.id INNER JOIN
			zone_link zl2 ON s.id = zl2.subzone_id INNER JOIN 
			zones r ON zl2.zone_id = r.id INNER JOIN
			zone_link zl3 ON r.id = zl3.subzone_id INNER JOIN
			zones g ON zl3.zone_id = g.id
			
	WHERE	a.id = COALESCE(@auction_id, a.id) AND
			c.id = COALESCE(@country_id, c.id) AND
			s.id = COALESCE(@subregion_id, s.id) AND
			r.id = COALESCE(@region_id, r.id) AND
			g.id = @geoscheme_id AND
			(
				(@status_is_family = 0 AND aw.status_id = COALESCE(@status_id, aw.status_id)) OR
				(@status_is_family = 1 AND aw.status_id IN (SELECT DISTINCT attribute_id FROM attribute_family_link WHERE family_id = @status_id))
			)
END

-- Apply filters that don't JOIN efficiently
IF @frequency_id IS NOT null
BEGIN
	DELETE FROM	#auctions WHERE id NOT IN (SELECT auction_id FROM auction_frequency_link WHERE frequency_id = @frequency_id)
	DELETE FROM	#auction_awards WHERE auction_id NOT IN (SELECT auction_id FROM auction_frequency_link WHERE frequency_id = @frequency_id)
END

IF @technology_id IS NOT null
BEGIN
	DELETE FROM	#auctions WHERE id NOT IN (SELECT auction_id FROM auction_service_link WHERE service_id = @technology_id)
	DELETE FROM	#auction_awards WHERE auction_id NOT IN (SELECT auction_id FROM auction_service_link WHERE service_id = @technology_id)
END


-- Data
SELECT	id
FROM 	#auctions

SELECT	id
FROM 	#auction_awards


-- Stats
SELECT	COUNT(*) count
FROM	(SELECT DISTINCT zone_id, date FROM #auctions) a

UNION ALL

SELECT	COUNT(*) count
FROM	#auction_awards

UNION ALL

SELECT	COUNT(DISTINCT zone_id) count
FROM	#auctions

UNION ALL

SELECT	COUNT(DISTINCT organisation_id) count
FROM	#auction_awards


DROP TABLE #auction_awards
DROP TABLE #auctions]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attribute_family_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attribute_family_link].[family_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions].[@status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions].[@geoscheme_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[default_geoscheme_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions].[@subregion_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions].[#auctions]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions].[@auction_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions].[@country_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions].[@region_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attribute_family_link].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attribute_family_link].[family_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions].[@show]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions].[#auction_awards]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_awards]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_awards].[auction_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_awards].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_awards].[auction_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_awards].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_awards].[status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attribute_family_link].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attribute_family_link].[family_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions].[@frequency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions].[#auctions].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_frequency_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_frequency_link].[auction_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_frequency_link].[frequency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions].[#auction_awards].[auction_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_frequency_link].[auction_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_frequency_link].[frequency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions].[@technology_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_service_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_service_link].[auction_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_service_link].[service_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_service_link].[auction_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_service_link].[service_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions].[#auction_awards].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions].[#auctions].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions].[#auctions].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions].[#auctions].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions].[#auction_awards].[organisation_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[data_auctions].[#auctions]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_auctions].[#auctions].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_auctions].[#auctions].[zone_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_auctions].[#auctions].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_auctions].[#auctions].[status_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[data_auctions].[#auction_awards]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_auctions].[#auction_awards].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_auctions].[#auction_awards].[auction_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_auctions].[#auction_awards].[organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_auctions].[#auction_awards].[status_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_auctions].[@show]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[tinyint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_auctions].[@geoscheme_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_auctions].[@region_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_auctions].[@subregion_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_auctions].[@country_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_auctions].[@auction_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_auctions].[@frequency_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_auctions].[@technology_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_auctions].[@status_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="4038" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[data_auctions]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@show tinyint,&#xD;&#xA;&#x9;@geoscheme_id int = null,&#xD;&#xA;&#x9;@region_id int = null,&#xD;&#xA;&#x9;@subregion_id int = null,&#xD;&#xA;&#x9;@country_id int = null,&#xD;&#xA;&#x9;@auction_id int = null,&#xD;&#xA;&#x9;@frequency_id int = null,&#xD;&#xA;&#x9;@technology_id int = null,&#xD;&#xA;&#x9;@status_id int = null&#xD;&#xA;)&#xD;&#xA;&#x9;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[data_auctions_alt]">
			<Property Name="BodyScript">
				<Value><![CDATA[

DECLARE @frequency_is_family bit, @status_is_family bit

--SET @frequency_is_family = (SELECT COUNT(DISTINCT family_id) FROM attribute_family_link WHERE family_id = @frequency_id)
SET @status_is_family = (SELECT COUNT(DISTINCT family_id) FROM attribute_family_link WHERE family_id = @status_id)

IF @geoscheme_id IS NULL
BEGIN
	SET @geoscheme_id = dbo.default_geoscheme_id()
END

IF @subregion_id IN (3899,3900)
BEGIN
	-- Developed/developing split can return results from any geosceheme
	-- TODO: better solution!
	SET @geoscheme_id = 3937
END


CREATE TABLE #auctions (id int, zone_id int, date datetime, status_id int)
CREATE TABLE #auction_awards (id int, auction_id int, organisation_id int, status_id int)

-- Country-level data for auctions
INSERT INTO #auctions
SELECT	a.id,
		a.zone_id,
		a.date,
		a.status_id
		
FROM	auctions a INNER JOIN
		zones c ON a.zone_id = c.id INNER JOIN
		zone_link zl ON c.id = zl.subzone_id INNER JOIN
		zones s ON zl.zone_id = s.id INNER JOIN
		zone_link zl2 ON s.id = zl2.subzone_id INNER JOIN 
		zones r ON zl2.zone_id = r.id INNER JOIN
		zone_link zl3 ON r.id = zl3.subzone_id INNER JOIN
		zones g ON zl3.zone_id = g.id
		
WHERE	a.id = COALESCE(@auction_id, a.id) AND
		c.id = COALESCE(@country_id, c.id) AND
		s.id = COALESCE(@subregion_id, s.id) AND
		r.id = COALESCE(@region_id, r.id) AND
		g.id = @geoscheme_id AND
		(
			(@status_is_family = 0 AND a.status_id = COALESCE(@status_id, a.status_id)) OR
			(@status_is_family = 1 AND a.status_id IN (SELECT DISTINCT attribute_id FROM attribute_family_link WHERE family_id = @status_id))
		)


IF @show = 2
BEGIN
	-- Operator-level data for awards
	INSERT INTO #auction_awards
	SELECT	aw.id,
			aw.auction_id,
			aw.organisation_id,
			aw.status_id
			
	FROM	auction_awards aw INNER JOIN
			auctions a ON aw.auction_id = a.id INNER JOIN
			zones c ON a.zone_id = c.id INNER JOIN
			zone_link zl ON c.id = zl.subzone_id INNER JOIN
			zones s ON zl.zone_id = s.id INNER JOIN
			zone_link zl2 ON s.id = zl2.subzone_id INNER JOIN 
			zones r ON zl2.zone_id = r.id INNER JOIN
			zone_link zl3 ON r.id = zl3.subzone_id INNER JOIN
			zones g ON zl3.zone_id = g.id
			
	WHERE	a.id = COALESCE(@auction_id, a.id) AND
			c.id = COALESCE(@country_id, c.id) AND
			s.id = COALESCE(@subregion_id, s.id) AND
			r.id = COALESCE(@region_id, r.id) AND
			g.id = @geoscheme_id AND
			(
				(@status_is_family = 0 AND aw.status_id = COALESCE(@status_id, aw.status_id)) OR
				(@status_is_family = 1 AND aw.status_id IN (SELECT DISTINCT attribute_id FROM attribute_family_link WHERE family_id = @status_id))
			)
END

-- Apply filters that don't JOIN efficiently
IF @frequency_id IS NOT null
BEGIN
	DELETE FROM	#auctions WHERE id NOT IN (SELECT auction_id FROM auction_frequency_link WHERE frequency_id = @frequency_id)
	DELETE FROM	#auction_awards WHERE auction_id NOT IN (SELECT auction_id FROM auction_frequency_link WHERE frequency_id = @frequency_id)
END

IF @technology_id IS NOT null
BEGIN
	DELETE FROM	#auctions WHERE id NOT IN (SELECT auction_id FROM auction_service_link WHERE service_id = @technology_id)
	DELETE FROM	#auction_awards WHERE auction_id NOT IN (SELECT auction_id FROM auction_service_link WHERE service_id = @technology_id)
END


-- Data
SELECT	id
FROM 	#auctions

SELECT	id
FROM 	#auction_awards


-- Stats
SELECT	COUNT(*) count
FROM	(SELECT DISTINCT zone_id, date FROM #auctions) a

UNION ALL

SELECT	COUNT(*) count
FROM	#auction_awards

UNION ALL

SELECT	COUNT(DISTINCT zone_id) count
FROM	#auctions

UNION ALL

SELECT	COUNT(DISTINCT organisation_id) count
FROM	#auction_awards


DROP TABLE #auction_awards
DROP TABLE #auctions]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attribute_family_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attribute_family_link].[family_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_alt].[@status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_alt].[@geoscheme_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[default_geoscheme_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_alt].[@subregion_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_alt].[#auctions]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_alt].[@auction_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_alt].[@country_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_alt].[@region_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attribute_family_link].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attribute_family_link].[family_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_alt].[@show]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_alt].[#auction_awards]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_awards]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_awards].[auction_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_awards].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_awards].[auction_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_awards].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_awards].[status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attribute_family_link].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attribute_family_link].[family_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_alt].[@frequency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_alt].[#auctions].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_frequency_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_frequency_link].[auction_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_frequency_link].[frequency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_alt].[#auction_awards].[auction_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_frequency_link].[auction_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_frequency_link].[frequency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_alt].[@technology_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_service_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_service_link].[auction_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_service_link].[service_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_service_link].[auction_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_service_link].[service_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_alt].[#auction_awards].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_alt].[#auctions].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_alt].[#auctions].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_alt].[#auctions].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_alt].[#auction_awards].[organisation_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[data_auctions_alt].[#auctions]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_auctions_alt].[#auctions].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_auctions_alt].[#auctions].[zone_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_auctions_alt].[#auctions].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_auctions_alt].[#auctions].[status_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[data_auctions_alt].[#auction_awards]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_auctions_alt].[#auction_awards].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_auctions_alt].[#auction_awards].[auction_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_auctions_alt].[#auction_awards].[organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_auctions_alt].[#auction_awards].[status_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_auctions_alt].[@show]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[tinyint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_auctions_alt].[@geoscheme_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_auctions_alt].[@region_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_auctions_alt].[@subregion_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_auctions_alt].[@country_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_auctions_alt].[@auction_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_auctions_alt].[@frequency_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_auctions_alt].[@technology_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_auctions_alt].[@status_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="4042" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[data_auctions_alt]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@show tinyint,&#xD;&#xA;&#x9;@geoscheme_id int = null,&#xD;&#xA;&#x9;@region_id int = null,&#xD;&#xA;&#x9;@subregion_id int = null,&#xD;&#xA;&#x9;@country_id int = null,&#xD;&#xA;&#x9;@auction_id int = null,&#xD;&#xA;&#x9;@frequency_id int = null,&#xD;&#xA;&#x9;@technology_id int = null,&#xD;&#xA;&#x9;@status_id int = null&#xD;&#xA;)&#xD;&#xA;&#x9;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[data_auctions_competition]">
			<Property Name="BodyScript">
				<Value><![CDATA[

DECLARE @frequency_is_family bit, @status_is_family bit

--SET @frequency_is_family = (SELECT COUNT(DISTINCT family_id) FROM attribute_family_link WHERE family_id = @frequency_id)
SET @status_is_family = (SELECT COUNT(DISTINCT family_id) FROM attribute_family_link WHERE family_id = @status_id)

IF @geoscheme_id IS NULL
BEGIN
	SET @geoscheme_id = dbo.default_geoscheme_id()
END

IF @subregion_id IN (3899,3900)
BEGIN
	-- Developed/developing split can return results from any geosceheme
	-- TODO: better solution!
	SET @geoscheme_id = 3937
END


CREATE TABLE #auctions (id int, zone_id int, date datetime, status_id int)
CREATE TABLE #auction_awards (id int, auction_id int, organisation_id int, status_id int)

-- Country-level data for auctions
INSERT INTO #auctions
SELECT	a.id,
		a.zone_id,
		a.date,
		a.status_id
		
FROM	auctions a INNER JOIN
		zones c ON a.zone_id = c.id INNER JOIN
		zone_link zl ON c.id = zl.subzone_id INNER JOIN
		zones s ON zl.zone_id = s.id INNER JOIN
		zone_link zl2 ON s.id = zl2.subzone_id INNER JOIN 
		zones r ON zl2.zone_id = r.id INNER JOIN
		zone_link zl3 ON r.id = zl3.subzone_id INNER JOIN
		zones g ON zl3.zone_id = g.id
		
WHERE	(a.applicants IS NOT null OR a.bidders IS NOT null) AND -- Competition
		a.id = COALESCE(@auction_id, a.id) AND
		c.id = COALESCE(@country_id, c.id) AND
		s.id = COALESCE(@subregion_id, s.id) AND
		r.id = COALESCE(@region_id, r.id) AND
		g.id = @geoscheme_id AND
		(
			(@status_is_family = 0 AND a.status_id = COALESCE(@status_id, a.status_id)) OR
			(@status_is_family = 1 AND a.status_id IN (SELECT DISTINCT attribute_id FROM attribute_family_link WHERE family_id = @status_id))
		)
		

IF @show = 2
BEGIN
	-- Operator-level data for awards
	INSERT INTO #auction_awards
	SELECT	aw.id,
			aw.auction_id,
			aw.organisation_id,
			aw.status_id
			
	FROM	auction_awards aw INNER JOIN
			auctions a ON aw.auction_id = a.id INNER JOIN
			zones c ON a.zone_id = c.id INNER JOIN
			zone_link zl ON c.id = zl.subzone_id INNER JOIN
			zones s ON zl.zone_id = s.id INNER JOIN
			zone_link zl2 ON s.id = zl2.subzone_id INNER JOIN 
			zones r ON zl2.zone_id = r.id INNER JOIN
			zone_link zl3 ON r.id = zl3.subzone_id INNER JOIN
			zones g ON zl3.zone_id = g.id
			
	WHERE	a.id = COALESCE(@auction_id, a.id) AND
			c.id = COALESCE(@country_id, c.id) AND
			s.id = COALESCE(@subregion_id, s.id) AND
			r.id = COALESCE(@region_id, r.id) AND
			g.id = @geoscheme_id AND
			(
				(@status_is_family = 0 AND aw.status_id = COALESCE(@status_id, aw.status_id)) OR
				(@status_is_family = 1 AND aw.status_id IN (SELECT DISTINCT attribute_id FROM attribute_family_link WHERE family_id = @status_id))
			)
END

-- Apply filters that don't JOIN efficiently
IF @frequency_id IS NOT null
BEGIN
	DELETE FROM	#auctions WHERE id NOT IN (SELECT auction_id FROM auction_frequency_link WHERE frequency_id = @frequency_id)
	DELETE FROM	#auction_awards WHERE auction_id NOT IN (SELECT auction_id FROM auction_frequency_link WHERE frequency_id = @frequency_id)
END

IF @technology_id IS NOT null
BEGIN
	DELETE FROM	#auctions WHERE id NOT IN (SELECT auction_id FROM auction_service_link WHERE service_id = @technology_id)
	DELETE FROM	#auction_awards WHERE auction_id NOT IN (SELECT auction_id FROM auction_service_link WHERE service_id = @technology_id)
END


-- Data
SELECT	id
FROM 	#auctions

SELECT	id
FROM 	#auction_awards


-- Stats
SELECT	COUNT(*) count
FROM	(SELECT DISTINCT zone_id, date FROM #auctions) a

UNION ALL

SELECT	COUNT(*) count
FROM	#auction_awards

UNION ALL

SELECT	COUNT(DISTINCT zone_id) count
FROM	#auctions

UNION ALL

SELECT	COUNT(DISTINCT organisation_id) count
FROM	#auction_awards


DROP TABLE #auction_awards
DROP TABLE #auctions]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attribute_family_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attribute_family_link].[family_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_competition].[@status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_competition].[@geoscheme_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[default_geoscheme_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_competition].[@subregion_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_competition].[#auctions]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[applicants]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[bidders]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_competition].[@auction_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_competition].[@country_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_competition].[@region_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attribute_family_link].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attribute_family_link].[family_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_competition].[@show]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_competition].[#auction_awards]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_awards]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_awards].[auction_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_awards].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_awards].[auction_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_awards].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_awards].[status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attribute_family_link].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attribute_family_link].[family_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_competition].[@frequency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_competition].[#auctions].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_frequency_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_frequency_link].[auction_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_frequency_link].[frequency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_competition].[#auction_awards].[auction_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_frequency_link].[auction_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_frequency_link].[frequency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_competition].[@technology_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_service_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_service_link].[auction_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_service_link].[service_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_service_link].[auction_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_service_link].[service_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_competition].[#auction_awards].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_competition].[#auctions].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_competition].[#auctions].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_competition].[#auctions].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_competition].[#auction_awards].[organisation_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[data_auctions_competition].[#auctions]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_auctions_competition].[#auctions].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_auctions_competition].[#auctions].[zone_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_auctions_competition].[#auctions].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_auctions_competition].[#auctions].[status_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[data_auctions_competition].[#auction_awards]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_auctions_competition].[#auction_awards].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_auctions_competition].[#auction_awards].[auction_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_auctions_competition].[#auction_awards].[organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_auctions_competition].[#auction_awards].[status_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_auctions_competition].[@show]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[tinyint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_auctions_competition].[@geoscheme_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_auctions_competition].[@region_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_auctions_competition].[@subregion_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_auctions_competition].[@country_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_auctions_competition].[@auction_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_auctions_competition].[@frequency_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_auctions_competition].[@technology_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_auctions_competition].[@status_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="4126" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[data_auctions_competition]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@show tinyint,&#xD;&#xA;&#x9;@geoscheme_id int = null,&#xD;&#xA;&#x9;@region_id int = null,&#xD;&#xA;&#x9;@subregion_id int = null,&#xD;&#xA;&#x9;@country_id int = null,&#xD;&#xA;&#x9;@auction_id int = null,&#xD;&#xA;&#x9;@frequency_id int = null,&#xD;&#xA;&#x9;@technology_id int = null,&#xD;&#xA;&#x9;@status_id int = null&#xD;&#xA;)&#xD;&#xA;&#x9;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[data_auctions_pricing]">
			<Property Name="BodyScript">
				<Value><![CDATA[

DECLARE @frequency_is_family bit, @status_is_family bit

--SET @frequency_is_family = (SELECT COUNT(DISTINCT family_id) FROM attribute_family_link WHERE family_id = @frequency_id)
SET @status_is_family = (SELECT COUNT(DISTINCT family_id) FROM attribute_family_link WHERE family_id = @status_id)

IF @geoscheme_id IS NULL
BEGIN
	SET @geoscheme_id = dbo.default_geoscheme_id()
END

IF @subregion_id IN (3899,3900)
BEGIN
	-- Developed/developing split can return results from any geosceheme
	-- TODO: better solution!
	SET @geoscheme_id = 3937
END


CREATE TABLE #auctions (id int, zone_id int, date datetime, status_id int)
CREATE TABLE #auction_awards (id int, auction_id int, organisation_id int, status_id int)

-- Country-level data for auctions
INSERT INTO #auctions
SELECT	a.id,
		a.zone_id,
		a.date,
		a.status_id
		
FROM	auctions a INNER JOIN
		zones c ON a.zone_id = c.id INNER JOIN
		zone_link zl ON c.id = zl.subzone_id INNER JOIN
		zones s ON zl.zone_id = s.id INNER JOIN
		zone_link zl2 ON s.id = zl2.subzone_id INNER JOIN 
		zones r ON zl2.zone_id = r.id INNER JOIN
		zone_link zl3 ON r.id = zl3.subzone_id INNER JOIN
		zones g ON zl3.zone_id = g.id
		
WHERE	a.price IS NOT null AND -- Pricing
		a.id = COALESCE(@auction_id, a.id) AND
		c.id = COALESCE(@country_id, c.id) AND
		s.id = COALESCE(@subregion_id, s.id) AND
		r.id = COALESCE(@region_id, r.id) AND
		g.id = @geoscheme_id AND
		(
			(@status_is_family = 0 AND a.status_id = COALESCE(@status_id, a.status_id)) OR
			(@status_is_family = 1 AND a.status_id IN (SELECT DISTINCT attribute_id FROM attribute_family_link WHERE family_id = @status_id))
		)


IF @show = 2
BEGIN
	-- Operator-level data for awards
	INSERT INTO #auction_awards
	SELECT	aw.id,
			aw.auction_id,
			aw.organisation_id,
			aw.status_id
			
	FROM	auction_awards aw INNER JOIN
			auctions a ON aw.auction_id = a.id INNER JOIN
			zones c ON a.zone_id = c.id INNER JOIN
			zone_link zl ON c.id = zl.subzone_id INNER JOIN
			zones s ON zl.zone_id = s.id INNER JOIN
			zone_link zl2 ON s.id = zl2.subzone_id INNER JOIN 
			zones r ON zl2.zone_id = r.id INNER JOIN
			zone_link zl3 ON r.id = zl3.subzone_id INNER JOIN
			zones g ON zl3.zone_id = g.id
			
	WHERE	a.id = COALESCE(@auction_id, a.id) AND
			c.id = COALESCE(@country_id, c.id) AND
			s.id = COALESCE(@subregion_id, s.id) AND
			r.id = COALESCE(@region_id, r.id) AND
			g.id = @geoscheme_id AND
			(
				(@status_is_family = 0 AND aw.status_id = COALESCE(@status_id, aw.status_id)) OR
				(@status_is_family = 1 AND aw.status_id IN (SELECT DISTINCT attribute_id FROM attribute_family_link WHERE family_id = @status_id))
			)
END

-- Apply filters that don't JOIN efficiently
IF @frequency_id IS NOT null
BEGIN
	DELETE FROM	#auctions WHERE id NOT IN (SELECT auction_id FROM auction_frequency_link WHERE frequency_id = @frequency_id)
	DELETE FROM	#auction_awards WHERE auction_id NOT IN (SELECT auction_id FROM auction_frequency_link WHERE frequency_id = @frequency_id)
END

IF @technology_id IS NOT null
BEGIN
	DELETE FROM	#auctions WHERE id NOT IN (SELECT auction_id FROM auction_service_link WHERE service_id = @technology_id)
	DELETE FROM	#auction_awards WHERE auction_id NOT IN (SELECT auction_id FROM auction_service_link WHERE service_id = @technology_id)
END


-- Data
SELECT	id
FROM 	#auctions

SELECT	id
FROM 	#auction_awards


-- Stats
SELECT	COUNT(*) count
FROM	(SELECT DISTINCT zone_id, date FROM #auctions) a

UNION ALL

SELECT	COUNT(*) count
FROM	#auction_awards

UNION ALL

SELECT	COUNT(DISTINCT zone_id) count
FROM	#auctions

UNION ALL

SELECT	COUNT(DISTINCT organisation_id) count
FROM	#auction_awards


DROP TABLE #auction_awards
DROP TABLE #auctions]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attribute_family_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attribute_family_link].[family_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_pricing].[@status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_pricing].[@geoscheme_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[default_geoscheme_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_pricing].[@subregion_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_pricing].[#auctions]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[price]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_pricing].[@auction_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_pricing].[@country_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_pricing].[@region_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attribute_family_link].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attribute_family_link].[family_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_pricing].[@show]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_pricing].[#auction_awards]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_awards]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_awards].[auction_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_awards].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_awards].[auction_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_awards].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_awards].[status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auctions].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attribute_family_link].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attribute_family_link].[family_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_pricing].[@frequency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_pricing].[#auctions].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_frequency_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_frequency_link].[auction_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_frequency_link].[frequency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_pricing].[#auction_awards].[auction_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_frequency_link].[auction_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_frequency_link].[frequency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_pricing].[@technology_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_service_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_service_link].[auction_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_service_link].[service_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_service_link].[auction_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[auction_service_link].[service_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_pricing].[#auction_awards].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_pricing].[#auctions].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_pricing].[#auctions].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_pricing].[#auctions].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_auctions_pricing].[#auction_awards].[organisation_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[data_auctions_pricing].[#auctions]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_auctions_pricing].[#auctions].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_auctions_pricing].[#auctions].[zone_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_auctions_pricing].[#auctions].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_auctions_pricing].[#auctions].[status_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[data_auctions_pricing].[#auction_awards]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_auctions_pricing].[#auction_awards].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_auctions_pricing].[#auction_awards].[auction_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_auctions_pricing].[#auction_awards].[organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_auctions_pricing].[#auction_awards].[status_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_auctions_pricing].[@show]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[tinyint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_auctions_pricing].[@geoscheme_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_auctions_pricing].[@region_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_auctions_pricing].[@subregion_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_auctions_pricing].[@country_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_auctions_pricing].[@auction_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_auctions_pricing].[@frequency_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_auctions_pricing].[@technology_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_auctions_pricing].[@status_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="4084" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[data_auctions_pricing]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@show tinyint,&#xD;&#xA;&#x9;@geoscheme_id int = null,&#xD;&#xA;&#x9;@region_id int = null,&#xD;&#xA;&#x9;@subregion_id int = null,&#xD;&#xA;&#x9;@country_id int = null,&#xD;&#xA;&#x9;@auction_id int = null,&#xD;&#xA;&#x9;@frequency_id int = null,&#xD;&#xA;&#x9;@technology_id int = null,&#xD;&#xA;&#x9;@status_id int = null&#xD;&#xA;)&#xD;&#xA;&#x9;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[data_currencies]">
			<Property Name="BodyScript">
				<Value><![CDATA[

CREATE TABLE #data (id bigint, from_currency_id int, from_currency nvarchar(512) COLLATE DATABASE_DEFAULT, from_currency_iso_code nvarchar(5) COLLATE DATABASE_DEFAULT, to_currency_id int, to_currency nvarchar(512) COLLATE DATABASE_DEFAULT, to_currency_iso_code nvarchar(5) COLLATE DATABASE_DEFAULT, date datetime, date_type char(1) COLLATE DATABASE_DEFAULT, value decimal(22,6))

INSERT INTO #data
SELECT	cr.id,
		cf.id,
		cf.name,
		cf.iso_code,
		ct.id,
		ct.name,
		ct.iso_code,
		cr.date,
		@date_type, -- TODO: cr.date_type
		cr.value

FROM	currency_rates cr INNER JOIN
		currencies cf ON cr.from_currency_id = cf.id INNER JOIN
		currencies ct ON cr.to_currency_id = ct.id

WHERE	ct.id IN (1,2,3,73) AND
		cf.id <> 0 AND
		ct.id = COALESCE(@currency_id, ct.id) AND
		cr.date >= @date_start AND
		cr.date < @date_end AND
		cr.date_type = @date_type

ORDER BY cf.iso_code, ct.id, cr.date


-- Data
SELECT * FROM #data

-- Date combinations
SELECT	DISTINCT 
		date, 
		date_type

FROM	#data

ORDER BY date


DROP TABLE #data]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[data_currencies].[#data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[iso_code]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[iso_code]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_currencies].[@date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_currencies].[@currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_currencies].[@date_start]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_currencies].[@date_end]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_currencies].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_currencies].[#data].[date_type]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[data_currencies].[#data]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_currencies].[#data].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_currencies].[#data].[from_currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_currencies].[#data].[from_currency]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="512" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_currencies].[#data].[from_currency_iso_code]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="5" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_currencies].[#data].[to_currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_currencies].[#data].[to_currency]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="512" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_currencies].[#data].[to_currency_iso_code]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="5" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_currencies].[#data].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_currencies].[#data].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_currencies].[#data].[value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="6" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_currencies].[@currency_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_currencies].[@date_start]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_currencies].[@date_end]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_currencies].[@date_type]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA['Q']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="1227" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[data_currencies]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@currency_id int = null,&#xD;&#xA;&#x9;@date_start datetime,&#xD;&#xA;&#x9;@date_end datetime,&#xD;&#xA;&#x9;@date_type char(1) = 'Q'&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlView" Name="[dbo].[data_financials_local_currencies]">
			<Property Name="QueryScript">
				<Value><![CDATA[
SELECT     ds.id, m.id AS metric_id, m.name AS metric, a.id AS attribute_id, a.name AS attribute, o.id AS organisation_id, o.name AS organisation, z.id AS country_id, 
                      z.name AS country, ds.date_type, ds.date, CASE WHEN ds.val_i IS NULL THEN ds.val_d ELSE CAST(ds.val_i AS decimal(22, 6)) END AS value, 
                      (CASE WHEN ds.val_i IS NULL THEN ds.val_d ELSE CAST(ds.val_i AS decimal(22, 6)) END * cr.value) * (1 / cr2.value) AS value_local, c.id AS currency_id, 
                      c.iso_code AS currency_iso_code, c2.id AS local_currency_id, c2.iso_code AS local_currency_iso_code, ds.source_id, ds.confidence_id
FROM         dbo.ds_organisation_data AS ds INNER JOIN
                      dbo.metrics AS m ON ds.metric_id = m.id INNER JOIN
                      dbo.attributes AS a ON ds.attribute_id = a.id INNER JOIN
                      dbo.organisations AS o ON ds.organisation_id = o.id INNER JOIN
                      dbo.organisation_zone_link AS oz ON o.id = oz.organisation_id INNER JOIN
                      dbo.zones AS z ON oz.zone_id = z.id INNER JOIN
                      dbo.currency_rates AS cr ON ds.currency_id = cr.from_currency_id AND ds.date = cr.date AND ds.date_type = cr.date_type INNER JOIN
                      dbo.currency_rates AS cr2 ON cr.to_currency_id = cr2.to_currency_id AND ds.date = cr2.date AND ds.date_type = cr2.date_type INNER JOIN
                      dbo.zone_currency_link AS zc ON z.id = zc.zone_id AND zc.currency_id = cr2.from_currency_id INNER JOIN
                      dbo.currencies AS c ON ds.currency_id = c.id INNER JOIN
                      dbo.currencies AS c2 ON zc.currency_id = c2.id
WHERE     (m.id IN (10, 18)) AND (a.id IN (0, 826, 834)) AND (cr.to_currency_id = 2) AND (cr2.value <> 0)]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_financials_local_currencies].[id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[ds_organisation_data].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_financials_local_currencies].[metric_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[metrics].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_financials_local_currencies].[metric]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[metrics].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_financials_local_currencies].[attribute_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[attributes].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_financials_local_currencies].[attribute]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[attributes].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_financials_local_currencies].[organisation_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisations].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_financials_local_currencies].[organisation]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisations].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_financials_local_currencies].[country_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zones].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_financials_local_currencies].[country]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zones].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_financials_local_currencies].[date_type]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[ds_organisation_data].[date_type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_financials_local_currencies].[date]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[ds_organisation_data].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_financials_local_currencies].[value]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_financials_local_currencies].[value_local]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_financials_local_currencies].[currency_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[currencies].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_financials_local_currencies].[currency_iso_code]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[currencies].[iso_code]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_financials_local_currencies].[local_currency_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[currencies].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_financials_local_currencies].[local_currency_iso_code]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[currencies].[iso_code]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_financials_local_currencies].[source_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[ds_organisation_data].[source_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_financials_local_currencies].[confidence_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[ds_organisation_data].[confidence_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References Name="[dbo].[ds_organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_currency_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_currency_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_currency_link].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_currency_link].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[iso_code]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[iso_code]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[to_currency_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1865" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE VIEW dbo.data_financials_local_currencies&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[data_groups]">
			<Property Name="BodyScript">
				<Value><![CDATA[

CREATE TABLE #data (id int, name nvarchar(512), status_id int, type_id int, url nvarchar(1024), has_data bit)

INSERT INTO #data
SELECT	DISTINCT
		o.id,
		o.name,
		CASE o.status_id WHEN 1308 THEN 0 ELSE o.status_id END,
		o.type_id,
		o.url,
		CASE WHEN dc.organisation_id IS null THEN 0 ELSE 1 END has_data

FROM	organisations o INNER JOIN
		ds_group_ownership ds ON o.id = ds.group_id LEFT JOIN												-- Must have ownership data
		dc_group_data_sets dc ON (dc.organisation_id = o.id AND dc.metric_id = 3 AND dc.attribute_id = 0)	-- But don't require data sets

WHERE	o.type_id = 9 AND
		o.status_id IN (0,81,85,1308) AND
		(
			(@status_id = 0 AND o.status_id IN (0,1308)) OR -- Special case for 'live'; include 'missing'
			(o.status_id = COALESCE(@status_id, o.status_id))
		)

ORDER BY o.name


-- Data
SELECT * FROM #data ORDER BY name

-- Operator counts
SELECT status_id, COUNT(*) FROM #data GROUP BY status_id ORDER BY status_id


DROP TABLE #data]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[data_groups].[#data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[group_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_sets]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_sets].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_sets].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_sets].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups].[@status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups].[#data].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups].[#data].[status_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[data_groups].[#data]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups].[#data].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups].[#data].[name]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="512" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups].[#data].[status_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups].[#data].[type_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups].[#data].[url]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1024" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups].[#data].[has_data]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_groups].[@status_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="1074" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[data_groups]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@status_id int = null&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[data_groups_data]">
			<Property Name="BodyScript">
				<Value><![CDATA[

DECLARE @current_quarter datetime
SET @current_quarter = dbo.current_reporting_quarter()

IF @spot_quarter IS NULL
BEGIN
	SET @spot_quarter = dbo.current_reporting_quarter()
END


CREATE TABLE #data (id bigint, entity_id int, is_aggregate bit, metric_id int, metric_order int, attribute_id int, attribute_order int, date datetime, date_type char(1) COLLATE DATABASE_DEFAULT, val_d decimal(22,4), val_i bigint, value decimal(22,4), currency_id int, currency_original_id int, source_id int, confidence_id int, definition_id int, has_flags bit, flags nvarchar(max) COLLATE DATABASE_DEFAULT, location nvarchar(max) COLLATE DATABASE_DEFAULT)

-- Group data
INSERT INTO #data
SELECT	dc.id,
		dc.organisation_id,
		1,
		dc.metric_id,
		dc.metric_order,
		dc.attribute_id,
		dc.attribute_order,
		dc.date,
		dc.date_type,
		dc.val_d,
		dc.val_i,
		CASE dc.is_calculated WHEN 0 THEN (CASE WHEN dc.val_i IS NULL THEN dc.val_d * cr.value ELSE CAST(dc.val_i * cr.value AS decimal(22,4)) END) ELSE (CASE WHEN dc.val_i IS null THEN dc.val_d ELSE CAST(dc.val_i AS decimal(22,4)) END) END value,
		CASE dc.currency_id WHEN 0 THEN 0 ELSE @currency_id END currency_id,
		dc.currency_id currency_original_id,
		dc.source_id,
		dc.confidence_id, 
		dc.definition_id,
		dc.has_flags,
		dc.flags,
		dc.location
		
FROM	dc_group_data dc INNER JOIN
		currency_rates cr ON (cr.from_currency_id = dc.currency_id AND cr.to_currency_id = @currency_id) INNER JOIN
		data_sets s ON (dc.metric_id = s.metric_id AND dc.attribute_id = s.attribute_id)

WHERE	dc.organisation_id = @organisation_id AND
		dc.is_proportionate = @is_proportionate AND
		dc.date >= @date_start AND
		dc.date < @date_end AND
		dc.date_type = @date_type AND
		dc.ownership_threshold = @ownership_threshold AND
		s.attribute_id IS NOT null AND 
		s.show_in_metrics_only = 0 AND
		(
			(
				-- When the group-level value is reported, currency conversions are generated in-query
				dc.is_calculated = 0 AND
				(
					(@spot_historic = 0 AND cr.date = dc.date) OR
					(@spot_historic = 1 AND cr.date = @spot_quarter)
				)
			)
			OR
			(
				-- When the group-level value is aggregated from operator data, currency conversions are pre-calculated
				dc.is_calculated = 1 AND
				dc.currency_id IN (0, @currency_id) AND
				(
					((@spot_historic = 0 OR dc.currency_id = 0) AND cr.date = dc.date AND (dc.is_spot = 0 OR dc.is_spot IS null)) OR 		-- Either null for non-currency data or 0/1 for historic/spot calculation
					((@spot_historic = 1 AND dc.currency_id <> 0) AND cr.date = @spot_quarter AND (dc.is_spot = 1 OR dc.is_spot IS null))	-- Still joined on currency_rates, so need a cr.date clause to ensure 1:1 rows returned
				)
			)
		)
		
ORDER BY dc.metric_order, dc.attribute_order, dc.date


-- Operator data
INSERT INTO #data
SELECT	dc.id,
		dc.organisation_id,
		0,
		dc.metric_id,
		dc.metric_order,
		dc.attribute_id,
		dc.attribute_order,
		dc.date,
		dc.date_type,
		dc.val_d,
		dc.val_i,
		CASE WHEN dc.val_i IS NULL THEN dc.val_d * cr.value ELSE CAST(dc.val_i * cr.value AS decimal(22,4)) END value,
		CASE WHEN dc.currency_id = 0 THEN 0 WHEN @currency_id = 0 THEN dc.currency_id ELSE @currency_id END currency_id,
		dc.currency_id currency_original_id,
		dc.source_id,
		dc.confidence_id,
		dc.definition_id,
		dc.has_flags,
		dc.flags,
		dm.location
		
FROM	dc_organisation_data dc INNER JOIN
		organisations o ON dc.organisation_id = o.id INNER JOIN
		ds_group_ownership ds ON (dc.organisation_id = ds.organisation_id AND dc.date = ds.date AND dc.date_type = ds.date_type) INNER JOIN
		organisation_zone_link oz ON o.id = oz.organisation_id INNER JOIN
		zones z ON oz.zone_id = z.id INNER JOIN
		currency_rates cr ON (cr.from_currency_id = dc.currency_id AND cr.to_currency_id = @currency_id) INNER JOIN
		data_sets s ON (dc.metric_id = s.metric_id AND dc.attribute_id = s.attribute_id)
	LEFT JOIN organisation_data_metadata as dm ON dc.id = dm.fk_organisation_data_id

WHERE	ds.group_id = @organisation_id AND
		o.type_id = 1089 AND
		dc.date >= @date_start AND
		dc.date < @date_end AND
		dc.date_type = @date_type AND
		s.attribute_id IS NOT null AND 
		s.show_in_metrics_only = 0 AND
		(
			(@ownership_threshold = 0.51 AND (ds.value > 0.5 OR ds.is_consolidated = 1)) OR
			(@ownership_threshold <> 0.51 AND ds.value >= @ownership_threshold)
		) AND
		(
			(@spot_historic = 0 AND cr.date = dc.date) OR
			(@spot_historic = 1 AND cr.date = @spot_quarter)
		)
		
ORDER BY dc.metric_order, dc.attribute_order, o.name, z.name, dc.date


-- Ownership data
INSERT INTO #data
SELECT	ds.id,
		ds.organisation_id,
		0,
		m.id,
		m.[order],
		a.id,
		a.[order],
		ds.date,
		ds.date_type,
		ds.value,
		null,
		ds.value,
		0,
		0,
		ds.source_id,
		ds.confidence_id,
		ds.definition_id,
		0,
		null,
		null

FROM	ds_group_ownership ds INNER JOIN
		metrics m ON ds.metric_id = m.id INNER JOIN
		attributes a ON ds.attribute_id = a.id LEFT JOIN
		organisations o ON ds.organisation_id = o.id LEFT JOIN
		organisation_zone_link oz ON o.id = oz.organisation_id LEFT JOIN
		zones c ON oz.zone_id = c.id

WHERE	ds.group_id = @organisation_id AND
		ds.metric_id = 72 AND
		ds.attribute_id = 0 AND
		ds.date >= @date_start AND
		ds.date < CASE WHEN @date_end < @current_quarter THEN @date_end ELSE DATEADD(month, 3, @current_quarter) END AND -- Don't show 'forecast' ownership!
		ds.date_type = @date_type AND
		ds.is_group = 0 AND
		(
			(@ownership_threshold = 0.51 AND (ds.value > 0.5 OR ds.is_consolidated = 1)) OR
			(@ownership_threshold <> 0.51 AND ds.value >= @ownership_threshold)
		)

ORDER BY o.name, c.name, ds.date


-- Proportional adjustments
IF @is_proportionate = 1
BEGIN
	-- Update operator metrics to make them proportional (except where metrics are already per-connection averages, shares or margins)
	UPDATE 	d
	SET		d.value = d.value * ds.value
	FROM	#data d INNER JOIN ds_group_ownership ds ON (d.entity_id = ds.organisation_id AND d.date = ds.date AND d.date_type = ds.date_type AND ds.group_id = @organisation_id)
	WHERE	d.metric_id NOT IN (10,19,27,30,32,37,40,52,57,67,70,72,85,116,125,162,167) AND d.is_aggregate = 0

	-- Delete meaningless metrics: market share, market penetration
	DELETE FROM #data WHERE metric_id IN (41,44) AND is_aggregate = 0

	-- Delete incorrect metrics: net additions, gross additions, disconnections, ported_connections, sequential and annual growth, % connections
	DELETE FROM #data WHERE metric_id IN (9, 36,42,53,56,59,60,61) AND is_aggregate = 0
END


-- Data
SELECT * FROM #data ORDER BY metric_order, attribute_order, is_aggregate DESC, date, date_type

-- Metric, attribute combinations
SELECT	DISTINCT 
		metric_id,
		metric_order,
		attribute_id,
		attribute_order
		
FROM	#data

GROUP BY metric_id, metric_order, attribute_id, attribute_order
ORDER BY metric_order, attribute_order

-- Date combinations
SELECT	DISTINCT 
		date, 
		date_type,
		CASE date_type WHEN 'Q' THEN 1 WHEN 'H' THEN 2 WHEN 'Y' THEN 3 ELSE 4 END date_type_order

FROM	#data

ORDER BY date, date_type_order


DROP TABLE #data]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[current_reporting_quarter]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_data].[@spot_quarter]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_data].[#data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_data].[@currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[metric_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[attribute_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[value]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[definition_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[location]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_data].[@organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[is_proportionate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_data].[@is_proportionate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_data].[@date_start]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_data].[@date_end]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_data].[@date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[ownership_threshold]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_data].[@ownership_threshold]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets].[show_in_metrics_only]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_data].[@spot_historic]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[is_spot]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata].[fk_organisation_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[metric_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[attribute_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[value]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[definition_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata].[location]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[group_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets].[show_in_metrics_only]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[is_consolidated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[definition_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[group_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[is_group]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[is_consolidated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_data].[#data].[entity_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_data].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_data].[#data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[group_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_data].[#data].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_data].[#data].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_data].[#data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_data].[#data].[is_aggregate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_data].[#data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_data].[#data].[is_aggregate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_data].[#data].[metric_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_data].[#data].[attribute_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_data].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_data].[#data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_data].[#data].[attribute_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[data_groups_data].[#data]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_data].[#data].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_data].[#data].[entity_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_data].[#data].[is_aggregate]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_data].[#data].[metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_data].[#data].[metric_order]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_data].[#data].[attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_data].[#data].[attribute_order]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_data].[#data].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_data].[#data].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_data].[#data].[val_d]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_data].[#data].[val_i]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_data].[#data].[value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_data].[#data].[currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_data].[#data].[currency_original_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_data].[#data].[source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_data].[#data].[confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_data].[#data].[definition_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_data].[#data].[has_flags]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_data].[#data].[flags]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_data].[#data].[location]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_groups_data].[@organisation_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_groups_data].[@date_start]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_groups_data].[@date_end]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_groups_data].[@date_type]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA['Q']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_groups_data].[@ownership_threshold]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0.0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="6" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_groups_data].[@is_proportionate]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_groups_data].[@currency_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_groups_data].[@spot_historic]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_groups_data].[@spot_quarter]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="7538" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[data_groups_data]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@organisation_id int,&#xD;&#xA;&#x9;@date_start datetime,&#xD;&#xA;&#x9;@date_end datetime,&#xD;&#xA;&#x9;@date_type char(1) = 'Q',&#xD;&#xA;&#x9;@ownership_threshold decimal(6,4) = 0.0,&#xD;&#xA;&#x9;@is_proportionate bit = 0,&#xD;&#xA;&#x9;@currency_id int = 1,&#xD;&#xA;&#x9;@spot_historic bit = 1,&#xD;&#xA;&#x9;@spot_quarter datetime = null&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[data_groups_data_empty]">
			<Property Name="BodyScript">
				<Value><![CDATA[

SET FMTONLY ON

select * from dc_zone_data where id=0]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[dc_zone_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_groups_data_empty].[@organisation_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_groups_data_empty].[@date_start]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_groups_data_empty].[@date_end]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_groups_data_empty].[@date_type]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA['Q']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_groups_data_empty].[@ownership_threshold]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0.0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="6" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_groups_data_empty].[@is_proportionate]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_groups_data_empty].[@currency_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_groups_data_empty].[@spot_historic]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_groups_data_empty].[@spot_quarter]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="372" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[data_groups_data_empty]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@organisation_id int,&#xD;&#xA;&#x9;@date_start datetime,&#xD;&#xA;&#x9;@date_end datetime,&#xD;&#xA;&#x9;@date_type char(1) = 'Q',&#xD;&#xA;&#x9;@ownership_threshold decimal(6,4) = 0.0,&#xD;&#xA;&#x9;@is_proportionate bit = 0,&#xD;&#xA;&#x9;@currency_id int = 1,&#xD;&#xA;&#x9;@spot_historic bit = 1,&#xD;&#xA;&#x9;@spot_quarter datetime = null&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[data_groups_ownership]">
			<Property Name="BodyScript">
				<Value><![CDATA[

DECLARE @id int, @current_quarter datetime = dbo.current_reporting_quarter()

CREATE TABLE #data (id bigint, metric_id int, attribute_id int, group_id int, parent_group_id int, organisation_id int, country_id int, date datetime, date_type char(1) COLLATE DATABASE_DEFAULT, value decimal(6,4), is_compound bit, is_consolidated bit, is_group bit, is_joint_venture bit, processed bit)

INSERT INTO #data
SELECT	ds.id,
		ds.metric_id,
		ds.attribute_id,
		ds.group_id,
		null,
		ds.organisation_id,
		oz.zone_id,
		ds.date,
		ds.date_type,
		ds.value,
		ds.is_compound,
		ds.is_consolidated,
		ds.is_group,
		ds.is_joint_venture,
		0

FROM	ds_group_ownership ds LEFT JOIN
		organisation_zone_link oz ON ds.organisation_id = oz.organisation_id

WHERE	ds.group_id = COALESCE(@group_id, ds.group_id) AND
		ds.metric_id = 72 AND
		ds.attribute_id = 0 AND
		ds.date >= @date_start AND
		ds.date < @date_end AND
		(
			(@ownership_threshold = 0.51 AND (ds.value > 0.5 OR ds.is_consolidated = 1)) OR
			(@ownership_threshold <> 0.51 AND ds.value >= @ownership_threshold)
		)


WHILE EXISTS (SELECT * FROM #data WHERE processed = 0)
BEGIN
	SET @id = (SELECT TOP 1 group_id FROM #data WHERE processed = 0)

	-- Join on each primary group, so we can show compound subsidiaries
	UPDATE	d
	SET		d.parent_group_id = r.group_id
	FROM	#data d INNER JOIN
			(
				SELECT	RANK() OVER (PARTITION BY ds.organisation_id ORDER BY date DESC, ds.value DESC) rank, -- Most recent, highest shareholding
						ds.group_id,
						ds.organisation_id,
						ds.value

				FROM	ds_group_ownership ds

				WHERE	ds.group_id IN (SELECT @id UNION ALL SELECT DISTINCT organisation_id FROM #data WHERE group_id = @id AND is_group = 1) AND -- Only compound subgroups of this group, provided their share is larger than the top-level group
						ds.metric_id = 72 AND
						ds.attribute_id = 0 AND
						ds.date_type = @date_type AND
						ds.is_group = 0
			) r ON (d.group_id = @id AND d.organisation_id = r.organisation_id AND r.rank = 1)

	-- Take direct ownership of non-subgroup subsidiaries
	UPDATE #data SET parent_group_id = group_id WHERE group_id = @id AND parent_group_id IS null

	UPDATE #data SET processed = 1 WHERE group_id = @id
END

UPDATE #data SET parent_group_id = organisation_id WHERE is_group = 1


-- Data
SELECT * FROM #data ORDER BY group_id, organisation_id, date_type, date

-- Distinct groups, operators
SELECT	DISTINCT
		g.id group_id,
		g.name [group],
		p.id parent_group_id,
		p.name parent_group,
		o.id organisation_id,
		o.name organisation,
		c.id country_id,
		c.name country,
		d.is_group,
		CASE WHEN p.id = g.id THEN 1 ELSE 0 END is_direct

FROM 	#data d INNER JOIN
		organisations g ON d.group_id = g.id INNER JOIN
		organisations p ON d.parent_group_id = p.id INNER JOIN
		organisations o ON d.organisation_id = o.id LEFT JOIN
		zones c ON d.country_id = c.id

ORDER BY g.name, is_direct DESC, p.name, d.is_group DESC, o.name, c.name

-- Date combinations
SELECT DISTINCT date, date_type, CASE date_type WHEN 'Q' THEN 1 WHEN 'H' THEN 2 WHEN 'Y' THEN 3 ELSE 4 END date_type_order FROM #data ORDER BY date, date_type_order


DROP TABLE #data]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[current_reporting_quarter]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_ownership].[#data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[group_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[is_compound]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[is_consolidated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[is_group]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[is_joint_venture]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_ownership].[@group_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_ownership].[@date_start]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_ownership].[@date_end]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_ownership].[@ownership_threshold]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_ownership].[#data].[processed]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_ownership].[#data].[group_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[group_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_ownership].[#data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_ownership].[#data].[group_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_ownership].[#data].[is_group]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_ownership].[@date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[is_group]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_ownership].[#data].[group_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_ownership].[#data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_ownership].[#data].[parent_group_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[group_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_ownership].[#data].[parent_group_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_ownership].[#data].[group_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_ownership].[#data].[processed]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_ownership].[#data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_ownership].[#data].[is_group]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_ownership].[#data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_ownership].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_ownership].[#data].[group_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_ownership].[#data].[parent_group_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_ownership].[#data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_ownership].[#data].[country_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_ownership].[#data].[is_group]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[data_groups_ownership].[#data]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ownership].[#data].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ownership].[#data].[metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ownership].[#data].[attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ownership].[#data].[group_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ownership].[#data].[parent_group_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ownership].[#data].[organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ownership].[#data].[country_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ownership].[#data].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ownership].[#data].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ownership].[#data].[value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="6" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ownership].[#data].[is_compound]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ownership].[#data].[is_consolidated]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ownership].[#data].[is_group]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ownership].[#data].[is_joint_venture]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ownership].[#data].[processed]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_groups_ownership].[@group_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_groups_ownership].[@date_start]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_groups_ownership].[@date_end]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_groups_ownership].[@date_type]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA['Q']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_groups_ownership].[@ownership_threshold]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0.0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="6" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="3442" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[data_groups_ownership]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@group_id int = null,&#xD;&#xA;&#x9;@date_start datetime,&#xD;&#xA;&#x9;@date_end datetime,&#xD;&#xA;&#x9;@date_type char(1) = 'Q',&#xD;&#xA;&#x9;@ownership_threshold decimal(6,4) = 0.0&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[data_groups_ranking]">
			<Property Name="BodyScript">
				<Value><![CDATA[

IF @date IS NULL
BEGIN
	SET @date = dbo.current_reporting_quarter()
END

IF @spot_quarter IS NULL
BEGIN
	SET @spot_quarter = dbo.current_reporting_quarter()
END

CREATE TABLE #data (id bigint, organisation_id int, organisation nvarchar(512) COLLATE DATABASE_DEFAULT, organisation_type_id int, country_id int, country nvarchar(512) COLLATE DATABASE_DEFAULT, subregion_id int, subregion nvarchar(512) COLLATE DATABASE_DEFAULT, region_id int, region nvarchar(512) COLLATE DATABASE_DEFAULT, metric_id int, metric_order int, attribute_id int, attribute_order int, date datetime, date_type char(1) COLLATE DATABASE_DEFAULT, val_d decimal(22,4), val_i bigint, value decimal(22,4), currency_id int, currency_original_id int, source_id int, confidence_id int, definition_id int, has_flags bit, flags nvarchar(max) COLLATE DATABASE_DEFAULT, location nvarchar(max) COLLATE DATABASE_DEFAULT)

-- Group data
INSERT INTO #data
SELECT	dc.id,
		o.id,
		o.name,
		o.type_id,
		null,
		null,
		null,
		null,
		null,
		null,
		dc.metric_id,
		dc.metric_order,
		dc.attribute_id,
		dc.attribute_order,
		dc.date,
		dc.date_type,
		dc.val_d,
		dc.val_i,
		CASE dc.is_calculated WHEN 0 THEN (CASE WHEN dc.val_i IS NULL THEN dc.val_d * cr.value ELSE CAST(dc.val_i * cr.value AS decimal(22,4)) END) ELSE (CASE WHEN dc.val_i IS null THEN dc.val_d ELSE CAST(dc.val_i AS decimal(22,4)) END) END value,
		CASE dc.currency_id WHEN 0 THEN 0 ELSE @currency_id END currency_id,
		dc.currency_id currency_original_id,
		dc.source_id,
		dc.confidence_id,
		dc.definition_id,
		dc.has_flags,
		dc.flags,
		dc.location
		
FROM	dc_group_data dc INNER JOIN
		organisations o ON dc.organisation_id = o.id INNER JOIN
		currency_rates cr ON (cr.from_currency_id = dc.currency_id AND cr.to_currency_id = @currency_id)

WHERE	dc.ownership_threshold = @ownership_threshold AND
		dc.is_proportionate = @is_proportionate AND
		dc.metric_id = @metric_id AND
		dc.attribute_id = @attribute_id AND
		dc.date = @date AND
		dc.date_type = @date_type AND
		(
			(
				-- When the market-level value is reported, currency conversions are generated in-query
				dc.is_calculated = 0 AND
				(
					(@spot_historic = 0 AND cr.date = dc.date) OR
					(@spot_historic = 1 AND cr.date = @spot_quarter)
				)
			)
			OR
			(
				-- When the market-level value is aggregated from operator data, currency conversions are pre-calculated
				dc.is_calculated = 1 AND
				dc.currency_id = @currency_id AND
				(
					((@spot_historic = 0 OR dc.currency_id = 0) AND cr.date = dc.date AND (dc.is_spot = 0 OR dc.is_spot IS null)) OR 		-- Either null for non-currency data or 0/1 for historic/spot calculation
					((@spot_historic = 1 AND dc.currency_id <> 0) AND cr.date = @spot_quarter AND (dc.is_spot = 1 OR dc.is_spot IS null))	-- Still joined on currency_rates, so need a cr.date clause to ensure 1:1 rows returned
				)
			)
		)
		
ORDER BY value DESC


-- Operator data (where not included in a group)
INSERT INTO #data
SELECT	dc.id,
		o.id,
		o.name,
		o.type_id,
		c.id,
		c.name,
		s.id,
		s.name,
		r.id,
		r.name,
		dc.metric_id,
		dc.metric_order,
		dc.attribute_id,
		dc.attribute_order,
		dc.date,
		dc.date_type,
		dc.val_d,
		dc.val_i,
		CASE WHEN dc.val_i IS NULL THEN dc.val_d * cr.value ELSE CAST(dc.val_i * cr.value AS decimal(22,4)) END value,
		CASE WHEN dc.currency_id = 0 THEN 0 ELSE @currency_id END currency_id,
		dc.currency_id,
		dc.source_id,
		dc.confidence_id,
		dc.definition_id,
		dc.has_flags,
		dc.flags,
		dm.location

FROM	dc_organisation_data dc INNER JOIN
		organisations o ON dc.organisation_id = o.id INNER JOIN
		organisation_zone_link oz ON o.id = oz.organisation_id INNER JOIN
		zones c ON oz.zone_id = c.id INNER JOIN
		zone_link zl ON c.id = zl.subzone_id INNER JOIN
		zones s ON zl.zone_id = s.id INNER JOIN
		zone_link zl2 ON s.id = zl2.subzone_id INNER JOIN 
		zones r ON zl2.zone_id = r.id INNER JOIN
		zone_link zl3 ON r.id = zl3.subzone_id INNER JOIN
		zones g ON zl3.zone_id = g.id INNER JOIN 
		currency_rates cr ON (cr.from_currency_id = dc.currency_id AND cr.to_currency_id = @currency_id)
	LEFT JOIN organisation_data_metadata as dm ON dc.id = dm.fk_organisation_data_id


WHERE	o.id NOT IN -- Get all the operators that haven't been captured as part of a group
		(
			SELECT	ds.organisation_id
			
			FROM 	ds_group_ownership ds

			WHERE 	ds.date = @date AND
					ds.date_type = @date_type AND
					(
						(@ownership_threshold = 0.51 AND (ds.value > 0.5 OR ds.is_consolidated = 1)) OR
						(@ownership_threshold <> 0.51 AND ds.value >= @ownership_threshold)
					)
		) AND
		g.id = @geoscheme_id AND
		r.id = COALESCE(@region_id, r.id) AND
		s.id = COALESCE(@subregion_id, s.id) AND
		o.type_id = 1089 AND
		dc.metric_id = @metric_id AND
		dc.attribute_id = @attribute_id AND
		dc.date = @date AND
		dc.date_type = @date_type AND
		(
			(@spot_historic = 0 AND cr.date = dc.date) OR
			(@spot_historic = 1 AND cr.date = @spot_quarter)
		)
		
ORDER BY value DESC


-- Data
SELECT	RANK() OVER (ORDER BY value DESC) rank, * FROM #data ORDER BY value DESC

DROP TABLE #data]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[data_groups_ranking].[@date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[current_reporting_quarter]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_ranking].[@spot_quarter]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_ranking].[#data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_ranking].[@currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[metric_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[attribute_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[value]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[definition_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[location]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[ownership_threshold]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_ranking].[@ownership_threshold]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[is_proportionate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_ranking].[@is_proportionate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_ranking].[@metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_ranking].[@attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_ranking].[@date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_ranking].[@spot_historic]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[is_spot]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata].[fk_organisation_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[metric_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[attribute_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[value]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[definition_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata].[location]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[is_consolidated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_ranking].[@geoscheme_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_ranking].[@region_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_ranking].[@subregion_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_groups_ranking].[#data].[value]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[data_groups_ranking].[#data]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ranking].[#data].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ranking].[#data].[organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ranking].[#data].[organisation]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="512" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ranking].[#data].[organisation_type_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ranking].[#data].[country_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ranking].[#data].[country]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="512" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ranking].[#data].[subregion_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ranking].[#data].[subregion]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="512" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ranking].[#data].[region_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ranking].[#data].[region]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="512" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ranking].[#data].[metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ranking].[#data].[metric_order]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ranking].[#data].[attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ranking].[#data].[attribute_order]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ranking].[#data].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ranking].[#data].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ranking].[#data].[val_d]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ranking].[#data].[val_i]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ranking].[#data].[value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ranking].[#data].[currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ranking].[#data].[currency_original_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ranking].[#data].[source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ranking].[#data].[confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ranking].[#data].[definition_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ranking].[#data].[has_flags]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ranking].[#data].[flags]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_groups_ranking].[#data].[location]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_groups_ranking].[@geoscheme_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_groups_ranking].[@region_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_groups_ranking].[@subregion_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_groups_ranking].[@metric_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_groups_ranking].[@attribute_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_groups_ranking].[@date]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_groups_ranking].[@date_type]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA['Q']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_groups_ranking].[@ownership_threshold]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0.0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="6" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_groups_ranking].[@is_proportionate]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_groups_ranking].[@currency_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_groups_ranking].[@spot_historic]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_groups_ranking].[@spot_quarter]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="5684" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[data_groups_ranking]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@geoscheme_id int = null,&#xD;&#xA;&#x9;@region_id int = null, &#x9;&#x9;-- Note geography will only filter&#xD;&#xA;&#x9;@subregion_id int = null,&#x9;-- organisations, not group aggregates&#xD;&#xA;&#x9;@metric_id int,&#xD;&#xA;&#x9;@attribute_id int,&#xD;&#xA;&#x9;@date datetime = null,&#xD;&#xA;&#x9;@date_type char(1) = 'Q',&#xD;&#xA;&#x9;@ownership_threshold decimal(6,4) = 0.0,&#xD;&#xA;&#x9;@is_proportionate bit = 1,&#xD;&#xA;&#x9;@currency_id int = 0,&#xD;&#xA;&#x9;@spot_historic bit = 0,&#xD;&#xA;&#x9;@spot_quarter datetime = null&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[data_markets]">
			<Property Name="BodyScript">
				<Value><![CDATA[

IF @geoscheme_id IS NULL
BEGIN
	SET @geoscheme_id = dbo.default_geoscheme_id()
END

IF @subregion_id IN (3899,3900)
BEGIN
	-- Developed/developing split can return results from any geosceheme
	-- TODO: better solution!
	SET @geoscheme_id = 3937
END

CREATE TABLE #data (id int, name nvarchar(512), iso_code nvarchar(3), iso_short_code nvarchar(2), subregion_id int, subregion nvarchar(512), region_id int, region nvarchar(512), regulator_id int, regulator nvarchar(512), regulator_url nvarchar(1024))

INSERT INTO #data
SELECT	c.id,
		c.name,
		c.iso_code,
		c.iso_short_code,
		s.id,
		s.name,
		r.id,
		r.name,
		o.id,
		o.name,
		o.url

FROM	zones c INNER JOIN
		zone_link zl ON c.id = zl.subzone_id INNER JOIN
		zones s ON zl.zone_id = s.id INNER JOIN
		zone_link zl2 ON s.id = zl2.subzone_id INNER JOIN 
		zones r ON zl2.zone_id = r.id INNER JOIN
		zone_link zl3 ON r.id = zl3.subzone_id INNER JOIN
		zones g ON zl3.zone_id = g.id LEFT JOIN
		(
			organisation_zone_link oz INNER JOIN
			organisations o ON (oz.organisation_id = o.id AND o.type_id = 1227)
		) ON oz.zone_id = c.id

WHERE	s.id = COALESCE(@subregion_id, s.id) AND
		r.id = COALESCE(@region_id, r.id) AND
		g.id = @geoscheme_id

ORDER BY c.name, r.name, s.name


-- Data
SELECT DISTINCT * FROM #data ORDER BY name, region, subregion

-- Counts by region
SELECT 3826 region_id, COUNT(DISTINCT id) [count] FROM #data UNION ALL
SELECT region_id, COUNT(DISTINCT id) [count] FROM #data GROUP BY region_id ORDER BY region_id


DROP TABLE #data]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[data_markets].[@geoscheme_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[default_geoscheme_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_markets].[@subregion_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_markets].[#data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[iso_code]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[iso_short_code]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_markets].[@region_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_markets].[#data].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_markets].[#data].[region]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_markets].[#data].[subregion]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_markets].[#data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_markets].[#data].[region_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[data_markets].[#data]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_markets].[#data].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_markets].[#data].[name]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="512" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_markets].[#data].[iso_code]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="3" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_markets].[#data].[iso_short_code]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="2" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_markets].[#data].[subregion_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_markets].[#data].[subregion]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="512" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_markets].[#data].[region_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_markets].[#data].[region]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="512" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_markets].[#data].[regulator_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_markets].[#data].[regulator]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="512" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_markets].[#data].[regulator_url]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1024" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_markets].[@geoscheme_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_markets].[@region_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_markets].[@subregion_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="1697" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[data_markets]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@geoscheme_id int = null,&#xD;&#xA;&#x9;@region_id int = null,&#xD;&#xA;&#x9;@subregion_id int = null&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[data_markets_data]">
			<Property Name="BodyScript">
				<Value><![CDATA[

DECLARE @zone_type_id int

IF @spot_quarter IS NULL
BEGIN
	SET @spot_quarter = dbo.current_reporting_quarter()
END

SET @zone_type_id = (SELECT type_id FROM zones WHERE id = @zone_id)

CREATE TABLE #data (id bigint, entity_id int, is_aggregate bit, metric_id int, metric_order int, attribute_id int, attribute_order int, date datetime, date_type char(1) COLLATE DATABASE_DEFAULT, val_d decimal(22,4), val_i bigint, value decimal(22,4), currency_id int, currency_original_id int, source_id int, confidence_id int, definition_id int, has_flags bit, flags nvarchar(max) COLLATE DATABASE_DEFAULT, location nvarchar(max) COLLATE DATABASE_DEFAULT)

-- Zone data
INSERT INTO #data
SELECT	dc.id,
		dc.zone_id,
		1,
		dc.metric_id,
		dc.metric_order,
		dc.attribute_id,
		dc.attribute_order,
		dc.date datetime,
		dc.date_type,
		dc.val_d,
		dc.val_i,
		CASE dc.is_calculated WHEN 0 THEN (CASE WHEN dc.val_i IS NULL THEN dc.val_d * cr.value ELSE CAST(dc.val_i * cr.value AS decimal(22,4)) END) ELSE (CASE WHEN dc.val_i IS null THEN dc.val_d ELSE CAST(dc.val_i AS decimal(22,4)) END) END value,
		CASE dc.currency_id WHEN 0 THEN 0 ELSE @currency_id END currency_id,
		dc.currency_id currency_original_id,
		dc.source_id,
		dc.confidence_id,
		dc.definition_id,
		dc.has_flags,
		dc.flags,
		dm.location
		
FROM	dc_zone_data dc INNER JOIN
		currency_rates cr ON (cr.from_currency_id = dc.currency_id AND cr.to_currency_id = @currency_id) INNER JOIN
		data_sets s ON (dc.metric_id = s.metric_id AND dc.attribute_id = s.attribute_id)
	LEFT JOIN zone_data_metadata as dm ON dc.id = dm.fk_zone_data_id


WHERE	dc.zone_id = @zone_id AND
		dc.date >= @date_start AND
		dc.date < @date_end AND
		dc.date_type = @date_type AND
		s.attribute_id IS NOT null AND 
		s.show_in_metrics_only = 0 AND
		(
			(
				-- When the market-level value is reported, currency conversions are generated in-query
				dc.is_calculated = 0 AND
				(
					(@spot_historic = 0 AND cr.date = dc.date) OR
					(@spot_historic = 1 AND cr.date = @spot_quarter)
				)
			)
			OR
			(
				-- When the market-level value is aggregated from operator data, currency conversions are pre-calculated
				dc.is_calculated = 1 AND
				dc.currency_id IN (0, @currency_id) AND
				(
					((@spot_historic = 0 OR dc.currency_id = 0) AND cr.date = dc.date AND (dc.is_spot = 0 OR dc.is_spot IS null)) OR 		-- Either null for non-currency data or 0/1 for historic/spot calculation
					((@spot_historic = 1 AND dc.currency_id <> 0) AND cr.date = @spot_quarter AND (dc.is_spot = 1 OR dc.is_spot IS null))	-- Still joined on currency_rates, so need a cr.date clause to ensure 1:1 rows returned
				)
			)
		)
		
ORDER BY dc.metric_order, dc.attribute_order, dc.date


IF @zone_type_id = 39 AND @include_countries = 1
BEGIN
	-- Country data for a region
	INSERT INTO #data
	SELECT	dc.id,
			dc.zone_id,
			0,
			dc.metric_id,
			dc.metric_order,
			dc.attribute_id,
			dc.attribute_order,
			dc.date datetime,
			dc.date_type,
			dc.val_d,
			dc.val_i,
			CASE dc.is_calculated WHEN 0 THEN (CASE WHEN dc.val_i IS NULL THEN dc.val_d * cr.value ELSE CAST(dc.val_i * cr.value AS decimal(22,4)) END) ELSE (CASE WHEN dc.val_i IS null THEN dc.val_d ELSE CAST(dc.val_i AS decimal(22,4)) END) END value,
			CASE dc.currency_id WHEN 0 THEN 0 ELSE @currency_id END currency_id,
			dc.currency_id currency_original_id,
			dc.source_id,
			dc.confidence_id,
			dc.definition_id,
			dc.has_flags,
			dc.flags,
			dc.location
			
	FROM	dc_zone_data dc INNER JOIN
			zones z ON dc.zone_id = z.id INNER JOIN
			currency_rates cr ON (cr.from_currency_id = dc.currency_id AND cr.to_currency_id = @currency_id) INNER JOIN
			data_sets s ON (dc.metric_id = s.metric_id AND dc.attribute_id = s.attribute_id)

	WHERE	dc.zone_id IN (SELECT subzone_id FROM zone_link WHERE zone_id = @zone_id) AND
			dc.date >= @date_start AND
			dc.date < @date_end AND
			dc.date_type = @date_type AND
			s.attribute_id IS NOT null AND 
			s.show_in_metrics_only = 0 AND
			(
				(
					-- When the market-level value is reported, currency conversions are generated in-query
					dc.is_calculated = 0 AND
					(
						(@spot_historic = 0 AND cr.date = dc.date) OR
						(@spot_historic = 1 AND cr.date = @spot_quarter)
					)
				)
				OR
				(
					-- When the market-level value is aggregated from operator data, currency conversions are pre-calculated
					dc.is_calculated = 1 AND
					dc.currency_id IN (0, @currency_id) AND
					(
						((@spot_historic = 0 OR dc.currency_id = 0) AND cr.date = dc.date AND (dc.is_spot = 0 OR dc.is_spot IS null)) OR 		-- Either null for non-currency data or 0/1 for historic/spot calculation
						((@spot_historic = 1 AND dc.currency_id <> 0) AND cr.date = @spot_quarter AND (dc.is_spot = 1 OR dc.is_spot IS null))	-- Still joined on currency_rates, so need a cr.date clause to ensure 1:1 rows returned
					)
				)
			)
			
	ORDER BY dc.metric_order, dc.attribute_order, z.name, dc.date
END


IF @zone_type_id = 39 AND @include_operators = 1
BEGIN
	-- Organisation data for a region
	INSERT INTO #data
	SELECT	dc.id,
			dc.organisation_id,
			0,
			dc.metric_id,
			dc.metric_order,
			dc.attribute_id,
			dc.attribute_order,
			dc.date datetime,
			dc.date_type,
			dc.val_d,
			dc.val_i,
			CASE WHEN dc.val_i IS NULL THEN dc.val_d * cr.value ELSE CAST(dc.val_i * cr.value AS decimal(22,4)) END value,
			CASE WHEN dc.currency_id = 0 THEN 0 WHEN @currency_id = 0 THEN dc.currency_id ELSE @currency_id END currency_id,
			dc.currency_id currency_original_id,
			dc.source_id,
			dc.confidence_id,
			dc.definition_id,
			dc.has_flags,
			dc.flags,
			dc.location
			
	FROM	dc_organisation_data dc INNER JOIN
			organisations o ON dc.organisation_id = o.id INNER JOIN
			organisation_zone_link oz ON o.id = oz.organisation_id INNER JOIN
			zones z ON oz.zone_id = z.id INNER JOIN
			zone_link zl ON z.id = zl.subzone_id INNER JOIN
			currency_rates cr ON (cr.from_currency_id = dc.currency_id AND cr.to_currency_id = @currency_id) INNER JOIN
			data_sets s ON (dc.metric_id = s.metric_id AND dc.attribute_id = s.attribute_id)

	WHERE	zl.zone_id = @zone_id AND
			o.type_id = 1089 AND
			dc.date >= @date_start AND
			dc.date < @date_end AND
			dc.date_type = @date_type AND
			s.attribute_id IS NOT null AND 
			s.show_in_metrics_only = 0 AND
			(
				(@spot_historic = 0 AND cr.date = dc.date) OR
				(@spot_historic = 1 AND cr.date = @spot_quarter)
			)
			
	ORDER BY dc.metric_order, dc.attribute_order, o.name, dc.date
END


IF @zone_type_id = 10
BEGIN
	-- Organisation data for a country
	INSERT INTO #data
	SELECT	dc.id,
			dc.organisation_id,
			0,
			dc.metric_id,
			dc.metric_order,
			dc.attribute_id,
			dc.attribute_order,
			dc.date datetime,
			dc.date_type,
			dc.val_d,
			dc.val_i,
			CASE WHEN dc.val_i IS NULL THEN dc.val_d * cr.value ELSE CAST(dc.val_i * cr.value AS decimal(22,4)) END value,
			CASE WHEN dc.currency_id = 0 THEN 0 WHEN @currency_id = 0 THEN dc.currency_id ELSE @currency_id END currency_id,
			dc.currency_id currency_original_id,
			dc.source_id,
			dc.confidence_id,
			dc.definition_id,
			dc.has_flags,
			dc.flags,
			dc.location
			
	FROM	dc_organisation_data dc INNER JOIN
			organisations o ON dc.organisation_id = o.id INNER JOIN
			organisation_zone_link oz ON o.id = oz.organisation_id INNER JOIN
			zones z ON oz.zone_id = z.id INNER JOIN
			currency_rates cr ON (cr.from_currency_id = dc.currency_id AND cr.to_currency_id = @currency_id) INNER JOIN
			data_sets s ON (dc.metric_id = s.metric_id AND dc.attribute_id = s.attribute_id)

	WHERE	z.id = @zone_id AND
			o.type_id = 1089 AND
			dc.date >= @date_start AND
			dc.date < @date_end AND
			dc.date_type = @date_type AND
			s.attribute_id IS NOT null AND 
			s.show_in_metrics_only = 0 AND
			(
				(@spot_historic = 0 AND cr.date = dc.date) OR
				(@spot_historic = 1 AND cr.date = @spot_quarter)
			)
			
	ORDER BY dc.metric_order, dc.attribute_order, o.name, dc.date
END


-- Data
SELECT * FROM #data ORDER BY metric_order, attribute_order, is_aggregate DESC, date, date_type

-- Metric, attribute combinations
SELECT	DISTINCT 
		metric_id, 
		metric_order, 
		attribute_id, 
		attribute_order
		
FROM	#data

GROUP BY metric_id, metric_order, attribute_id, attribute_order
ORDER BY metric_order, attribute_order

-- Date combinations
SELECT	DISTINCT 
		date, 
		date_type,
		CASE date_type WHEN 'Q' THEN 1 WHEN 'H' THEN 2 WHEN 'Y' THEN 3 ELSE 4 END date_type_order

FROM	#data

ORDER BY date, date_type_order


DROP TABLE #data]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_markets_data].[@spot_quarter]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[current_reporting_quarter]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_markets_data].[@zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_markets_data].[#data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_markets_data].[@currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_metadata]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_metadata].[fk_zone_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[metric_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[attribute_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[value]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[definition_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_metadata].[location]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_markets_data].[@date_start]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_markets_data].[@date_end]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_markets_data].[@date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets].[show_in_metrics_only]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_markets_data].[@spot_historic]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[is_spot]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_markets_data].[@include_countries]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[metric_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[attribute_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[value]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[definition_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[location]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets].[show_in_metrics_only]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[is_spot]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_markets_data].[@include_operators]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[metric_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[attribute_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[value]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[definition_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[location]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets].[show_in_metrics_only]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[metric_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[attribute_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[value]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[definition_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[location]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets].[show_in_metrics_only]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_markets_data].[#data].[metric_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_markets_data].[#data].[attribute_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_markets_data].[#data].[is_aggregate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_markets_data].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_markets_data].[#data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_markets_data].[#data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_markets_data].[#data].[attribute_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[data_markets_data].[#data]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_markets_data].[#data].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_markets_data].[#data].[entity_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_markets_data].[#data].[is_aggregate]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_markets_data].[#data].[metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_markets_data].[#data].[metric_order]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_markets_data].[#data].[attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_markets_data].[#data].[attribute_order]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_markets_data].[#data].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_markets_data].[#data].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_markets_data].[#data].[val_d]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_markets_data].[#data].[val_i]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_markets_data].[#data].[value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_markets_data].[#data].[currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_markets_data].[#data].[currency_original_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_markets_data].[#data].[source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_markets_data].[#data].[confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_markets_data].[#data].[definition_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_markets_data].[#data].[has_flags]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_markets_data].[#data].[flags]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_markets_data].[#data].[location]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_markets_data].[@zone_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_markets_data].[@date_start]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_markets_data].[@date_end]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_markets_data].[@date_type]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA['Q']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_markets_data].[@currency_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_markets_data].[@spot_historic]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_markets_data].[@spot_quarter]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_markets_data].[@include_countries]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_markets_data].[@include_operators]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="9023" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[data_markets_data]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@zone_id int,&#xD;&#xA;&#x9;@date_start datetime,&#xD;&#xA;&#x9;@date_end datetime,&#xD;&#xA;&#x9;@date_type char(1) = 'Q',&#xD;&#xA;&#x9;@currency_id int = 1,&#xD;&#xA;&#x9;@spot_historic bit = 1,&#xD;&#xA;&#x9;@spot_quarter datetime = null,&#xD;&#xA;&#x9;@include_countries bit = 0,&#xD;&#xA;&#x9;@include_operators bit = 0&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[data_markets_data_empy]">
			<Property Name="BodyScript">
				<Value><![CDATA[

SET FMTONLY ON

select * from dc_zone_data where id=0]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[dc_zone_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_markets_data_empy].[@zone_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_markets_data_empy].[@date_start]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_markets_data_empy].[@date_end]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_markets_data_empy].[@date_type]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA['Q']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_markets_data_empy].[@currency_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_markets_data_empy].[@spot_historic]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_markets_data_empy].[@spot_quarter]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_markets_data_empy].[@include_countries]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_markets_data_empy].[@include_operators]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="352" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[data_markets_data_empy]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@zone_id int,&#xD;&#xA;&#x9;@date_start datetime,&#xD;&#xA;&#x9;@date_end datetime,&#xD;&#xA;&#x9;@date_type char(1) = 'Q',&#xD;&#xA;&#x9;@currency_id int = 1,&#xD;&#xA;&#x9;@spot_historic bit = 1,&#xD;&#xA;&#x9;@spot_quarter datetime = null,&#xD;&#xA;&#x9;@include_countries bit = 0,&#xD;&#xA;&#x9;@include_operators bit = 0&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[data_markets_ranking]">
			<Property Name="BodyScript">
				<Value><![CDATA[

IF @date IS NULL
BEGIN
	SET @date = dbo.current_reporting_quarter()
END

IF @spot_quarter IS NULL
BEGIN
	SET @spot_quarter = dbo.current_reporting_quarter()
END

SELECT	RANK() OVER (ORDER BY CASE dc.is_calculated WHEN 0 THEN (CASE WHEN dc.val_i IS NULL THEN dc.val_d * cr.value ELSE CAST(dc.val_i * cr.value AS decimal(22,4)) END) ELSE (CASE WHEN dc.val_i IS null THEN dc.val_d ELSE CAST(dc.val_i AS decimal(22,4)) END) END DESC) rank,
		dc.id,
		c.id country_id,
		c.name country,
		s.id subregion_id,
		s.name subregion,
		r.id region_id,
		r.name region,
		dc.metric_id,
		dc.metric_order,
		dc.attribute_id,
		dc.attribute_order,
		dc.date datetime,
		dc.date_type,
		dc.val_d,
		dc.val_i,
		CASE dc.is_calculated WHEN 0 THEN (CASE WHEN dc.val_i IS NULL THEN dc.val_d * cr.value ELSE CAST(dc.val_i * cr.value AS decimal(22,4)) END) ELSE (CASE WHEN dc.val_i IS null THEN dc.val_d ELSE CAST(dc.val_i AS decimal(22,4)) END) END value,
		CASE dc.currency_id WHEN 0 THEN 0 ELSE @currency_id END currency_id,
		dc.currency_id currency_original_id,
		dc.source_id,
		dc.confidence_id,
		dc.definition_id,
		dc.has_flags,
		dc.flags,
		dm.location
		
FROM	dc_zone_data dc INNER JOIN
		zones c ON dc.zone_id = c.id INNER JOIN
		zone_link zl ON c.id = zl.subzone_id INNER JOIN
		zones s ON zl.zone_id = s.id INNER JOIN
		zone_link zl2 ON s.id = zl2.subzone_id INNER JOIN 
		zones r ON zl2.zone_id = r.id INNER JOIN
		zone_link zl3 ON r.id = zl3.subzone_id INNER JOIN
		zones g ON zl3.zone_id = g.id INNER JOIN
		currency_rates cr ON (cr.from_currency_id = dc.currency_id AND cr.to_currency_id = @currency_id)
	LEFT JOIN zone_data_metadata as dm ON dc.id = dm.fk_zone_data_id


WHERE	s.id = COALESCE(@subregion_id, s.id) AND
		r.id = COALESCE(@region_id, r.id) AND
		g.id = @geoscheme_id AND
		dc.metric_id = @metric_id AND
		dc.attribute_id = @attribute_id AND
		dc.date = @date AND
		dc.date_type = @date_type AND
		(
			(
				-- When the market-level value is reported, currency conversions are generated in-query
				dc.is_calculated = 0 AND
				(
					(@spot_historic = 0 AND cr.date = dc.date) OR
					(@spot_historic = 1 AND cr.date = @spot_quarter)
				)
			)
			OR
			(
				-- When the market-level value is aggregated from operator data, currency conversions are pre-calculated
				dc.is_calculated = 1 AND
				dc.currency_id IN (0, @currency_id) AND
				(
					((@spot_historic = 0 OR dc.currency_id = 0) AND cr.date = dc.date AND (dc.is_spot = 0 OR dc.is_spot IS null)) OR 		-- Either null for non-currency data or 0/1 for historic/spot calculation
					((@spot_historic = 1 AND dc.currency_id <> 0) AND cr.date = @spot_quarter AND (dc.is_spot = 1 OR dc.is_spot IS null))	-- Still joined on currency_rates, so need a cr.date clause to ensure 1:1 rows returned
				)
			)
		)
		
ORDER BY value DESC]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[data_markets_ranking].[@date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[current_reporting_quarter]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_markets_ranking].[@spot_quarter]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_markets_ranking].[@currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_metadata]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_metadata].[fk_zone_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[value]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[metric_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[attribute_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[date_type]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[definition_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_metadata].[location]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_markets_ranking].[@subregion_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_markets_ranking].[@region_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_markets_ranking].[@geoscheme_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_markets_ranking].[@metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_markets_ranking].[@attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_markets_ranking].[@date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_markets_ranking].[@spot_historic]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[is_spot]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_markets_ranking].[@geoscheme_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_markets_ranking].[@region_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_markets_ranking].[@subregion_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_markets_ranking].[@metric_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_markets_ranking].[@attribute_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_markets_ranking].[@date]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_markets_ranking].[@date_type]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA['Q']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_markets_ranking].[@currency_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_markets_ranking].[@spot_historic]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_markets_ranking].[@spot_quarter]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="3191" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[data_markets_ranking]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@geoscheme_id int,&#xD;&#xA;&#x9;@region_id int = null,&#xD;&#xA;&#x9;@subregion_id int = null,&#xD;&#xA;&#x9;@metric_id int,&#xD;&#xA;&#x9;@attribute_id int,&#xD;&#xA;&#x9;@date datetime = null,&#xD;&#xA;&#x9;@date_type char(1) = 'Q',&#xD;&#xA;&#x9;@currency_id int = 0,&#xD;&#xA;&#x9;@spot_historic bit = 0,&#xD;&#xA;&#x9;@spot_quarter datetime = null&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[data_metrics_data]">
			<Property Name="BodyScript">
				<Value><![CDATA[

DECLARE @total_attribute_id int = 0

IF @spot_quarter IS null
BEGIN
	SET @spot_quarter = dbo.current_reporting_quarter()
END

IF @type_id IS NOT null
BEGIN
	-- Use the correct "Total" attribute for n>2 nesting of attributes
	SET @total_attribute_id = CASE @type_id WHEN 7 THEN 1629 WHEN 22 THEN 1251 WHEN 23 THEN 1251 WHEN 1576 THEN 1581 ELSE 0 END
END

CREATE TABLE #zones (id int, parent_id int, [order] int)
CREATE TABLE #organisations (id int)

CREATE TABLE #data (id bigint, entity_id int, entity nvarchar(512) COLLATE DATABASE_DEFAULT, country_id int, country nvarchar(512) COLLATE DATABASE_DEFAULT, parent_id int, [order] int, is_aggregate tinyint, metric_id int, metric_order int, attribute_id int, attribute_order int, date datetime, date_type char(1) COLLATE DATABASE_DEFAULT, val_d decimal(22,4), val_i bigint, value decimal(22,4), currency_id int, currency_original_id int, source_id int, confidence_id int, definition_id int, has_flags bit, flags nvarchar(max) COLLATE DATABASE_DEFAULT, location nvarchar(max) COLLATE DATABASE_DEFAULT)

-- Global, regions, subregions
IF @show = 1
BEGIN
	-- Defaults
	INSERT INTO #zones
	SELECT	3826, 3826, 0 UNION ALL		-- Global
	SELECT	3899, 3938, 2 UNION ALL		-- Developed (TODO: add to zone_link against each geoscheme)
	SELECT	3900, 3938, 2				-- Developing

	IF @zone_id = 3936					-- UN Geoscheme
	BEGIN
		INSERT INTO #zones
		SELECT	3821, 3939, 3 UNION ALL	-- Custom: Asia Pacific
		SELECT	3902, 3939, 3 UNION ALL	-- Custom: European Union
		SELECT	3820, 3939, 3 UNION ALL	-- Custom: Latin America
		SELECT	3982, 3939, 3 UNION ALL -- Custom: Least Developed Countries
		SELECT	3824, 3939, 3 UNION ALL	-- Custom: Middle East
		SELECT	3896, 3939, 3			-- Custom: SSA
	END

	IF @zone_id = 3954					-- GSMA Geoscheme
	BEGIN
		INSERT INTO #zones
		SELECT	3961, 3963, 3 UNION ALL	-- Custom: Arab States
		SELECT	3902, 3963, 3 UNION ALL	-- Custom: European Union
		SELECT	3982, 3963, 3 UNION ALL -- Custom: Least Developed Countries
		SELECT	3824, 3963, 3 UNION ALL	-- Custom: Middle East
		SELECT	3964, 3963, 3			-- Custom: Pacific Islands
	END

	INSERT INTO #zones
	SELECT	DISTINCT zl.subzone_id, zl.subzone_id, 1 FROM zone_link zl WHERE zl.zone_id = @zone_id UNION ALL
	SELECT	DISTINCT zl2.subzone_id, zl2.zone_id, 1 FROM zone_link zl INNER JOIN zone_link zl2 ON zl.subzone_id = zl2.zone_id WHERE zl.zone_id = @zone_id

	INSERT INTO #data
	SELECT	dc.id,
			z.id,
			z.name,
			null,
			null,
			z2.parent_id,
			z2.[order],
			--CASE z.type_id WHEN 3 THEN 2 WHEN 42 THEN 1 ELSE CASE z.id WHEN 3899 THEN 1 WHEN 3900 THEN 1 WHEN 3821 THEN 1 WHEN 3902 THEN 1 WHEN 3820 THEN 1 WHEN 3824 THEN 1 WHEN 3896 THEN 1 ELSE 0 END END is_aggregate,
			CASE z.type_id WHEN 3 THEN 2 WHEN 42 THEN 1 WHEN 39 THEN (CASE WHEN @zone_id = 3936 AND z2.[order] = 1 THEN 0 ELSE 1 END) ELSE 0 END is_aggregate,
			dc.metric_id,
			dc.metric_order,
			dc.attribute_id,
			dc.attribute_order,
			dc.date datetime,
			dc.date_type,
			dc.val_d,
			dc.val_i,
			CASE dc.is_calculated WHEN 0 THEN (CASE WHEN dc.val_i IS NULL THEN dc.val_d * cr.value ELSE CAST(dc.val_i * cr.value AS decimal(22,4)) END) ELSE (CASE WHEN dc.val_i IS null THEN dc.val_d ELSE CAST(dc.val_i AS decimal(22,4)) END) END value,
			CASE dc.currency_id WHEN 0 THEN 0 ELSE @currency_id END currency_id,
			dc.currency_id currency_original_id,
			dc.source_id,
			dc.confidence_id,
			dc.definition_id,
			dc.has_flags,
			dc.flags,
			dm.location
			
	FROM	dc_zone_data dc INNER JOIN
			currency_rates cr ON (cr.from_currency_id = dc.currency_id AND cr.to_currency_id = @currency_id) INNER JOIN
			zones z ON dc.zone_id = z.id INNER JOIN
			#zones z2 ON z.id = z2.id LEFT JOIN -- TODO: remove the direct relationship between countries and the global zone
			attributes a ON dc.attribute_id = a.id
	LEFT JOIN zone_data_metadata as dm ON dc.id = dm.fk_zone_data_id


	WHERE	z.id IN (SELECT id FROM #zones) AND
			dc.metric_id = @metric_id AND
			dc.attribute_id = COALESCE(@attribute_id, dc.attribute_id) AND
			dc.date >= @date_start AND
			dc.date < @date_end AND
			dc.date_type = @date_type AND
			(
				(@type_id IS null AND (a.type_id IS null OR a.type_id = a.type_id)) OR
				(@type_id IS NOT null AND (a.id = @total_attribute_id OR a.type_id = @type_id)) -- Show total with type_id segments
			)
			AND
			(
				(
					-- When the market-level value is reported, currency conversions are generated in-query
					dc.is_calculated = 0 AND
					(
						(@spot_historic = 0 AND cr.date = dc.date) OR
						(@spot_historic = 1 AND cr.date = @spot_quarter)
					)
				)
				OR
				(
					-- When the market-level value is aggregated from operator data, currency conversions are pre-calculated
					dc.is_calculated = 1 AND
					dc.currency_id IN (0, @currency_id) AND
					(
						((@spot_historic = 0 OR dc.currency_id = 0) AND cr.date = dc.date AND (dc.is_spot = 0 OR dc.is_spot IS null)) OR 		-- Either null for non-currency data or 0/1 for historic/spot calculation
						((@spot_historic = 1 AND dc.currency_id <> 0) AND cr.date = @spot_quarter AND (dc.is_spot = 1 OR dc.is_spot IS null))	-- Still joined on currency_rates, so need a cr.date clause to ensure 1:1 rows returned
					)
				)
			)
			
	ORDER BY parent_id, z.name, CASE dc.date_type WHEN 'Q' THEN 1 WHEN 'H' THEN 2 WHEN 'Y' THEN 3 ELSE 4 END, dc.date, dc.attribute_order
END


-- Region, countries
IF @show = 2
BEGIN
	INSERT INTO #zones
	SELECT	@zone_id, null, 0 UNION ALL
	SELECT	DISTINCT z.id, null, 1 FROM zone_link zl INNER JOIN zones z ON zl.subzone_id = z.id WHERE zl.zone_id = @zone_id AND z.type_id = 10 UNION ALL
	SELECT	DISTINCT z.id, null, 1 FROM zone_link zl INNER JOIN zone_link zl2 ON zl.subzone_id = zl2.zone_id INNER JOIN zones z ON zl2.subzone_id = z.id WHERE zl.zone_id = @zone_id AND z.type_id = 10

	INSERT INTO #data
	SELECT	dc.id,
			z.id,
			z.name,
			null,
			null,
			@zone_id,
			null,
			CASE z.type_id WHEN 10 THEN 0 ELSE 1 END is_aggregate,
			dc.metric_id,
			dc.metric_order,
			dc.attribute_id,
			dc.attribute_order,
			dc.date datetime,
			dc.date_type,
			dc.val_d,
			dc.val_i,
			CASE dc.is_calculated WHEN 0 THEN (CASE WHEN dc.val_i IS NULL THEN dc.val_d * cr.value ELSE CAST(dc.val_i * cr.value AS decimal(22,4)) END) ELSE (CASE WHEN dc.val_i IS null THEN dc.val_d ELSE CAST(dc.val_i AS decimal(22,4)) END) END value,
			CASE dc.currency_id WHEN 0 THEN 0 ELSE @currency_id END currency_id,
			dc.currency_id currency_original_id,
			dc.source_id,
			dc.confidence_id,
			dc.definition_id,
			dc.has_flags,
			dc.flags,
			dm.location
			
	FROM	dc_zone_data dc INNER JOIN
			zones z ON dc.zone_id = z.id INNER JOIN
			currency_rates cr ON (cr.from_currency_id = dc.currency_id AND cr.to_currency_id = @currency_id) LEFT JOIN
			attributes a ON dc.attribute_id = a.id
	LEFT JOIN zone_data_metadata as dm ON dc.id = dm.fk_zone_data_id


	WHERE	z.id IN (SELECT id FROM #zones) AND
			dc.metric_id = @metric_id AND
			dc.attribute_id = COALESCE(@attribute_id, dc.attribute_id) AND
			dc.date >= @date_start AND
			dc.date < @date_end AND
			dc.date_type = @date_type AND
			(
				(@type_id IS null AND (a.type_id IS null OR a.type_id = a.type_id)) OR
				(@type_id IS NOT null AND (a.id = @total_attribute_id OR a.type_id = @type_id)) -- Show total with type_id segments
			)
			AND
			(
				(
					-- When the market-level value is reported, currency conversions are generated in-query
					dc.is_calculated = 0 AND
					(
						(@spot_historic = 0 AND cr.date = dc.date) OR
						(@spot_historic = 1 AND cr.date = @spot_quarter)
					)
				)
				OR
				(
					-- When the market-level value is aggregated from operator data, currency conversions are pre-calculated
					dc.is_calculated = 1 AND
					dc.currency_id IN (0, @currency_id) AND
					(
						((@spot_historic = 0 OR dc.currency_id = 0) AND cr.date = dc.date AND (dc.is_spot = 0 OR dc.is_spot IS null)) OR 		-- Either null for non-currency data or 0/1 for historic/spot calculation
						((@spot_historic = 1 AND dc.currency_id <> 0) AND cr.date = @spot_quarter AND (dc.is_spot = 1 OR dc.is_spot IS null))	-- Still joined on currency_rates, so need a cr.date clause to ensure 1:1 rows returned
					)
				)
			)
			
	ORDER BY is_aggregate DESC, z.name, CASE dc.date_type WHEN 'Q' THEN 1 WHEN 'H' THEN 2 WHEN 'Y' THEN 3 ELSE 4 END, dc.date, dc.attribute_order
END


-- Country, operators
IF @show = 3
BEGIN
	INSERT INTO #zones
	SELECT	@zone_id, null, 0 UNION ALL
	SELECT	DISTINCT z.id, null, 1 FROM zone_link zl INNER JOIN zones z ON zl.subzone_id = z.id WHERE zl.zone_id = @zone_id AND z.type_id = 10 UNION ALL
	SELECT	DISTINCT z.id, null, 1 FROM zone_link zl INNER JOIN zone_link zl2 ON zl.subzone_id = zl2.zone_id INNER JOIN zones z ON zl2.subzone_id = z.id WHERE zl.zone_id = @zone_id AND z.type_id = 10

	INSERT INTO #organisations
	SELECT	DISTINCT oz.organisation_id FROM organisation_zone_link oz WHERE oz.zone_id = @zone_id UNION ALL
	SELECT	DISTINCT oz.organisation_id FROM zone_link zl INNER JOIN organisation_zone_link oz ON zl.subzone_id = oz.zone_id WHERE zl.zone_id = @zone_id UNION ALL
	SELECT	DISTINCT oz.organisation_id FROM zone_link zl INNER JOIN zone_link zl2 ON zl.subzone_id = zl2.zone_id INNER JOIN organisation_zone_link oz ON zl2.subzone_id = oz.zone_id WHERE zl.zone_id = @zone_id

	INSERT INTO #data
	SELECT	dc.id,
			z.id,
			z.name,
			CASE z.type_id WHEN 10 THEN z.id ELSE null END,
			CASE z.type_id WHEN 10 THEN z.name ELSE null END,
			@zone_id,
			null,
			CASE z.type_id WHEN 10 THEN 1 ELSE 2 END,
			dc.metric_id,
			dc.metric_order,
			dc.attribute_id,
			dc.attribute_order,
			dc.date datetime,
			dc.date_type,
			dc.val_d,
			dc.val_i,
			CASE dc.is_calculated WHEN 0 THEN (CASE WHEN dc.val_i IS NULL THEN dc.val_d * cr.value ELSE CAST(dc.val_i * cr.value AS decimal(22,4)) END) ELSE (CASE WHEN dc.val_i IS null THEN dc.val_d ELSE CAST(dc.val_i AS decimal(22,4)) END) END value,
			CASE dc.currency_id WHEN 0 THEN 0 ELSE @currency_id END currency_id,
			dc.currency_id currency_original_id,
			dc.source_id,
			dc.confidence_id,
			dc.definition_id,
			dc.has_flags,
			dc.flags,
			dm.location
			
	FROM	dc_zone_data dc INNER JOIN
			zones z ON dc.zone_id = z.id INNER JOIN
			currency_rates cr ON (cr.from_currency_id = dc.currency_id AND cr.to_currency_id = @currency_id) LEFT JOIN
			attributes a ON dc.attribute_id = a.id
	LEFT JOIN zone_data_metadata as dm ON dc.id = dm.fk_zone_data_id


	WHERE	z.id IN (SELECT id FROM #zones) AND
			dc.metric_id = @metric_id AND
			dc.attribute_id = COALESCE(@attribute_id, dc.attribute_id) AND
			dc.date >= @date_start AND
			dc.date < @date_end AND
			dc.date_type = @date_type AND
			(
				(@type_id IS null AND (a.type_id IS null OR a.type_id = a.type_id)) OR
				(@type_id IS NOT null AND (a.id = @total_attribute_id OR a.type_id = @type_id)) -- Show total with type_id segments
			)
			AND
			(
				(
					-- When the market-level value is reported, currency conversions are generated in-query
					dc.is_calculated = 0 AND
					(
						(@spot_historic = 0 AND cr.date = dc.date) OR
						(@spot_historic = 1 AND cr.date = @spot_quarter)
					)
				)
				OR
				(
					-- When the market-level value is aggregated from operator data, currency conversions are pre-calculated
					dc.is_calculated = 1 AND
					dc.currency_id IN (0, @currency_id) AND
					(
						((@spot_historic = 0 OR dc.currency_id = 0) AND cr.date = dc.date AND (dc.is_spot = 0 OR dc.is_spot IS null)) OR 		-- Either null for non-currency data or 0/1 for historic/spot calculation
						((@spot_historic = 1 AND dc.currency_id <> 0) AND cr.date = @spot_quarter AND (dc.is_spot = 1 OR dc.is_spot IS null))	-- Still joined on currency_rates, so need a cr.date clause to ensure 1:1 rows returned
					)
				)
			)
			
	ORDER BY z.name, CASE dc.date_type WHEN 'Q' THEN 1 WHEN 'H' THEN 2 WHEN 'Y' THEN 3 ELSE 4 END, dc.date, dc.attribute_order

	INSERT INTO #data
	SELECT	dc.id,
			o.id,
			o.name,
			z.id,
			z.name,
			z.id,
			null,
			0,
			dc.metric_id,
			dc.metric_order,
			dc.attribute_id,
			dc.attribute_order,
			dc.date datetime,
			dc.date_type,
			dc.val_d,
			dc.val_i,
			CASE WHEN dc.val_i IS NULL THEN dc.val_d * (CASE @currency_id WHEN 0 THEN 1 ELSE cr.value END) ELSE CAST(dc.val_i * (CASE @currency_id WHEN 0 THEN 1 ELSE cr.value END) AS decimal(22,4)) END value,
			CASE WHEN dc.currency_id = 0 THEN 0 WHEN @currency_id = 0 THEN dc.currency_id ELSE @currency_id END currency_id,
			dc.currency_id currency_original_id,
			dc.source_id,
			dc.confidence_id,
			dc.definition_id,
			dc.has_flags,
			dc.flags,
			dm.location
			
	FROM	dc_organisation_data dc INNER JOIN
			organisations o ON dc.organisation_id = o.id INNER JOIN
			organisation_zone_link oz ON o.id = oz.organisation_id INNER JOIN
			zones z ON oz.zone_id = z.id INNER JOIN
			currency_rates cr ON (cr.from_currency_id = dc.currency_id AND cr.to_currency_id = CASE @currency_id WHEN 0 THEN 1 ELSE @currency_id END) LEFT JOIN
			attributes a ON dc.attribute_id = a.id
	LEFT JOIN organisation_data_metadata as dm ON dc.id = dm.fk_organisation_data_id


	WHERE	o.id IN (SELECT id FROM #organisations) AND
			o.type_id = 1089 AND
			dc.metric_id = @metric_id AND
			dc.attribute_id = COALESCE(@attribute_id, dc.attribute_id) AND
			dc.date >= @date_start AND
			dc.date < @date_end AND
			dc.date_type = @date_type AND
			(
				(@type_id IS null AND (a.type_id IS null OR a.type_id = a.type_id)) OR
				(@type_id IS NOT null AND (a.id = @total_attribute_id OR a.type_id = @type_id)) -- Show total with type_id segments
			)
			AND
			(
				(@spot_historic = 0 AND cr.date = dc.date) OR
				(@spot_historic = 1 AND cr.date = @spot_quarter)
			)
			
	ORDER BY z.name, o.name, CASE dc.date_type WHEN 'Q' THEN 1 WHEN 'H' THEN 2 WHEN 'Y' THEN 3 ELSE 4 END, dc.date, dc.attribute_order
END


-- Remove data that should only show in single metric/attribute views
IF @attribute_id IS null
BEGIN
	-- Can show data for a single type_id where all attributes of that type are hidden
	DECLARE @show_data bit
	SET @show_data = CASE WHEN (SELECT COUNT(*) FROM data_sets WHERE metric_id = @metric_id AND type_id = @type_id AND is_live = 1 AND show_in_metrics_only = 0) > 0 THEN 0 ELSE 1 END

	IF @show_data = 0
	BEGIN
		DELETE	ds
		FROM	#data ds INNER JOIN data_sets s ON (ds.metric_id = s.metric_id AND ds.attribute_id = s.attribute_id)
		WHERE	s.show_in_metrics_only = 1
	END
END


-- Data
SELECT * FROM #data ORDER BY [order], CASE @show WHEN 1 THEN parent_id END, country, is_aggregate DESC, entity

-- Date combinations
SELECT	DISTINCT
		date,
		date_type,
		CASE date_type WHEN 'Q' THEN 1 WHEN 'H' THEN 2 WHEN 'Y' THEN 3 ELSE 4 END date_type_order

FROM	#data

ORDER BY date, date_type_order


DROP TABLE #data
DROP TABLE #zones]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_metrics_data].[@spot_quarter]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[current_reporting_quarter]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_metrics_data].[@type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_metrics_data].[@show]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_metrics_data].[#zones]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_metrics_data].[@zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_metrics_data].[#data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_metrics_data].[@currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_metrics_data].[#zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_metadata]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_metadata].[fk_zone_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_metrics_data].[#zones].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_metrics_data].[#zones].[order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[metric_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[attribute_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[value]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[definition_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_metadata].[location]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_metrics_data].[#zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_metrics_data].[@metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_metrics_data].[@attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_metrics_data].[@date_start]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_metrics_data].[@date_end]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_metrics_data].[@date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_metrics_data].[@spot_historic]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[is_spot]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_metrics_data].[#zones].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_metadata].[fk_zone_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[metric_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[attribute_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[value]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[definition_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_metadata].[location]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[is_spot]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_metrics_data].[#organisations]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata].[fk_organisation_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[metric_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[attribute_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[value]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[definition_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata].[location]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_metrics_data].[#organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets].[is_live]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets].[show_in_metrics_only]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_metrics_data].[#data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_metrics_data].[#data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets].[show_in_metrics_only]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_metrics_data].[#data].[order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_metrics_data].[#data].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_metrics_data].[#data].[country]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_metrics_data].[#data].[is_aggregate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_metrics_data].[#data].[entity]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_metrics_data].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_metrics_data].[#data].[date_type]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[data_metrics_data].[#zones]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_metrics_data].[#zones].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_metrics_data].[#zones].[parent_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_metrics_data].[#zones].[order]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[data_metrics_data].[#organisations]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_metrics_data].[#organisations].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[data_metrics_data].[#data]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_metrics_data].[#data].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_metrics_data].[#data].[entity_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_metrics_data].[#data].[entity]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="512" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_metrics_data].[#data].[country_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_metrics_data].[#data].[country]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="512" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_metrics_data].[#data].[parent_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_metrics_data].[#data].[order]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_metrics_data].[#data].[is_aggregate]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[tinyint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_metrics_data].[#data].[metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_metrics_data].[#data].[metric_order]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_metrics_data].[#data].[attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_metrics_data].[#data].[attribute_order]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_metrics_data].[#data].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_metrics_data].[#data].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_metrics_data].[#data].[val_d]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_metrics_data].[#data].[val_i]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_metrics_data].[#data].[value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_metrics_data].[#data].[currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_metrics_data].[#data].[currency_original_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_metrics_data].[#data].[source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_metrics_data].[#data].[confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_metrics_data].[#data].[definition_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_metrics_data].[#data].[has_flags]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_metrics_data].[#data].[flags]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_metrics_data].[#data].[location]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_metrics_data].[@show]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[tinyint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_metrics_data].[@zone_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_metrics_data].[@metric_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_metrics_data].[@attribute_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_metrics_data].[@type_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_metrics_data].[@date_start]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_metrics_data].[@date_end]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_metrics_data].[@date_type]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA['Q']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_metrics_data].[@currency_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_metrics_data].[@spot_historic]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_metrics_data].[@spot_quarter]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="15390" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[data_metrics_data]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@show tinyint,&#xD;&#xA;&#x9;@zone_id int,&#xD;&#xA;&#x9;@metric_id int,&#xD;&#xA;&#x9;@attribute_id int,&#xD;&#xA;&#x9;@type_id int,&#xD;&#xA;&#x9;@date_start datetime,&#xD;&#xA;&#x9;@date_end datetime,&#xD;&#xA;&#x9;@date_type char(1) = 'Q',&#xD;&#xA;&#x9;@currency_id int = 1,&#xD;&#xA;&#x9;@spot_historic bit = 1,&#xD;&#xA;&#x9;@spot_quarter datetime = null&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[data_metrics_data_empty]">
			<Property Name="BodyScript">
				<Value><![CDATA[

SET FMTONLY ON

select * from dc_zone_data where id=0]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[dc_zone_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_metrics_data_empty].[@show]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[tinyint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_metrics_data_empty].[@zone_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_metrics_data_empty].[@metric_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_metrics_data_empty].[@attribute_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_metrics_data_empty].[@type_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_metrics_data_empty].[@date_start]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_metrics_data_empty].[@date_end]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_metrics_data_empty].[@date_type]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA['Q']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_metrics_data_empty].[@currency_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_metrics_data_empty].[@spot_historic]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_metrics_data_empty].[@spot_quarter]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="365" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[data_metrics_data_empty]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@show tinyint,&#xD;&#xA;&#x9;@zone_id int,&#xD;&#xA;&#x9;@metric_id int,&#xD;&#xA;&#x9;@attribute_id int,&#xD;&#xA;&#x9;@type_id int,&#xD;&#xA;&#x9;@date_start datetime,&#xD;&#xA;&#x9;@date_end datetime,&#xD;&#xA;&#x9;@date_type char(1) = 'Q',&#xD;&#xA;&#x9;@currency_id int = 1,&#xD;&#xA;&#x9;@spot_historic bit = 1,&#xD;&#xA;&#x9;@spot_quarter datetime = null&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[data_mvnos]">
			<Property Name="BodyScript">
				<Value><![CDATA[

IF @geoscheme_id IS NULL
BEGIN
	SET @geoscheme_id = dbo.default_geoscheme_id()
END

IF @subregion_id IN (3899,3900)
BEGIN
	-- Developed/developing split can return results from any geosceheme
	-- TODO: better solution!
	SET @geoscheme_id = 3937
END


SELECT	DISTINCT
		o.id,
		o.name,
		o.status_id,
		h.id host_id,
		h.name host,
		u.id group_id,
		u.name [group],
		c.id country_id,
		c.name country,
		c.iso_code,
		c.iso_short_code,
		s.id subregion_id,
		s.name subregion,
		r.id region_id,
		r.name region,
		a.id category_id,
		t.id tariff_type_id,
		ds.launch_date,
		ds.url,
		ds.is_brand,
		ds.is_data_only,
		ds.has_data,
		ds.has_group_data

FROM	ds_mvnos ds INNER JOIN
		organisations o ON ds.mvno_id = o.id INNER JOIN
		organisation_zone_link oz ON o.id = oz.organisation_id INNER JOIN
		zones c ON oz.zone_id = c.id INNER JOIN
		zone_link zl ON c.id = zl.subzone_id INNER JOIN
		zones s ON zl.zone_id = s.id INNER JOIN
		zone_link zl2 ON s.id = zl2.subzone_id INNER JOIN 
		zones r ON zl2.zone_id = r.id INNER JOIN
		zone_link zl3 ON r.id = zl3.subzone_id INNER JOIN
		zones g ON zl3.zone_id = g.id LEFT JOIN
		mvno_group_link mg ON ds.mvno_id = mg.mvno_id LEFT JOIN
		organisations u ON mg.group_id = u.id LEFT JOIN
		mvno_host_link mh ON ds.mvno_id = mh.mvno_id LEFT JOIN
		organisations h ON mh.host_id = h.id LEFT JOIN
		attributes a ON ds.category_id = a.id LEFT JOIN
		attributes t ON ds.tariff_type_id = t.id
	
WHERE	o.status_id = COALESCE(@status_id, o.status_id) AND
		o.status_id <> 1309 AND -- No 'verified' operators
		c.id = COALESCE(@country_id, c.id) AND
		s.id = COALESCE(@subregion_id, s.id) AND
		r.id = COALESCE(@region_id, r.id) AND
		g.id = @geoscheme_id

ORDER BY ds.launch_date DESC, c.name, o.name, h.name]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[data_mvnos].[@geoscheme_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[default_geoscheme_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_mvnos].[@subregion_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_mvnos]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_mvnos].[mvno_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[mvno_group_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_mvnos].[mvno_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[mvno_group_link].[mvno_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[mvno_group_link].[group_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[mvno_host_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_mvnos].[mvno_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[mvno_host_link].[mvno_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[mvno_host_link].[host_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_mvnos].[category_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_mvnos].[tariff_type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[iso_code]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[iso_short_code]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_mvnos].[launch_date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_mvnos].[url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_mvnos].[is_brand]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_mvnos].[is_data_only]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_mvnos].[has_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_mvnos].[has_group_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_mvnos].[@status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_mvnos].[@country_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_mvnos].[@region_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_mvnos].[@geoscheme_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_mvnos].[@region_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_mvnos].[@subregion_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_mvnos].[@country_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_mvnos].[@status_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="1993" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[data_mvnos]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@geoscheme_id int = null,&#xD;&#xA;&#x9;@region_id int = null,&#xD;&#xA;&#x9;@subregion_id int = null,&#xD;&#xA;&#x9;@country_id int = null,&#xD;&#xA;&#x9;@status_id int = null&#xD;&#xA;)&#xD;&#xA;&#x9;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[data_networks]">
			<Property Name="BodyScript">
				<Value><![CDATA[

DECLARE @technology_is_family bit
SET @technology_is_family = (SELECT COUNT(DISTINCT family_id) FROM attribute_family_link WHERE family_id = @technology_id)

IF @geoscheme_id IS NULL
BEGIN
	SET @geoscheme_id = dbo.default_geoscheme_id()
END

IF @subregion_id IN (3899,3900)
BEGIN
	-- Developed/developing split can return results from any geosceheme
	-- TODO: better solution!
	SET @geoscheme_id = 3937
END


SELECT	DISTINCT
		o.id organisation_id,
		o.name organisation,
		CASE o.status_id WHEN 1308 THEN 0 ELSE o.status_id END organisation_status_id,
		t.id technology_id,
		t.name technology,
		t.[order] technology_order,
		c.id country_id,
		c.name country,
		c.iso_code,
		c.iso_short_code,
		s.id subregion_id,
		s.name subregion,
		r.id region_id,
		r.name region,
		CASE n.status_id WHEN 1308 THEN 0 ELSE n.status_id END status_id,
		CASE n.status_id WHEN 81 THEN 0 ELSE 1 END status_order, -- Show planned networks before live as most won't have a (future) launch date
		n.launch_date,
		n.closure_date,
		n.downlink_rate,
		n.downlink_rate_unit_id,
		n.uplink_rate,
		n.uplink_rate_unit_id,
		LEFT(f.frequencies, LEN(f.frequencies)-1) frequencies,
		n.vendors
		
FROM	networks n INNER JOIN
		organisations o ON n.organisation_id = o.id INNER JOIN
		attributes t ON n.technology_id = t.id INNER JOIN
		organisation_zone_link oz ON o.id = oz.organisation_id INNER JOIN
		zones c ON oz.zone_id = c.id INNER JOIN
		zone_link zl ON c.id = zl.subzone_id INNER JOIN
		zones s ON zl.zone_id = s.id INNER JOIN
		zone_link zl2 ON s.id = zl2.subzone_id INNER JOIN 
		zones r ON zl2.zone_id = r.id INNER JOIN
		zone_link zl3 ON r.id = zl3.subzone_id INNER JOIN
		zones g ON zl3.zone_id = g.id LEFT JOIN
		(
			SELECT	DISTINCT
					nf2.network_id,
					(
						SELECT	f.name + '/' AS [text()]
						
						FROM	network_frequency_link nf1 INNER JOIN
								attributes f ON nf1.frequency_id = f.id
								
						WHERE	nf1.network_id = nf2.network_id
								
						ORDER BY f.[order]
						
						FOR XML PATH ('')
					) frequencies
					
			FROM	network_frequency_link nf2
		) f ON n.id = f.network_id
		
WHERE	c.id = COALESCE(@country_id, c.id) AND
		s.id = COALESCE(@subregion_id, s.id) AND
		r.id = COALESCE(@region_id, r.id) AND
		g.id = @geoscheme_id AND
		(
			(@technology_is_family = 0 AND t.id = COALESCE(@technology_id, t.id) AND t.published=1 AND 
				t.id IN (602,603,616,619,621,624,823,824,825,870,931,936,937,941,996,1124,1201,1238,
					1245,1293,1307,1472,1473,1474,1512,1513,1514,1515,1545,1595,1600, 1620, 1621, 
					1622, 1625, 1626, 1601, 1603, 1604, 1394, 1591, 1615, 1623, 1624)) OR
			(@technology_is_family = 1 AND t.id IN (SELECT DISTINCT attribute_id FROM attribute_family_link WHERE family_id = @technology_id))
		) AND
		(
			(@status_id = 0 AND n.status_id IN (0,1308)) OR -- Special case for 'live'; include 'missing'
			(n.status_id = COALESCE(@status_id, n.status_id))
		) AND
		n.status_id NOT IN (1309, 1574) -- No 'verified' networks (fixed-wireless etc.)

ORDER BY status_order, n.launch_date DESC, c.name, o.name, t.[order]]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attribute_family_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attribute_family_link].[family_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_networks].[@technology_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_networks].[@geoscheme_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[default_geoscheme_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_networks].[@subregion_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[networks]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[networks].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[networks].[technology_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[network_frequency_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[network_frequency_link].[network_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[network_frequency_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[network_frequency_link].[frequency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[network_frequency_link].[network_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[network_frequency_link].[network_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[networks].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[network_frequency_link].[network_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[iso_code]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[iso_short_code]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[networks].[status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[networks].[launch_date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[networks].[closure_date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[networks].[downlink_rate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[networks].[downlink_rate_unit_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[networks].[uplink_rate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[networks].[uplink_rate_unit_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[networks].[vendors]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_networks].[@country_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_networks].[@region_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[published]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attribute_family_link].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attribute_family_link].[family_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_networks].[@status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[order]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_networks].[@geoscheme_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_networks].[@region_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_networks].[@subregion_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_networks].[@country_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_networks].[@technology_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_networks].[@status_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="3370" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[data_networks]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@geoscheme_id int = null,&#xD;&#xA;&#x9;@region_id int = null,&#xD;&#xA;&#x9;@subregion_id int = null,&#xD;&#xA;&#x9;@country_id int = null,&#xD;&#xA;&#x9;@technology_id int = null,&#xD;&#xA;&#x9;@status_id int = null&#xD;&#xA;)&#xD;&#xA;&#x9;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[data_networks_roaming]">
			<Property Name="BodyScript">
				<Value><![CDATA[

IF @geoscheme_id IS NULL
BEGIN
	SET @geoscheme_id = dbo.default_geoscheme_id()
END

IF @subregion_id IN (3899,3900)
BEGIN
	-- Developed/developing split can return results from any geosceheme
	-- TODO: better solution!
	SET @geoscheme_id = 3937
END


SELECT	DISTINCT
		o3.id organisation_id,
		o3.name organisation,
		t.id technology_id,
		t.name technology,
		t.[order] technology_order,
		c.id country_id,
		c.name country,
		c.iso_code,
		c.iso_short_code,
		s.id subregion_id,
		s.name subregion,
		r.id region_id,
		r.name region,
		nrr.ref_status_id status_id,
		COUNT(DISTINCT c2.id) count_countries,
		COUNT(DISTINCT o4.id) count_organisations
		
FROM	gsma.ic_network_roaming_relationship_link nrr INNER JOIN
		gsma.ic_network_link n ON nrr.network_id = n.id INNER JOIN
		gsma.ic_organisation_link o ON n.organisation_id = o.id INNER JOIN
		gsma.ic_network_link n2 ON nrr.rel_network_id = n2.id INNER JOIN
		gsma.ic_organisation_link o2 ON n2.organisation_id = o2.id INNER JOIN
		attributes t ON n.ref_technology_id = t.id INNER JOIN
		organisations o3 ON o.ref_organisation_id = o3.id INNER JOIN
		organisations o4 ON o2.ref_organisation_id = o4.id INNER JOIN
		organisation_zone_link oz ON o3.id = oz.organisation_id INNER JOIN
		organisation_zone_link oz2 ON o4.id = oz2.organisation_id INNER JOIN
		zones c ON oz.zone_id = c.id INNER JOIN
		zones c2 ON oz2.zone_id = c2.id INNER JOIN
		zone_link zl ON c.id = zl.subzone_id INNER JOIN
		zones s ON zl.zone_id = s.id INNER JOIN
		zone_link zl2 ON s.id = zl2.subzone_id INNER JOIN 
		zones r ON zl2.zone_id = r.id INNER JOIN
		zone_link zl3 ON r.id = zl3.subzone_id INNER JOIN
		zones g ON zl3.zone_id = g.id

		
WHERE	t.id = COALESCE(@technology_id, t.id) AND
		c.id = COALESCE(@country_id, c.id) AND
		s.id = COALESCE(@subregion_id, s.id) AND
		r.id = COALESCE(@region_id, r.id) AND
		g.id = @geoscheme_id AND
		(
			(@status_id = 0 AND nrr.ref_status_id IN (0,33)) OR			-- Special case for 'Live'; include 'Agreement'
			(nrr.ref_status_id = COALESCE(@status_id, nrr.ref_status_id))
		)

GROUP BY o3.id, o3.name, t.id, t.name, t.[order], c.id, c.name, c.iso_code, c.iso_short_code, s.id, s.name, r.id, r.name, nrr.ref_status_id
ORDER BY c.name, o3.name, t.[order], nrr.ref_status_id]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[data_networks_roaming].[@geoscheme_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[default_geoscheme_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_networks_roaming].[@subregion_id]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ic_network_roaming_relationship_link]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ic_network_link]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ic_network_roaming_relationship_link].[network_id]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ic_network_link].[id]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ic_organisation_link]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ic_network_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ic_organisation_link].[id]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ic_network_roaming_relationship_link].[rel_network_id]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ic_network_link].[id]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ic_network_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ic_organisation_link].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ic_network_link].[ref_technology_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ic_organisation_link].[ref_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ic_organisation_link].[ref_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[iso_code]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[iso_short_code]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ic_network_roaming_relationship_link].[ref_status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_networks_roaming].[@technology_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_networks_roaming].[@country_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_networks_roaming].[@region_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_networks_roaming].[@status_id]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ic_network_roaming_relationship_link].[ref_status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_networks_roaming].[@geoscheme_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_networks_roaming].[@region_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_networks_roaming].[@subregion_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_networks_roaming].[@country_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_networks_roaming].[@technology_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_networks_roaming].[@status_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="2533" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[data_networks_roaming]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@geoscheme_id int = null,&#xD;&#xA;&#x9;@region_id int = null,&#xD;&#xA;&#x9;@subregion_id int = null,&#xD;&#xA;&#x9;@country_id int = null,&#xD;&#xA;&#x9;@technology_id int = null,&#xD;&#xA;&#x9;@status_id int = null&#xD;&#xA;)&#xD;&#xA;&#x9;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[data_operators]">
			<Property Name="BodyScript">
				<Value><![CDATA[

IF @geoscheme_id IS NULL
BEGIN
	SET @geoscheme_id = dbo.default_geoscheme_id()
END

IF @subregion_id IN (3899,3900)
BEGIN
	-- Developed/developing split should return results from any geoscheme
	-- TODO: better solution!
	SET @geoscheme_id = 3937
END

CREATE TABLE #data (id int, name nvarchar(512), country_id int, country nvarchar(512), iso_code nvarchar(3), iso_short_code nvarchar(2), subregion_id int, subregion nvarchar(512), region_id int, region nvarchar(512), status_id int, type_id int, tadig_codes nvarchar(MAX), url nvarchar(1024), launch_date datetime, has_data bit)

INSERT INTO #data
SELECT	o.id,
		o.name,
		c.id,
		c.name,
		c.iso_code,
		c.iso_short_code,
		s.id,
		s.name,
		r.id,
		r.name,
		CASE o.status_id WHEN 1308 THEN 0 ELSE o.status_id END,
		o.type_id,
		o.tadig_codes,
		o.url,
		n.launch_date,
		CASE WHEN dc.organisation_id IS null THEN 0 ELSE 1 END has_data

FROM	organisations o INNER JOIN
		organisation_zone_link oz ON oz.organisation_id = o.id INNER JOIN
		zones c ON oz.zone_id = c.id INNER JOIN
		zone_link zl ON c.id = zl.subzone_id INNER JOIN
		zones s ON zl.zone_id = s.id INNER JOIN
		zone_link zl2 ON s.id = zl2.subzone_id INNER JOIN 
		zones r ON zl2.zone_id = r.id INNER JOIN
		zone_link zl3 ON r.id = zl3.subzone_id INNER JOIN
		zones g ON zl3.zone_id = g.id LEFT JOIN
		dc_organisation_data_sets dc ON (dc.organisation_id = o.id AND dc.metric_id = 3 AND dc.attribute_id = 0) 
		LEFT JOIN
		(
			SELECT organisation_id, date AS launch_date FROM wi_master.dbo.latest_organisation_launch_dates where rank=1
		) n ON n.organisation_id = o.id

WHERE	c.id = COALESCE(@country_id, c.id) AND
		s.id = COALESCE(@subregion_id, s.id) AND
		r.id = COALESCE(@region_id, r.id) AND
		g.id = @geoscheme_id AND
		o.type_id = 1089 AND
		o.name <> 'Other' AND
		o.status_id IN (0,81,85,1308) AND
		(
			(@status_id = 0 AND o.status_id IN (0,1308)) OR -- Special case for 'live'; include 'missing'
			(o.status_id = COALESCE(@status_id, o.status_id))
		)

ORDER BY c.name, o.name


-- Data
SELECT * FROM #data ORDER BY country, name

-- Operator counts
SELECT status_id, COUNT(*) FROM #data GROUP BY status_id ORDER BY status_id


DROP TABLE #data]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[data_operators].[@geoscheme_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[default_geoscheme_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_operators].[@subregion_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_operators].[#data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data_sets]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data_sets].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data_sets].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data_sets].[attribute_id]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[iso_code]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[iso_short_code]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[tadig_codes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[url]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[data_operators].[@country_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_operators].[@region_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_operators].[@status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_operators].[#data].[country]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_operators].[#data].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_operators].[#data].[status_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[data_operators].[#data]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators].[#data].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators].[#data].[name]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="512" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators].[#data].[country_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators].[#data].[country]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="512" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators].[#data].[iso_code]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="3" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators].[#data].[iso_short_code]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="2" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators].[#data].[subregion_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators].[#data].[subregion]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="512" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators].[#data].[region_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators].[#data].[region]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="512" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators].[#data].[status_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators].[#data].[type_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators].[#data].[tadig_codes]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators].[#data].[url]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1024" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators].[#data].[launch_date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators].[#data].[has_data]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_operators].[@geoscheme_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_operators].[@region_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_operators].[@subregion_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_operators].[@country_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_operators].[@status_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="2433" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[data_operators]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@geoscheme_id int = null,&#xD;&#xA;&#x9;@region_id int = null,&#xD;&#xA;&#x9;@subregion_id int = null,&#xD;&#xA;&#x9;@country_id int = null,&#xD;&#xA;&#x9;@status_id int = null&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[data_operators_data]">
			<Property Name="BodyScript">
				<Value><![CDATA[

IF @spot_quarter IS NULL
BEGIN
	SET @spot_quarter = dbo.current_reporting_quarter()
END


CREATE TABLE #data (id bigint, entity_id int, is_aggregate bit, metric_id int, metric_order int, attribute_id int, attribute_order int, date datetime, date_type char(1) COLLATE DATABASE_DEFAULT, val_d decimal(22,4), val_i bigint, value decimal(22,4), currency_id int, currency_original_id int, source_id int, confidence_id int, definition_id int, has_flags bit, flags nvarchar(max) COLLATE DATABASE_DEFAULT, location nvarchar(max) COLLATE DATABASE_DEFAULT)

INSERT INTO #data
SELECT	dc.id,
		dc.organisation_id,
		0,
		dc.metric_id,
		dc.metric_order,
		dc.attribute_id,
		dc.attribute_order,
		dc.date datetime,
		dc.date_type,
		dc.val_d,
		dc.val_i,
		CASE WHEN dc.val_i IS NULL THEN dc.val_d * (CASE @currency_id WHEN 0 THEN 1 ELSE cr.value END) ELSE CAST(dc.val_i * (CASE @currency_id WHEN 0 THEN 1 ELSE cr.value END) AS decimal(22,4)) END value,
		CASE WHEN dc.currency_id = 0 THEN 0 WHEN @currency_id = 0 THEN dc.currency_id ELSE @currency_id END currency_id,
		dc.currency_id currency_original_id,
		dc.source_id,
		dc.confidence_id,
		dc.definition_id,
		dc.has_flags,
		dc.flags,
		dm.location
		
FROM	dc_organisation_data dc INNER JOIN
		currency_rates cr ON (cr.from_currency_id = dc.currency_id AND cr.to_currency_id = CASE @currency_id WHEN 0 THEN 1 ELSE @currency_id END) INNER JOIN
		data_sets s ON (dc.metric_id = s.metric_id AND dc.attribute_id = s.attribute_id)
	LEFT JOIN organisation_data_metadata as dm ON dc.id = dm.fk_organisation_data_id


WHERE	dc.organisation_id = @organisation_id AND
		dc.date >= @date_start AND
		dc.date < @date_end AND
		dc.date_type = @date_type AND
		s.attribute_id IS NOT null AND 
		s.show_in_metrics_only = 0 AND
		(
			(@spot_historic = 0 AND cr.date = dc.date) OR
			(@spot_historic = 1 AND cr.date = @spot_quarter)
		)
		
ORDER BY dc.metric_order, dc.attribute_order, dc.date


-- Data
SELECT * FROM #data

-- Metric, attribute combinations
SELECT	DISTINCT 
		metric_id, 
		metric_order, 
		attribute_id, 
		attribute_order
		
FROM	#data

GROUP BY metric_id, metric_order, attribute_id, attribute_order
ORDER BY metric_order, attribute_order

-- Date combinations
SELECT	DISTINCT 
		date, 
		date_type

FROM	#data

ORDER BY date


DROP TABLE #data]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[data_operators_data].[@spot_quarter]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[current_reporting_quarter]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_operators_data].[#data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_operators_data].[@currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata].[fk_organisation_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[metric_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[attribute_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[value]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[definition_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata].[location]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_operators_data].[@organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_operators_data].[@date_start]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_operators_data].[@date_end]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_operators_data].[@date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets].[show_in_metrics_only]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_operators_data].[@spot_historic]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_operators_data].[#data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_operators_data].[#data].[metric_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_operators_data].[#data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_operators_data].[#data].[attribute_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_operators_data].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_operators_data].[#data].[date_type]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[data_operators_data].[#data]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators_data].[#data].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators_data].[#data].[entity_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators_data].[#data].[is_aggregate]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators_data].[#data].[metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators_data].[#data].[metric_order]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators_data].[#data].[attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators_data].[#data].[attribute_order]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators_data].[#data].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators_data].[#data].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators_data].[#data].[val_d]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators_data].[#data].[val_i]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators_data].[#data].[value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators_data].[#data].[currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators_data].[#data].[currency_original_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators_data].[#data].[source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators_data].[#data].[confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators_data].[#data].[definition_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators_data].[#data].[has_flags]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators_data].[#data].[flags]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators_data].[#data].[location]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_operators_data].[@organisation_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_operators_data].[@date_start]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_operators_data].[@date_end]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_operators_data].[@date_type]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA['Q']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_operators_data].[@currency_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_operators_data].[@spot_historic]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_operators_data].[@spot_quarter]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="2613" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[data_operators_data]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@organisation_id int,&#xD;&#xA;&#x9;@date_start datetime,&#xD;&#xA;&#x9;@date_end datetime,&#xD;&#xA;&#x9;@date_type char(1) = 'Q',&#xD;&#xA;&#x9;@currency_id int = 0,&#xD;&#xA;&#x9;@spot_historic bit = 0,&#xD;&#xA;&#x9;@spot_quarter datetime = null&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[data_operators_data_empty]">
			<Property Name="BodyScript">
				<Value><![CDATA[

SET FMTONLY ON

select * from dc_zone_data where id=0]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[dc_zone_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_zone_data].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_operators_data_empty].[@organisation_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_operators_data_empty].[@date_start]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_operators_data_empty].[@date_end]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_operators_data_empty].[@date_type]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA['Q']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_operators_data_empty].[@currency_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_operators_data_empty].[@spot_historic]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_operators_data_empty].[@spot_quarter]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="303" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[data_operators_data_empty]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@organisation_id int,&#xD;&#xA;&#x9;@date_start datetime,&#xD;&#xA;&#x9;@date_end datetime,&#xD;&#xA;&#x9;@date_type char(1) = 'Q',&#xD;&#xA;&#x9;@currency_id int = 0,&#xD;&#xA;&#x9;@spot_historic bit = 0,&#xD;&#xA;&#x9;@spot_quarter datetime = null&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[data_operators_events]">
			<Property Name="BodyScript">
				<Value><![CDATA[

IF @geoscheme_id IS NULL
BEGIN
	SET @geoscheme_id = dbo.default_geoscheme_id()
END

IF @subregion_id IN (3899,3900)
BEGIN
	-- Developed/developing split should return results from any geoscheme
	-- TODO: better solution!
	SET @geoscheme_id = 3937
END

CREATE TABLE #data (id int, name nvarchar(512) COLLATE DATABASE_DEFAULT, country_id int, country nvarchar(512) COLLATE DATABASE_DEFAULT, iso_code nvarchar(3) COLLATE DATABASE_DEFAULT, iso_short_code nvarchar(2) COLLATE DATABASE_DEFAULT, subregion_id int, subregion nvarchar(512) COLLATE DATABASE_DEFAULT, region_id int, region nvarchar(512) COLLATE DATABASE_DEFAULT, ref_organisation_id int, ref_organisation nvarchar(512) COLLATE DATABASE_DEFAULT, ref_country_id int, ref_country nvarchar(512) COLLATE DATABASE_DEFAULT, ref_organisation_id_2 int, ref_organisation_2 nvarchar(512) COLLATE DATABASE_DEFAULT, status_id int, status nvarchar(512) COLLATE DATABASE_DEFAULT, date_type char(1) COLLATE DATABASE_DEFAULT, date datetime)

INSERT INTO #data
SELECT	DISTINCT
		o.id,
		o.name,
		c.id,
		c.name,
		c.iso_code,
		c.iso_short_code,
		s.id,
		s.name,
		r.id,
		r.name,
		o2.id,
		o2.name,
		c2.id,
		c2.name,
		o3.id,
		o3.name,
		t.id,
		t.name,
		ds.date_type,
		ds.date

FROM	organisation_events ds INNER JOIN
		status t ON ds.status_id = t.id INNER JOIN
		organisations o ON ds.organisation_id = o.id INNER JOIN
		organisation_zone_link oz ON oz.organisation_id = o.id INNER JOIN
		zones c ON oz.zone_id = c.id INNER JOIN
		zone_link zl ON c.id = zl.subzone_id INNER JOIN
		zones s ON zl.zone_id = s.id INNER JOIN
		zone_link zl2 ON s.id = zl2.subzone_id INNER JOIN 
		zones r ON zl2.zone_id = r.id INNER JOIN
		zone_link zl3 ON r.id = zl3.subzone_id INNER JOIN
		zones g ON zl3.zone_id = g.id LEFT JOIN
		organisations o2 ON ds.ref_organisation_id = o2.id LEFT JOIN
		organisation_zone_link oz2 ON o2.id = oz2.organisation_id LEFT JOIN
		zones c2 ON oz2.zone_id = c2.id LEFT JOIN
		organisations o3 ON ds.ref_organisation_id_2 = o3.id

WHERE	c.id = COALESCE(@country_id, c.id) AND
		s.id = COALESCE(@subregion_id, s.id) AND
		r.id = COALESCE(@region_id, r.id) AND
		g.id = @geoscheme_id AND
		(
			(@status_id = 1577 AND t.id IN (1311,1576)) OR	-- Merged/Acquired
			(@status_id = 85 AND t.id IN (1311,1312)) OR	-- Merged/Closed
			(t.id = COALESCE(@status_id, t.id))
		)

ORDER BY ds.date DESC, c.name, o.name


-- Data
SELECT * FROM #data ORDER BY date DESC, country, name

-- Operator counts
SELECT status_id, COUNT(*) FROM #data GROUP BY status_id ORDER BY status_id


DROP TABLE #data]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[data_operators_events].[@geoscheme_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[default_geoscheme_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_operators_events].[@subregion_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_operators_events].[#data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_events]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[status]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_events].[status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[status].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_events].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_events].[ref_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_events].[ref_organisation_id_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[iso_code]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[iso_short_code]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[status].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[status].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_events].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_events].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_operators_events].[@country_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_operators_events].[@region_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_operators_events].[@status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_operators_events].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_operators_events].[#data].[country]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_operators_events].[#data].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_operators_events].[#data].[status_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[data_operators_events].[#data]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators_events].[#data].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators_events].[#data].[name]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="512" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators_events].[#data].[country_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators_events].[#data].[country]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="512" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators_events].[#data].[iso_code]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="3" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators_events].[#data].[iso_short_code]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="2" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators_events].[#data].[subregion_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators_events].[#data].[subregion]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="512" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators_events].[#data].[region_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators_events].[#data].[region]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="512" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators_events].[#data].[ref_organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators_events].[#data].[ref_organisation]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="512" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators_events].[#data].[ref_country_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators_events].[#data].[ref_country]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="512" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators_events].[#data].[ref_organisation_id_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators_events].[#data].[ref_organisation_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="512" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators_events].[#data].[status_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators_events].[#data].[status]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="512" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators_events].[#data].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[data_operators_events].[#data].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_operators_events].[@geoscheme_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_operators_events].[@region_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_operators_events].[@subregion_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_operators_events].[@country_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_operators_events].[@status_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="2816" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[data_operators_events]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@geoscheme_id int = null,&#xD;&#xA;&#x9;@region_id int = null,&#xD;&#xA;&#x9;@subregion_id int = null,&#xD;&#xA;&#x9;@country_id int = null,&#xD;&#xA;&#x9;@status_id int = null&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[data_operators_ranking]">
			<Property Name="BodyScript">
				<Value><![CDATA[

IF @geoscheme_id IS NULL
BEGIN
	SET @geoscheme_id = dbo.default_geoscheme_id()
END

IF @subregion_id IN (3899,3900)
BEGIN
	-- Developed/developing split should return results from any geoscheme
	-- TODO: better solution!
	SET @geoscheme_id = 3937
END

IF @date IS NULL
BEGIN
	SET @date = dbo.current_reporting_quarter()
END

IF @spot_quarter IS NULL
BEGIN
	SET @spot_quarter = dbo.current_reporting_quarter()
END

SELECT	RANK() OVER (ORDER BY CASE WHEN dc.val_i IS NULL THEN dc.val_d * cr.value ELSE CAST(dc.val_i * cr.value AS decimal(22,4)) END DESC) rank,
		dc.id,
		o.id organisation_id,
		o.name organisation,
		c.id country_id,
		c.name country,
		c.iso_code,
		c.iso_short_code,
		s.id subregion_id,
		s.name subregion,
		r.id region_id,
		r.name region,
		dc.metric_id,
		dc.metric_order,
		dc.attribute_id,
		dc.attribute_order,
		dc.date,
		dc.date_type,
		dc.val_d,
		dc.val_i,
		CASE WHEN dc.val_i IS NULL THEN dc.val_d * cr.value ELSE CAST(dc.val_i * cr.value AS decimal(22,4)) END value,
		CASE WHEN dc.currency_id = 0 THEN 0 ELSE @currency_id END currency_id,
		dc.currency_id currency_original_id,
		dc.source_id,
		dc.confidence_id,
		dc.definition_id,
		dc.has_flags,
		dc.flags,
		dm.location
		
FROM	dc_organisation_data dc INNER JOIN
		organisations o ON dc.organisation_id = o.id INNER JOIN
		organisation_zone_link oz ON o.id = oz.organisation_id INNER JOIN
		zones c ON oz.zone_id = c.id INNER JOIN
		zone_link zl ON c.id = zl.subzone_id INNER JOIN
		zones s ON zl.zone_id = s.id INNER JOIN
		zone_link zl2 ON s.id = zl2.subzone_id INNER JOIN 
		zones r ON zl2.zone_id = r.id INNER JOIN
		zone_link zl3 ON r.id = zl3.subzone_id INNER JOIN
		zones g ON zl3.zone_id = g.id INNER JOIN
		currency_rates cr ON (cr.from_currency_id = dc.currency_id AND cr.to_currency_id = @currency_id)
	LEFT JOIN organisation_data_metadata as dm ON dc.id = dm.fk_organisation_data_id


WHERE	g.id = @geoscheme_id AND
		r.id = COALESCE(@region_id, r.id) AND
		s.id = COALESCE(@subregion_id, s.id) AND
		o.type_id = 1089 AND
		dc.metric_id = @metric_id AND
		dc.attribute_id = @attribute_id AND
		dc.date = @date AND
		dc.date_type = @date_type AND
		(
			(@spot_historic = 0 AND cr.date = dc.date) OR
			(@spot_historic = 1 AND cr.date = @spot_quarter)
		)
		
ORDER BY value DESC]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[data_operators_ranking].[@geoscheme_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[default_geoscheme_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_operators_ranking].[@subregion_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_operators_ranking].[@date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[current_reporting_quarter]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_operators_ranking].[@spot_quarter]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[subzone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_operators_ranking].[@currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata].[fk_organisation_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[value]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[iso_code]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[iso_short_code]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[metric_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[attribute_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[definition_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_organisation_data].[flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata].[location]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_operators_ranking].[@region_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_operators_ranking].[@metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_operators_ranking].[@attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_operators_ranking].[@date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_operators_ranking].[@spot_historic]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_operators_ranking].[@geoscheme_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_operators_ranking].[@region_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_operators_ranking].[@subregion_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_operators_ranking].[@metric_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_operators_ranking].[@attribute_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_operators_ranking].[@date]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_operators_ranking].[@date_type]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA['Q']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_operators_ranking].[@currency_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_operators_ranking].[@spot_historic]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[data_operators_ranking].[@spot_quarter]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="2682" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[data_operators_ranking]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@geoscheme_id int = null,&#xD;&#xA;&#x9;@region_id int = null,&#xD;&#xA;&#x9;@subregion_id int = null,&#xD;&#xA;&#x9;@metric_id int,&#xD;&#xA;&#x9;@attribute_id int,&#xD;&#xA;&#x9;@date datetime = null,&#xD;&#xA;&#x9;@date_type char(1) = 'Q',&#xD;&#xA;&#x9;@currency_id int = 0,&#xD;&#xA;&#x9;@spot_historic bit = 0,&#xD;&#xA;&#x9;@spot_quarter datetime = null&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlView" Name="[dbo].[data_sets]">
			<Property Name="QueryScript">
				<Value><![CDATA[ /*select ISNULL(dsm.id, ds.id) as id 
	,ISNULL(dsm.[fk_metric_id], ds.metric_id) as metric_id
      ,ISNULL(dsm.[fk_attribute_id], ds.attribute_id) as attribute_id
      ,ds.[type_id]
      ,ISNULL(ds.[default_date_type], 'Q') as default_date_type
      ,ISNULL(dsm.[show_on_website], ds.is_live) as is_live
      ,ds.[is_live_for_organisation_data]
      ,ds.[is_live_for_group_data]
      ,ds.[is_live_for_country_data]
      ,ds.[is_live_for_region_data]
      ,ds.[is_aggregated]
      ,ds.[is_aggregated_from_organisation_data]
      ,ds.[is_aggregated_from_zone_data]
      ,ISNULL(dswl.has_forecasts, ds.has_forecasts) as has_forecasts
      ,ISNULL(dswl.has_organisation_data, ds.has_organisation_data) as has_organisation_data
      ,ISNULL(dswl.has_group_data, ds.has_group_data) as has_group_data
      ,ISNULL(dswl.has_zone_data, ds.has_country_data) as has_country_data
      ,ISNULL(dswl.has_regional_data, ds.has_region_data) as has_region_data
      ,ISNULL(dswl.has_organisation_rank, ds.has_organisation_rank) as has_organisation_rank
      ,ISNULL(dswl.has_group_rank, ds.has_group_rank) as has_group_rank
      ,ISNULL(dswl.has_country_rank, ds.has_country_rank) as has_country_rank
      ,ISNULL(dswl.has_region_rank, ds.has_region_rank) as has_region_rank
      ,ISNULL(ds.show_in_metrics_only, 0) as [show_in_metrics_only]
      ,ds.[created_on]
      ,ds.[created_by]
      ,ds.[super_set_base]
      ,ds.[web_set_base]
      ,ds.[super_set_base_zones] 
from data_sets_master as dsm
full join _data_sets as ds ON ds.metric_id=dsm.fk_metric_id and ds.attribute_id=dsm.fk_attribute_id
left join data_sets_master_website_link as dswl ON dswl.fk_data_sets_master_id=dsm.id*/
select ISNULL(dsm.id, ds.id) as id 
	,ISNULL(dsm.[fk_metric_id], ds.metric_id) as metric_id
      ,ISNULL(dsm.[fk_attribute_id], ds.attribute_id) as attribute_id
      ,ds.[type_id]
      ,ISNULL(ds.[default_date_type], 'Q') as default_date_type
      ,ISNULL(dsm.[show_on_website], ds.is_live) as is_live
      ,ISNULL(ds.[is_live_for_organisation_data], 0) as is_live_for_organisation_data
      ,ISNULL(ds.[is_live_for_group_data], 0) as is_live_for_group_data
      ,ISNULL(ds.[is_live_for_country_data], 0) as is_live_for_country_data
      ,ISNULL(ds.[is_live_for_region_data], 0) as is_live_for_region_data
      ,ISNULL(ds.[is_aggregated], 0) as is_aggregated
      ,ISNULL(ds.[is_aggregated_from_organisation_data], 0) as is_aggregated_from_organisation_data
      ,ISNULL(ds.[is_aggregated_from_zone_data], 0) as is_aggregated_from_zone_data
      ,ISNULL(dswl.has_forecasts, ds.has_forecasts) as has_forecasts
      ,ISNULL(dswl.has_organisation_data, ds.has_organisation_data) as has_organisation_data
      ,ISNULL(dswl.has_group_data, ds.has_group_data) as has_group_data
      ,ISNULL(dswl.has_zone_data, ds.has_country_data) as has_country_data
      ,ISNULL(dswl.has_regional_data, ds.has_region_data) as has_region_data
      ,ISNULL(dswl.has_organisation_rank, ds.has_organisation_rank) as has_organisation_rank
      ,ISNULL(dswl.has_group_rank, ds.has_group_rank) as has_group_rank
      ,ISNULL(dswl.has_country_rank, ds.has_country_rank) as has_country_rank
      ,ISNULL(dswl.has_region_rank, ds.has_region_rank) as has_region_rank
      ,ISNULL(ds.show_in_metrics_only, 0) as [show_in_metrics_only]
      ,ds.[created_on]
      ,ds.[created_by]
      ,ds.[super_set_base]
      ,ds.[web_set_base]
      ,ds.[super_set_base_zones] 
from data_sets_master as dsm
full join _data_sets as ds ON ds.metric_id=dsm.fk_metric_id and ds.attribute_id=dsm.fk_attribute_id
left join data_sets_master_website_link as dswl ON dswl.fk_data_sets_master_id=dsm.id]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_sets].[id]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_sets].[metric_id]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_sets].[attribute_id]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_sets].[type_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[_data_sets].[type_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_sets].[default_date_type]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_sets].[is_live]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_sets].[is_live_for_organisation_data]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_sets].[is_live_for_group_data]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_sets].[is_live_for_country_data]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_sets].[is_live_for_region_data]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_sets].[is_aggregated]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_sets].[is_aggregated_from_organisation_data]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_sets].[is_aggregated_from_zone_data]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_sets].[has_forecasts]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_sets].[has_organisation_data]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_sets].[has_group_data]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_sets].[has_country_data]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_sets].[has_region_data]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_sets].[has_organisation_rank]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_sets].[has_group_rank]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_sets].[has_country_rank]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_sets].[has_region_rank]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_sets].[show_in_metrics_only]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_sets].[created_on]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[_data_sets].[created_on]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_sets].[created_by]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[_data_sets].[created_by]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_sets].[super_set_base]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[_data_sets].[super_set_base]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_sets].[web_set_base]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[_data_sets].[web_set_base]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[data_sets].[super_set_base_zones]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[_data_sets].[super_set_base_zones]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References Name="[dbo].[data_sets_master]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[_data_sets]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[_data_sets].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[_data_sets].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master_website_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master_website_link].[fk_data_sets_master_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[_data_sets].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[_data_sets].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[_data_sets].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[_data_sets].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[_data_sets].[default_date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[show_on_website]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[_data_sets].[is_live]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[_data_sets].[is_live_for_organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[_data_sets].[is_live_for_group_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[_data_sets].[is_live_for_country_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[_data_sets].[is_live_for_region_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[_data_sets].[is_aggregated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[_data_sets].[is_aggregated_from_organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[_data_sets].[is_aggregated_from_zone_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master_website_link].[has_forecasts]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[_data_sets].[has_forecasts]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master_website_link].[has_organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[_data_sets].[has_organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master_website_link].[has_group_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[_data_sets].[has_group_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master_website_link].[has_zone_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[_data_sets].[has_country_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master_website_link].[has_regional_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[_data_sets].[has_region_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master_website_link].[has_organisation_rank]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[_data_sets].[has_organisation_rank]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master_website_link].[has_group_rank]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[_data_sets].[has_group_rank]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master_website_link].[has_country_rank]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[_data_sets].[has_country_rank]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master_website_link].[has_region_rank]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[_data_sets].[has_region_rank]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[_data_sets].[show_in_metrics_only]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[_data_sets].[created_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[_data_sets].[created_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[_data_sets].[super_set_base]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[_data_sets].[web_set_base]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[_data_sets].[super_set_base_zones]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="3759" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE VIEW [dbo].[data_sets] AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[data_sets_master]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sets_master].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sets_master].[fk_metric_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sets_master].[fk_attribute_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sets_master].[has_organisation_data]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sets_master].[has_zone_data]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sets_master].[show_on_website]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sets_master].[archive]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sets_master].[name]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sets_master].[data_set_description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sets_master].[metric_name]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sets_master].[attribute_name]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sets_master].[calculation_description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sets_master].[aggregation_description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sets_master].[data_set_description_source]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="68" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sets_master].[ordering]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="69" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sets_master].[shortname]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="98" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="240" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="241" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[data_sets_master].[PT_data_sets_master_comb]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[data_sets_master].[fk_metric_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[data_sets_master].[fk_attribute_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[data_sets_master].[has_organisation_data]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[data_sets_master].[has_zone_data]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[data_sets_master].[show_on_website]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[data_sets_master].[archive]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[data_sets_master]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[data_sets_master_alternative]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sets_master_alternative].[fk_data_sets_master_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sets_master_alternative].[fk_data_view_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sets_master_alternative].[has_organisation_data]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sets_master_alternative].[has_zone_data]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sets_master_alternative].[show_on_website]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sets_master_alternative].[archive]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="242" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="243" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[data_sets_master_alternative].[idx_data_sets_master_alt_key]">
			<Property Name="IsUnique" Value="True" />
			<Property Name="IsClustered" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[data_sets_master_alternative].[fk_data_sets_master_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[data_sets_master_alternative].[fk_data_view_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[data_sets_master_alternative]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[data_sets_master_website_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sets_master_website_link].[fk_data_sets_master_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sets_master_website_link].[has_zone_data]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="28" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sets_master_website_link].[has_organisation_data]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="29" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sets_master_website_link].[has_regional_data]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="30" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sets_master_website_link].[has_group_data]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="31" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sets_master_website_link].[has_forecasts]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="32" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sets_master_website_link].[has_organisation_rank]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="33" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sets_master_website_link].[has_group_rank]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="34" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sets_master_website_link].[has_country_rank]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="35" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sets_master_website_link].[has_region_rank]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="36" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[data_sets_views_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sets_views_link].[fk_data_sets_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sets_views_link].[fk_data_view_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[data_sets_views_link].[idx_unique_data_sets_views]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[data_sets_views_link].[fk_data_sets_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[data_sets_views_link].[fk_data_view_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[data_sets_views_link]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[data_sp_run_error_log]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sp_run_error_log].[errorNumber]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sp_run_error_log].[errorSeverity]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sp_run_error_log].[errorState]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sp_run_error_log].[errorProcedure]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="250" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sp_run_error_log].[errorLine]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sp_run_error_log].[errorMessage]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2048" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sp_run_error_log].[date]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="77" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_sp_run_error_log].[queryString]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2048" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[data_views]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_views].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_views].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_views].[term]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[data_views].[description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="95" />
		</Element>
		<Element Type="SqlScalarFunction" Name="[dbo].[datetime_to_excel_serial]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[datetime_to_excel_serial].[@date]" />
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
BEGIN
	RETURN DATEDIFF(second, {d '1970-01-01'}, @date) / 86400 + 25569	-- To unix timestamp, then serial conversion (TODO: will overflow when @date >~ 2040-01-01)
END]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="CreateOffset" Value="2" />
							<Property Name="Length" Value="267" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE FUNCTION [dbo].[datetime_to_excel_serial]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@date datetime&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;RETURNS int&#xD;&#xA;&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[datetime_to_excel_serial].[@date]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[int]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlView" Name="[dbo].[dc_dashboard_zone_data]">
			<Property Name="QueryScript">
				<Value><![CDATA[
select zd.id,
	zd.fk_zone_id as zone_id,
	zd.fk_metric_id as metric_id,
	zd.fk_attribute_id as attribute_id,
	zd.date,
	zd.date_type,
	(CASE WHEN m.unit_id = 37 THEN zd.val ELSE NULL END) as val_d,
	(CASE WHEN m.unit_id != 37 THEN zd.val ELSE NULL END) as val_i,
	zd.fk_currency_id as currency_id,
	zd.fk_source_id as source_id,
	zd.fk_confidence_id as confidence_id,
	GETDATE() as last_updated_on,
	0 as last_updated_by
from dbo.zone_data_view_link as zvl
left join dbo.zone_data as zd on zd.id = zvl.fk_zone_data_id
left join dbo.zones as z on z.id = zd.fk_zone_id
left join metrics as m ON m.id=zd.fk_metric_id
where zvl.fk_data_view_id = 3
and z.type_id = 10
and (
	zd.date_type = 'Q'
	and DAY(date) = 1
	and MONTH(date) = 10
	and year(zd.date) in (
		YEAR(DATEADD(Year,-1,GETDATE())),
		YEAR(DATEADD(Year,-2,GETDATE()))
	)
	and (
		(zd.fk_metric_id in (1, 3, 43, 44, 171) and zd.fk_attribute_id in (0, 1501))
			or 
		(zd.fk_metric_id = 53 and zd.fk_attribute_id in (99, 755, 799, 1292))
	)
)]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_dashboard_zone_data].[id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_dashboard_zone_data].[zone_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[fk_zone_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_dashboard_zone_data].[metric_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[fk_metric_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_dashboard_zone_data].[attribute_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[fk_attribute_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_dashboard_zone_data].[date]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_dashboard_zone_data].[date_type]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[date_type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_dashboard_zone_data].[val_d]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_dashboard_zone_data].[val_i]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_dashboard_zone_data].[currency_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[fk_currency_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_dashboard_zone_data].[source_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[fk_source_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_dashboard_zone_data].[confidence_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[fk_confidence_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_dashboard_zone_data].[last_updated_on]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_dashboard_zone_data].[last_updated_by]" />
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References Name="[dbo].[zone_data_view_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_view_link].[fk_zone_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[unit_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[val]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_view_link].[fk_data_view_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_attribute_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1076" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE VIEW [dbo].[dc_dashboard_zone_data] AS" />
			</Annotation>
		</Element>
		<Element Type="SqlView" Name="[dbo].[dc_group_data]">
			<Property Name="QueryScript">
				<Value><![CDATA[ select 
[id]
      ,[organisation_id]
      ,[ownership_threshold]
      ,[metric_id]
      ,[metric_order]
      ,[attribute_id]
      ,[attribute_order]
      ,[date]
      ,[date_type]
      ,[val_d]
      ,[val_i]
      ,[currency_id]
      ,[source_id]
      ,[confidence_id]
      ,[definition_id]
      ,[has_flags]
      ,[is_calculated]
      ,[is_proportionate]
      ,[is_spot]
      ,[flags]
      ,[location]
      ,[last_update_on]
      ,[last_update_by]
  FROM [dbo].[dc_group_data_val_sum]


union all

select 
[id]
      ,[organisation_id]
      ,[ownership_threshold]
      ,[metric_id]
      ,[metric_order]
      ,[attribute_id]
      ,[attribute_order]
      ,[date]
      ,[date_type]
      ,[val_d]
      ,[val_i]
      ,[currency_id]
      ,[source_id]
      ,[confidence_id]
      ,[definition_id]
      ,[has_flags]
      ,[is_calculated]
      ,[is_proportionate]
      ,[is_spot]
      ,[flags]
      ,[location]
      ,[last_update_on]
      ,[last_update_by]
  FROM [dbo].[dc_group_data_val_proportionate]]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data].[id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[dc_group_data_val_sum].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data].[organisation_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[dc_group_data_val_sum].[organisation_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data].[ownership_threshold]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[dc_group_data_val_sum].[ownership_threshold]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data].[metric_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[dc_group_data_val_sum].[metric_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data].[metric_order]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[dc_group_data_val_sum].[metric_order]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data].[attribute_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[dc_group_data_val_sum].[attribute_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data].[attribute_order]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[dc_group_data_val_sum].[attribute_order]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data].[date]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[dc_group_data_val_sum].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data].[date_type]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[dc_group_data_val_sum].[date_type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data].[val_d]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[dc_group_data_val_sum].[val_d]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data].[val_i]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[dc_group_data_val_sum].[val_i]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data].[currency_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[dc_group_data_val_sum].[currency_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data].[source_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[dc_group_data_val_sum].[source_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data].[confidence_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[dc_group_data_val_sum].[confidence_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data].[definition_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[dc_group_data_val_sum].[definition_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data].[has_flags]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[dc_group_data_val_sum].[has_flags]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data].[is_calculated]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[dc_group_data_val_sum].[is_calculated]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data].[is_proportionate]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[dc_group_data_val_sum].[is_proportionate]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data].[is_spot]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[dc_group_data_val_sum].[is_spot]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data].[flags]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[dc_group_data_val_sum].[flags]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data].[location]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[dc_group_data_val_sum].[location]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data].[last_update_on]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[dc_group_data_val_sum].[last_update_on]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data].[last_update_by]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[dc_group_data_val_sum].[last_update_by]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References Name="[dbo].[dc_group_data_val_sum]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_sum].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_sum].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_sum].[ownership_threshold]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_sum].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_sum].[metric_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_sum].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_sum].[attribute_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_sum].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_sum].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_sum].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_sum].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_sum].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_sum].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_sum].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_sum].[definition_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_sum].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_sum].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_sum].[is_proportionate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_sum].[is_spot]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_sum].[flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_sum].[location]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_sum].[last_update_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_sum].[last_update_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_proportionate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_proportionate].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_proportionate].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_proportionate].[ownership_threshold]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_proportionate].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_proportionate].[metric_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_proportionate].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_proportionate].[attribute_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_proportionate].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_proportionate].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_proportionate].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_proportionate].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_proportionate].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_proportionate].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_proportionate].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_proportionate].[definition_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_proportionate].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_proportionate].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_proportionate].[is_proportionate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_proportionate].[is_spot]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_proportionate].[flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_proportionate].[location]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_proportionate].[last_update_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_val_proportionate].[last_update_by]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1127" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE VIEW [dbo].[dc_group_data] AS" />
				<Property Name="FooterContents" Value=";" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[dc_group_data_sets]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[dc_group_data_sets].[organisation_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[dc_group_data_sets].[metric_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[dc_group_data_sets].[attribute_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlView" Name="[dbo].[dc_group_data_val_proportionate]">
			<Property Name="IsSchemaBound" Value="True" />
			<Property Name="QueryScript">
				<Value><![CDATA[ select 
	od.id as "id", 
	od.fk_organisation_id AS "organisation_id", 
	od.ownership as "ownership_threshold",
	m.id AS "metric_id", 
	m.[order] AS "metric_order", 
	att.id AS "attribute_id", 
	att.[order] AS "attribute_order", 
	od.[date],
	od.date_type,
	NULL as "val_d",
	od.val_proportionate "val_i", 
	od.fk_currency_id AS "currency_id", 
	od.fk_source_id AS "source_id", 
	od.fk_confidence_id AS "confidence_id",
	df.id AS "definition_id",
	od.has_flags AS "has_flags",
	od.is_calculated AS "is_calculated",
	1 as "is_proportionate",
	NULL as "is_spot",
	NULL AS "flags",
	NULL AS "location",
	odv.link_date AS "last_update_on",
	0 AS "last_update_by"

	from dbo.group_data_view_link as odv
	inner join dbo.group_data as od ON od.id=odv.fk_group_data_id
	inner join dbo.metrics as m ON m.id=od.fk_metric_id
	inner join dbo.attributes as att ON att.id=od.fk_attribute_id
	inner join dbo.data_sets_master as ds ON (ds.fk_metric_id=od.fk_metric_id and ds.fk_attribute_id=od.fk_attribute_id)
	inner join dbo.definitions as df ON (ds.fk_metric_id=df.metric_id and ds.fk_attribute_id=df.attribute_id)
	--left join dbo.organisation_data_metadata as dm ON od.id = dm.fk_organisation_data_id 

	where odv.fk_data_view_id = 3
	and odv.archive = 0
	and ds.show_on_website=1
	and ds.id is not null
	and od.archive=0]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_proportionate].[id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_proportionate].[organisation_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data].[fk_organisation_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_proportionate].[ownership_threshold]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data].[ownership]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_proportionate].[metric_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[metrics].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_proportionate].[metric_order]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[metrics].[order]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_proportionate].[attribute_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[attributes].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_proportionate].[attribute_order]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[attributes].[order]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_proportionate].[date]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_proportionate].[date_type]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data].[date_type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_proportionate].[val_d]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_proportionate].[val_i]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data].[val_proportionate]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_proportionate].[currency_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data].[fk_currency_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_proportionate].[source_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data].[fk_source_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_proportionate].[confidence_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data].[fk_confidence_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_proportionate].[definition_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[definitions].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_proportionate].[has_flags]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data].[has_flags]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_proportionate].[is_calculated]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data].[is_calculated]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_proportionate].[is_proportionate]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_proportionate].[is_spot]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_proportionate].[flags]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_proportionate].[location]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_proportionate].[last_update_on]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data_view_link].[link_date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_proportionate].[last_update_by]" />
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References Name="[dbo].[group_data_view_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data_view_link].[fk_group_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[definitions]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[definitions].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[definitions].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[ownership]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[val_proportionate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[definitions].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data_view_link].[link_date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data_view_link].[fk_data_view_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data_view_link].[archive]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[show_on_website]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[archive]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1420" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE VIEW [dbo].[dc_group_data_val_proportionate] WITH SCHEMABINDING AS" />
			</Annotation>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[dc_group_data_val_proportionate].[dc_group_data_val_proportionate_comb]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_group_data_val_proportionate].[attribute_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_group_data_val_proportionate].[confidence_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_group_data_val_proportionate].[currency_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_group_data_val_proportionate].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_group_data_val_proportionate].[date_type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_group_data_val_proportionate].[definition_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_group_data_val_proportionate].[has_flags]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_group_data_val_proportionate].[is_calculated]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_group_data_val_proportionate].[is_proportionate]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_group_data_val_proportionate].[is_spot]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_group_data_val_proportionate].[metric_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_group_data_val_proportionate].[organisation_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_group_data_val_proportionate].[ownership_threshold]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_group_data_val_proportionate].[source_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[dc_group_data_val_proportionate]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[dc_group_data_val_proportionate].[dc_group_data_val_proportionate_unique]">
			<Property Name="IsUnique" Value="True" />
			<Property Name="IsClustered" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_group_data_val_proportionate].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[dc_group_data_val_proportionate]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlView" Name="[dbo].[dc_group_data_val_sum]">
			<Property Name="IsSchemaBound" Value="True" />
			<Property Name="QueryScript">
				<Value><![CDATA[ select 
	od.id as "id", 
	od.fk_organisation_id AS "organisation_id", 
	od.ownership as "ownership_threshold",
	m.id AS "metric_id", 
	m.[order] AS "metric_order", 
	att.id AS "attribute_id", 
	att.[order] AS "attribute_order", 
	od.[date],
	od.date_type,
	NULL as "val_d",
	od.val_sum "val_i", 
	od.fk_currency_id AS "currency_id", 
	od.fk_source_id AS "source_id", 
	od.fk_confidence_id AS "confidence_id",
	df.id AS "definition_id",
	od.has_flags AS "has_flags",
	od.is_calculated AS "is_calculated",
	0 as "is_proportionate",
	NULL as "is_spot",
	NULL AS "flags",
	NULL AS "location",
	odv.link_date AS "last_update_on",
	0 AS "last_update_by"

	from dbo.group_data_view_link as odv
	inner join dbo.group_data as od ON od.id=odv.fk_group_data_id
	inner join dbo.metrics as m ON m.id=od.fk_metric_id
	inner join dbo.attributes as att ON att.id=od.fk_attribute_id
	inner join dbo.data_sets_master as ds ON (ds.fk_metric_id=od.fk_metric_id and ds.fk_attribute_id=od.fk_attribute_id)
	inner join dbo.definitions as df ON (ds.fk_metric_id=df.metric_id and ds.fk_attribute_id=df.attribute_id)
	--left join dbo.organisation_data_metadata as dm ON od.id = dm.fk_organisation_data_id 

	where odv.fk_data_view_id = 3
	and odv.archive = 0
	and ds.show_on_website=1
	and ds.id is not null
	and od.archive=0]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_sum].[id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_sum].[organisation_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data].[fk_organisation_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_sum].[ownership_threshold]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data].[ownership]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_sum].[metric_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[metrics].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_sum].[metric_order]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[metrics].[order]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_sum].[attribute_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[attributes].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_sum].[attribute_order]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[attributes].[order]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_sum].[date]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_sum].[date_type]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data].[date_type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_sum].[val_d]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_sum].[val_i]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data].[val_sum]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_sum].[currency_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data].[fk_currency_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_sum].[source_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data].[fk_source_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_sum].[confidence_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data].[fk_confidence_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_sum].[definition_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[definitions].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_sum].[has_flags]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data].[has_flags]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_sum].[is_calculated]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data].[is_calculated]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_sum].[is_proportionate]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_sum].[is_spot]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_sum].[flags]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_sum].[location]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_sum].[last_update_on]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data_view_link].[link_date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_group_data_val_sum].[last_update_by]" />
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References Name="[dbo].[group_data_view_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data_view_link].[fk_group_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[definitions]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[definitions].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[definitions].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[ownership]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[val_sum]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[definitions].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data_view_link].[link_date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data_view_link].[fk_data_view_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data_view_link].[archive]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[show_on_website]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[archive]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1400" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE VIEW [dbo].[dc_group_data_val_sum] WITH SCHEMABINDING AS" />
			</Annotation>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[dc_group_data_val_sum].[dc_group_data_val_sum_unique]">
			<Property Name="IsUnique" Value="True" />
			<Property Name="IsClustered" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_group_data_val_sum].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[dc_group_data_val_sum]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlView" Name="[dbo].[dc_organisation_data]">
			<Property Name="IsSchemaBound" Value="True" />
			<Property Name="QueryScript">
				<Value><![CDATA[ select 
	od.id as "id", 
	od.fk_organisation_id AS "organisation_id", 
	m.id AS "metric_id", 
	m.[order] AS "metric_order", 
	att.id AS "attribute_id", 
	att.[order] AS "attribute_order", 
	od.[date],
	od.date_type,
	od.val AS "val_d", 
	od.val AS "val_i", 
	od.fk_currency_id AS "currency_id", 
	od.fk_source_id AS "source_id", 
	od.fk_confidence_id AS "confidence_id",
	df.id AS "definition_id",
	od.has_flags AS "has_flags",
	NULL AS "flags",
	NULL AS "location",
	odv.link_date AS "last_update_on",
	0 AS "last_updated_by",
	odv.fk_data_view_id

	from dbo.organisation_data_view_link as odv
	inner join dbo.organisation_data as od ON od.id=odv.fk_organisation_data_id
	inner join dbo.metrics as m ON m.id=od.fk_metric_id
	inner join dbo.attributes as att ON att.id=od.fk_attribute_id
	inner join dbo.data_sets_master as ds ON (ds.fk_metric_id=od.fk_metric_id and ds.fk_attribute_id=od.fk_attribute_id)
	inner join dbo.definitions as df ON (ds.fk_metric_id=df.metric_id and ds.fk_attribute_id=df.attribute_id)
	--inner join dbo.organisation_data_metadata as dm ON od.id = dm.fk_organisation_data_id 

	where odv.fk_data_view_id = 3
	and odv.archive=0
	and ds.show_on_website=1
	and ds.id is not null
	and od.archive=0]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_organisation_data].[id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_organisation_data].[organisation_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data].[fk_organisation_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_organisation_data].[metric_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[metrics].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_organisation_data].[metric_order]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[metrics].[order]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_organisation_data].[attribute_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[attributes].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_organisation_data].[attribute_order]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[attributes].[order]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_organisation_data].[date]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_organisation_data].[date_type]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data].[date_type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_organisation_data].[val_d]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data].[val]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_organisation_data].[val_i]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data].[val]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_organisation_data].[currency_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data].[fk_currency_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_organisation_data].[source_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data].[fk_source_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_organisation_data].[confidence_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data].[fk_confidence_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_organisation_data].[definition_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[definitions].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_organisation_data].[has_flags]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data].[has_flags]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_organisation_data].[flags]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_organisation_data].[location]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_organisation_data].[last_update_on]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data_view_link].[link_date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_organisation_data].[last_updated_by]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_organisation_data].[fk_data_view_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data_view_link].[fk_data_view_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References Name="[dbo].[organisation_data_view_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_view_link].[fk_organisation_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[definitions]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[definitions].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[definitions].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[val]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[val]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[definitions].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_view_link].[link_date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_view_link].[fk_data_view_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_view_link].[archive]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[show_on_website]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[archive]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1317" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE VIEW [dbo].[dc_organisation_data] WITH SCHEMABINDING AS" />
			</Annotation>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[dc_organisation_data].[dc_organisation_data_comb]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_organisation_data].[attribute_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_organisation_data].[confidence_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_organisation_data].[currency_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_organisation_data].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_organisation_data].[date_type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_organisation_data].[definition_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_organisation_data].[has_flags]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_organisation_data].[metric_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_organisation_data].[organisation_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_organisation_data].[source_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[dc_organisation_data]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[dc_organisation_data].[dc_organisation_data_unique]">
			<Property Name="IsUnique" Value="True" />
			<Property Name="IsClustered" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_organisation_data].[fk_data_view_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_organisation_data].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[dc_organisation_data]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[dc_organisation_data_sets]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[dc_organisation_data_sets].[organisation_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[dc_organisation_data_sets].[metric_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[dc_organisation_data_sets].[attribute_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[dc_organisation_data_sets].[IX_dc_organisation_data_sets_metrics]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_organisation_data_sets].[metric_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_organisation_data_sets].[organisation_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[dc_organisation_data_sets]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[dc_organisation_data_sets].[IX_dc_organisation_data_sets_organisations]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_organisation_data_sets].[organisation_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_organisation_data_sets].[metric_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[dc_organisation_data_sets]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlView" Name="[dbo].[dc_zone_data]">
			<Property Name="IsSchemaBound" Value="True" />
			<Property Name="QueryScript">
				<Value><![CDATA[ select  
od.id as "id", 
od.fk_zone_id AS "zone_id",
od.fk_metric_id AS "metric_id",
m.[order] AS "metric_order",
att.id AS "attribute_id", 
att.[order] AS "attribute_order", 
od.[date] AS "date",
od.date_type AS "date_type",
od.val AS "val_d", 
od.val AS "val_i", 
od.fk_currency_id AS "currency_id", 
od.fk_source_id AS "source_id", 
od.fk_confidence_id AS "confidence_id", 
df.id AS "definition_id",
od.has_flags AS "has_flags",
od.is_calculated AS "is_calculated",
od.is_spot_price AS "is_spot",
NULL AS "flags",
NULL AS "location",
odv.created AS "last_update_on",
0 AS "last_updated_by",
odv.fk_data_view_id

from dbo.zone_data_view_link as odv
inner join dbo.zone_data as od ON od.id=odv.fk_zone_data_id
inner join dbo.metrics as m ON m.id=od.fk_metric_id
inner join dbo.attributes as att ON att.id=od.fk_attribute_id
inner join dbo.data_sets_master as ds ON (ds.fk_metric_id=od.fk_metric_id and ds.fk_attribute_id=od.fk_attribute_id)
inner join dbo.definitions as df ON (df.metric_id=od.fk_metric_id and df.attribute_id=od.fk_attribute_id)
--inner join dbo.zone_data_metadata as dm ON od.id = dm.fk_zone_data_id 

where odv.fk_data_view_id = 3
and odv.archive=0
and ds.show_on_website=1
and ds.id is not null
and od.archive=0]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_zone_data].[id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_zone_data].[zone_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[fk_zone_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_zone_data].[metric_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[fk_metric_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_zone_data].[metric_order]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[metrics].[order]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_zone_data].[attribute_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[attributes].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_zone_data].[attribute_order]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[attributes].[order]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_zone_data].[date]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_zone_data].[date_type]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[date_type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_zone_data].[val_d]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[val]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_zone_data].[val_i]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[val]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_zone_data].[currency_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[fk_currency_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_zone_data].[source_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[fk_source_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_zone_data].[confidence_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[fk_confidence_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_zone_data].[definition_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[definitions].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_zone_data].[has_flags]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[has_flags]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_zone_data].[is_calculated]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[is_calculated]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_zone_data].[is_spot]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[is_spot_price]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_zone_data].[flags]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_zone_data].[location]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_zone_data].[last_update_on]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data_view_link].[created]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_zone_data].[last_updated_by]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[dc_zone_data].[fk_data_view_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data_view_link].[fk_data_view_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References Name="[dbo].[zone_data_view_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_view_link].[fk_zone_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[definitions]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[definitions].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[definitions].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[val]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[val]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[definitions].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[is_spot_price]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_view_link].[created]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_view_link].[fk_data_view_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_view_link].[archive]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[show_on_website]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[archive]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1324" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE VIEW [dbo].[dc_zone_data] WITH SCHEMABINDING AS" />
			</Annotation>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[dc_zone_data].[dc_zone_data_comb]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_zone_data].[attribute_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_zone_data].[confidence_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_zone_data].[currency_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_zone_data].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_zone_data].[date_type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_zone_data].[definition_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_zone_data].[has_flags]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_zone_data].[is_calculated]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_zone_data].[is_spot]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_zone_data].[metric_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_zone_data].[source_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_zone_data].[zone_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[dc_zone_data]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[dc_zone_data].[dc_zone_data_unique]">
			<Property Name="IsUnique" Value="True" />
			<Property Name="IsClustered" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_zone_data].[fk_data_view_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[dc_zone_data].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[dc_zone_data]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[dc_zone_data_sets]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[dc_zone_data_sets].[zone_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[dc_zone_data_sets].[metric_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[dc_zone_data_sets].[attribute_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlScalarFunction" Name="[dbo].[default_geoscheme_id]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
BEGIN
	RETURN 3936
END]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="CreateOffset" Value="2" />
							<Property Name="Length" Value="99" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE FUNCTION [dbo].[default_geoscheme_id]&#xD;&#xA;&#xD;&#xA;()&#xD;&#xA;&#xD;&#xA;RETURNS int&#xD;&#xA;&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[int]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[definitions]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[definitions].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[definitions].[metric_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[definitions].[attribute_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[definitions].[type_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[definitions].[definition]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[definitions].[calculation]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[definitions].[aggregation]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[definitions].[source]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[definitions].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="244" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[definitions].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="245" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[definitions].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="246" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[definitions].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="247" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[deployment_organisation_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[deployment_organisation_link].[deployment_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[deployment_organisation_link].[organisation_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[deployment_organisation_link].[type_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="248" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="249" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="250" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="251" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[deployment_sector_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[deployment_sector_link].[deployment_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[deployment_sector_link].[sector_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="252" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="253" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="254" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[deployment_zone_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[deployment_zone_link].[deployment_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[deployment_zone_link].[zone_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="255" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="256" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="257" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[deployments]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[deployments].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[deployments].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[deployments].[status_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="258" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[deployments].[url]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[deployments].[description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[deployments].[note]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[deployments].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="259" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[deployments].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="260" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[deployments].[last_update_on]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[deployments].[last_update_by]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="261" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="262" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF__sp_run_err__date__189B078F]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[sp_run_error_log]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[sp_run_error_log].[date]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="263" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF__types__source_or__3383DA5A]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((1))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[types]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[types].[source_organisation_link_id]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="264" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_api_keys_allow_apis]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((1))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[api_keys]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[api_keys].[allow_apis]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="166" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_api_keys_allow_queries]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((1))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[api_keys]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[api_keys].[allow_queries]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="167" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_api_keys_allow_sso]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[api_keys]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[api_keys].[allow_sso]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="168" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_api_keys_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[api_keys]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[api_keys].[created_by]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="170" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_api_keys_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[api_keys]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[api_keys].[created_on]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="169" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_api_keys_status]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((1))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[api_keys]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[api_keys].[status]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="165" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_attributes_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[attributes].[created_by]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="176" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_attributes_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[attributes].[created_on]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="175" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_attributes_deleted]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[attributes].[deleted]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="174" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_attributes_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[attributes].[last_update_by]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="178" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_attributes_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[attributes].[last_update_on]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="177" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_attributes_published]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[attributes].[published]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="173" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_auction_awards_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[auction_awards]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[auction_awards].[created_by]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="181" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_auction_awards_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[auction_awards]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[auction_awards].[created_on]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="180" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_auction_awards_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[auction_awards]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[auction_awards].[last_update_by]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="183" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_auction_awards_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[auction_awards]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[auction_awards].[last_update_on]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="182" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_auctions_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[auctions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[auctions].[created_by]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="187" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_auctions_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[auctions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[auctions].[created_on]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="186" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_auctions_date_type]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[('M')]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[auctions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[auctions].[date_type]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="185" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_auctions_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[auctions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[auctions].[last_update_by]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="189" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_auctions_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[auctions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[auctions].[last_update_on]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="188" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_blog_entries_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[blog_entries]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[blog_entries].[created_by]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="196" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_blog_entries_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[blog_entries]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[blog_entries].[created_on]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="195" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_blog_entries_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[blog_entries]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[blog_entries].[last_update_by]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="198" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_blog_entries_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[blog_entries]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[blog_entries].[last_update_on]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="197" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_blog_entries_published_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[blog_entries]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[blog_entries].[published_on]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="194" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_blog_entries_status]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((1))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[blog_entries]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[blog_entries].[status]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="191" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_confidence_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[confidence]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[confidence].[created_by]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="202" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_confidence_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[confidence]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[confidence].[created_on]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="201" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_confidence_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[confidence]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[confidence].[last_update_by]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="204" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_confidence_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[confidence]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[confidence].[last_update_on]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="203" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_confidence_published]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[confidence]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[confidence].[published]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="200" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_content_authors_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[content_authors]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[content_authors].[created_by]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="208" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_content_authors_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[content_authors]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[content_authors].[created_on]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="207" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_content_authors_show_in_team]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[content_authors]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[content_authors].[show_in_team]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="206" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_content_entries_content_type]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(N'text/x-markdown')]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[content_entries]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[content_entries].[content_type]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="212" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_content_entries_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[content_entries]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[content_entries].[created_by]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="222" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_content_entries_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[content_entries]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[content_entries].[created_on]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="221" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_content_entries_has_documents]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[content_entries]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[content_entries].[has_documents]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="214" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_content_entries_is_featured]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[content_entries]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[content_entries].[is_featured]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="217" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_content_entries_is_hidden]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[content_entries]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[content_entries].[is_hidden]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="218" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_content_entries_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[content_entries]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[content_entries].[last_update_by]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="224" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_content_entries_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[content_entries]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[content_entries].[last_update_on]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="223" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_content_entries_published_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[content_entries]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[content_entries].[published_on]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="220" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_content_entries_requires_subscription]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[content_entries]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[content_entries].[documents_require_subscription]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="215" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_content_entries_status]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((1))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[content_entries]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[content_entries].[status]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="213" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_content_entries_stub]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[content_entries]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[content_entries].[is_stub]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="219" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_content_entries_thumbnail_is_landscape]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[content_entries]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[content_entries].[thumbnail_is_landscape]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="216" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_content_entries_type_entity_id]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((1))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[content_entries]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[content_entries].[type_entity_id]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="211" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_content_entries_type_id]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((1574))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[content_entries]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[content_entries].[type_id]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="210" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_content_entry_author_link_is_contributor]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[content_entry_author_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[content_entry_author_link].[is_contributor]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="226" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_content_entry_links_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[content_entry_links]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[content_entry_links].[created_by]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="229" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_content_entry_links_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[content_entry_links]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[content_entry_links].[created_on]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="228" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_content_entry_links_order]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[content_entry_links]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[content_entry_links].[order]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="227" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_coverage_maps_has_map]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[coverage_maps]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[coverage_maps].[has_map]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="230" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_coverage_maps_is_frequency_specific]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[coverage_maps]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[coverage_maps].[is_frequency_specific]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="231" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_coverage_maps_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[coverage_maps]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[coverage_maps].[last_update_by]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="233" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_coverage_maps_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[coverage_maps]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[coverage_maps].[last_update_on]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="232" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_currencies_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[currencies]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[currencies].[created_by]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="235" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_currencies_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[currencies]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[currencies].[created_on]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="234" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_currencies_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[currencies]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[currencies].[last_update_by]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="237" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_currencies_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[currencies]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[currencies].[last_update_on]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="236" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_data_sets_aggregate_from_zones]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_data_sets]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_data_sets].[is_aggregated_from_zone_data]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="149" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_data_sets_is_aggregated]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_data_sets]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_data_sets].[is_aggregated]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="147" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_data_sets_is_aggregated_from_organisation_data]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_data_sets]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_data_sets].[is_aggregated_from_organisation_data]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="148" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_data_sets_is_live_for_country_data]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_data_sets]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_data_sets].[is_live_for_country_data]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="145" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_data_sets_is_live_for_group_data]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_data_sets]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_data_sets].[is_live_for_group_data]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="144" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_data_sets_is_live_for_organisation_data]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_data_sets]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_data_sets].[is_live_for_organisation_data]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="143" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_data_sets_is_live_for_region_data]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_data_sets]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_data_sets].[is_live_for_region_data]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="146" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_data_sets_metrics_only]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_data_sets]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_data_sets].[show_in_metrics_only]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="159" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_dc_dashboard_zone_data_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_dc_dashboard_zone_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_dc_dashboard_zone_data].[last_update_by]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="164" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_dc_dashboard_zone_data_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_dc_dashboard_zone_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_dc_dashboard_zone_data].[last_update_on]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="163" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_dc_group_data_has_flags]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_backup_dc_group_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_backup_dc_group_data].[has_flags]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="103" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_dc_group_data_is_calculated]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_backup_dc_group_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_backup_dc_group_data].[is_calculated]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="104" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_dc_group_data_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_backup_dc_group_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_backup_dc_group_data].[last_update_by]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="106" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_dc_group_data_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_backup_dc_group_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_backup_dc_group_data].[last_update_on]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="105" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_dc_organisation_data_has_flags]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_backup_dc_organisation_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_backup_dc_organisation_data].[has_flags]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="107" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_dc_organisation_data_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_backup_dc_organisation_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_backup_dc_organisation_data].[last_update_by]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="109" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_dc_organisation_data_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_backup_dc_organisation_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_backup_dc_organisation_data].[last_update_on]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="108" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_dc_zone_data_has_flags]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_backup_dc_zone_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_backup_dc_zone_data].[has_flags]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="110" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_dc_zone_data_is_calculated]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_backup_dc_zone_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_backup_dc_zone_data].[is_calculated]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="111" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_dc_zone_data_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_backup_dc_zone_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_backup_dc_zone_data].[last_update_by]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="113" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_dc_zone_data_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_backup_dc_zone_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_backup_dc_zone_data].[last_update_on]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="112" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_definitions_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[definitions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[definitions].[created_by]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="245" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_definitions_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[definitions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[definitions].[created_on]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="244" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_definitions_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[definitions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[definitions].[last_update_by]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="247" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_definitions_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[definitions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[definitions].[last_update_on]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="246" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_df_service_data_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[df_service_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[df_service_data].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="265" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_df_service_data_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[df_service_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[df_service_data].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="266" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_df_service_data_privacy_id]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((5))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[df_service_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[df_service_data].[privacy_id]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="267" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_df_service_data_status_id]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((3))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[df_service_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[df_service_data].[status_id]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="268" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_document_fulltext_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[document_fulltext]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[document_fulltext].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="269" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_document_fulltext_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[document_fulltext]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[document_fulltext].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="270" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_document_fulltext_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[document_fulltext]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[document_fulltext].[last_update_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="271" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_document_fulltext_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[document_fulltext]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[document_fulltext].[last_update_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="272" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_document_legacy_mapping_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[document_legacy_mapping]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[document_legacy_mapping].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="273" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_document_legacy_mapping_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[document_legacy_mapping]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[document_legacy_mapping].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="274" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_document_tracking_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[document_tracking]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[document_tracking].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="275" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_documents_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[documents]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[documents].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="276" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_documents_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[documents]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[documents].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="277" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_documents_file_extension]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(N'pdf')]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[documents]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[documents].[file_extension]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="278" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_documents_file_mime_type]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(N'application/pdf')]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[documents]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[documents].[file_mime_type]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="279" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_documents_has_image]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[documents]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[documents].[has_image]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="280" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_documents_is_featured]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[documents]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[documents].[is_featured]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="281" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_documents_is_hidden]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[documents]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[documents].[is_hidden]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="282" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_documents_is_private]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[documents]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[documents].[is_private]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="283" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_documents_is_subscription]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[documents]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[documents].[requires_subscription]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="284" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_documents_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[documents]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[documents].[last_update_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="285" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_documents_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[documents]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[documents].[last_update_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="286" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_documents_status]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[documents]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[documents].[status]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="287" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_data_sets_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_data_sets]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_data_sets].[created_by]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="161" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_data_sets_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_data_sets]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_data_sets].[created_on]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="160" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_data_sets_default_date_type]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[('Q')]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_data_sets]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_data_sets].[default_date_type]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="142" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_data_sets_has_country_data]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_data_sets]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_data_sets].[has_country_data]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="153" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_data_sets_has_country_rank]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_data_sets]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_data_sets].[has_country_rank]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="157" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_data_sets_has_forecasts]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_data_sets]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_data_sets].[has_forecasts]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="150" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_data_sets_has_group_data]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_data_sets]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_data_sets].[has_group_data]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="152" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_data_sets_has_group_rank]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_data_sets]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_data_sets].[has_group_rank]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="156" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_data_sets_has_organisation_data]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((1))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_data_sets]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_data_sets].[has_organisation_data]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="151" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_data_sets_has_organisation_rank]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_data_sets]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_data_sets].[has_organisation_rank]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="155" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_data_sets_has_region_rank]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_data_sets]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_data_sets].[has_region_rank]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="158" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_data_sets_has_regional_data]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_data_sets]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_data_sets].[has_region_data]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="154" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_group_data_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_backup_ds_group_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_backup_ds_group_data].[created_by]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="120" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_group_data_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_backup_ds_group_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_backup_ds_group_data].[created_on]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="119" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_group_data_has_flags]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_backup_ds_group_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_backup_ds_group_data].[has_flags]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="116" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_group_data_is_calculated]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_backup_ds_group_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_backup_ds_group_data].[is_calculated]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="117" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_group_data_is_proportionate]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_backup_ds_group_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_backup_ds_group_data].[is_proportionate]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="118" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_group_data_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_backup_ds_group_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_backup_ds_group_data].[last_update_by]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="122" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_group_data_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_backup_ds_group_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_backup_ds_group_data].[last_update_on]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="121" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_group_data_privacy_id]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((5))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_backup_ds_group_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_backup_ds_group_data].[privacy_id]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="115" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_group_data_status_id]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((3))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_backup_ds_group_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_backup_ds_group_data].[status_id]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="114" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_group_ownership_is_group]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[ds_group_ownership]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[is_group]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="288" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_mvnos_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[ds_mvnos]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[ds_mvnos].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="289" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_mvnos_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[ds_mvnos]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[ds_mvnos].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="290" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_mvnos_has_data]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[ds_mvnos]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[ds_mvnos].[has_data]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="291" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_mvnos_has_group_data]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[ds_mvnos]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[ds_mvnos].[has_group_data]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="292" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_mvnos_is_brand]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[ds_mvnos]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[ds_mvnos].[is_brand]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="293" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_mvnos_is_data_only]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[ds_mvnos]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[ds_mvnos].[is_data_only]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="294" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_mvnos_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[ds_mvnos]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[ds_mvnos].[last_update_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="295" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_mvnos_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[ds_mvnos]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[ds_mvnos].[last_update_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="296" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_mvnos_tariff_type_id]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((-3))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[ds_mvnos]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[ds_mvnos].[tariff_type_id]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="297" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_organisation_data_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_backup_ds_organisation_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_backup_ds_organisation_data].[created_by]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="129" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_organisation_data_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_backup_ds_organisation_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_backup_ds_organisation_data].[created_on]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="128" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_organisation_data_has_flags]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_backup_ds_organisation_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_backup_ds_organisation_data].[has_flags]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="126" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_organisation_data_is_calculated]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_backup_ds_organisation_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_backup_ds_organisation_data].[is_calculated]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="127" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_organisation_data_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_backup_ds_organisation_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_backup_ds_organisation_data].[last_update_by]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="131" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_organisation_data_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_backup_ds_organisation_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_backup_ds_organisation_data].[last_update_on]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="130" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_organisation_data_privacy_id]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((5))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_backup_ds_organisation_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_backup_ds_organisation_data].[privacy_id]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="125" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_organisation_data_status_id]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((3))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_backup_ds_organisation_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_backup_ds_organisation_data].[status_id]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="124" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_service_data_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[ds_service_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[ds_service_data].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="298" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_service_data_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[ds_service_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[ds_service_data].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="299" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_service_data_has_flags]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[ds_service_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[ds_service_data].[has_flags]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="300" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_service_data_is_calculated]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[ds_service_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[ds_service_data].[is_calculated]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="301" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_service_data_privacy_id]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((5))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[ds_service_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[ds_service_data].[privacy_id]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="302" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_service_data_status_id]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((3))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[ds_service_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[ds_service_data].[status_id]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="303" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_zone_data_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_backup_ds_zone_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_backup_ds_zone_data].[created_by]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="138" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_zone_data_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_backup_ds_zone_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_backup_ds_zone_data].[created_on]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="137" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_zone_data_has_flags]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_backup_ds_zone_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_backup_ds_zone_data].[has_flags]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="135" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_zone_data_is_calculated]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_backup_ds_zone_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_backup_ds_zone_data].[is_calculated]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="136" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_zone_data_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_backup_ds_zone_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_backup_ds_zone_data].[last_update_by]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="140" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_zone_data_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_backup_ds_zone_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_backup_ds_zone_data].[last_update_on]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="139" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_zone_data_privacy_id]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((5))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_backup_ds_zone_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_backup_ds_zone_data].[privacy_id]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="134" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_ds_zone_data_status_id]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((3))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_backup_ds_zone_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[_backup_ds_zone_data].[status_id]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="133" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_favourite_user_link_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[favourite_user_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[favourite_user_link].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="304" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_feed_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[feed]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[feed].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="305" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_feed_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[feed]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[feed].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="306" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_feed_has_image]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[feed]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[feed].[has_image]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="307" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_feed_is_actionable]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[feed]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[feed].[is_action]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="308" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_feed_is_analysis]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[feed]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[feed].[is_analysis]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="309" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_feed_is_meta]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[feed]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[feed].[is_meta]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="310" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_feed_is_private]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[feed]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[feed].[is_private]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="311" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_feed_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[feed]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[feed].[last_update_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="312" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_feed_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[feed]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[feed].[last_update_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="313" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_feed_published]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[feed]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[feed].[published]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="314" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_feed_status]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[feed]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[feed].[status]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="315" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_feedback_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[feedback]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[feedback].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="316" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_feedback_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[feedback]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[feedback].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="317" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_feedback_is_bug]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[feedback]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[feedback].[is_bug]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="318" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_feedback_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[feedback]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[feedback].[last_update_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="319" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_feedback_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[feedback]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[feedback].[last_update_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="320" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_feedback_status]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((1))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[feedback]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[feedback].[status]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="321" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_fields_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[fields]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[fields].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="322" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_fields_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[fields]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[fields].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="323" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_files_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[files]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[files].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="324" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_files_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[files]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[files].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="325" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_flags_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[flags]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[flags].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="326" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_flags_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[flags]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[flags].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="327" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_flags_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[flags]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[flags].[last_update_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="328" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_flags_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[flags]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[flags].[last_update_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="329" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_flags_publish]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[flags]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[flags].[publish]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="330" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_group_ownership_compound]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[ds_group_ownership]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[is_compound]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="331" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_group_ownership_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[ds_group_ownership]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="332" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_group_ownership_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[ds_group_ownership]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="333" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_group_ownership_is_consolidated]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[ds_group_ownership]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[is_consolidated]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="334" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_group_ownership_is_joint_venture]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[ds_group_ownership]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[is_joint_venture]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="335" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_group_ownership_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[ds_group_ownership]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[last_update_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="336" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_group_ownership_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[ds_group_ownership]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[ds_group_ownership].[last_update_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="337" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_invitations_status]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((1))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[invitations]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[invitations].[status]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="338" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_jobs_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[jobs]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[jobs].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="339" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_jobs_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[jobs]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[jobs].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="340" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_jobs_is_enabled]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((1))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[jobs]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[jobs].[is_enabled]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="341" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_jobs_is_running]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[jobs]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[jobs].[is_running]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="342" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_jobs_last_exit_with_error]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[jobs]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[jobs].[last_exit_was_error]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="343" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_jobs_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[jobs]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[jobs].[last_update_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="344" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_jobs_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[jobs]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[jobs].[last_update_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="345" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_log_data_events_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[log_data_events]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[log_data_events].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="346" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_log_data_events_severity]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[log_data_events]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[log_data_events].[severity]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="347" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_log_data_events_status_id]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((5))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[log_data_events]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[log_data_events].[status_id]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="348" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_log_model_versions_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[log_model_versions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[log_model_versions].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="349" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_log_reporting_collected]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[log_forecasting]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[log_forecasting].[reviewed]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="350" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_log_reporting_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[log_forecasting]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[log_forecasting].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="351" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_log_reporting_created_by_1]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[log_reporting]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[log_reporting].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="352" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_log_reporting_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[log_forecasting]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[log_forecasting].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="353" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_log_reporting_created_on_1]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[log_reporting]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[log_reporting].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="354" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_log_reporting_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[log_forecasting]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[log_forecasting].[last_update_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="355" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_log_reporting_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[log_forecasting]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[log_forecasting].[last_update_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="356" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_log_reporting_status]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[log_forecasting]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[log_forecasting].[status]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="357" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_metric_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[metrics]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[metrics].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="358" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_metric_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[metrics]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[metrics].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="359" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_metric_families_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[metric_families]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[metric_families].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="360" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_metric_families_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[metric_families]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[metric_families].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="361" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_metric_import_link_currency_id]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[metric_import_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[metric_import_link].[currency_id]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="362" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_metric_import_link_is_calculated]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[metric_import_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[metric_import_link].[is_calculated]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="363" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_metric_import_link_unit_id]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[metric_import_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[metric_import_link].[unit_id]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="364" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_metric_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[metrics]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[metrics].[last_update_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="365" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_metric_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[metrics]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[metrics].[last_update_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="366" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_metrics_has_attributes]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((1))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[metrics]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[metrics].[has_attributes]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="367" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_metrics_published]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[metrics]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[metrics].[published]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="368" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_networks_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[networks]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[networks].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="369" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_networks_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[networks]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[networks].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="370" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_networks_is_upgrade]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[networks]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[networks].[is_upgrade]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="371" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_networks_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[networks]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[networks].[last_update_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="372" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_networks_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[networks]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[networks].[last_update_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="373" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_news_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[news]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[news].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="374" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_news_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[news]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[news].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="375" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_news_type]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[news]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[news].[type]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="376" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_organisation_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[organisations].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="377" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_organisation_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[organisations].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="378" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_organisation_events_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisation_events]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[organisation_events].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="379" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_organisation_events_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisation_events]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[organisation_events].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="380" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_organisation_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[organisations].[last_update_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="381" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_organisation_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[organisations].[last_update_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="382" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_organisation_location_link_cleaned]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisation_location_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[organisation_location_link].[cleaned]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="383" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_organisation_location_link_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisation_location_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[organisation_location_link].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="384" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_organisation_location_link_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisation_location_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[organisation_location_link].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="385" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_organisations_in_use]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[organisations].[in_use]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="386" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_organisations_published]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[organisations].[published]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="387" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_privacy_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[privacy]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[privacy].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="388" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_privacy_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[privacy]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[privacy].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="389" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_privacy_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[privacy]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[privacy].[last_update_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="390" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_privacy_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[privacy]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[privacy].[last_update_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="391" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_privacy_published]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[privacy]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[privacy].[published]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="392" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_products_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[deployments]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[deployments].[created_by]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="260" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_products_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[deployments]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[deployments].[created_on]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="259" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_products_status_id]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[deployments]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[deployments].[status_id]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="258" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_registrations_approved]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[registrations]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[registrations].[approved]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="393" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_registrations_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[registrations]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[registrations].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="394" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_registrations_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[registrations]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[registrations].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="395" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_registrations_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[registrations]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[registrations].[last_update_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="396" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_registrations_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[registrations]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[registrations].[last_update_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="397" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_report_favourites_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[report_favourites]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[report_favourites].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="398" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_report_tracking_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[report_tracking]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[report_tracking].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="399" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_reports_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[reports]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[reports].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="400" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_reports_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[reports]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[reports].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="401" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_reports_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[reports]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[reports].[last_update_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="402" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_reports_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[reports]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[reports].[last_update_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="403" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_search_has_blog_items]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[search]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[search].[has_blogs]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="404" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_search_has_content]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[search]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[search].[has_content]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="405" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_search_has_data]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[search]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[search].[has_data]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="406" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_search_has_documents]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[search]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[search].[has_documents]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="407" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_search_has_feed_items]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[search]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[search].[has_feeds]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="408" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_search_is_alternate_term]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[search]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[search].[is_alternate_term]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="409" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_search_order]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[search]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[search].[order]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="410" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_sector_field_link_is_required]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[sector_field_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[sector_field_link].[is_required]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="411" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[df_service_data]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[df_service_data].[deployment_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[df_service_data].[field_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[df_service_data].[status_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="268" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[df_service_data].[privacy_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="267" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[df_service_data].[value]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varbinary]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[df_service_data].[currency_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[df_service_data].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="266" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[df_service_data].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="265" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[df_service_data].[last_update_on]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[df_service_data].[last_update_by]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="412" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="413" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="414" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_sessions_active]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((1))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[sessions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[sessions].[active]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="415" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_sessions_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[sessions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[sessions].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="416" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_sessions_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[sessions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[sessions].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="417" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_sessions_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[sessions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[sessions].[last_update_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="418" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_sessions_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[sessions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[sessions].[last_update_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="419" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_source_organisation_link_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[source_organisation_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[source_organisation_link].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="420" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_source_organisation_link_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[source_organisation_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[source_organisation_link].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="421" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_source_organisation_link_id]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((1))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[organisations].[source_organisation_link_id]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="422" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_sources_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[sources]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[sources].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="423" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_sources_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[sources]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[sources].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="424" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_sources_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[sources]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[sources].[last_update_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="425" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_sources_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[sources]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[sources].[last_update_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="426" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_sources_published]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[sources]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[sources].[published]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="427" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_status_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[status]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[status].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="428" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_status_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[status]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[status].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="429" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_status_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[status]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[status].[last_update_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="430" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_status_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[status]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[status].[last_update_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="431" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_status_published]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[status]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[status].[published]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="432" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_subscription_domain_link_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[subscription_domain_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[subscription_domain_link].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="433" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_subscription_domain_link_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[subscription_domain_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[subscription_domain_link].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="434" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_subscriptions_archived]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[subscriptions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[subscriptions].[archived]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="435" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_subscriptions_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[subscriptions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[subscriptions].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="436" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_subscriptions_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[subscriptions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[subscriptions].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="437" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_subscriptions_default_currency_id]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((1))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[subscriptions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[subscriptions].[default_currency_id]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="438" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_subscriptions_default_currency_type_id]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((1))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[subscriptions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[subscriptions].[default_currency_type]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="439" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_subscriptions_default_date_type]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[('Q')]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[subscriptions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[subscriptions].[default_date_type]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="440" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_subscriptions_default_duration]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[('P1Y')]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[subscriptions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[subscriptions].[default_duration]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="441" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_subscriptions_default_geoscheme_id]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((3936))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[subscriptions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[subscriptions].[default_geoscheme_id]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="442" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_subscriptions_default_local_currencies]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[subscriptions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[subscriptions].[default_local_currencies]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="443" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_subscriptions_default_role_id]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((3))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[subscriptions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[subscriptions].[default_role_id]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="444" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_subscriptions_default_show_forecasts]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((1))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[subscriptions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[subscriptions].[default_show_forecasts]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="445" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_subscriptions_enable_keyboard_shortcuts]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[subscriptions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[subscriptions].[enable_keyboard_shortcuts]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="446" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_subscriptions_has_feed]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((1))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[subscriptions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[subscriptions].[has_feed]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="447" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_subscriptions_has_subscription]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((1))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[subscriptions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[subscriptions].[has_subscription]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="448" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_subscriptions_is_commercial]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[subscriptions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[subscriptions].[is_commercial]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="449" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_subscriptions_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[subscriptions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[subscriptions].[last_update_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="450" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_subscriptions_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[subscriptions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[subscriptions].[last_update_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="451" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_subscriptions_suspended]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[subscriptions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[subscriptions].[suspended]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="452" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_Table_1_search_only]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[blog_entries]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[blog_entries].[is_search_only]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="193" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_Table_1_stub]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[blog_entries]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[blog_entries].[is_stub]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="192" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_types_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[types]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[types].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="453" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_types_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[types]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[types].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="454" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_types_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[types]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[types].[last_update_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="455" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_types_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[types]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[types].[last_update_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="456" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_units_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[units]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[units].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="457" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_units_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[units]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[units].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="458" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_units_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[units]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[units].[last_update_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="459" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_units_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[units]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[units].[last_update_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="460" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_user_email_verification_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[user_email_verification]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[user_email_verification].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="461" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_user_email_verification_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[user_email_verification]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[user_email_verification].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="462" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_user_email_verification_status]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[user_email_verification]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[user_email_verification].[status]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="463" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_user_password_resets_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[user_password_resets]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[user_password_resets].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="464" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_user_password_resets_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[user_password_resets]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[user_password_resets].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="465" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_user_password_resets_is_claimed]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[user_password_resets]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[user_password_resets].[status]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="466" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_user_permissions_link_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[user_permissions_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[user_permissions_link].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="467" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_user_permissions_link_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[user_permissions_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[user_permissions_link].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="468" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_user_preferences_default_currency_id]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((1))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[user_preferences]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[user_preferences].[default_currency_id]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="469" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_user_preferences_default_currency_type]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((1))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[user_preferences]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[user_preferences].[default_currency_type]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="470" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_user_preferences_default_date_type]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[('Q')]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[user_preferences]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[user_preferences].[default_date_type]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="471" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_user_preferences_default_duration]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[('P1Y')]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[user_preferences]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[user_preferences].[default_duration]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="472" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_user_preferences_default_geoscheme_id]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((3936))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[user_preferences]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[user_preferences].[default_geoscheme_id]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="473" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_user_preferences_default_local_currencies]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[user_preferences]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[user_preferences].[default_local_currencies]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="474" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_user_preferences_enable_keyboard_shortcuts]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[user_preferences]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[user_preferences].[enable_keyboard_shortcuts]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="475" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_user_preferences_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[user_preferences]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[user_preferences].[last_update_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="476" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_user_preferences_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[user_preferences]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[user_preferences].[last_update_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="477" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_user_preferences_receive_email]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((1))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[user_preferences]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[user_preferences].[receive_email]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="478" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_user_preferences_show_forecasts]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((1))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[user_preferences]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[user_preferences].[default_show_forecasts]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="479" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_user_registration_tokens_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[user_registrations]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[user_registrations].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="480" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_user_registration_tokens_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[user_registrations]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[user_registrations].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="481" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_user_registration_tokens_status]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[user_registrations]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[user_registrations].[status]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="482" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_users_archived]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[users]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[users].[archived]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="483" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_users_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[users]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[users].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="484" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_users_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[users]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[users].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="485" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_users_has_set_own_password]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[users]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[users].[has_set_own_password]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="486" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_users_is_verified]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[users]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[users].[is_verified]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="487" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_users_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[users]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[users].[last_update_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="488" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_users_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[users]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[users].[last_update_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="489" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_users_role_id]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((3))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[users]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[users].[role_id]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="490" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_users_sso]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[users]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[users].[sso]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="491" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_users_suspended]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[users]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[users].[suspended]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="492" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_wiki_categories_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[wiki_categories]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[wiki_categories].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="493" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_wiki_categories_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[wiki_categories]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[wiki_categories].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="494" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_wiki_categories_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[wiki_categories]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[wiki_categories].[last_update_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="495" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_wiki_categories_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[wiki_categories]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[wiki_categories].[last_update_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="496" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_wiki_entries_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[wiki_entries]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[wiki_entries].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="497" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_wiki_entries_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[wiki_entries]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[wiki_entries].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="498" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_wiki_entries_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[wiki_entries]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[wiki_entries].[last_update_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="499" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_wiki_entries_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[wiki_entries]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[wiki_entries].[last_update_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="500" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_wiki_entries_published_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[wiki_entries]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[wiki_entries].[published_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="501" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_wiki_entries_status]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((1))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[wiki_entries]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[wiki_entries].[status]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="502" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_wikis_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[wikis]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[wikis].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="503" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_wikis_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[wikis]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[wikis].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="504" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_with_consumer_non_operator]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[subscriptions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[subscriptions].[with_consumer_non_operator]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="505" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_with_consumer_operator]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[subscriptions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[subscriptions].[with_consumer_operator]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="506" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_with_iot_non_operator]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[subscriptions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[subscriptions].[with_iot_non_operator]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="507" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_with_iot_operator]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[subscriptions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[subscriptions].[with_iot_operator]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="508" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_with_multiplay_non_operator]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[subscriptions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[subscriptions].[with_multiplay_non_operator]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="509" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_with_multiplay_operator]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[subscriptions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[subscriptions].[with_multiplay_operator]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="510" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_zone_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[zones].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="511" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_zone_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[zones].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="512" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_zone_currency_link_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[zone_currency_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[zone_currency_link].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="513" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_zone_currency_link_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[zone_currency_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[zone_currency_link].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="514" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_zone_currency_link_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[zone_currency_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[zone_currency_link].[last_update_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="515" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_zone_currency_link_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[zone_currency_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[zone_currency_link].[last_update_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="516" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_zone_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[zones].[last_update_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="517" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_zone_last_update_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[zones].[last_update_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="518" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_zones_published]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[zones].[published]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="519" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[document_entity_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[document_entity_link].[document_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[document_entity_link].[entity_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[document_entity_link].[table]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlFullTextIndex" Name="[dbo].[document_fulltext]" Disambiguator="3">
			<Relationship Name="Catalog">
				<Entry>
					<References Name="[search_documents]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlFullTextIndexColumnSpecifier">
						<Property Name="LanguageId" Value="1033" />
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[document_fulltext].[title]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlFullTextIndexColumnSpecifier">
						<Property Name="LanguageId" Value="1033" />
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[document_fulltext].[fulltext]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[document_fulltext]" />
				</Entry>
			</Relationship>
			<Relationship Name="KeyName">
				<Entry>
					<References Name="[dbo].[PK_document_fulltext]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[document_fulltext]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[document_fulltext].[document_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[document_fulltext].[title]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[document_fulltext].[fulltext]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[document_fulltext].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="270" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[document_fulltext].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="269" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[document_fulltext].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="272" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[document_fulltext].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="271" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="520" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[document_legacy_mapping]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[document_legacy_mapping].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[document_legacy_mapping].[entry_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[document_legacy_mapping].[filename]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[document_legacy_mapping].[hash]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[document_legacy_mapping].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="274" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[document_legacy_mapping].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="273" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="521" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[document_permission_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[document_permission_link].[document_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[document_permission_link].[permission_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[document_tag_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[document_tag_link].[document_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[document_tag_link].[tag_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[document_tag_link].[IX_document_tag_document_id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[document_tag_link].[document_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[document_tag_link]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[document_tag_link].[IX_document_tag_tag_id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[document_tag_link].[tag_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[document_tag_link]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[document_tracking]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[document_tracking].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[document_tracking].[document_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[document_tracking].[user_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[document_tracking].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="275" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="522" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[documents]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents].[title]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents].[subtitle]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents].[summary]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents].[file]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents].[file_extension]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="278" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents].[file_mime_type]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="279" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents].[file_pages]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents].[file_size]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents].[hash]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents].[status]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="287" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents].[source]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents].[source_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents].[source_slug]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents].[source_url]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents].[has_image]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="280" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents].[thumbnail_width]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents].[thumbnail_height]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents].[is_featured]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="281" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents].[is_hidden]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="282" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents].[is_private]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="283" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents].[requires_subscription]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="284" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents].[published_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="65" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="277" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="276" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="286" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="285" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="523" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[documents_tmp]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents_tmp].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents_tmp].[title]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents_tmp].[subtitle]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents_tmp].[summary]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents_tmp].[file]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents_tmp].[file_extension]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents_tmp].[file_mime_type]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents_tmp].[file_pages]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents_tmp].[file_size]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents_tmp].[hash]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents_tmp].[status]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents_tmp].[source]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents_tmp].[source_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents_tmp].[source_slug]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents_tmp].[source_url]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents_tmp].[has_image]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents_tmp].[thumbnail_width]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents_tmp].[thumbnail_height]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents_tmp].[is_featured]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents_tmp].[is_hidden]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents_tmp].[is_private]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents_tmp].[requires_subscription]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents_tmp].[published_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents_tmp].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents_tmp].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents_tmp].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[documents_tmp].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlView" Name="[dbo].[ds_group_data]">
			<Property Name="QueryScript">
				<Value><![CDATA[ select 
od.id as "id", 
od.fk_organisation_id AS "organisation_id", 
od.ownership as "ownership_threshold",
m.id AS "metric_id", 
att.id AS "attribute_id",
od.fk_status_id AS "status_id", 
od.fk_privacy_id AS "privacy_id", 
od.[date],
od.date_type,
NULL as "val_d",
od.val_sum AS "val_i", 
cur.id AS "currency_id", 
s.id AS "source_id", 
conf.id AS "confidence_id",
od.has_flags AS "has_flags",
od.is_calculated AS "is_calculated",
0 as "is_proportionate",
NULL as "is_spot",
NULL as "import_id",
odv.link_date AS "created_on",
0 AS "created_by",
odv.link_date AS "last_update_on",
0 AS "last_update_by"

from dbo.group_data_view_link as odv
left join group_data as od ON od.id=odv.fk_group_data_id
left join dbo.organisations as o ON o.id=od.fk_organisation_id
left join dbo.metrics as m ON m.id=od.fk_metric_id
left join dbo.attributes as att ON att.id=od.fk_attribute_id
left join dbo.sources as s ON s.id=od.fk_source_id
left join dbo.confidence as conf ON conf.id=od.fk_confidence_id
left join dbo.currencies as cur ON cur.id=od.fk_currency_id
left join dbo.organisation_zone_link as ozl ON ozl.organisation_id=od.fk_organisation_id
left join dbo.data_sets_master as ds ON (ds.fk_metric_id=od.fk_metric_id and ds.fk_attribute_id=od.fk_attribute_id)
left join dbo.definitions as df ON (ds.fk_metric_id=df.metric_id and ds.fk_attribute_id=df.attribute_id)
left join dbo.organisation_data_metadata as dm ON od.id = dm.fk_organisation_data_id 

where odv.fk_data_view_id = 3
and odv.archive = 0
and ds.id is not null
and o.id is not null

union ALL

select 
distinct od.id as "id", 
od.fk_organisation_id AS "organisation_id", 
od.ownership as "ownership_threshold",
m.id AS "metric_id", 
att.id AS "attribute_id",
od.fk_status_id AS "status_id", 
od.fk_privacy_id AS "privacy_id", 
od.[date],
od.date_type,
NULL as "val_d",
od.val_proportionate AS "val_i", 
cur.id AS "currency_id", 
s.id AS "source_id", 
conf.id AS "confidence_id",
od.has_flags AS "has_flags",
od.is_calculated AS "is_calculated",
1 as "is_proportionate",
NULL as "is_spot",
NULL as "import_id",
odv.link_date AS "created_on",
0 AS "created_by",
odv.link_date AS "last_update_on",
0 AS "last_update_by"

from dbo.group_data_view_link as odv
left join group_data as od ON od.id=odv.fk_group_data_id
left join dbo.organisations as o ON o.id=od.fk_organisation_id
left join dbo.metrics as m ON m.id=od.fk_metric_id
left join dbo.attributes as att ON att.id=od.fk_attribute_id
left join dbo.sources as s ON s.id=od.fk_source_id
left join dbo.confidence as conf ON conf.id=od.fk_confidence_id
left join dbo.currencies as cur ON cur.id=od.fk_currency_id
left join dbo.organisation_zone_link as ozl ON ozl.organisation_id=od.fk_organisation_id
left join dbo.data_sets_master as ds ON (ds.fk_metric_id=od.fk_metric_id and ds.fk_attribute_id=od.fk_attribute_id)
left join dbo.definitions as df ON (ds.fk_metric_id=df.metric_id and ds.fk_attribute_id=df.attribute_id)
left join dbo.organisation_data_metadata as dm ON od.id = dm.fk_organisation_data_id 

where odv.fk_data_view_id = 3
and odv.archive = 0
and ds.id is not null
and o.id is not null]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_group_data].[id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_group_data].[organisation_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data].[fk_organisation_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_group_data].[ownership_threshold]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data].[ownership]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_group_data].[metric_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[metrics].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_group_data].[attribute_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[attributes].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_group_data].[status_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data].[fk_status_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_group_data].[privacy_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data].[fk_privacy_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_group_data].[date]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_group_data].[date_type]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data].[date_type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_group_data].[val_d]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_group_data].[val_i]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data].[val_sum]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_group_data].[currency_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[currencies].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_group_data].[source_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[sources].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_group_data].[confidence_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[confidence].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_group_data].[has_flags]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data].[has_flags]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_group_data].[is_calculated]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data].[is_calculated]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_group_data].[is_proportionate]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_group_data].[is_spot]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_group_data].[import_id]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_group_data].[created_on]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data_view_link].[link_date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_group_data].[created_by]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_group_data].[last_update_on]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[group_data_view_link].[link_date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_group_data].[last_update_by]" />
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References Name="[dbo].[group_data_view_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data_view_link].[fk_group_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[definitions]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[definitions].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[definitions].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata].[fk_organisation_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[ownership]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_privacy_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[val_sum]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data_view_link].[link_date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data_view_link].[link_date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data_view_link].[fk_data_view_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data_view_link].[archive]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[val_proportionate]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="3231" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE VIEW [dbo].[ds_group_data] AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[ds_group_ownership]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_group_ownership].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_group_ownership].[group_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_group_ownership].[organisation_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_group_ownership].[metric_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_group_ownership].[attribute_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_group_ownership].[date]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_group_ownership].[date_type]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_group_ownership].[value]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="6" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_group_ownership].[is_compound]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="331" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_group_ownership].[is_consolidated]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="334" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_group_ownership].[is_group]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="288" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_group_ownership].[is_joint_venture]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="335" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_group_ownership].[source_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_group_ownership].[confidence_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_group_ownership].[definition_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_group_ownership].[note]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_group_ownership].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="333" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_group_ownership].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="332" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_group_ownership].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="337" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_group_ownership].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="336" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="524" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[ds_mvnos]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_mvnos].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_mvnos].[mvno_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_mvnos].[category_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_mvnos].[tariff_type_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="297" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_mvnos].[launch_date]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_mvnos].[url]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_mvnos].[is_brand]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="293" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_mvnos].[is_data_only]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="294" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_mvnos].[has_data]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="291" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_mvnos].[has_group_data]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="292" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_mvnos].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="290" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_mvnos].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="289" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_mvnos].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="296" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_mvnos].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="295" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_mvnos].[is_branded_reseller]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="70" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_mvnos].[full_mvno]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="71" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_mvnos].[note]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2048" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_mvnos].[secondary_category_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="525" />
		</Element>
		<Element Type="SqlView" Name="[dbo].[ds_organisation_data]">
			<Property Name="IsSchemaBound" Value="True" />
			<Property Name="QueryScript">
				<Value><![CDATA[ select 
od.id as "id", 
od.fk_organisation_id AS "organisation_id", 
m.id AS "metric_id", 
att.id AS "attribute_id",
od.fk_status_id AS "status_id", 
od.fk_privacy_id AS "privacy_id", 
od.[date],
od.date_type,
od.val AS "val_d", 
od.val AS "val_i", 
cur.id AS "currency_id", 
s.id AS "source_id", 
conf.id AS "confidence_id",
od.has_flags AS "has_flags",
od.is_calculated AS "is_calculated",
NULL AS "import_id",
NULL AS "import_merge_hash",
od.created_on AS "created_on",
0 AS "created_by",
odv.link_date AS "last_update_on",
0 AS "last_update_by"

from dbo.organisation_data_view_link as odv
inner join dbo.organisation_data as od ON od.id=odv.fk_organisation_data_id
inner join dbo.organisations as o ON o.id=od.fk_organisation_id
inner join dbo.metrics as m ON m.id=od.fk_metric_id
inner join dbo.attributes as att ON att.id=od.fk_attribute_id
inner join dbo.sources as s ON s.id=od.fk_source_id
inner join dbo.confidence as conf ON conf.id=od.fk_confidence_id
inner join dbo.currencies as cur ON cur.id=od.fk_currency_id
inner join dbo.organisation_zone_link as ozl ON ozl.organisation_id=od.fk_organisation_id
inner join dbo.zones as z ON z.id=ozl.zone_id
inner join dbo.data_sets_master as ds ON (ds.fk_metric_id=od.fk_metric_id and ds.fk_attribute_id=od.fk_attribute_id)
inner join dbo.definitions as df ON (ds.fk_metric_id=df.metric_id and ds.fk_attribute_id=df.attribute_id)
--inner join dbo.organisation_data_metadata as dm ON od.id = dm.fk_organisation_data_id 

where odv.fk_data_view_id = 3
and odv.archive=0
and ds.id is not null
and o.id is not null
and od.archive=0]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_organisation_data].[id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_organisation_data].[organisation_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data].[fk_organisation_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_organisation_data].[metric_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[metrics].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_organisation_data].[attribute_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[attributes].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_organisation_data].[status_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data].[fk_status_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_organisation_data].[privacy_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data].[fk_privacy_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_organisation_data].[date]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_organisation_data].[date_type]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data].[date_type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_organisation_data].[val_d]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data].[val]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_organisation_data].[val_i]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data].[val]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_organisation_data].[currency_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[currencies].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_organisation_data].[source_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[sources].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_organisation_data].[confidence_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[confidence].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_organisation_data].[has_flags]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data].[has_flags]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_organisation_data].[is_calculated]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data].[is_calculated]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_organisation_data].[import_id]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_organisation_data].[import_merge_hash]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_organisation_data].[created_on]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data].[created_on]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_organisation_data].[created_by]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_organisation_data].[last_update_on]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data_view_link].[link_date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_organisation_data].[last_update_by]" />
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References Name="[dbo].[organisation_data_view_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_view_link].[fk_organisation_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[definitions]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[definitions].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[definitions].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_privacy_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[val]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[val]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[created_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_view_link].[link_date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_view_link].[fk_data_view_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_view_link].[archive]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[archive]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1686" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE VIEW [dbo].[ds_organisation_data] WITH SCHEMABINDING AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[ds_service_data]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_service_data].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_service_data].[service_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_service_data].[metric_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_service_data].[attribute_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_service_data].[status_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="303" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_service_data].[privacy_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="302" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_service_data].[date]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_service_data].[date_type]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_service_data].[val_d]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_service_data].[val_i]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_service_data].[currency_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_service_data].[source_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_service_data].[confidence_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_service_data].[has_flags]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="300" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_service_data].[is_calculated]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="301" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_service_data].[import_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_service_data].[import_merge_hash]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_service_data].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="299" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_service_data].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="298" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_service_data].[last_update_on]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_service_data].[last_update_by]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="526" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="527" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="528" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="529" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="530" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="531" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="532" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="533" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="534" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[ds_survey_data]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_survey_data].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_survey_data].[survey_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_survey_data].[zone_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_survey_data].[respondent_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_survey_data].[acquisition_type_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_survey_data].[question_number_major]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_survey_data].[question_number_minor]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_survey_data].[val_i]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[ds_survey_data].[val_t]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="535" />
		</Element>
		<Element Type="SqlView" Name="[dbo].[ds_zone_data]">
			<Property Name="IsSchemaBound" Value="True" />
			<Property Name="QueryScript">
				<Value><![CDATA[ select  
od.id as "id", 
od.fk_zone_id AS "zone_id",
od.fk_metric_id AS "metric_id",
att.id AS "attribute_id", 
od.fk_status_id AS "status_id",
od.fk_privacy_id AS "privacy_id",
od.[date] AS "date",
od.date_type AS "date_type",
od.val AS "val_d", 
od.val AS "val_i", 
cur.id AS "currency_id", 
s.id AS "source_id", 
conf.id AS "confidence_id", 
od.has_flags AS "has_flags",
od.is_calculated AS "is_calculated",
od.is_spot_price AS "is_spot",
NULL AS "import_id",
odv.created AS "created_on",
0 AS "created_by",
odv.created AS "last_update_on",
0 AS "last_updated_by",
odv.fk_data_view_id

from dbo.zone_data_view_link as odv
inner join dbo.zone_data as od ON od.id=odv.fk_zone_data_id
inner join dbo.zones as o ON o.id=od.fk_zone_id
inner join dbo.types as ot ON ot.id=o.fk_type_id
inner join dbo.metrics as m ON m.id=od.fk_metric_id
inner join dbo.attributes as att ON att.id=od.fk_attribute_id
inner join dbo.sources as s ON s.id=od.fk_source_id
inner join dbo.confidence as conf ON conf.id=od.fk_confidence_id
inner join dbo.currencies as cur ON cur.id=od.fk_currency_id
inner join dbo.data_sets_master as ds ON (ds.fk_metric_id=od.fk_metric_id and ds.fk_attribute_id=od.fk_attribute_id)
inner join dbo.definitions as df ON (df.metric_id=od.fk_metric_id and df.attribute_id=od.fk_attribute_id)
--inner join dbo.zone_data_metadata as dm ON od.id = dm.fk_zone_data_id 

where odv.fk_data_view_id = 3
and odv.archive=0
and ds.id is not null
and o.id is not null
and od.archive=0]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_zone_data].[id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_zone_data].[zone_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[fk_zone_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_zone_data].[metric_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[fk_metric_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_zone_data].[attribute_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[attributes].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_zone_data].[status_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[fk_status_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_zone_data].[privacy_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[fk_privacy_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_zone_data].[date]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_zone_data].[date_type]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[date_type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_zone_data].[val_d]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[val]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_zone_data].[val_i]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[val]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_zone_data].[currency_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[currencies].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_zone_data].[source_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[sources].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_zone_data].[confidence_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[confidence].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_zone_data].[has_flags]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[has_flags]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_zone_data].[is_calculated]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[is_calculated]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_zone_data].[is_spot]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[is_spot_price]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_zone_data].[import_id]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_zone_data].[created_on]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data_view_link].[created]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_zone_data].[created_by]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_zone_data].[last_update_on]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data_view_link].[created]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_zone_data].[last_updated_by]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[ds_zone_data].[fk_data_view_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data_view_link].[fk_data_view_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References Name="[dbo].[zone_data_view_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_view_link].[fk_zone_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[types]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[types].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[fk_type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[definitions]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[definitions].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[definitions].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_privacy_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[val]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[val]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[is_spot_price]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_view_link].[created]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_view_link].[created]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_view_link].[fk_data_view_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_view_link].[archive]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[archive]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1574" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE VIEW [dbo].[ds_zone_data] WITH SCHEMABINDING AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[event_logs]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[event_logs].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[event_logs].[event_date]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="75" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[event_logs].[event_data]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="4096" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[event_logs].[user_data]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[event_logs].[event_type]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="100" />
		</Element>
		<Element Type="SqlScalarFunction" Name="[dbo].[excel_serial_to_datetime]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[excel_serial_to_datetime].[@serial]" />
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
BEGIN
	RETURN DATEADD(second, (@serial - 25569) * 86400, {d '1970-01-01'})	-- To unix timestamp, then datetime conversion
END]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="CreateOffset" Value="2" />
							<Property Name="Length" Value="227" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE FUNCTION [dbo].[excel_serial_to_datetime]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@serial int&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;RETURNS datetime&#xD;&#xA;&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[excel_serial_to_datetime].[@serial]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[datetime]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[favourite_user_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[favourite_user_link].[favourite_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[favourite_user_link].[user_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[favourite_user_link].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="304" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[favourite_user_link].[IX_favourite_user_link]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[favourite_user_link].[user_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[favourite_user_link].[favourite_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[favourite_user_link]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlFullTextIndex" Name="[dbo].[feed]" Disambiguator="5">
			<Relationship Name="Catalog">
				<Entry>
					<References Name="[search]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlFullTextIndexColumnSpecifier">
						<Property Name="LanguageId" Value="0" />
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[feed].[entry]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[feed]" />
				</Entry>
			</Relationship>
			<Relationship Name="KeyName">
				<Entry>
					<References Name="[dbo].[PK_feed]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[feed]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[feed].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[feed].[zone_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[feed].[organisation_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[feed].[entry]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[feed].[source]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[feed].[url]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[feed].[status]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="315" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[feed].[has_image]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="307" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[feed].[thumbnail_width]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[feed].[thumbnail_height]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[feed].[is_meta]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="310" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[feed].[is_action]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="308" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[feed].[is_analysis]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="309" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[feed].[is_private]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="311" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[feed].[published]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="314" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[feed].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="306" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[feed].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="305" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[feed].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="313" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[feed].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="312" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="536" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[feed_entity_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[feed_entity_link].[feed_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[feed_entity_link].[entity_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[feed_entity_link].[table]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[feed_entity_link].[IX_feed_entity_link_entity_id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[feed_entity_link].[entity_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[feed_entity_link]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[feed_entity_link].[IX_feed_entity_link_feed_id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[feed_entity_link].[feed_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[feed_entity_link]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[feed_tag_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[feed_tag_link].[feed_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[feed_tag_link].[tag_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[feed_tag_link].[IX_feed_tag_link_feed_id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[feed_tag_link].[feed_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[feed_tag_link]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[feed_tag_link].[IX_feed_tag_link_tag_id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[feed_tag_link].[tag_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[feed_tag_link]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[feedback]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[feedback].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[feedback].[subject]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[feedback].[entry]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[feedback].[is_bug]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="318" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[feedback].[status]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[tinyint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="321" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[feedback].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="316" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[feedback].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="317" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[feedback].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="319" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[feedback].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="320" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[fields]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[fields].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[fields].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[fields].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="323" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[fields].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="322" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[fields].[last_update_on]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[fields].[last_update_by]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="537" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[files]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[files].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[files].[type_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[files].[subtype_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[files].[folder]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[files].[file]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[files].[file_extension]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[files].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="325" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[files].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="324" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="538" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[files].[IX_files]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[files].[folder]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[files]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK__organisat__fk_or__034C7B9C]">
			<Property Name="OnUpdateAction" Value="1" />
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[group_data_view_link].[fk_group_data_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[group_data_view_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[group_data].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[group_data]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="539" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK__zone__fk_at__522955FD]">
			<Property Name="OnUpdateAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[zone_data].[fk_attribute_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[zone_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="540" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK__zone__fk_co__56EE0B1A]">
			<Property Name="OnUpdateAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[zone_data].[fk_confidence_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[zone_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[confidence].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[confidence]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="541" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK__zone__fk_cu__5505C2A8]">
			<Property Name="OnUpdateAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[zone_data].[fk_currency_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[zone_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[currencies].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[currencies]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="542" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK__zone__fk_me__513531C4]">
			<Property Name="OnUpdateAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[zone_data].[fk_metric_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[zone_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[metrics]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="543" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK__zone__fk_or__50410D8B]">
			<Property Name="OnUpdateAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[zone_data].[fk_zone_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[zone_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="544" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK__zone__fk_pr__54119E6F]">
			<Property Name="OnUpdateAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[zone_data].[fk_privacy_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[zone_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[privacy].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[privacy]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="545" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK__zone__fk_so__55F9E6E1]">
			<Property Name="OnUpdateAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[zone_data].[fk_source_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[zone_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[sources].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[sources]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="546" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK__zone__fk_st__531D7A36]">
			<Property Name="OnUpdateAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[zone_data].[fk_status_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[zone_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[status].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[status]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="547" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[fk_atrb_id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_attribute_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[data_sets_master]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="240" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[fk_attr_id]">
			<Property Name="OnUpdateAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_attribute_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisation_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="548" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[fk_conf_id]">
			<Property Name="OnUpdateAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_confidence_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisation_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[confidence].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[confidence]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="549" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[fk_curr_id]">
			<Property Name="OnUpdateAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_currency_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisation_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[currencies].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[currencies]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="550" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[fk_data_sets_master_to_alt]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[data_sets_master_alternative].[fk_data_sets_master_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[data_sets_master_alternative]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[data_sets_master].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[data_sets_master]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="242" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[fk_data_sets_view_link]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[data_sets_master_alternative].[fk_data_view_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[data_sets_master_alternative]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[data_views].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[data_views]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="243" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_deployment_organisation_link_deployments]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[deployment_organisation_link].[deployment_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[deployment_organisation_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[deployments].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[deployments]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="248" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_deployment_organisation_link_organisations]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[deployment_organisation_link].[organisation_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[deployment_organisation_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="249" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_deployment_organisation_link_types]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[deployment_organisation_link].[type_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[deployment_organisation_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[types].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[types]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="250" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_deployment_sector_link_attributes]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[deployment_sector_link].[sector_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[deployment_sector_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="252" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_deployment_sector_link_deployments]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[deployment_sector_link].[deployment_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[deployment_sector_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[deployments].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[deployments]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="253" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_deployment_zone_link_deployments]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[deployment_zone_link].[deployment_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[deployment_zone_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[deployments].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[deployments]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="255" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_deployment_zone_link_zones]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[deployment_zone_link].[zone_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[deployment_zone_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="256" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_deployments_attributes]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[deployments].[status_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[deployments]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="262" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_df_service_data_attributes_privacy]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[df_service_data].[privacy_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[df_service_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="412" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_df_service_data_attributes_status]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[df_service_data].[status_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[df_service_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="413" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_df_service_data_currencies]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[df_service_data].[currency_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[df_service_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[currencies].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[currencies]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="414" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_ds_service_data_attributes]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[ds_service_data].[attribute_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[ds_service_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="527" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_ds_service_data_attributes_confidence]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[ds_service_data].[confidence_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[ds_service_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="528" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_ds_service_data_attributes_privacy]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[ds_service_data].[privacy_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[ds_service_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="529" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_ds_service_data_attributes_status]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[ds_service_data].[status_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[ds_service_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="530" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_ds_service_data_currencies]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[ds_service_data].[currency_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[ds_service_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[currencies].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[currencies]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="531" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_ds_service_data_deployments]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[ds_service_data].[service_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[ds_service_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[deployments].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[deployments]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="532" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_ds_service_data_metrics]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[ds_service_data].[metric_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[ds_service_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[metrics]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="533" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_ds_service_data_sources]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[ds_service_data].[source_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[ds_service_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[sources].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[sources]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="534" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[fk_dt_vw_id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[group_data_view_link_history].[fk_data_view_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[group_data_view_link_history]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[data_views].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[data_views]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="551" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[fk_fg_id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[organisation_data_flags_link].[fk_flag_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisation_data_flags_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[flags].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[flags]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="552" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[fk_fg_zd_id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[zone_data_flags_link].[fk_flag_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[zone_data_flags_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[flags].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[flags]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="553" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[fk_grp_data_id]">
			<Property Name="OnUpdateAction" Value="1" />
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[group_data_view_link_history].[fk_group_data_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[group_data_view_link_history]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[group_data].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[group_data]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="554" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[fk_met_id]">
			<Property Name="OnUpdateAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_metric_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisation_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[metrics]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="555" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[fk_mtr_id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_metric_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[data_sets_master]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[metrics]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="241" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[fk_org_data_vw_id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[organisation_data_view_link].[fk_data_view_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisation_data_view_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[data_views].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[data_views]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="556" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[fk_org_id]">
			<Property Name="OnUpdateAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_organisation_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisation_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="557" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[fk_organisation_data_id]">
			<Property Name="OnUpdateAction" Value="1" />
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[organisation_data_view_link].[fk_organisation_data_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisation_data_view_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[organisation_data].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[organisation_data]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="558" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_organisation_events_organisations]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[organisation_events].[organisation_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisation_events]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="559" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_organisation_events_organisations_2]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[organisation_events].[ref_organisation_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisation_events]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="560" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_organisation_events_status]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[organisation_events].[status_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisation_events]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[status].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[status]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="561" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[fk_orgs_dt_fl_lk]">
			<Property Name="OnUpdateAction" Value="1" />
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[organisation_data_flags_link].[fk_organisation_data_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisation_data_flags_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[organisation_data].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[organisation_data]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="562" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[fk_priv_id]">
			<Property Name="OnUpdateAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_privacy_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisation_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[privacy].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[privacy]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="563" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_sector_field_link_attributes]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[sector_field_link].[sector_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[sector_field_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="564" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_sector_field_link_fields]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[sector_field_link].[field_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[sector_field_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[fields].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[fields]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="565" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_sessions_users]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[sessions].[user_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[sessions]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[users].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[users]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="566" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[fk_srce_id]">
			<Property Name="OnUpdateAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_source_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisation_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[sources].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[sources]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="567" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[fk_stat_id]">
			<Property Name="OnUpdateAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_status_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisation_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[status].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[status]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="568" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_users_roles]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[users].[role_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[users]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[roles].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[roles]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="569" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[fk_zd_dt_id]">
			<Property Name="OnUpdateAction" Value="1" />
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[zone_data_flags_link].[fk_zone_data_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[zone_data_flags_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[zone_data].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[zone_data]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="570" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[fk_zdid]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[zone_data_view_link].[fk_zone_data_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[zone_data_view_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[zone_data].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[zone_data]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="571" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[fk_zid]">
			<Property Name="OnUpdateAction" Value="1" />
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[zone_data_metadata].[fk_zone_data_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[zone_data_metadata]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[zone_data].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[zone_data]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="572" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[fk_zid_vid]">
			<Property Name="OnUpdateAction" Value="1" />
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[zone_data_view_link].[fk_data_view_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[zone_data_view_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[data_views].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[data_views]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="573" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[flag_ds_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[flag_ds_link].[ds]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[flag_ds_link].[ds_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[flag_ds_link].[flag_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[flag_ds_link].[IX_flag_ds_link_ds]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[flag_ds_link].[ds]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[flag_ds_link].[ds_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[flag_ds_link]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[flag_ds_link].[IX_flag_ds_link_flag]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[flag_ds_link].[flag_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[flag_ds_link].[ds]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[flag_ds_link]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[flag_organisation_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[flag_organisation_link].[organisation_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[flag_organisation_link].[flag_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[flag_organisation_link].[IX_flag_organisation_link]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[flag_organisation_link].[organisation_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[flag_organisation_link].[flag_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[flag_organisation_link]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[flag_organisation_link].[IX_flag_organisation_link_flag]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[flag_organisation_link].[flag_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[flag_organisation_link]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[flags]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[flags].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[flags].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[flags].[definition]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[flags].[order]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[flags].[publish]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="330" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[flags].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="327" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[flags].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="326" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[flags].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="329" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[flags].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="328" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="574" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[forecasting_accuracy]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[forecasting_accuracy].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[forecasting_accuracy].[fk_organisation_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[forecasting_accuracy].[date_type]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[forecasting_accuracy].[date]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[forecasting_accuracy].[fk_group_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[forecasting_accuracy].[reported_value]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[forecasting_accuracy].[prev_3_months]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[forecasting_accuracy].[prev_6_months]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[forecasting_accuracy].[prev_12_months]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[forecasting_accuracy].[is_outlier]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="8" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[group_data]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data].[fk_organisation_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data].[fk_metric_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data].[fk_attribute_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data].[fk_status_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data].[fk_privacy_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data].[date]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data].[date_type]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data].[val_sum]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data].[fk_currency_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data].[fk_source_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data].[fk_confidence_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data].[has_flags]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data].[is_calculated]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data].[archive]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="76" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data].[is_forecast_upload]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data].[file_source]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data].[val_proportionate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data].[ownership]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="101" />
			<AttachedAnnotation Disambiguator="82" />
			<AttachedAnnotation Disambiguator="83" />
			<AttachedAnnotation Disambiguator="84" />
			<AttachedAnnotation Disambiguator="85" />
			<AttachedAnnotation Disambiguator="86" />
			<AttachedAnnotation Disambiguator="87" />
			<AttachedAnnotation Disambiguator="88" />
			<AttachedAnnotation Disambiguator="89" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[group_data].[idx_grp_data]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[group_data].[fk_organisation_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[group_data].[fk_metric_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[group_data].[fk_attribute_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[group_data].[fk_status_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[group_data].[fk_privacy_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[group_data].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[group_data].[date_type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[group_data].[val_sum]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[group_data].[fk_currency_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[group_data].[fk_source_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[group_data].[fk_confidence_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[group_data].[val_proportionate]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[group_data].[ownership]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[group_data].[archive]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[group_data].[has_flags]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[group_data]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTableType" Name="[dbo].[group_data_links_type]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[group_data_links_type].[id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[group_data_links_type].[fk_organisation_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[group_data_links_type].[fk_metric_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[group_data_links_type].[fk_attribute_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[group_data_links_type].[fk_status_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[group_data_links_type].[fk_privacy_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[group_data_links_type].[date]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[group_data_links_type].[date_type]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[group_data_links_type].[val_sum]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[group_data_links_type].[fk_currency_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[group_data_links_type].[fk_source_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[group_data_links_type].[fk_confidence_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[group_data_links_type].[has_flags]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[group_data_links_type].[is_calculated]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[group_data_links_type].[created_on]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[group_data_links_type].[created_by]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[group_data_links_type].[archive]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[group_data_links_type].[is_forecast_upload]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[group_data_links_type].[file_source]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[group_data_links_type].[val_proportionate]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[group_data_links_type].[ownership]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[group_data_reported]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data_reported].[ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data_reported].[fk_organisation_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data_reported].[organisation_name]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data_reported].[fk_metric_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data_reported].[metric_name]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data_reported].[fk_attribute_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data_reported].[attribute_name]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data_reported].[fk_status_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data_reported].[fk_privacy_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data_reported].[date]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data_reported].[date_type]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data_reported].[val]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data_reported].[fk_currency_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data_reported].[iso_code]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="10" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data_reported].[fk_source_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data_reported].[source_name]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data_reported].[fk_confidence_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data_reported].[confidence_name]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data_reported].[archive]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data_reported].[location]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data_reported].[definition]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="300" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data_reported].[notes]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="500" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data_reported].[created]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="575" />
		</Element>
		<Element Type="SqlTableType" Name="[dbo].[group_data_type]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[group_data_type].[fk_organisation_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[group_data_type].[fk_metric_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[group_data_type].[fk_attribute_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[group_data_type].[fk_status_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[group_data_type].[fk_privacy_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[group_data_type].[date]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[group_data_type].[date_type]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[group_data_type].[val_sum]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[group_data_type].[fk_currency_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[group_data_type].[fk_source_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[group_data_type].[fk_confidence_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[group_data_type].[has_flags]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[group_data_type].[is_calculated]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[group_data_type].[created_on]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[group_data_type].[created_by]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[group_data_type].[archive]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[group_data_type].[is_forecast_upload]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[group_data_type].[file_source]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[group_data_type].[val_proportionate]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[group_data_type].[ownership]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[group_data_view_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data_view_link].[fk_group_data_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data_view_link].[fk_data_view_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data_view_link].[link_date]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data_view_link].[archive]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="27" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="81" />
			<AttachedAnnotation Disambiguator="539" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[group_data_view_link].[PT_organisation_data_view_id]">
			<Property Name="IsUnique" Value="True" />
			<Property Name="IsClustered" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[group_data_view_link].[fk_group_data_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[group_data_view_link].[fk_data_view_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[group_data_view_link]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[group_data_view_link_history]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data_view_link_history].[fk_group_data_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data_view_link_history].[fk_data_view_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[group_data_view_link_history].[link_date]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="551" />
			<AttachedAnnotation Disambiguator="554" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[industry_events]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[industry_events].[zone_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[industry_events].[organisation_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[industry_events].[attribute_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[industry_events].[type_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[industry_events].[status_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[industry_events].[event_date]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[industry_events].[date_type]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[invitations]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[invitations].[user_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[invitations].[status]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="338" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlScalarFunction" Name="[dbo].[is_leap_year]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[is_leap_year].[@year]" />
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
BEGIN
	RETURN CASE WHEN (@year % 4 = 0 AND @year % 100 <> 0) OR @year % 400 = 0 THEN 1 ELSE 0 END
END]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="CreateOffset" Value="2" />
							<Property Name="Length" Value="184" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE FUNCTION [dbo].[is_leap_year]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@year int&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;RETURNS bit&#xD;&#xA;&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[is_leap_year].[@year]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[bit]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTableType" Name="[dbo].[iterator]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[iterator].[term]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="8" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[iterator].[processed]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlView" Name="[dbo].[jira_feeds_view]">
			<Property Name="QueryScript">
				<Value><![CDATA[ select fe.id, fe.entry, z.name AS "zone", z.id AS "zoneId", o.name + ' (' + oz.name + ')' AS "organisationName", o.id AS "organisationId", fe.source, fe.url, RIGHT(CONVERT(VARCHAR(11), fe.created_on, 106), 8) AS "date", fe.created_on
FROM dbo.feed AS fe
LEFT JOIN dbo.feed_entity_link AS felz ON (felz.feed_id=fe.id AND felz.[table]='zones')
LEFT JOIN dbo.feed_entity_link AS felo ON (felo.feed_id=fe.id AND felo.[table]='organisations')
LEFT JOIN dbo.zones AS z ON z.id=felz.entity_id
LEFT JOIN dbo.organisations AS o ON o.id=felo.entity_id
LEFT JOIN dbo.organisation_zone_link AS ozl ON ozl.organisation_id=o.id
LEFT JOIN dbo.zones AS oz ON oz.id=ozl.zone_id]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[jira_feeds_view].[id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[feed].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[jira_feeds_view].[entry]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[feed].[entry]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[jira_feeds_view].[zone]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zones].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[jira_feeds_view].[zoneId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zones].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[jira_feeds_view].[organisationName]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[jira_feeds_view].[organisationId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisations].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[jira_feeds_view].[source]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[feed].[source]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[jira_feeds_view].[url]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[feed].[url]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[jira_feeds_view].[date]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[jira_feeds_view].[created_on]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[feed].[created_on]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References Name="[dbo].[feed]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[feed_entity_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[feed_entity_link].[feed_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[feed].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[feed_entity_link].[table]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[feed_entity_link].[feed_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[feed_entity_link].[table]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[feed_entity_link].[entity_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[feed_entity_link].[entity_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[feed].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[feed].[entry]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[feed].[source]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[feed].[url]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[feed].[created_on]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="706" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE VIEW [dbo].[jira_feeds_view] AS" />
			</Annotation>
		</Element>
		<Element Type="SqlView" Name="[dbo].[jira_network_list]">
			<Property Name="QueryScript">
				<Value><![CDATA[ SELECT att.name, s.id AS "statusId", s.name AS "status", RIGHT(CONVERT(VARCHAR(11), n.launch_date, 106), 8) AS "date", n.organisation_id, n.launch_date
FROM dbo.networks AS n
LEFT JOIN dbo.attributes as att ON att.id=n.technology_id
LEFT JOIN dbo.status AS s ON s.id=n.status_id]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[jira_network_list].[name]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[attributes].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[jira_network_list].[statusId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[status].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[jira_network_list].[status]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[status].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[jira_network_list].[date]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[jira_network_list].[organisation_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[networks].[organisation_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[jira_network_list].[launch_date]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[networks].[launch_date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References Name="[dbo].[networks]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[networks].[technology_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[status]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[status].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[networks].[status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[status].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[status].[name]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[networks].[launch_date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[networks].[organisation_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="322" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE VIEW [dbo].[jira_network_list] AS" />
			</Annotation>
		</Element>
		<Element Type="SqlView" Name="[dbo].[jira_organisation_zones_view]">
			<Property Name="QueryScript">
				<Value><![CDATA[ select org.id, org.name + ' (' + z.name + ')' AS name, z.id AS zone_id
FROM dbo.organisations AS org
LEFT JOIN dbo.organisation_zone_link AS ozl ON ozl.organisation_id=org.id
LEFT JOIN dbo.zones AS z ON z.id=ozl.zone_id
WHERE org.name IS NOT NULL AND z.name IS NOT NULL 
AND org.published=1
AND z.fk_type_id=38]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[jira_organisation_zones_view].[id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisations].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[jira_organisation_zones_view].[name]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[jira_organisation_zones_view].[zone_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zones].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[published]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[fk_type_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="368" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE VIEW [dbo].[jira_organisation_zones_view] AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[jobs]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[jobs].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[jobs].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[jobs].[file]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[jobs].[schedule]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[jobs].[type]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="4" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[jobs].[order]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[jobs].[is_enabled]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="341" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[jobs].[is_running]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="342" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[jobs].[last_exit_was_error]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="343" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[jobs].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="340" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[jobs].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="339" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[jobs].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="345" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[jobs].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="344" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[jobs].[last_run_started_on]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[jobs].[last_run_finished_on]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[jobs].[last_run_by]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="576" />
		</Element>
		<Element Type="SqlView" Name="[dbo].[latest_organisation_launch_dates]">
			<Property Name="QueryScript">
				<Value><![CDATA[ SELECT organisation_id, oe.date, oe.status_id, rank = ROW_NUMBER() 
OVER (PARTITION BY oe.organisation_id, oe.status_id ORDER BY oe.created_on DESC)
FROM	dbo.organisation_events as oe
where oe.date is not null
and oe.status_id=1578]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[latest_organisation_launch_dates].[organisation_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_events].[organisation_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[latest_organisation_launch_dates].[date]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_events].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[latest_organisation_launch_dates].[status_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_events].[status_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[latest_organisation_launch_dates].[rank]" />
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References Name="[dbo].[organisation_events]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_events].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_events].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_events].[status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_events].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_events].[created_on]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="291" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE VIEW [dbo].[latest_organisation_launch_dates] AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[log_data_events]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_data_events].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_data_events].[event]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_data_events].[organisation_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_data_events].[metric_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_data_events].[attribute_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_data_events].[date]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_data_events].[date_type]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_data_events].[status_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="348" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_data_events].[severity]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="347" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_data_events].[value_input]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="8" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_data_events].[value_input_2]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="8" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_data_events].[value_output]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="8" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_data_events].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="346" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_data_events].[completed_on]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="577" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[log_forecasting]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_forecasting].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_forecasting].[organisation_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_forecasting].[date]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_forecasting].[connections_start]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_forecasting].[connections_end]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_forecasting].[connections_previous]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_forecasting].[delta]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_forecasting].[priority]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_forecasting].[status]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="357" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_forecasting].[note]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_forecasting].[reviewed]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="350" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_forecasting].[review]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_forecasting].[log_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_forecasting].[log]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_forecasting].[category_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_forecasting].[created_on]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="353" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_forecasting].[created_by]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="351" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_forecasting].[last_update_on]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="356" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_forecasting].[last_update_by]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="355" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_forecasting].[claimed_by]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="578" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[log_forecasting].[IX_log_reporting_created_on]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Property Name="IsAscending" Value="False" />
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[log_forecasting].[created_on]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[log_forecasting]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[log_forecasting].[IX_log_reporting_organisation_id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[log_forecasting].[organisation_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Property Name="IsAscending" Value="False" />
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[log_forecasting].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[log_forecasting]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[log_model_versions]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_model_versions].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_model_versions].[zone_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_model_versions].[version]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_model_versions].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="349" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="579" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[log_reporting]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_reporting].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_reporting].[metric_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_reporting].[attribute_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_reporting].[date]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_reporting].[date_type]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_reporting].[organisations_count]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_reporting].[organisations_market_share]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_reporting].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="354" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[log_reporting].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="352" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="580" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[log_reporting].[IX_log_reporting]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[log_reporting].[metric_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[log_reporting].[attribute_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[log_reporting]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[merge_reported_forecasted_figures]">
			<Property Name="BodyScript">
				<Value><![CDATA[

CREATE TABLE #reported_data (id int)
CREATE TABLE #forecast_data (id int)

BEGIN TRY
	insert into #reported_data
	SELECT
		  CASE WHEN A.id IS null THEN B.id ELSE A.id END AS "id"
	 
	FROM (
		  --Query returns latest ranked reported figures
		  SELECT od.id, od.organisation_id, od.metric_id, od.attribute_id, od.[date], od.date_type, od.val_d, 
				od.val_i, od.currency_id, od.source_id, od.confidence_id, od.privacy_id, od.has_flags, od.location, 
				od.location_cleaned, od.definition, od.notes
		  FROM wi_master.dbo.latest_ranked_reported_quarterly_data AS lrrd
		  LEFT JOIN wi_import.dbo.ds_organisation_data AS od ON od.id=lrrd.id
		  WHERE lrrd.rank=1
		  AND od.date_type='Q'
	) AS A
	FULL OUTER JOIN (
		  --FULL OUTER JOIN on the right forecasted figures. Query returns latest ranked forecasted figures
		  SELECT od.id, od.organisation_id, od.metric_id, od.attribute_id, od.[date], od.date_type, od.val_d, 
				od.val_i, od.currency_id, od.source_id, od.confidence_id, od.privacy_id
		  FROM wi_master.dbo.latest_ranked_forecast_quarterly_data AS lrfd
		  LEFT JOIN wi_import.dbo.ds_organisation_forecast_data AS od ON lrfd.id=od.id
		  WHERE lrfd.rank=1
		  AND od.date_type='Q'
	) AS B ON (
		  A.organisation_id=B.organisation_id
		  AND A.metric_id=B.metric_id
		  AND A.attribute_id=B.attribute_id
		  AND A.[date]=B.[date]
		  AND A.date_type=B.date_type
	)
	WHERE A.id IS NOT NULL
END TRY  
BEGIN CATCH  
	execute [dbo].[collect_errors] @query_string = 'insert into #reported_data'
END CATCH  


BEGIN TRY
	insert into #forecast_data
	SELECT
		  CASE WHEN A.id IS null THEN B.id ELSE A.id END AS "id"
	 
	FROM (
		  --Query returns latest ranked reported figures
		  SELECT od.id, od.organisation_id, od.metric_id, od.attribute_id, od.[date], od.date_type, od.val_d, 
				od.val_i, od.currency_id, od.source_id, od.confidence_id, od.privacy_id, od.has_flags, od.location, 
				od.location_cleaned, od.definition, od.notes
		  FROM wi_master.dbo.latest_ranked_reported_quarterly_data AS lrrd
		  LEFT JOIN wi_import.dbo.ds_organisation_data AS od ON od.id=lrrd.id
		  WHERE lrrd.rank=1
		  AND od.date_type='Q'
	) AS A
	FULL OUTER JOIN (
		  --FULL OUTER JOIN on the right forecasted figures. Query returns latest ranked forecasted figures
		  SELECT od.id, od.organisation_id, od.metric_id, od.attribute_id, od.[date], od.date_type, od.val_d, 
				od.val_i, od.currency_id, od.source_id, od.confidence_id, od.privacy_id
		  FROM wi_master.dbo.latest_ranked_forecast_quarterly_data AS lrfd
		  LEFT JOIN wi_import.dbo.ds_organisation_forecast_data AS od ON lrfd.id=od.id
		  WHERE lrfd.rank=1
		  AND od.date_type='Q'
	) AS B ON (
		  A.organisation_id=B.organisation_id
		  AND A.metric_id=B.metric_id
		  AND A.attribute_id=B.attribute_id
		  AND A.[date]=B.[date]
		  AND A.date_type=B.date_type
	)
	WHERE A.id IS NULL
END TRY  
BEGIN CATCH  
	execute [dbo].[collect_errors] @query_string = 'insert into #forecast_data'
END CATCH  



BEGIN TRY 
	TRUNCATE TABLE wi_import.gsmai.reported_data
	
	INSERT INTO wi_import.gsmai.reported_data
	SELECT id FROM #reported_data
END TRY  
BEGIN CATCH  
	execute [dbo].[collect_errors] @query_string = 'INSERT INTO wi_import.gsmai.reported_data'
END CATCH 
	
	
BEGIN TRY 
	TRUNCATE TABLE wi_import.gsmai.forecast_data
	
	INSERT INTO wi_import.gsmai.forecast_data
	SELECT id FROM #forecast_data
END TRY  
BEGIN CATCH  
	execute [dbo].[collect_errors] @query_string = 'INSERT INTO wi_import.gsmai.forecast_data'
END CATCH  


DROP TABLE #reported_data
DROP TABLE #forecast_data]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[merge_reported_forecasted_figures].[#reported_data]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[dbo].[collect_errors]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[collect_errors].[@query_string]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[merge_reported_forecasted_figures].[#forecast_data]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[merge_reported_forecasted_figures].[#reported_data].[id]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[merge_reported_forecasted_figures].[#forecast_data].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[merge_reported_forecasted_figures].[#reported_data]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[merge_reported_forecasted_figures].[#reported_data].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[merge_reported_forecasted_figures].[#forecast_data]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[merge_reported_forecasted_figures].[#forecast_data].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="3706" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[merge_reported_forecasted_figures] &#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[merge_zone_reported_forecasted_figures]">
			<Property Name="BodyScript">
				<Value><![CDATA[

CREATE TABLE #reported_data (id int)
CREATE TABLE #forecast_data (id int)

BEGIN TRY
	insert into #reported_data
	SELECT
		  CASE WHEN A.id IS null THEN B.id ELSE A.id END AS "id"

	FROM (
		  --Query returns latest ranked reported figures
		  SELECT od.id, od.zone_id, od.metric_id, od.attribute_id, od.[date], od.date_type, od.val_d, 
				od.val_i, od.currency_id, od.source_id, od.confidence_id, od.privacy_id, 0 AS "has_flags"
		  FROM wi_master.dbo.latest_ranked_zone_quarterly_data AS lrrd
		  LEFT JOIN wi_import.dbo.ds_zone_data AS od ON od.id=lrrd.id
		  WHERE lrrd.rank=1
		  AND od.date_type='Q'
	) AS A
	FULL OUTER JOIN (
		  --FULL OUTER JOIN on the right forecasted figures. Query returns latest ranked forecasted figures
		  SELECT od.id, od.zone_id, od.metric_id, od.attribute_id, od.[date], od.date_type, od.val_d, 
				od.val_i, od.currency_id, od.source_id, od.confidence_id, od.privacy_id, 0 AS "has_flags"
		  FROM wi_master.dbo.latest_ranked_zone_forecasted_quarterly_data AS lrfd
		  LEFT JOIN wi_import.dbo.ds_zone_forecast_data AS od ON lrfd.id=od.id
		  WHERE lrfd.rank=1
		  AND od.date_type='Q'
	) AS B ON (
		  A.zone_id=B.zone_id
		  AND A.metric_id=B.metric_id
		  AND A.attribute_id=B.attribute_id
		  AND A.[date]=B.[date]
		  AND A.date_type=B.date_type
	)
	WHERE A.id IS NOT NULL
END TRY  
BEGIN CATCH  
	execute [dbo].[collect_errors] @query_string = 'insert into #reported_data'
END CATCH  


BEGIN TRY
	insert into #forecast_data
	SELECT
		  CASE WHEN A.id IS null THEN B.id ELSE A.id END AS "id"

	FROM (
		  --Query returns latest ranked reported figures
		  SELECT od.id, od.zone_id, od.metric_id, od.attribute_id, od.[date], od.date_type, od.val_d, 
				od.val_i, od.currency_id, od.source_id, od.confidence_id, od.privacy_id, 0 AS "has_flags"
		  FROM wi_master.dbo.latest_ranked_zone_quarterly_data AS lrrd
		  LEFT JOIN wi_import.dbo.ds_zone_data AS od ON od.id=lrrd.id
		  WHERE lrrd.rank=1
		  AND od.date_type='Q'
	) AS A
	FULL OUTER JOIN (
		  --FULL OUTER JOIN on the right forecasted figures. Query returns latest ranked forecasted figures
		  SELECT od.id, od.zone_id, od.metric_id, od.attribute_id, od.[date], od.date_type, od.val_d, 
				od.val_i, od.currency_id, od.source_id, od.confidence_id, od.privacy_id, 0 AS "has_flags"
		  FROM wi_master.dbo.latest_ranked_zone_forecasted_quarterly_data AS lrfd
		  LEFT JOIN wi_import.dbo.ds_zone_forecast_data AS od ON lrfd.id=od.id
		  WHERE lrfd.rank=1
		  AND od.date_type='Q'
	) AS B ON (
		  A.zone_id=B.zone_id
		  AND A.metric_id=B.metric_id
		  AND A.attribute_id=B.attribute_id
		  AND A.[date]=B.[date]
		  AND A.date_type=B.date_type
	)
	WHERE A.id IS NULL
END TRY  
BEGIN CATCH  
	execute [dbo].[collect_errors] @query_string = 'insert into #forecast_data'
END CATCH  



BEGIN TRY
	TRUNCATE TABLE wi_import.gsmai.zone_reported_data
	
	INSERT INTO wi_import.gsmai.zone_reported_data
	SELECT id FROM #reported_data
END TRY  
BEGIN CATCH  
	execute [dbo].[collect_errors] @query_string = 'INSERT INTO wi_import.gsmai.zone_reported_data'
END CATCH  

BEGIN TRY
	TRUNCATE TABLE wi_import.gsmai.zone_forecast_data
	
	INSERT INTO wi_import.gsmai.zone_forecast_data
	SELECT id FROM #forecast_data
END TRY  
BEGIN CATCH  
	execute [dbo].[collect_errors] @query_string = 'INSERT INTO wi_import.gsmai.zone_forecast_data'
END CATCH  


DROP TABLE #reported_data
DROP TABLE #forecast_data]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[merge_zone_reported_forecasted_figures].[#reported_data]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[dbo].[collect_errors]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[collect_errors].[@query_string]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[merge_zone_reported_forecasted_figures].[#forecast_data]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[merge_zone_reported_forecasted_figures].[#reported_data].[id]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[merge_zone_reported_forecasted_figures].[#forecast_data].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[merge_zone_reported_forecasted_figures].[#reported_data]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[merge_zone_reported_forecasted_figures].[#reported_data].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[merge_zone_reported_forecasted_figures].[#forecast_data]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[merge_zone_reported_forecasted_figures].[#forecast_data].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="3555" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[merge_zone_reported_forecasted_figures]&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[metric_families]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[metric_families].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[metric_families].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[metric_families].[order]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[metric_families].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="361" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[metric_families].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="360" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[metric_families].[last_update_on]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[metric_families].[last_update_by]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="581" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[metric_family_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[metric_family_link].[family_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[metric_family_link].[metric_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[metric_import_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[metric_import_link].[metric_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[metric_import_link].[attribute_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[metric_import_link].[currency_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="362" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[metric_import_link].[unit_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="364" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[metric_import_link].[is_calculated]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="363" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[metric_import_link].[source_organisation_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[metric_import_link].[code]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[metric_import_link].[note]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlScalarFunction" Name="[dbo].[metric_is_currency_based]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[metrics]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[currency_based]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metric_is_currency_based].[@metric_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
BEGIN
	RETURN CASE (SELECT currency_based FROM metrics WHERE id = @metric_id) WHEN 1 THEN 1 ELSE 0 END
END]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="CreateOffset" Value="2" />
							<Property Name="Length" Value="206" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE FUNCTION [dbo].[metric_is_currency_based]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@metric_id int&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;RETURNS bit&#xD;&#xA;&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[metric_is_currency_based].[@metric_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[bit]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlScalarFunction" Name="[dbo].[metric_is_decimal]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[metrics]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metric_is_decimal].[@metric_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
BEGIN
	RETURN CASE (SELECT type_id FROM metrics WHERE id = @metric_id) WHEN 856 THEN 1 ELSE 0 END
END]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="CreateOffset" Value="2" />
							<Property Name="Length" Value="194" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE FUNCTION [dbo].[metric_is_decimal]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@metric_id int&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;RETURNS bit&#xD;&#xA;&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[metric_is_decimal].[@metric_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[bit]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[metrics]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[metrics].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[metrics].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[metrics].[term]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[metrics].[type_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[metrics].[unit_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[metrics].[currency_based]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[metrics].[has_attributes]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="367" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[metrics].[order]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[metrics].[published]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="368" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[metrics].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="359" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[metrics].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="358" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[metrics].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="366" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[metrics].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="365" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[metrics].[parent_metric_type_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="63" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="582" />
		</Element>
		<Element Type="SqlView" Name="[dbo].[multiplay_input_cl]">
			<Property Name="QueryScript">
				<Value><![CDATA[
SELECT        m.id AS Metric_Id, m.name AS Metric, a.id AS Attribute_Id, a.name AS Attribute, 'Q' + DATENAME(QUARTER, o.date) + ' ' + DATENAME(yyyy, o.date) AS DATE, o.val AS VALUE, c.name AS Currency, 
                         s.name AS Source, co.name AS Confidence, omd.location_cleaned AS LOCATION, '' AS Page, omd.definition AS DEFINITION, omd.notes, o.created_on, zn.name
FROM            dbo.organisation_data_view_link AS ol LEFT OUTER JOIN
                         dbo.organisation_data AS o ON ol.fk_organisation_data_id = o.id LEFT OUTER JOIN
                         dbo.organisation_zone_link AS zl ON zl.organisation_id = o.fk_organisation_id LEFT OUTER JOIN
                         dbo.organisations AS os ON o.fk_organisation_id = os.id LEFT OUTER JOIN
                         dbo.zones AS zn ON zl.zone_id = zn.id LEFT OUTER JOIN
                         dbo.metrics AS m ON o.fk_metric_id = m.id LEFT OUTER JOIN
                         dbo.attributes AS a ON o.fk_attribute_id = a.id LEFT OUTER JOIN
                         dbo.sources AS s ON o.fk_source_id = s.id LEFT OUTER JOIN
                         dbo.currencies AS c ON c.id = o.fk_currency_id LEFT OUTER JOIN
                         dbo.confidence AS co ON co.id = o.fk_confidence_id LEFT OUTER JOIN
                         dbo.organisation_data_metadata AS omd ON omd.fk_organisation_data_id = o.id
WHERE        (o.fk_metric_id IN (350, 351, 352, 353, 354, 355, 356, 357, 358, 359, 360, 362, 363, 364, 366, 365, 378)) AND (o.date_type = 'Q') AND (ol.fk_data_view_id = 1) AND (o.archive = 0) AND (os.type_id = 1227)]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[multiplay_input_cl].[Metric_Id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[metrics].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[multiplay_input_cl].[Metric]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[metrics].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[multiplay_input_cl].[Attribute_Id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[attributes].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[multiplay_input_cl].[Attribute]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[attributes].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[multiplay_input_cl].[DATE]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[multiplay_input_cl].[VALUE]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data].[val]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[multiplay_input_cl].[Currency]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[currencies].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[multiplay_input_cl].[Source]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[sources].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[multiplay_input_cl].[Confidence]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[confidence].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[multiplay_input_cl].[LOCATION]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data_metadata].[location_cleaned]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[multiplay_input_cl].[Page]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[multiplay_input_cl].[DEFINITION]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data_metadata].[definition]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[multiplay_input_cl].[notes]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data_metadata].[notes]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[multiplay_input_cl].[created_on]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data].[created_on]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[multiplay_input_cl].[name]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zones].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References Name="[dbo].[organisation_data_view_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_view_link].[fk_organisation_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata].[fk_organisation_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[val]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata].[location_cleaned]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata].[definition]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata].[notes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[created_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_view_link].[fk_data_view_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[archive]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[type_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1652" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE VIEW dbo.multiplay_input_cl&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlView" Name="[dbo].[multiplay_input_ol]">
			<Property Name="QueryScript">
				<Value><![CDATA[(

SELECT        o.fk_organisation_id AS Operator_ID, m.id AS Metric_Id, m.name AS Metric, a.id AS Attribute_Id, a.name AS Attribute, 'Q' + DATENAME(QUARTER, o.date) + ' ' + DATENAME(yyyy, o.date) AS Date, o.val AS VALUE, 
                         c.name AS Currency, s.name AS Source, co.name AS Confidence, omd.location_cleaned AS LOCATION, '' AS Page, omd.definition, omd.notes, o.created_on, zn.name
FROM            dbo.organisation_data_view_link AS ol LEFT OUTER JOIN
                         dbo.organisation_data AS o ON ol.fk_organisation_data_id = o.id LEFT OUTER JOIN
                         dbo.organisation_zone_link AS zl ON zl.organisation_id = o.fk_organisation_id LEFT OUTER JOIN
                         dbo.organisations AS os ON o.fk_organisation_id = os.id LEFT OUTER JOIN
                         dbo.zones AS zn ON zl.zone_id = zn.id LEFT OUTER JOIN
                         dbo.metrics AS m ON o.fk_metric_id = m.id LEFT OUTER JOIN
                         dbo.attributes AS a ON o.fk_attribute_id = a.id LEFT OUTER JOIN
                         dbo.sources AS s ON o.fk_source_id = s.id LEFT OUTER JOIN
                         dbo.currencies AS c ON c.id = o.fk_currency_id LEFT OUTER JOIN
                         dbo.confidence AS co ON co.id = o.fk_confidence_id LEFT OUTER JOIN
                         dbo.organisation_data_metadata AS omd ON omd.fk_organisation_data_id = o.id
WHERE        (o.fk_metric_id IN (350, 351, 352, 353, 354, 355, 356, 357, 358, 359, 360, 362, 363, 364, 366, 365, 378)) AND (o.date_type = 'Q') AND (ol.fk_data_view_id = 1) AND (o.archive = 0) AND (os.type_id = 1594))]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[multiplay_input_ol].[Operator_ID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data].[fk_organisation_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[multiplay_input_ol].[Metric_Id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[metrics].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[multiplay_input_ol].[Metric]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[metrics].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[multiplay_input_ol].[Attribute_Id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[attributes].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[multiplay_input_ol].[Attribute]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[attributes].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[multiplay_input_ol].[Date]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[multiplay_input_ol].[VALUE]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data].[val]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[multiplay_input_ol].[Currency]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[currencies].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[multiplay_input_ol].[Source]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[sources].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[multiplay_input_ol].[Confidence]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[confidence].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[multiplay_input_ol].[LOCATION]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data_metadata].[location_cleaned]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[multiplay_input_ol].[Page]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[multiplay_input_ol].[definition]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data_metadata].[definition]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[multiplay_input_ol].[notes]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data_metadata].[notes]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[multiplay_input_ol].[created_on]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data].[created_on]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[multiplay_input_ol].[name]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zones].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References Name="[dbo].[organisation_data_view_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_view_link].[fk_organisation_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata].[fk_organisation_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[val]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata].[location_cleaned]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata].[definition]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata].[notes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[created_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_view_link].[fk_data_view_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[archive]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[type_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1681" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE VIEW dbo.multiplay_input_ol&#xD;&#xA;&#xD;&#xA;As" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[mvno_group_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[mvno_group_link].[mvno_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[mvno_group_link].[group_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[mvno_host_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[mvno_host_link].[mvno_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[mvno_host_link].[host_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[network_frequency_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[network_frequency_link].[network_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[network_frequency_link].[frequency_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[network_frequency_link].[IX_network_frequency_link_frequency_id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[network_frequency_link].[frequency_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[network_frequency_link].[network_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[network_frequency_link]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[network_frequency_link].[IX_network_frequency_link_network_id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[network_frequency_link].[network_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[network_frequency_link].[frequency_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[network_frequency_link]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[networks]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[networks].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[networks].[organisation_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[networks].[technology_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[networks].[status_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[networks].[launch_date]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[networks].[closure_date]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[networks].[frequencies]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[networks].[downlink_rate]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[networks].[downlink_rate_unit_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[networks].[uplink_rate]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[networks].[uplink_rate_unit_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[networks].[is_upgrade]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="371" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[networks].[vendors]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[networks].[note]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[networks].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="370" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[networks].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="369" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[networks].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="373" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[networks].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="372" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="583" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[networks].[IX_networks]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[networks].[technology_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[networks].[status_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[networks]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[news]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[news].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[news].[title]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[news].[guid]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[news].[url]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[news].[body]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[news].[type]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[tinyint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="376" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[news].[published_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[news].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="375" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[news].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="374" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="584" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[od_fk_org_data_id]">
			<Property Name="OnUpdateAction" Value="1" />
			<Property Name="OnDeleteAction" Value="1" />
			<Property Name="IsDisabled" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[organisation_data_metadata].[fk_organisation_data_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisation_data_metadata]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[organisation_data].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[organisation_data]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="585" />
		</Element>
		<Element Type="SqlTableType" Name="[dbo].[ordered_iterator]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[ordered_iterator].[order]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[ordered_iterator].[term]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="8" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[ordered_iterator].[processed]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[organisation_data]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data].[fk_organisation_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data].[fk_metric_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data].[fk_attribute_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data].[fk_status_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data].[fk_privacy_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data].[date]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data].[date_type]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data].[val]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data].[fk_currency_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data].[fk_source_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data].[fk_confidence_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data].[has_flags]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data].[is_calculated]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data].[archive]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="25" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data].[is_forecast_upload]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data].[file_source]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="91" />
			<AttachedAnnotation Disambiguator="548" />
			<AttachedAnnotation Disambiguator="549" />
			<AttachedAnnotation Disambiguator="550" />
			<AttachedAnnotation Disambiguator="555" />
			<AttachedAnnotation Disambiguator="557" />
			<AttachedAnnotation Disambiguator="563" />
			<AttachedAnnotation Disambiguator="567" />
			<AttachedAnnotation Disambiguator="568" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[organisation_data].[idx_orgdata_row_check]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisation_data].[fk_organisation_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisation_data].[fk_metric_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisation_data].[fk_attribute_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisation_data].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisation_data].[date_type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisation_data].[val]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisation_data].[fk_currency_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisation_data].[fk_source_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisation_data].[fk_confidence_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisation_data].[is_forecast_upload]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisation_data].[is_calculated]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisation_data].[fk_status_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisation_data].[archive]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisation_data].[has_flags]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[organisation_data]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[organisation_data].[PT_organisation_data_comb]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisation_data].[fk_organisation_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisation_data].[fk_metric_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisation_data].[fk_attribute_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisation_data].[fk_status_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisation_data].[fk_privacy_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisation_data].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisation_data].[date_type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisation_data].[fk_currency_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisation_data].[fk_source_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisation_data].[fk_confidence_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisation_data].[has_flags]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisation_data].[is_calculated]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisation_data].[archive]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisation_data].[is_forecast_upload]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[organisation_data]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[organisation_data_flags_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data_flags_link].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data_flags_link].[fk_organisation_data_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data_flags_link].[fk_flag_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="102" />
			<AttachedAnnotation Disambiguator="552" />
			<AttachedAnnotation Disambiguator="562" />
		</Element>
		<Element Type="SqlTableType" Name="[dbo].[organisation_data_links_type]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_data_links_type].[id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_data_links_type].[fk_organisation_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_data_links_type].[fk_metric_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_data_links_type].[fk_attribute_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_data_links_type].[fk_status_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_data_links_type].[fk_privacy_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_data_links_type].[date]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_data_links_type].[date_type]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_data_links_type].[val]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_data_links_type].[fk_currency_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_data_links_type].[fk_source_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_data_links_type].[fk_confidence_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_data_links_type].[has_flags]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_data_links_type].[is_calculated]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_data_links_type].[created_on]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_data_links_type].[created_by]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_data_links_type].[archive]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_data_links_type].[is_forecast_upload]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_data_links_type].[file_source]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[organisation_data_metadata]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data_metadata].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data_metadata].[fk_organisation_data_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data_metadata].[location]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data_metadata].[location_cleaned]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data_metadata].[definition]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data_metadata].[notes]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data_metadata].[approved]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[tinyint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data_metadata].[approval_hash]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data_metadata].[import_hash]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data_metadata].[is_held_for_review]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="90" />
			<AttachedAnnotation Disambiguator="585" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[organisation_data_tmp]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data_tmp].[id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data_tmp].[fk_organisation_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data_tmp].[fk_metric_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data_tmp].[fk_attribute_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data_tmp].[fk_status_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data_tmp].[fk_privacy_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data_tmp].[date]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data_tmp].[date_type]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data_tmp].[val]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data_tmp].[fk_currency_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data_tmp].[fk_source_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data_tmp].[fk_confidence_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data_tmp].[has_flags]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data_tmp].[is_calculated]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data_tmp].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data_tmp].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data_tmp].[archive]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="51" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data_tmp].[is_forecast_upload]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data_tmp].[file_source]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTableType" Name="[dbo].[organisation_data_type]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_data_type].[fk_organisation_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_data_type].[fk_metric_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_data_type].[fk_attribute_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_data_type].[fk_status_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_data_type].[fk_privacy_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_data_type].[date]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_data_type].[date_type]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_data_type].[val]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_data_type].[fk_currency_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_data_type].[fk_source_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_data_type].[fk_confidence_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_data_type].[has_flags]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_data_type].[is_calculated]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_data_type].[created_on]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_data_type].[created_by]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_data_type].[archive]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_data_type].[is_forecast_upload]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_data_type].[file_source]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTableType" Name="[dbo].[organisation_data_upsert_result_type]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_data_upsert_result_type].[fk_organisation_data_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_data_upsert_result_type].[fk_organisation_data_view_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_data_upsert_result_type].[link_date]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_data_upsert_result_type].[existing_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[organisation_data_view_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data_view_link].[fk_organisation_data_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data_view_link].[fk_data_view_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data_view_link].[link_date]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data_view_link].[archive]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="53" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="556" />
			<AttachedAnnotation Disambiguator="558" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[organisation_data_view_link].[PT_organisation_data_view_id]">
			<Property Name="IsUnique" Value="True" />
			<Property Name="IsClustered" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisation_data_view_link].[fk_organisation_data_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisation_data_view_link].[fk_data_view_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisation_data_view_link].[link_date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[organisation_data_view_link]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[organisation_data_view_link_history]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data_view_link_history].[fk_organisation_data_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data_view_link_history].[fk_data_view_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_data_view_link_history].[link_date]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[organisation_data_view_link_history].[PT_organisation_data_link_history_comb]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisation_data_view_link_history].[fk_organisation_data_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisation_data_view_link_history].[fk_data_view_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisation_data_view_link_history].[link_date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[organisation_data_view_link_history]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[organisation_events]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_events].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_events].[organisation_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_events].[ref_organisation_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_events].[ref_organisation_id_2]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_events].[status_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_events].[date]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_events].[date_type]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_events].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="380" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_events].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="379" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="586" />
			<AttachedAnnotation Disambiguator="559" />
			<AttachedAnnotation Disambiguator="560" />
			<AttachedAnnotation Disambiguator="561" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[organisation_location_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_location_link].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_location_link].[organisation_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_location_link].[folder]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_location_link].[parent]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_location_link].[cleaned]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="383" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_location_link].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="385" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_location_link].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="384" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="587" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[organisation_permission_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_permission_link].[organisation_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_permission_link].[permission_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTableType" Name="[dbo].[organisation_reported_data_links_type]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_links_type].[id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_links_type].[fk_organisation_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_links_type].[fk_metric_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_links_type].[fk_attribute_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_links_type].[fk_status_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_links_type].[fk_privacy_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_links_type].[date]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_links_type].[date_type]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_links_type].[val]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_links_type].[fk_currency_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_links_type].[fk_source_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_links_type].[fk_confidence_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_links_type].[has_flags]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_links_type].[is_calculated]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_links_type].[created_on]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_links_type].[created_by]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_links_type].[archive]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_links_type].[is_forecast_upload]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_links_type].[file_source]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_links_type].[location]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_links_type].[location_cleaned]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_links_type].[definition]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_links_type].[notes]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_links_type].[fk_flag_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTableType" Name="[dbo].[organisation_reported_data_type]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_type].[fk_organisation_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_type].[fk_metric_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_type].[fk_attribute_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_type].[fk_status_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_type].[fk_privacy_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_type].[date]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_type].[date_type]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_type].[val]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_type].[fk_currency_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_type].[fk_source_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_type].[fk_confidence_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_type].[has_flags]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_type].[is_calculated]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_type].[created_on]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_type].[created_by]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_type].[archive]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_type].[is_forecast_upload]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_type].[file_source]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_type].[location]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_type].[location_cleaned]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_type].[definition]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_type].[notes]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[organisation_reported_data_type].[fk_flag_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[organisation_zone_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_zone_link].[organisation_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisation_zone_link].[zone_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[organisation_zone_link].[PT_organisation_zone_link_comb]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisation_zone_link].[zone_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[organisation_zone_link]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[organisations]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisations].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisations].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisations].[status_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisations].[type_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisations].[source_organisation_link_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="422" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisations].[url]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisations].[tadig_codes]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisations].[stock_symbol]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisations].[note]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisations].[in_use]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="386" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisations].[published]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="387" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisations].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="378" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisations].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="377" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisations].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="382" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisations].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="381" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisations].[includes_m2m]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="46" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="588" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[organisations_copy]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisations_copy].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisations_copy].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisations_copy].[status_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisations_copy].[type_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisations_copy].[url]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisations_copy].[pmn_code]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="10" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisations_copy].[stock_symbol]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisations_copy].[note]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisations_copy].[in_use]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="40" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisations_copy].[published]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="41" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisations_copy].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="42" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisations_copy].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="43" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisations_copy].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="44" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[organisations_copy].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="45" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="93" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[permissions]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[permissions].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[permissions].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="589" />
		</Element>
		<Element Type="SqlMultiStatementTableValuedFunction" Name="[dbo].[php_unserialize]">
			<Property Name="ReturnTableVariable" Value="@results" />
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[php_unserialize].[@string]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[php_unserialize].[value_string]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[php_unserialize].[element_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[php_unserialize].[var_type]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[php_unserialize].[var_length]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[php_unserialize].[value_int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[php_unserialize].[value_decimal]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[php_unserialize].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[php_unserialize].[var_name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[php_unserialize].[@insertedIds].[element_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[php_unserialize].[element_id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[php_unserialize].[parent_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[php_unserialize].[var_name]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[php_unserialize].[var_type]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[php_unserialize].[var_length]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[php_unserialize].[value_int]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[php_unserialize].[value_string]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[php_unserialize].[value_decimal]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="17" />
									<Property Name="Precision" Value="38" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[php_unserialize].[@insertedIds]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[php_unserialize].[@insertedIds].[element_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
BEGIN

	/*
    Built by Matt Johnson (matt@evdat.com) 2012-08-14
	Bug Fixes by Matt Johnson (matt@evdat.com) 2012-11-27
	*/

	-- we use this table later for collecting auto generated
	-- identity values when inserting records into @results
	declare @insertedIds table (
		element_id int
	)

	-- define variables
	declare @element_start int
	declare @var_type_end int
	declare @var_type varchar(50)
	declare @element_end int
	declare @chunk varchar(max)
	declare @var_length_start int
	declare @var_length_end int
	declare @var_length_string varchar(max)
	declare @var_length int
	declare @value_start int
	declare @value_end int
	declare @value_string varchar(max)
	declare @value_int int
	declare @value_decimal decimal(38,17)
	declare @array_level int
	declare @value_string_position int
	declare @next_open int
	declare @next_close int
	declare @parent_id int
	declare @element_id int
	declare @key_element_id int
	declare @inserted_element_id int
	declare @var_name varchar(50)
	declare @found_null int
	declare @quote_start int
	declare	@quote_end int

	--initialize variables
	set @parent_id = 0


	--loop through the supplied @string string until it's empty
	while 1=1 begin
		set @element_start = null
		set @var_type_end = null
		set @var_type = null
		set @element_end = null
		set @chunk = null
		set @var_length_start = null
		set @var_length_end = null
		set @var_length_string = null
		set @var_length = null
		set @value_start = null
		set @value_end = null
		set @value_string = null
		set @value_int = null
		set @value_decimal = null
		set @array_level = null
		set @value_string_position = null
		set @next_open = null
		set @next_close = null
		set @var_name = null
		set @found_null = null
		set @quote_start = null
		set @quote_end = null

		---- remove comments below for debugging purposes outside of function
		--print '------------------------------------------------'
		--print '@string: ' + coalesce(cast(@string as varchar(max)),'') 

		--identify if the element is a null element
		set @found_null = patindex('N;%', @string)

		--confirm that there is an element to parse and define its starting point
		--patindex will return a value of 1 if the pattern is found and this pattern
		--will only match if the element starting point is the first character in the
		--supplied string. If it is encapsulated in quotes or anything else it will not match
		set @element_start = patindex('[Nasidb]%[;}]', @string)

		if @element_start <= 0 begin
			--if the supplied string is now empty check the existing results table
			--for any nested elements in any array elements

			--reset the value of @element_id to be safe
			set @element_id = null

			--only retrieve the first element found containing sub elements to parse
			select	top 1 
					@string = value_string,
					@element_id = element_id	
			from @results 
			where	var_type = 'a' and 
					value_string is not null
			
			--set the parent_id to the array's element_id
			set @parent_id = @element_id

			--if there were no results found then that means there either
			--were no arrays to parse, or all arrays have already been parsed
			--so break the continuous loop because we are completely done now
			if @element_id is null break
			
			--set the @element_start again now that we 
			--have a new string to parse for elements
			set @element_start = patindex('[Nasidb]%[;}]', @string)

			---- remove comments below for debugging purposes outside of function
			--print '-----nested elements in an array element'
			--print '@string: ' + coalesce(cast(@string as varchar(max)),'') 
		end

		--null and string elements have a different structure then other elements, they have not value
		if @found_null > 0 begin
			--find the end of the type of the element then extract the variable type from the string
			set @var_type_end = patindex('%;%', @string)
			set @var_type = substring(@string, @element_start, @var_type_end-@element_start)
		end else begin
			--find the end of the type of the element then extract the variable type from the string
			set @var_type_end = patindex('%:%', @string)
			set @var_type = substring(@string, @element_start, @var_type_end-@element_start)
		end


		--array elements contain sub elements so we use different methods for parsing
		--sub elements than we do for parsing individual elements.
		if @var_type = 'N' begin
			-- null value

			-- set all values to null
			set @var_length = null
			set @value_string = null
			set @value_int = null
			set @value_decimal = null

			set @element_end = patindex('%;%', @string)+1
			set @chunk = substring(@string, @element_start, @element_end-@element_start)

		end else if @var_type like '[sidb]' begin
			--element has no sub elements

			--determine the end of this individual element and then extract 
			--only this individual element from the string
			if @var_type = 's' begin
				--find the start of the string quotes
				set @quote_start = patindex('%"%";%', @string)

				--find the end of the string quotes
				set @quote_end = patindex('%";%', @string)
				
				set @element_end = patindex('%;%', substring(@string, @quote_end, len(@string))) + @quote_end
			end else begin
				set @element_end = patindex('%;%', @string)+1
			end
			set @chunk = substring(@string, @element_start, @element_end-@element_start)
			
			--strings are serialized differently than numeric elements
			if @var_type = 's' begin
				--element has var length

				--find the starting and ending positions for the var_length and then extract the length
				set @var_length_start = @var_type_end+1
				set @var_length_end = patindex('%:%', substring(@chunk, @var_length_start, len(@chunk))) + @var_length_start - 1
				set @var_length_string = substring(@chunk, @var_length_start, @var_length_end-@var_length_start)
				if @var_length_string not like '[^0-9]' begin
					--its nice to verify this is actually a number before casting it as such
					set @var_length = cast(@var_length_string as int)
				end

				--if the specified var length is longer than the detected ending quote use it to 
				--re-determine the element end and chunk contents this can happen if quotes are
				--included in the string contents
				if @var_length > @quote_end begin
					set @element_end = patindex('%;%', substring(@string, @var_length_end+@var_length+2, len(@string))) + @var_length_end+@var_length+2
					set @chunk = substring(@string, @element_start, @element_end-@element_start)
				end

				--find the starting and ending positions for the value and then extract the value
				set @value_start = @var_length_end+1
				set @value_end = @element_end - 1
				--a string value is quoted so remove quotes in start and end of substring for value
				--we set the substring starting position +1 just past the start of the quote and then
				--set the length of the extracted string -2 to account for both the starting quote and 
				--ending quote to be removed from the extracted string.
				set @value_string = substring(@chunk, @value_start+1, @value_end-@value_start-2)
				
			end else begin
				--element does not have a var length

				--find the starting and ending positions for the value and then extract the value as a string
				set @value_start = @var_type_end+1
				set @value_end = patindex('%;%', @chunk)
				set @value_string = substring(@chunk, @value_start, @value_end-@value_start)

				--determine what value type the string should be converted to
				if @var_type = 'i' begin
					if @value_string not like '[^0-9.]' begin
						set @value_int = cast(@value_string as int)
						--clear the value_string because the element's value has been converted to its appropriate type
						set @value_string = null
					end
				end else if @var_type = 'd' begin
					-- d actually stands for double not decimal... incase this causes errors later...
					if @value_string not like '[^0-9.]' begin
						--set @value_decimal = cast(@value_string as float)
						set @value_decimal = cast(round(@value_string,17) as decimal(38,17)) 
						--clear the value_string because the element's value has been converted to its appropriate type
						set @value_string = null
					end
				end else if @var_type = 'b' begin
					if @value_string not like '[^0-1]' begin
						set @value_int = cast(@value_string as int)
						--clear the value_string because the element's value has been converted to its appropriate type
						set @value_string = null
					end
				end

			end
			
			
		end else if @var_type = 'a' begin
			--element is array and has sub elements

			--we are going to chop up the string to try and determine its end so we'll
			--first set the string to a variable we can destroy in this process
			set @chunk = @string

			--find the starting and ending positions for the var_length and then extract the length
			--arrays use this to state how may elements this array contains
			set @var_length_start = @var_type_end+1
			set @var_length_end = patindex('%:%', substring(@chunk, @var_length_start, len(@chunk))) + @var_length_start - 1
			set @var_length_string = substring(@chunk, @var_length_start, @var_length_end-@var_length_start)
			if @var_length_string not like '[^0-9]' begin
				set @var_length = cast(@var_length_string as int)
			end

			--find the value starting position
			--later we will find the true end of the value
			set @value_start = @var_length_end+1

			-- to determine the ending position we have to dig through the sub elements and track the
			-- nested level to identify the ending brace for this level
			set @array_level = 0
			--we start the string position at 1 for the begining of the serialized string
			set @value_string_position = 1

			-- loop through the value chopping up the chunk while trying to find the ending brace for this array
			while 1=1 begin

				--find the next open and close braces in the chunk
				set @next_open = patindex('%{%', @chunk)
				set @next_close = patindex('%}%', @chunk)
				
				--check to see which brace is the next in the chunk
				if @next_open > 0 and @next_open < @next_close begin
					--found an opening brace
					
					--since this is an opening brace we need to increment the level and strip off
					--everything from the chunk before the brace so that we can search for additional braces
					--we also note the position in the string for use in finding the end of the value later
					--we track the previous position and add to it because we keep chopping off the beginning of
					--the chunk as we parse through the string, and later we will need to reference the position
					--relative to the entire serialized string.
					set @value_string_position = @value_string_position + patindex('%{%', @chunk)-1
					set @chunk = substring(@chunk, patindex('%{%', @chunk)+1, len(@chunk))
					set @array_level = @array_level + 1

				end else if @next_close > 0 begin
					--found a closing brace
					--print 'found close at level: ' + cast(@array_level as varchar(10)) + '(' + cast(patindex('%}%', @chunk) as varchar(10)) + ')'
					
					--since this is a closing brace we need to decrement the level and strip off
					--everything from the chunk before the brace so that we can search for additional braces
					--we also note the position in the string for use in finding the end of the value later
					--we track the previous position and add to it because we keep chopping off the beginning of
					--the chunk as we parse through the string, and later we will need to reference the position
					--relative to the entire serialized string.
					set @value_string_position = @value_string_position + patindex('%}%', @chunk)+1
					set @chunk = substring(@chunk, patindex('%}%', @chunk)+1, len(@chunk))
					set @array_level = @array_level - 1

				end else break

				--once we get back to level 0 we know we've found the end of this array element
				--so break the continuous loop now that we have the ending position
				if @array_level <= 0 break
			end

			--set the ending position of the element and the value since the value is the last part of the element
			set @element_end = @value_string_position
			set @value_end = @element_end
			--an array value is surrounded by braces so remove the braces in start and end of the substring value
			--we set the substring starting position +1 just past the start of the opening brace and then
			--set the length of the extracted string -2 to account for both the opening brace and 
			--closing brace to be removed from the extracted string.
			set @value_string = substring(@string, @value_start+1, @value_end-@value_start-2)
			set @chunk = substring(@string, @element_start, @element_end-@element_start)
			
			-- if the array is empty just set it to null so that
			-- we don't try and parse the contents of the array value later.
			if @value_string = '' set @value_string = null
		end else begin
			-- unkown type...
			set @var_type = null

			-- at least grab the end of the element and set the chunk for the element contents
			set @element_end = patindex('%;%', @string)+1
			set @chunk = substring(@string, @element_start, @element_end-@element_start)

			-- at least list the contents of the element in the value_string of an undefined record
			set @var_length = null
			set @value_string = @chunk
			set @value_int = null
			set @value_decimal = null
		end




		--we populate the results table differently depending on the element that is being parsed. 
		--Any element contained in an array has a key element and a value element. Though we parse
		--all key elements in an array all we do with them in the results table is set their value
		--as the var_name (key) for the element, and store the key_element_id for setting the value
		--in the next pass since key/value pairs are listed sequentially in a serialized string.
		if @parent_id > 0 and @key_element_id > 0 begin
			--parent_id > 0 indicates this is a sub element inside an array
			--and the array contents currently being parsed contain key elements and value
			--elements sequentially in the serialized string. Because key_element_id is not 0
			--we know this must be the value part of the element contained in the array as the
			--key was just previously defined.

			--update the existing keyed element with it's type, length and value
			update @results
			set var_type = @var_type, 
				var_length = @var_length, 
				value_string = @value_string, 
				value_int = @value_int, 
				value_decimal = @value_decimal
			where element_id = @key_element_id		
			
			set @key_element_id = null
		end else if @parent_id > 0 and @var_type like '[sid]' begin
			--this element is a part of the array which contains key/value paris and since
			--the @key_element_id is 0 or not defined we can asume this is the key of the pair
			
			--determine what the key element type is and cast it as a string to the var_name
			if @var_type = 's' set @var_name = @value_string
			if @var_type = 'i' set @var_name = cast(@value_int as varchar(50))
			if @var_type = 'd' set @var_name = cast(@value_decimal as varchar(50))

			--insert a new record into the results table defining the parent_id and var_name
			insert @results 
			(
				parent_id,
				var_name
			) 
			output inserted.element_id into @insertedIds 
			values (
				@parent_id,
				@var_name
			)

			--since we stored the identity value in the output set that value to @inserted_element_id
			select top 1 @inserted_element_id = element_id from @insertedIds
			delete from @insertedIds

			--set the key_element_id so that the next pass catches the value and assigns it to this result record
			set @key_element_id = @inserted_element_id

		end else begin
			--this will be executed for parsed strings that are not part of an array
			--in which case the elements do not contain value_name keys

			--also any unkown types will fall down into this statement and get a record inserted
			
			--insert the entire element details into the results table
			insert into @results 
			(
				parent_id, 
				var_type, 
				var_length, 
				value_string, 
				value_int, 
				value_decimal
			) 
			output inserted.element_id into @insertedIds 
			values (
				@parent_id,
				@var_type,
				@var_length,
				@value_string,
				@value_int,
				@value_decimal
			)

			--here we capture the identiy value for the inserted record
			select top 1 @inserted_element_id = element_id from @insertedIds
			delete from @insertedIds
		end

		-- if the current php serilized string was an array then it would have
		-- been parsed and elements added to the results, so we should remove
		-- the value_string from the array element in the results table so that
		-- it doesn't get parsed again in the loop. 
		if @element_id is not null begin
			--the only strings that get parsed where the @element_id has
			--a value is from an array element
			update @results
			set value_string = null
			where element_id = @element_id
		end

		--since we have parsed this element from the serialized string chop off this element
		--from the string and run the rest of it through the loop again to ensure all
		--elements have been parsed from the supplied serialized string.
		set @string = substring(@string, @element_end, len(@string))

		---- remove comments below for debugging purposes outside of function
		--print '@inserted_element_id: ' + coalesce(cast(@inserted_element_id as varchar(max)),'')
		--print '@parent_id: ' + coalesce(cast(@parent_id as varchar(max)),'')
		--print '@var_type: ' + coalesce(cast(@var_type as varchar(max)),'')
		--print '@var_length: ' + coalesce(cast(@var_length as varchar(max)),'')
		--print '@value_string: ' + coalesce(cast(@value_string as varchar(max)),'')
		--print '@value_int: ' + coalesce(cast(@value_int as varchar(max)),'')
		--print '@value_decimal: ' + coalesce(cast(@value_decimal as varchar(max)),'')

		--print ''
		--print '@found_null: ' + coalesce(cast(@found_null as varchar(max)),'')
		--print '@element_start: ' + coalesce(cast(@element_start as varchar(max)),'')
		--print '@var_type_end: ' + coalesce(cast(@var_type_end as varchar(max)),'')
		--print '@element_end: ' + coalesce(cast(@element_end as varchar(max)),'')
		--print '@chunk: ' + coalesce(cast(@chunk as varchar(max)),'')
		--print '@var_length_start: ' + coalesce(cast(@var_length_start as varchar(max)),'')
		--print '@var_length_end: ' + coalesce(cast(@var_length_end as varchar(max)),'')
		--print '@var_length_string: ' + coalesce(cast(@var_length_string as varchar(max)),'')
		--print '@value_start: ' + coalesce(cast(@value_start as varchar(max)),'')
		--print '@value_end: ' + coalesce(cast(@value_end as varchar(max)),'')
		--print '@array_level: ' + coalesce(cast(@array_level as varchar(max)),'')
		--print '@value_string_position: ' + coalesce(cast(@value_string_position as varchar(max)),'')
		--print '@next_open: ' + coalesce(cast(@next_open as varchar(max)),'')
		--print '@next_close: ' + coalesce(cast(@next_close as varchar(max)),'')
		--print '@quote_start: ' + coalesce(cast(@quote_start as varchar(max)),'')
		--print '@quote_end: ' + coalesce(cast(@quote_end as varchar(max)),'')

	end

	return
end]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="20020" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION dbo.php_unserialize(@string varchar(max))&#xD;&#xA;RETURNS @results table &#xD;&#xA;&#x9;(&#xD;&#xA;&#x9;&#x9;element_id int identity(1,1) not null, /* internal surrogate primary key gives the order of parsing and the list order */&#xD;&#xA;&#x9;&#x9;parent_id int, /* if the element has a parent then it is in this column. */&#xD;&#xA;&#x9;&#x9;var_name varchar(50), /* the name or key of the element in a key/value array list */&#xD;&#xA;&#x9;&#x9;var_type varchar(50),&#xD;&#xA;&#x9;&#x9;var_length int,&#xD;&#xA;&#x9;&#x9;value_int int,&#xD;&#xA;&#x9;&#x9;value_string varchar(max),&#xD;&#xA;&#x9;&#x9;value_decimal decimal(38,17)&#xD;&#xA;&#x9;)&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[php_unserialize].[@string]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_api_keys]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[api_keys].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[api_keys]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="171" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_attribute_dimval_legacy_link]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[attribute_dimval_legacy_link].[dimval_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[attribute_dimval_legacy_link]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="172" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_attributes]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[attributes].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="179" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_auction_awards]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[auction_awards].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[auction_awards]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="184" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_auctions]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[auctions].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[auctions]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="190" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_blog_entries]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[blog_entries].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[blog_entries]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="199" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_confidence]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[confidence].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[confidence]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="205" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_content_authors]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[content_authors].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[content_authors]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="209" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_content_entries]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[content_entries].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[content_entries]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="225" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_currencies]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[currencies].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[currencies]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="238" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_currency_rates]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[currency_rates].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[currency_rates]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="239" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_data_sets]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_data_sets].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_data_sets]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="162" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_document_fulltext]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[document_fulltext].[document_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[document_fulltext]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="520" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_document_legacy_mapping]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[document_legacy_mapping].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[document_legacy_mapping]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="521" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_document_tracking]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[document_tracking].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[document_tracking]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="522" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_documents]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[documents].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[documents]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="523" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_ds_group_data]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_ds_group_data].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_backup_ds_group_data]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="123" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_ds_mvnos]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[ds_mvnos].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[ds_mvnos]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="525" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_ds_organisation_data]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_ds_organisation_data].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_backup_ds_organisation_data]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="132" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_ds_service_data]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[ds_service_data].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[ds_service_data]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="526" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_ds_survey_data]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[ds_survey_data].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[ds_survey_data]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="535" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_ds_zone_data]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[_backup_ds_zone_data].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[_backup_ds_zone_data]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="141" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_feed]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[feed].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[feed]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="536" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_fields]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[fields].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[fields]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="537" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_files]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[files].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[files]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="538" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_flags]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[flags].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[flags]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="574" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_group_data_reported]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[group_data_reported].[ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[group_data_reported]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="575" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_group_ownership]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[ds_group_ownership].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[ds_group_ownership]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="524" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_jobs]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[jobs].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[jobs]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="576" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_log_data_events]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[log_data_events].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[log_data_events]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="577" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_log_model_versions]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[log_model_versions].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[log_model_versions]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="579" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_log_reporting]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[log_forecasting].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[log_forecasting]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="578" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_log_reporting_1]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[log_reporting].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[log_reporting]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="580" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_metric_families]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[metric_families].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[metric_families]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="581" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_metrics]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[metrics].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[metrics]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="582" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_networks]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[networks].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[networks]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="583" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_news]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[news].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[news]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="584" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_organisation_events]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisation_events].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisation_events]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="586" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_organisation_location_link]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisation_location_link].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisation_location_link]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="587" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_organisations]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[organisations].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="588" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_permissions]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[permissions].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[permissions]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="589" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_privacy]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[privacy].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[privacy]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="590" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_products]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[deployments].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[deployments]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="261" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_registrations]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[registrations].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[registrations]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="591" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_report_favourites]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[report_favourites].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[report_favourites]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="592" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_report_fk_link]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[report_fk_link].[report_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[report_fk_link]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="593" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_report_tracking]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[report_tracking].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[report_tracking]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="594" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_reports]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[reports].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[reports]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="595" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_roles]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[roles].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[roles]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="596" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_search]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[search].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[search]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="597" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_sessions]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[sessions].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[sessions]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="598" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_source_organisation_link]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[source_organisation_link].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[source_organisation_link]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="599" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_sources]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[sources].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[sources]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="600" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_status]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[status].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[status]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="601" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_subscription_domain_link]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[subscription_domain_link].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[subscription_domain_link]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="602" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_subscriptions]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[subscriptions].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[subscriptions]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="603" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_surveys]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[surveys].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[surveys]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="604" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_tags]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[tags].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[tags]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="605" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[pk_test_links_ids]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[test_links_ids].[ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[test_links_ids]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="606" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_types]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[types].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[types]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="607" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_units]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[units].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[units]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="608" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_user_email_verification]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[user_email_verification].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[user_email_verification]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="609" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_user_organisation_link]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[user_organisation_link].[user_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[user_organisation_link]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="610" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_user_password_resets]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[user_password_resets].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[user_password_resets]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="611" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_user_preferences]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[user_preferences].[user_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[user_preferences]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="612" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_user_registration_tokens]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[user_registrations].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[user_registrations]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="613" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_users]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[users].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[users]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="614" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_wiki_categories]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[wiki_categories].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[wiki_categories]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="615" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_wiki_entries_1]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[wiki_entries].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[wiki_entries]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="616" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_wikis]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[wikis].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[wikis]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="617" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_zones]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zones].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="618" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[privacy]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[privacy].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[privacy].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[privacy].[term]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[privacy].[published]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="392" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[privacy].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="389" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[privacy].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="388" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[privacy].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="391" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[privacy].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="390" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="590" />
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[proc_upsert_group_data_view_link]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
DECLARE @now datetime = GETUTCDATE()

	DELETE FROM dbo.group_data_view_link where fk_group_data_id IN (
		SELECT od.id
		FROM dbo.group_data_view_link as link
		LEFT JOIN @groupDataLinkType AS tlinkCheck ON (tlinkCheck.id=link.fk_group_data_id and link.fk_data_view_id=@analystTeamViewId)
		LEFT JOIN dbo.group_data as od ON od.id=link.fk_group_data_id
		LEFT JOIN @groupDataLinkType AS tlink ON (
			od.fk_organisation_id=tlink.fk_organisation_id
			AND od.fk_metric_id=tlink.fk_metric_id
			AND od.fk_attribute_id=tlink.fk_attribute_id
			AND od.[date]=tlink.[date]
			AND od.date_type=tlink.date_type
			AND od.ownership = tlink.ownership
		)
		where tlink.id IS NOT NULL
		and link.fk_data_view_id=@analystTeamViewId
		and tlinkCheck.id is null
		--and link.link_date<@batchDate
	) AND fk_data_view_id = @analystTeamViewId

	BEGIN TRY
		INSERT INTO dbo.group_data_view_link_history
		SELECT tv.id AS "fk_group_data_id", @analystTeamViewId AS "fk_data_view_id", @now AS "link_date" 
		FROM @groupDataLinkType as tv
		LEFT JOIN dbo.group_data_view_link as link ON (tv.id=link.fk_group_data_id and link.fk_data_view_id=@analystTeamViewId)
		where link.fk_group_data_id is null
	END TRY  
	BEGIN CATCH  
		execute [dbo].[collect_data_insert_errors] @query_string = '[dbo].[proc_upsert_group_data_view_link] - INSERT INTO dbo.group_data_view_link_history'
	END CATCH

	BEGIN TRY
		-- Insert link data
		INSERT INTO dbo.group_data_view_link
		SELECT tv.id AS "fk_group_data_id", @analystTeamViewId AS "fk_data_view_id", @now AS "link_date", 0 AS "archive" 
		FROM @groupDataLinkType as tv
		LEFT JOIN dbo.group_data_view_link as link ON (tv.id=link.fk_group_data_id and link.fk_data_view_id=@analystTeamViewId)
		where link.fk_group_data_id is null
	END TRY  
	BEGIN CATCH  
		execute [dbo].[collect_data_insert_errors] @query_string = '[dbo].[proc_upsert_group_data_view_link] - INSERT INTO dbo.group_data_view_link'
	END CATCH

	
	-- custom double write requested by CV & RP
	/*IF @secondAnalystTeamViewId != 0 BEGIN
		DELETE FROM dbo.group_data_view_link where fk_group_data_id IN (
			SELECT od.id
			FROM dbo.group_data_view_link as link
			LEFT JOIN @groupDataLinkType AS tlinkCheck ON (tlinkCheck.id=link.fk_group_data_id and link.fk_data_view_id=@secondAnalystTeamViewId)
			LEFT JOIN dbo.group_data as od ON od.id=link.fk_group_data_id
			LEFT JOIN @groupDataLinkType AS tlink ON (
				od.fk_organisation_id=tlink.fk_organisation_id
				AND od.fk_metric_id=tlink.fk_metric_id
				AND od.fk_attribute_id=tlink.fk_attribute_id
				AND od.[date]=tlink.[date]
				AND od.date_type=tlink.date_type
			)
			where tlink.id IS NOT NULL
			and link.fk_data_view_id=@secondAnalystTeamViewId
			and tlinkCheck.id is null
			and link.link_date<@batchDate
		) AND fk_data_view_id = @secondAnalystTeamViewId

		-- Insert link data
		INSERT INTO dbo.group_data_view_link
		SELECT tv.id AS "fk_group_data_id", @secondAnalystTeamViewId AS "fk_data_view_id", @now AS "link_date" 
		FROM @groupDataLinkType as tv
		LEFT JOIN dbo.group_data_view_link as link ON (tv.id=link.fk_group_data_id and link.fk_data_view_id=@secondAnalystTeamViewId)
		where link.fk_group_data_id is null

		INSERT INTO dbo.group_data_view_link_history
		SELECT tv.id AS "fk_group_data_id", @secondAnalystTeamViewId AS "fk_data_view_id", @now AS "link_date" 
		FROM @groupDataLinkType as tv
		LEFT JOIN dbo.group_data_view_link as link ON (tv.id=link.fk_group_data_id and link.fk_data_view_id=@secondAnalystTeamViewId)
		where link.fk_group_data_id is null
	END*/
	
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data_view_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data_view_link].[fk_group_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_data_view_link].[@groupDataLinkType]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_data_view_link].[@groupDataLinkType].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data_view_link].[fk_group_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data_view_link].[fk_data_view_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_data_view_link].[@analystTeamViewId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data_view_link].[fk_group_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_data_view_link].[@groupDataLinkType].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_data_view_link].[@groupDataLinkType].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_data_view_link].[@groupDataLinkType].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_data_view_link].[@groupDataLinkType].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_data_view_link].[@groupDataLinkType].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[ownership]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_data_view_link].[@groupDataLinkType].[ownership]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_data_view_link].[@groupDataLinkType].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data_view_link].[fk_data_view_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_data_view_link].[@groupDataLinkType].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data_view_link].[fk_data_view_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data_view_link_history]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_data_view_link].[@groupDataLinkType].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data_view_link].[fk_group_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data_view_link].[fk_data_view_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_data_view_link].[@groupDataLinkType].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[collect_data_insert_errors]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[collect_data_insert_errors].[@query_string]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[proc_upsert_group_data_view_link].[@groupDataLinkType]" Disambiguator="16">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_data_view_link].[@groupDataLinkType].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_data_view_link].[@groupDataLinkType].[fk_organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_data_view_link].[@groupDataLinkType].[fk_metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_data_view_link].[@groupDataLinkType].[fk_attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_data_view_link].[@groupDataLinkType].[fk_status_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_data_view_link].[@groupDataLinkType].[fk_privacy_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_data_view_link].[@groupDataLinkType].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_data_view_link].[@groupDataLinkType].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_data_view_link].[@groupDataLinkType].[val_sum]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_data_view_link].[@groupDataLinkType].[fk_currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_data_view_link].[@groupDataLinkType].[fk_source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_data_view_link].[@groupDataLinkType].[fk_confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_data_view_link].[@groupDataLinkType].[has_flags]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_data_view_link].[@groupDataLinkType].[is_calculated]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_data_view_link].[@groupDataLinkType].[created_on]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_data_view_link].[@groupDataLinkType].[created_by]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_data_view_link].[@groupDataLinkType].[archive]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_data_view_link].[@groupDataLinkType].[is_forecast_upload]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_data_view_link].[@groupDataLinkType].[file_source]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[varchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_data_view_link].[@groupDataLinkType].[val_proportionate]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_data_view_link].[@groupDataLinkType].[ownership]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[proc_upsert_group_data_view_link].[@groupDataLinkType]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[dbo].[group_data_links_type]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[proc_upsert_group_data_view_link].[@batchDate]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[proc_upsert_group_data_view_link].[@analystTeamViewId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[proc_upsert_group_data_view_link].[@secondAnalystTeamViewId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="3817" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[proc_upsert_group_data_view_link]&#xD;&#xA;@groupDataLinkType dbo.group_data_links_type READONLY,&#xD;&#xA;@batchDate DATETIME,&#xD;&#xA;@analystTeamViewId INT,&#xD;&#xA;@secondAnalystTeamViewId INT = 0&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[proc_upsert_group_forecast_upload]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN

DECLARE @groupDataLinkType dbo.group_data_links_type;

	-- INSERT NEW ROW
	INSERT INTO dbo.group_data (
		[fk_organisation_id]
	      ,[fk_metric_id]
	      ,[fk_attribute_id]
	      ,[fk_status_id]
	      ,[fk_privacy_id]
	      ,[date]
	      ,[date_type]
	      ,[val_sum]
	      ,[fk_currency_id]
	      ,[fk_source_id]
	      ,[fk_confidence_id]
	      ,[has_flags]
	      ,[is_calculated]
	      ,[created_on]
	      ,[created_by]
	      ,[archive]
	      ,[is_forecast_upload]
	      ,[file_source]
		  ,[val_proportionate]
		  ,[ownership])
	SELECT tv.[fk_organisation_id]
	      ,tv.[fk_metric_id]
	      ,tv.[fk_attribute_id]
	      ,tv.[fk_status_id]
	      ,tv.[fk_privacy_id]
	      ,tv.[date]
	      ,tv.[date_type]
	      ,tv.[val_sum]
	      ,tv.[fk_currency_id]
	      ,tv.[fk_source_id]
	      ,tv.[fk_confidence_id]
	      ,tv.[has_flags]
	      ,tv.[is_calculated]
	      ,tv.[created_on]
	      ,tv.[created_by]
	      ,tv.[archive]
	      ,tv.[is_forecast_upload] 
	      ,tv.[file_source]
	      ,tv.[val_proportionate]
	      ,tv.[ownership]
	FROM @groupDataType tv
	LEFT JOIN dbo.group_data AS atbl 
		ON  atbl.fk_organisation_id = tv.fk_organisation_id
		AND atbl.fk_metric_id = tv.fk_metric_id
		AND atbl.fk_attribute_id = tv.fk_attribute_id
		AND atbl.fk_status_id = tv.fk_status_id
		AND atbl.fk_privacy_id = tv.fk_privacy_id
		AND atbl.[date] = tv.[date]
		AND atbl.date_type = tv.date_type
		AND atbl.val_sum = tv.val_sum
		AND atbl.val_proportionate = tv.val_proportionate
		AND atbl.has_flags = tv.has_flags
		AND atbl.ownership = tv.ownership
		AND atbl.fk_currency_id = tv.fk_currency_id
		AND atbl.fk_source_id = tv.fk_source_id
		AND atbl.fk_confidence_id = tv.fk_confidence_id
		AND atbl.archive = tv.archive
	WHERE atbl.id IS NULL

	-- Collect existing ROWS and the new rows with new ID's
	INSERT INTO @groupDataLinkType
	SELECT atbl.[id],
		atbl.[fk_organisation_id]
	      ,atbl.[fk_metric_id]
	      ,atbl.[fk_attribute_id]
	      ,atbl.[fk_status_id]
	      ,atbl.[fk_privacy_id]
	      ,atbl.[date]
	      ,atbl.[date_type]
	      ,atbl.[val_sum]
	      ,atbl.[fk_currency_id]
	      ,atbl.[fk_source_id]
	      ,atbl.[fk_confidence_id]
	      ,atbl.[has_flags]
	      ,atbl.[is_calculated]
	      ,atbl.[created_on]
	      ,atbl.[created_by]
	      ,atbl.[archive]
	      ,atbl.[is_forecast_upload]
	      ,atbl.[file_source]
	      ,atbl.[val_proportionate]  
		  ,atbl.[ownership]
	FROM @groupDataType tv
	LEFT JOIN dbo.group_data AS atbl 
		ON  atbl.fk_organisation_id = tv.fk_organisation_id
		AND atbl.fk_metric_id = tv.fk_metric_id
		AND atbl.fk_attribute_id = tv.fk_attribute_id
		AND atbl.fk_status_id = tv.fk_status_id
		AND atbl.fk_privacy_id = tv.fk_privacy_id
		AND atbl.[date] = tv.[date]
		AND atbl.date_type = tv.date_type
		AND atbl.val_sum = tv.val_sum
		AND atbl.val_proportionate = tv.val_proportionate
		AND atbl.has_flags = tv.has_flags
		AND atbl.ownership = tv.ownership
		AND atbl.fk_currency_id = tv.fk_currency_id
		AND atbl.fk_source_id = tv.fk_source_id
		AND atbl.fk_confidence_id = tv.fk_confidence_id
		AND atbl.archive = tv.archive
	WHERE atbl.id IS NOT NULL

	
	EXEC [dbo].[proc_upsert_group_data_view_link] @groupDataLinkType = @groupDataLinkType, @batchDate = @batchDate, @analystTeamViewId = @analystTeamViewId, @secondAnalystTeamViewId = @secondAnalystTeamViewId

END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[group_data_links_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_privacy_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[val_sum]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[created_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[created_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[archive]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[is_forecast_upload]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[file_source]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[val_proportionate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[ownership]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType].[fk_status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_privacy_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType].[fk_privacy_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[val_sum]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType].[val_sum]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[val_proportionate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType].[val_proportionate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[ownership]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType].[ownership]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType].[fk_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType].[fk_source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[fk_confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType].[fk_confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[archive]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType].[archive]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType].[created_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType].[created_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType].[is_forecast_upload]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType].[file_source]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[created_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[created_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[is_forecast_upload]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[group_data].[file_source]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_data_view_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_data_view_link].[@groupDataLinkType]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_data_view_link].[@batchDate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_forecast_upload].[@batchDate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_data_view_link].[@analystTeamViewId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_forecast_upload].[@analystTeamViewId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_data_view_link].[@secondAnalystTeamViewId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_group_forecast_upload].[@secondAnalystTeamViewId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataLinkType]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataLinkType].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataLinkType].[fk_organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataLinkType].[fk_metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataLinkType].[fk_attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataLinkType].[fk_status_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataLinkType].[fk_privacy_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataLinkType].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataLinkType].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataLinkType].[val_sum]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataLinkType].[fk_currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataLinkType].[fk_source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataLinkType].[fk_confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataLinkType].[has_flags]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataLinkType].[is_calculated]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataLinkType].[created_on]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataLinkType].[created_by]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataLinkType].[archive]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataLinkType].[is_forecast_upload]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataLinkType].[file_source]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[varchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataLinkType].[val_proportionate]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataLinkType].[ownership]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType]" Disambiguator="15">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType].[fk_organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType].[fk_metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType].[fk_attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType].[fk_status_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType].[fk_privacy_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType].[val_sum]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType].[fk_currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType].[fk_source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType].[fk_confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType].[has_flags]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType].[is_calculated]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType].[created_on]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType].[created_by]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType].[archive]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType].[is_forecast_upload]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType].[file_source]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[varchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType].[val_proportionate]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType].[ownership]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[proc_upsert_group_forecast_upload].[@groupDataType]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[dbo].[group_data_type]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[proc_upsert_group_forecast_upload].[@batchDate]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[proc_upsert_group_forecast_upload].[@analystTeamViewId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[proc_upsert_group_forecast_upload].[@secondAnalystTeamViewId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="3656" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROC [dbo].[proc_upsert_group_forecast_upload]&#xD;&#xA;@groupDataType dbo.group_data_type READONLY,&#xD;&#xA;@batchDate DATETIME,&#xD;&#xA;@analystTeamViewId INT,&#xD;&#xA;@secondAnalystTeamViewId INT = 0&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[proc_upsert_organisation_data_view_link]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
DECLARE @now datetime = GETDATE()
	
	BEGIN TRY
		DELETE FROM dbo.organisation_data_view_link where fk_organisation_data_id IN (
			SELECT od.id
			FROM dbo.organisation_data_view_link as link
			LEFT JOIN @organisationDataLinkType AS tlinkCheck ON (tlinkCheck.id=link.fk_organisation_data_id and link.fk_data_view_id=@analystTeamViewId)
			LEFT JOIN dbo.organisation_data as od ON od.id=link.fk_organisation_data_id
			LEFT JOIN @organisationDataLinkType AS tlink ON (
				od.fk_organisation_id=tlink.fk_organisation_id
				AND od.fk_metric_id=tlink.fk_metric_id
				AND od.fk_attribute_id=tlink.fk_attribute_id
				AND od.[date]=tlink.[date]
				AND od.date_type=tlink.date_type
			)
			where tlink.id IS NOT NULL
			and link.fk_data_view_id=@analystTeamViewId
			and tlinkCheck.id is null
		) AND fk_data_view_id = @analystTeamViewId


		/*UPDATE dbo.organisation_data_view_link SET archive=1
		WHERE fk_organisation_data_id IN (
			SELECT od.id
			FROM dbo.organisation_data_view_link as link
			LEFT JOIN @organisationDataLinkType AS tlinkCheck ON (tlinkCheck.id=link.fk_organisation_data_id and link.fk_data_view_id=@analystTeamViewId)
			LEFT JOIN dbo.organisation_data as od ON od.id=link.fk_organisation_data_id
			LEFT JOIN @organisationDataLinkType AS tlink ON (
				od.fk_organisation_id=tlink.fk_organisation_id
				AND od.fk_metric_id=tlink.fk_metric_id
				AND od.fk_attribute_id=tlink.fk_attribute_id
				AND od.[date]=tlink.[date]
				AND od.date_type=tlink.date_type
			)
			where tlink.id IS NOT NULL
			and link.fk_data_view_id=@analystTeamViewId
			and link.archive=0
			and tlinkCheck.id is null
		) AND fk_data_view_id = @analystTeamViewId and archive=0*/
	END TRY  
	BEGIN CATCH  
		execute [dbo].[collect_data_insert_errors] @query_string = '[dbo].[proc_upsert_organisation_data_view_link] - DELETE FROM dbo.organisation_data_view_link'
	END CATCH


	-- Log TVP count
	/*DECLARE @orgcount int
	set @orgcount = (select count(*) from @organisationDataLinkType)
	declare @message char(20)
	set @message = cast(@orgcount AS char(20)) 
	execute [dbo].[collect_data_insert_errors] @query_string = @message*/
	------------------------------------------------------------------

	-- Log TVP count
	/*DECLARE @orgcount4 int
	set @orgcount4 = (SELECT count(tv.id) 
		FROM @organisationDataLinkType as tv
		LEFT JOIN dbo.organisation_data_view_link as link ON (tv.id=link.fk_organisation_data_id and link.fk_data_view_id=@analystTeamViewId)
		where link.fk_organisation_data_id is null)
	declare @message4 char(20)
	set @message4 = cast(@orgcount4 AS char(20)) 
	execute [dbo].[collect_data_insert_errors] @query_string = @message4*/
	------------------------------------------------------------------

	BEGIN TRY
		INSERT INTO dbo.organisation_data_view_link_history
		SELECT tv.id AS "fk_organisation_data_id", @analystTeamViewId AS "fk_data_view_id", @now AS "link_date" 
		FROM @organisationDataLinkType as tv
		LEFT JOIN dbo.organisation_data_view_link as link ON (tv.id=link.fk_organisation_data_id and link.fk_data_view_id=@analystTeamViewId)
		where link.fk_organisation_data_id is null

		-- Log TVP count after history insert
		/*DECLARE @orgcount3 int
		set @orgcount3 = (select count(*) from @organisationDataLinkType)
		declare @message3 char(20)
		set @message3 = cast(@orgcount3 AS char(20)) 
		execute [dbo].[collect_data_insert_errors] @query_string = @message3*/
		------------------------------------------------------------------
	END TRY  
	BEGIN CATCH  
		execute [dbo].[collect_data_insert_errors] @query_string = '[dbo].[organisation_data_view_link_history] - INSERT INTO dbo.organisation_data_view_link_history'
	END CATCH

	BEGIN TRY
		-- Insert link data
		INSERT INTO dbo.organisation_data_view_link
		SELECT tv.id AS "fk_organisation_data_id", @analystTeamViewId AS "fk_data_view_id", @now AS "link_date", 0 AS "archive"
		FROM @organisationDataLinkType as tv
		LEFT JOIN dbo.organisation_data_view_link as link ON (tv.id=link.fk_organisation_data_id and link.fk_data_view_id=@analystTeamViewId)
		where link.fk_organisation_data_id is null
	END TRY  
	BEGIN CATCH  


		/*INSERT INTO dbo.organisation_data_tmp
		SELECT [id],
			[fk_organisation_id]
		      ,[fk_metric_id]
		      ,[fk_attribute_id]
		      ,[fk_status_id]
		      ,[fk_privacy_id]
		      ,[date]
		      ,[date_type]
		      ,[val]
		      ,[fk_currency_id]
		      ,[fk_source_id]
		      ,[fk_confidence_id]
		      ,[has_flags]
		      ,[is_calculated]
		      ,[created_on]
		      ,[created_by]
		      ,[archive]
		      ,[is_forecast_upload]
		      ,[file_source]  FROM @organisationDataLinkType*/


		execute [dbo].[collect_data_insert_errors] @query_string = '[dbo].[proc_upsert_organisation_data_view_link] - INSERT INTO dbo.organisation_data_view_link'
	END CATCH

	-- Log TVP count after insert
	/*DECLARE @orgcount2 int
	set @orgcount2 = (select count(*) from @organisationDataLinkType)
	declare @message2 char(20)
	set @message2 = cast(@orgcount2 AS char(20)) 
	execute [dbo].[collect_data_insert_errors] @query_string = @message2*/
	------------------------------------------------------------------
	

	/*BEGIN TRY
		-- custom double write requested by CV & RP
		IF @secondAnalystTeamViewId != 0 BEGIN
			DELETE FROM dbo.organisation_data_view_link where fk_organisation_data_id IN (
				SELECT od.id
				FROM dbo.organisation_data_view_link as link
				LEFT JOIN @organisationDataLinkType AS tlinkCheck ON (tlinkCheck.id=link.fk_organisation_data_id and link.fk_data_view_id=@secondAnalystTeamViewId)
				LEFT JOIN dbo.organisation_data as od ON od.id=link.fk_organisation_data_id
				LEFT JOIN @organisationDataLinkType AS tlink ON (
					od.fk_organisation_id=tlink.fk_organisation_id
					AND od.fk_metric_id=tlink.fk_metric_id
					AND od.fk_attribute_id=tlink.fk_attribute_id
					AND od.[date]=tlink.[date]
					AND od.date_type=tlink.date_type
				)
				where tlink.id IS NOT NULL
				and link.fk_data_view_id=@secondAnalystTeamViewId
				and tlinkCheck.id is null
			) AND fk_data_view_id = @secondAnalystTeamViewId

			-- Insert link data
			INSERT INTO dbo.organisation_data_view_link
			SELECT tv.id AS "fk_organisation_data_id", @secondAnalystTeamViewId AS "fk_data_view_id", @now AS "link_date" 
			FROM @organisationDataLinkType as tv
			LEFT JOIN dbo.organisation_data_view_link as link ON (tv.id=link.fk_organisation_data_id and link.fk_data_view_id=@secondAnalystTeamViewId)
			where link.fk_organisation_data_id is null

			INSERT INTO dbo.organisation_data_view_link_history
			SELECT tv.id AS "fk_organisation_data_id", @secondAnalystTeamViewId AS "fk_data_view_id", @now AS "link_date" 
			FROM @organisationDataLinkType as tv
			LEFT JOIN dbo.organisation_data_view_link as link ON (tv.id=link.fk_organisation_data_id and link.fk_data_view_id=@secondAnalystTeamViewId)
			where link.fk_organisation_data_id is null
		END
	
	END TRY  
	BEGIN CATCH  
		execute [dbo].[collect_data_insert_errors] @query_string = '[dbo].[proc_upsert_organisation_data_view_link] secondAnalystTeamViewId'
	END CATCH*/

	
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_view_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_view_link].[fk_organisation_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_data_view_link].[@organisationDataLinkType]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_data_view_link].[@organisationDataLinkType].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_view_link].[fk_organisation_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_view_link].[fk_data_view_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_data_view_link].[@analystTeamViewId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_view_link].[fk_organisation_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_data_view_link].[@organisationDataLinkType].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_data_view_link].[@organisationDataLinkType].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_data_view_link].[@organisationDataLinkType].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_data_view_link].[@organisationDataLinkType].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_data_view_link].[@organisationDataLinkType].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_data_view_link].[@organisationDataLinkType].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_view_link].[fk_data_view_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_data_view_link].[@organisationDataLinkType].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_view_link].[fk_data_view_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[collect_data_insert_errors]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[collect_data_insert_errors].[@query_string]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_view_link_history]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_data_view_link].[@organisationDataLinkType].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_view_link].[fk_organisation_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_view_link].[fk_data_view_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_data_view_link].[@organisationDataLinkType].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[proc_upsert_organisation_data_view_link].[@organisationDataLinkType]" Disambiguator="24">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_data_view_link].[@organisationDataLinkType].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_data_view_link].[@organisationDataLinkType].[fk_organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_data_view_link].[@organisationDataLinkType].[fk_metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_data_view_link].[@organisationDataLinkType].[fk_attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_data_view_link].[@organisationDataLinkType].[fk_status_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_data_view_link].[@organisationDataLinkType].[fk_privacy_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_data_view_link].[@organisationDataLinkType].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_data_view_link].[@organisationDataLinkType].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_data_view_link].[@organisationDataLinkType].[val]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_data_view_link].[@organisationDataLinkType].[fk_currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_data_view_link].[@organisationDataLinkType].[fk_source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_data_view_link].[@organisationDataLinkType].[fk_confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_data_view_link].[@organisationDataLinkType].[has_flags]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_data_view_link].[@organisationDataLinkType].[is_calculated]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_data_view_link].[@organisationDataLinkType].[created_on]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_data_view_link].[@organisationDataLinkType].[created_by]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_data_view_link].[@organisationDataLinkType].[archive]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_data_view_link].[@organisationDataLinkType].[is_forecast_upload]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_data_view_link].[@organisationDataLinkType].[file_source]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[varchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[proc_upsert_organisation_data_view_link].[@organisationDataLinkType]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[dbo].[organisation_data_links_type]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[proc_upsert_organisation_data_view_link].[@analystTeamViewId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[proc_upsert_organisation_data_view_link].[@secondAnalystTeamViewId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="7429" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[proc_upsert_organisation_data_view_link]&#xD;&#xA;@organisationDataLinkType dbo.organisation_data_links_type READONLY,&#xD;&#xA;@analystTeamViewId INT,&#xD;&#xA;@secondAnalystTeamViewId INT = 0&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[proc_upsert_organisation_forecast_upload]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
DECLARE @organisationDataLinkType dbo.organisation_data_links_type;
DECLARE @linkDate DATETIME = GETDATE();

	-- INSERT NEW ROW
	INSERT INTO dbo.organisation_data (
		[fk_organisation_id]
	      ,[fk_metric_id]
	      ,[fk_attribute_id]
	      ,[fk_status_id]
	      ,[fk_privacy_id]
	      ,[date]
	      ,[date_type]
	      ,[val]
	      ,[fk_currency_id]
	      ,[fk_source_id]
	      ,[fk_confidence_id]
	      ,[has_flags]
	      ,[is_calculated]
	      ,[created_on]
	      ,[created_by]
	      ,[archive]
	      ,[is_forecast_upload]
	      ,[file_source])
	SELECT tv.[fk_organisation_id]
	      ,tv.[fk_metric_id]
	      ,tv.[fk_attribute_id]
	      ,tv.[fk_status_id]
	      ,tv.[fk_privacy_id]
	      ,tv.[date]
	      ,tv.[date_type]
	      ,tv.[val]
	      ,tv.[fk_currency_id]
	      ,tv.[fk_source_id]
	      ,tv.[fk_confidence_id]
	      ,tv.[has_flags]
	      ,tv.[is_calculated]
	      ,tv.[created_on]
	      ,tv.[created_by]
	      ,tv.[archive]
	      ,tv.[is_forecast_upload] 
	      ,tv.[file_source]
	FROM @organisationDataType tv
	LEFT JOIN dbo.organisation_data AS atbl 
		ON  atbl.fk_organisation_id = tv.fk_organisation_id
		AND atbl.fk_metric_id = tv.fk_metric_id
		AND atbl.fk_attribute_id = tv.fk_attribute_id
		AND atbl.fk_status_id = tv.fk_status_id
		AND atbl.[date] = tv.[date]
		AND atbl.date_type = tv.date_type
		AND atbl.val = tv.val
		AND atbl.has_flags = tv.has_flags
		AND atbl.fk_currency_id = tv.fk_currency_id
		AND atbl.fk_source_id = tv.fk_source_id
		AND atbl.fk_confidence_id = tv.fk_confidence_id
		AND atbl.is_forecast_upload = tv.is_forecast_upload
		AND atbl.is_calculated = tv.is_calculated
		AND atbl.archive = tv.archive
	WHERE atbl.id IS NULL

	-- Collect existing ROWS and the new rows with new ID's
	INSERT INTO @organisationDataLinkType
	SELECT atbl.[id],
		atbl.[fk_organisation_id]
	      ,atbl.[fk_metric_id]
	      ,atbl.[fk_attribute_id]
	      ,atbl.[fk_status_id]
	      ,atbl.[fk_privacy_id]
	      ,atbl.[date]
	      ,atbl.[date_type]
	      ,atbl.[val]
	      ,atbl.[fk_currency_id]
	      ,atbl.[fk_source_id]
	      ,atbl.[fk_confidence_id]
	      ,atbl.[has_flags]
	      ,atbl.[is_calculated]
	      ,atbl.[created_on]
	      ,atbl.[created_by]
	      ,atbl.[archive]
	      ,atbl.[is_forecast_upload]
	      ,atbl.[file_source]  FROM @organisationDataType tv
	LEFT JOIN dbo.organisation_data AS atbl 
		ON  atbl.fk_organisation_id = tv.fk_organisation_id
		AND atbl.fk_metric_id = tv.fk_metric_id
		AND atbl.fk_attribute_id = tv.fk_attribute_id
		AND atbl.fk_status_id = tv.fk_status_id
		AND atbl.[date] = tv.[date]
		AND atbl.date_type = tv.date_type
		AND atbl.val = tv.val
		AND atbl.has_flags = tv.has_flags
		AND atbl.fk_currency_id = tv.fk_currency_id
		AND atbl.fk_source_id = tv.fk_source_id
		AND atbl.fk_confidence_id = tv.fk_confidence_id
		AND atbl.is_forecast_upload = tv.is_forecast_upload
		AND atbl.is_calculated = tv.is_calculated
		AND atbl.archive = tv.archive
	WHERE atbl.id IS NOT NULL

		
	EXEC [dbo].[proc_upsert_organisation_data_view_link] @organisationDataLinkType = @organisationDataLinkType, @analystTeamViewId = @analystTeamViewId, @secondAnalystTeamViewId = @secondAnalystTeamViewId

END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[organisation_data_links_type]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_privacy_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[val]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[created_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[created_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[archive]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[is_forecast_upload]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[file_source]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataType]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataType].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataType].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataType].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataType].[fk_status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataType].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataType].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[val]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataType].[val]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataType].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataType].[fk_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataType].[fk_source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataType].[fk_confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[is_forecast_upload]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataType].[is_forecast_upload]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataType].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[archive]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataType].[archive]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataType].[fk_privacy_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataType].[created_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataType].[created_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataType].[file_source]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_privacy_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[created_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[created_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[file_source]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_data_view_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_data_view_link].[@organisationDataLinkType]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_data_view_link].[@analystTeamViewId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_forecast_upload].[@analystTeamViewId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_data_view_link].[@secondAnalystTeamViewId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_forecast_upload].[@secondAnalystTeamViewId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataLinkType]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataLinkType].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataLinkType].[fk_organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataLinkType].[fk_metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataLinkType].[fk_attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataLinkType].[fk_status_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataLinkType].[fk_privacy_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataLinkType].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataLinkType].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataLinkType].[val]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataLinkType].[fk_currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataLinkType].[fk_source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataLinkType].[fk_confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataLinkType].[has_flags]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataLinkType].[is_calculated]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataLinkType].[created_on]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataLinkType].[created_by]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataLinkType].[archive]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataLinkType].[is_forecast_upload]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataLinkType].[file_source]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[varchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataType]" Disambiguator="23">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataType].[fk_organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataType].[fk_metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataType].[fk_attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataType].[fk_status_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataType].[fk_privacy_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataType].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataType].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataType].[val]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataType].[fk_currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataType].[fk_source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataType].[fk_confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataType].[has_flags]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataType].[is_calculated]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataType].[created_on]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataType].[created_by]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataType].[archive]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataType].[is_forecast_upload]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataType].[file_source]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[varchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@organisationDataType]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[dbo].[organisation_data_type]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@analystTeamViewId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[proc_upsert_organisation_forecast_upload].[@secondAnalystTeamViewId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="3487" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROC [dbo].[proc_upsert_organisation_forecast_upload]&#xD;&#xA;@organisationDataType dbo.organisation_data_type READONLY,&#xD;&#xA;@analystTeamViewId INT,&#xD;&#xA;@secondAnalystTeamViewId INT = 0&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[proc_upsert_organisation_reported_data_view_link]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN

DECLARE @now datetime = GETUTCDATE()
	
	BEGIN TRY
		DELETE FROM dbo.organisation_data_metadata where fk_organisation_data_id IN (
			SELECT od.id FROM @organisationReportedDataLinkType as od
		)

		DELETE FROM dbo.organisation_data_flags_link where fk_organisation_data_id IN (
			SELECT od.id FROM @organisationReportedDataLinkType as od
		)
		
		DELETE FROM dbo.organisation_data_view_link where fk_organisation_data_id IN (
			SELECT od.id
			FROM dbo.organisation_data_view_link as link
			LEFT JOIN @organisationReportedDataLinkType AS tlinkCheck ON tlinkCheck.id=link.fk_organisation_data_id
			LEFT JOIN dbo.organisation_data as od ON od.id=link.fk_organisation_data_id
			LEFT JOIN @organisationReportedDataLinkType AS tlink ON (
				od.fk_organisation_id=tlink.fk_organisation_id
				AND od.fk_metric_id=tlink.fk_metric_id
				AND od.fk_attribute_id=tlink.fk_attribute_id
				AND od.[date]=tlink.[date]
				AND od.date_type=tlink.date_type
			)
			where tlink.id IS NOT NULL
			and link.fk_data_view_id=@analystTeamViewId
			and tlinkCheck.id is null
		) AND fk_data_view_id = @analystTeamViewId
	END TRY  
	BEGIN CATCH  
		execute [dbo].[collect_data_insert_errors] @query_string = '[dbo].[proc_upsert_organisation_reported_data_view_link] - DELETE FROM dbo.organisation_data_view_link'
	END CATCH


	BEGIN TRY
		INSERT INTO dbo.organisation_data_view_link_history
		SELECT tv.id AS "fk_organisation_data_id", @analystTeamViewId AS "fk_data_view_id", @now AS "link_date" 
		FROM @organisationReportedDataLinkType as tv
		LEFT JOIN dbo.organisation_data_view_link as link ON (tv.id=link.fk_organisation_data_id and link.fk_data_view_id=@analystTeamViewId)
		where link.fk_organisation_data_id is null
	END TRY  
	BEGIN CATCH  
		execute [dbo].[collect_data_insert_errors] @query_string = '[dbo].[proc_upsert_organisation_reported_data_view_link] - INSERT INTO dbo.organisation_data_view_link_history'
	END CATCH


	-- Insert link data
	BEGIN TRY
		INSERT INTO dbo.organisation_data_view_link
		SELECT tv.id AS "fk_organisation_data_id", @analystTeamViewId AS "fk_data_view_id", @now AS "link_date", 0 AS "archive"
		FROM @organisationReportedDataLinkType as tv
		LEFT JOIN dbo.organisation_data_view_link as link ON (tv.id=link.fk_organisation_data_id and link.fk_data_view_id=@analystTeamViewId)
		where link.fk_organisation_data_id is null
	END TRY  
	BEGIN CATCH  
		execute [dbo].[collect_data_insert_errors] @query_string = '[dbo].[proc_upsert_organisation_reported_data_view_link] - INSERT INTO dbo.organisation_data_view_link'
	END CATCH
	

	BEGIN TRY
		INSERT INTO dbo.organisation_data_metadata (fk_organisation_data_id, location, location_cleaned, definition, notes)
		SELECT od.id, od.location, od.location_cleaned, od.definition, od.notes
		FROM @organisationReportedDataLinkType as od
		LEFT JOIN dbo.organisation_data_metadata as link ON (od.id=link.fk_organisation_data_id)
		where link.fk_organisation_data_id is null
	END TRY  
	BEGIN CATCH  
		execute [dbo].[collect_data_insert_errors] @query_string = '[dbo].[proc_upsert_organisation_reported_data_view_link] - INSERT INTO dbo.organisation_data_metadata'
	END CATCH


	BEGIN TRY
		INSERT INTO dbo.organisation_data_flags_link (fk_organisation_data_id, fk_flag_id)
		SELECT od.id, od.fk_flag_id
		FROM @organisationReportedDataLinkType as od 
		LEFT JOIN dbo.organisation_data_flags_link as link ON (od.id=link.fk_organisation_data_id)
		where od.fk_flag_id is not null AND link.fk_organisation_data_id is null
	END TRY  
	BEGIN CATCH  
		execute [dbo].[collect_data_insert_errors] @query_string = '[dbo].[proc_upsert_organisation_reported_data_view_link] - INSERT INTO dbo.organisation_data_flags_link'
	END CATCH

END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata].[fk_organisation_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_flags_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_flags_link].[fk_organisation_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_view_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_view_link].[fk_organisation_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_view_link].[fk_organisation_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_view_link].[fk_organisation_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_view_link].[fk_data_view_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@analystTeamViewId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_view_link].[fk_data_view_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[collect_data_insert_errors]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[collect_data_insert_errors].[@query_string]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_view_link_history]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_view_link].[fk_organisation_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_view_link].[fk_data_view_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata].[location]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata].[location_cleaned]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata].[definition]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata].[notes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata].[fk_organisation_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[location]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[location_cleaned]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[definition]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[notes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_flags_link].[fk_flag_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_flags_link].[fk_organisation_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[fk_flag_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType]" Disambiguator="20">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[fk_organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[fk_metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[fk_attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[fk_status_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[fk_privacy_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[val]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[fk_currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[fk_source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[fk_confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[has_flags]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[is_calculated]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[created_on]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[created_by]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[archive]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[is_forecast_upload]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[file_source]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[location]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[location_cleaned]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[definition]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[notes]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType].[fk_flag_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[dbo].[organisation_reported_data_links_type]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@analystTeamViewId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="3977" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[proc_upsert_organisation_reported_data_view_link]&#xD;&#xA;@organisationReportedDataLinkType dbo.organisation_reported_data_links_type READONLY,&#xD;&#xA;@analystTeamViewId INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[proc_upsert_organisation_reported_upload]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN

DECLARE @organisationReportedDataLinkType dbo.organisation_reported_data_links_type;
DECLARE @linkDate DATETIME = GETDATE();

	-- INSERT NEW ROW
	INSERT INTO dbo.organisation_data (
		[fk_organisation_id]
	      ,[fk_metric_id]
	      ,[fk_attribute_id]
	      ,[fk_status_id]
	      ,[fk_privacy_id]
	      ,[date]
	      ,[date_type]
	      ,[val]
	      ,[fk_currency_id]
	      ,[fk_source_id]
	      ,[fk_confidence_id]
	      ,[has_flags]
	      ,[is_calculated]
	      ,[created_on]
	      ,[created_by]
	      ,[archive]
	      ,[is_forecast_upload]
	      ,[file_source])
	SELECT tv.[fk_organisation_id]
	      ,tv.[fk_metric_id]
	      ,tv.[fk_attribute_id]
	      ,tv.[fk_status_id]
	      ,tv.[fk_privacy_id]
	      ,tv.[date]
	      ,tv.[date_type]
	      ,tv.[val]
	      ,tv.[fk_currency_id]
	      ,tv.[fk_source_id]
	      ,tv.[fk_confidence_id]
	      ,tv.[has_flags]
	      ,tv.[is_calculated]
	      ,tv.[created_on]
	      ,tv.[created_by]
	      ,tv.[archive]
	      ,tv.[is_forecast_upload] 
	      ,tv.[file_source]
	FROM @organisationReportedDataType tv
	LEFT JOIN dbo.organisation_data AS atbl 
		ON  atbl.fk_organisation_id = tv.fk_organisation_id
		AND atbl.fk_metric_id = tv.fk_metric_id
		AND atbl.fk_attribute_id = tv.fk_attribute_id
		AND atbl.fk_status_id = tv.fk_status_id
		AND atbl.[date] = tv.[date]
		AND atbl.date_type = tv.date_type
		AND atbl.val = tv.val
		AND atbl.has_flags = tv.has_flags
		AND atbl.fk_currency_id = tv.fk_currency_id
		AND atbl.fk_source_id = tv.fk_source_id
		AND atbl.fk_confidence_id = tv.fk_confidence_id
		AND atbl.is_forecast_upload = tv.is_forecast_upload
		AND atbl.is_calculated = tv.is_calculated
		AND atbl.archive = tv.archive
	WHERE atbl.id IS NULL


	
	-- Collect existing ROWS and the new rows with new ID's
	INSERT INTO @organisationReportedDataLinkType (
		  [id]
		  ,[fk_organisation_id]
	      ,[fk_metric_id]
	      ,[fk_attribute_id]
	      ,[fk_status_id]
	      ,[fk_privacy_id]
	      ,[date]
	      ,[date_type]
	      ,[val]
	      ,[fk_currency_id]
	      ,[fk_source_id]
	      ,[fk_confidence_id]
	      ,[has_flags]
	      ,[is_calculated]
	      ,[created_on]
	      ,[created_by]
	      ,[archive]
	      ,[is_forecast_upload]
	      ,[file_source]
		,[location], [location_cleaned], [definition], [notes], [fk_flag_id]  )
	SELECT atbl.[id],
		atbl.[fk_organisation_id]
	      ,atbl.[fk_metric_id]
	      ,atbl.[fk_attribute_id]
	      ,atbl.[fk_status_id]
	      ,atbl.[fk_privacy_id]
	      ,atbl.[date]
	      ,atbl.[date_type]
	      ,atbl.[val]
	      ,atbl.[fk_currency_id]
	      ,atbl.[fk_source_id]
	      ,atbl.[fk_confidence_id]
	      ,atbl.[has_flags]
	      ,atbl.[is_calculated]
	      ,atbl.[created_on]
	      ,atbl.[created_by]
	      ,atbl.[archive]
	      ,atbl.[is_forecast_upload]
	      ,atbl.[file_source], 
		CASE WHEN tv.location IS NOT NULL THEN tv.location ELSE odm.location END AS "location", 
		CASE WHEN tv.location_cleaned IS NOT NULL THEN tv.location_cleaned ELSE odm.location_cleaned END AS "location_cleaned", 
		CASE WHEN tv.definition IS NOT NULL THEN tv.definition ELSE odm.definition END AS "definition", 
		CASE WHEN tv.notes IS NOT NULL THEN tv.notes ELSE odm.notes END AS "notes" ,
		CASE WHEN tv.fk_flag_id  IS NOT NULL THEN tv.fk_flag_id ELSE ofl.fk_flag_id END AS "fk_flag_id" 
	FROM @organisationReportedDataType tv
	LEFT JOIN dbo.organisation_data AS atbl 
		ON  atbl.fk_organisation_id = tv.fk_organisation_id
		AND atbl.fk_metric_id = tv.fk_metric_id
		AND atbl.fk_attribute_id = tv.fk_attribute_id
		AND atbl.fk_status_id = tv.fk_status_id
		AND atbl.[date] = tv.[date]
		AND atbl.date_type = tv.date_type
		AND atbl.val = tv.val
		AND atbl.has_flags = tv.has_flags
		AND atbl.fk_currency_id = tv.fk_currency_id
		AND atbl.fk_source_id = tv.fk_source_id
		AND atbl.fk_confidence_id = tv.fk_confidence_id
		AND atbl.is_forecast_upload = tv.is_forecast_upload
		AND atbl.is_calculated = tv.is_calculated
		AND atbl.archive = tv.archive
	LEFT JOIN dbo.organisation_data_metadata as odm ON odm.fk_organisation_data_id=atbl.id
	LEFT JOIN dbo.organisation_data_flags_link as ofl ON ofl.fk_organisation_data_id=atbl.id
	WHERE atbl.id IS NOT NULL 

	EXEC [dbo].[proc_upsert_organisation_reported_data_view_link] @organisationReportedDataLinkType = @organisationReportedDataLinkType, @analystTeamViewId = @analystTeamViewId
	
	/*END TRY  
	BEGIN CATCH  
		DECLARE @message VARCHAR(255) = 'dbo.proc_upsert_organisation_reported_upload, view:' + CAST(@analystTeamViewId as VARCHAR(16))
		execute [dbo].[collect_data_insert_errors] @query_string = @message
	END CATCH*/
	
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[organisation_reported_data_links_type]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_privacy_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[val]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[created_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[created_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[archive]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[is_forecast_upload]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[file_source]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[fk_status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[val]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[val]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[fk_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[fk_source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[fk_confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[is_forecast_upload]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[is_forecast_upload]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[archive]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[archive]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[fk_privacy_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[created_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[created_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[file_source]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[fk_status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[fk_privacy_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[val]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[fk_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[fk_source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[fk_confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[created_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[created_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[archive]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[is_forecast_upload]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[file_source]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[location]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[location_cleaned]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[definition]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[notes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[fk_flag_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata].[fk_organisation_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_flags_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_flags_link].[fk_organisation_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_privacy_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[val]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[created_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[created_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[archive]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[is_forecast_upload]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[file_source]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[location]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata].[location]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[location_cleaned]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata].[location_cleaned]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[definition]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata].[definition]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[notes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_metadata].[notes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[fk_flag_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_flags_link].[fk_flag_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_data_view_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@organisationReportedDataLinkType]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_data_view_link].[@analystTeamViewId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_organisation_reported_upload].[@analystTeamViewId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[fk_organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[fk_metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[fk_attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[fk_status_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[fk_privacy_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[val]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[fk_currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[fk_source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[fk_confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[has_flags]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[is_calculated]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[created_on]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[created_by]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[archive]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[is_forecast_upload]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[file_source]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[location]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[location_cleaned]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[definition]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[notes]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataLinkType].[fk_flag_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType]" Disambiguator="19">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[fk_organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[fk_metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[fk_attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[fk_status_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[fk_privacy_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[val]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[fk_currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[fk_source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[fk_confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[has_flags]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[is_calculated]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[created_on]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[created_by]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[archive]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[is_forecast_upload]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[file_source]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[location]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[location_cleaned]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[definition]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[notes]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType].[fk_flag_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[proc_upsert_organisation_reported_upload].[@organisationReportedDataType]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[dbo].[organisation_reported_data_type]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[proc_upsert_organisation_reported_upload].[@analystTeamViewId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="6" />
				<Property Name="Length" Value="4932" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [dbo].[proc_upsert_organisation_reported_upload]&#xD;&#xA;@organisationReportedDataType dbo.organisation_reported_data_type READONLY,&#xD;&#xA;@analystTeamViewId INT&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[proc_upsert_zone_data_view_link]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
DECLARE @now datetime = GETDATE()

	BEGIN TRY
		DELETE FROM dbo.zone_data_view_link where fk_zone_data_id IN (
			SELECT od.id
			FROM dbo.zone_data_view_link as link
			LEFT JOIN @zoneDataLinkType AS tlinkCheck ON (tlinkCheck.id=link.fk_zone_data_id and link.fk_data_view_id=@analystTeamViewId)
			LEFT JOIN dbo.zone_data as od ON od.id=link.fk_zone_data_id
			LEFT JOIN @zoneDataLinkType AS tlink ON (
				od.fk_zone_id=tlink.fk_zone_id
				AND od.fk_metric_id=tlink.fk_metric_id
				AND od.fk_attribute_id=tlink.fk_attribute_id
				AND od.[date]=tlink.[date]
				AND od.date_type=tlink.date_type
				AND od.is_spot_price=tlink.is_spot_price
				AND od.fk_currency_id=tlink.fk_currency_id
			)
			where tlink.id IS NOT NULL
			and link.fk_data_view_id=@analystTeamViewId
			and tlinkCheck.id is null
		) AND fk_data_view_id = @analystTeamViewId
	END TRY  
	BEGIN CATCH  
		execute [dbo].[collect_data_insert_errors] @query_string = '[dbo].[proc_upsert_zone_data_view_link] - DELETE FROM dbo.zone_data_view_link'
	END CATCH

	BEGIN TRY
		INSERT INTO dbo.zone_data_view_link_history
		SELECT tv.id AS "fk_zone_data_id", @analystTeamViewId AS "fk_data_view_id", @now AS "created"
		FROM @zoneDataLinkType as tv
		LEFT JOIN dbo.zone_data_view_link as link ON (tv.id=link.fk_zone_data_id and link.fk_data_view_id=@analystTeamViewId)
		where link.fk_zone_data_id is null
	END TRY  
	BEGIN CATCH  
		execute [dbo].[collect_data_insert_errors] @query_string = '[dbo].[proc_upsert_zone_data_view_link] - INSERT INTO dbo.zone_data_view_link_history'
	END CATCH

	BEGIN TRY
		-- Insert link data
		INSERT INTO dbo.zone_data_view_link
		SELECT tv.id AS "fk_zone_data_id", @analystTeamViewId AS "fk_data_view_id", @now AS "created", 0 AS "archive"
		FROM @zoneDataLinkType as tv
		LEFT JOIN dbo.zone_data_view_link as link ON (tv.id=link.fk_zone_data_id and link.fk_data_view_id=@analystTeamViewId)
		where link.fk_zone_data_id is null
	END TRY  
	BEGIN CATCH  
		execute [dbo].[collect_data_insert_errors] @query_string = '[dbo].[proc_upsert_zone_data_view_link] - INSERT INTO dbo.zone_data_view_link'
	END CATCH

	
	-- custom double write requested by CV & RP
	/*IF @secondAnalystTeamViewId != 0 BEGIN
		DELETE FROM dbo.zone_data_view_link where fk_zone_data_id IN (
			SELECT od.id
			FROM dbo.zone_data_view_link as link
			LEFT JOIN @zoneDataLinkType AS tlinkCheck ON (tlinkCheck.id=link.fk_zone_data_id and link.fk_data_view_id=@secondAnalystTeamViewId)
			LEFT JOIN dbo.zone_data as od ON od.id=link.fk_zone_data_id
			LEFT JOIN @zoneDataLinkType AS tlink ON (
				od.fk_zone_id=tlink.fk_zone_id
				AND od.fk_metric_id=tlink.fk_metric_id
				AND od.fk_attribute_id=tlink.fk_attribute_id
				AND od.[date]=tlink.[date]
				AND od.date_type=tlink.date_type
				AND od.is_spot_price=tlink.is_spot_price
				AND od.fk_currency_id=tlink.fk_currency_id
			)
			where tlink.id IS NOT NULL
			and link.fk_data_view_id=@secondAnalystTeamViewId
			and tlinkCheck.id is null
		) AND fk_data_view_id = @secondAnalystTeamViewId

		-- Insert link data
		INSERT INTO dbo.zone_data_view_link
		SELECT tv.id AS "fk_zone_data_id", @secondAnalystTeamViewId AS "fk_data_view_id", @now AS "link_date" 
		FROM @zoneDataLinkType as tv
		LEFT JOIN dbo.zone_data_view_link as link ON (tv.id=link.fk_zone_data_id and link.fk_data_view_id=@secondAnalystTeamViewId)
		where link.fk_zone_data_id is null

		INSERT INTO dbo.zone_data_view_link_history
		SELECT tv.id AS "fk_zone_data_id", @secondAnalystTeamViewId AS "fk_data_view_id", @now AS "link_date" 
		FROM @zoneDataLinkType as tv
		LEFT JOIN dbo.zone_data_view_link as link ON (tv.id=link.fk_zone_data_id and link.fk_data_view_id=@secondAnalystTeamViewId)
		where link.fk_zone_data_id is null

	END*/
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_view_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_view_link].[fk_zone_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_data_view_link].[@zoneDataLinkType]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_data_view_link].[@zoneDataLinkType].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_view_link].[fk_zone_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_view_link].[fk_data_view_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_data_view_link].[@analystTeamViewId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_view_link].[fk_zone_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_data_view_link].[@zoneDataLinkType].[fk_zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_data_view_link].[@zoneDataLinkType].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_data_view_link].[@zoneDataLinkType].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_data_view_link].[@zoneDataLinkType].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_data_view_link].[@zoneDataLinkType].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[is_spot_price]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_data_view_link].[@zoneDataLinkType].[is_spot_price]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_data_view_link].[@zoneDataLinkType].[fk_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_data_view_link].[@zoneDataLinkType].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_view_link].[fk_data_view_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_data_view_link].[@zoneDataLinkType].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_view_link].[fk_data_view_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[collect_data_insert_errors]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[collect_data_insert_errors].[@query_string]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_view_link_history]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_data_view_link].[@zoneDataLinkType].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_view_link].[fk_zone_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_view_link].[fk_data_view_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_data_view_link].[@zoneDataLinkType].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[proc_upsert_zone_data_view_link].[@zoneDataLinkType]" Disambiguator="18">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_data_view_link].[@zoneDataLinkType].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_data_view_link].[@zoneDataLinkType].[fk_zone_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_data_view_link].[@zoneDataLinkType].[fk_metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_data_view_link].[@zoneDataLinkType].[fk_attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_data_view_link].[@zoneDataLinkType].[fk_status_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_data_view_link].[@zoneDataLinkType].[fk_privacy_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_data_view_link].[@zoneDataLinkType].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_data_view_link].[@zoneDataLinkType].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_data_view_link].[@zoneDataLinkType].[val]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_data_view_link].[@zoneDataLinkType].[fk_currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_data_view_link].[@zoneDataLinkType].[fk_source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_data_view_link].[@zoneDataLinkType].[fk_confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_data_view_link].[@zoneDataLinkType].[has_flags]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_data_view_link].[@zoneDataLinkType].[is_calculated]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_data_view_link].[@zoneDataLinkType].[archive]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_data_view_link].[@zoneDataLinkType].[is_spot_price]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[proc_upsert_zone_data_view_link].[@zoneDataLinkType]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[dbo].[zone_data_links_type]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[proc_upsert_zone_data_view_link].[@analystTeamViewId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[proc_upsert_zone_data_view_link].[@secondAnalystTeamViewId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="3996" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[proc_upsert_zone_data_view_link]&#xD;&#xA;@zoneDataLinkType dbo.zone_data_links_type READONLY,&#xD;&#xA;@analystTeamViewId INT,&#xD;&#xA;@secondAnalystTeamViewId INT = 0&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[proc_upsert_zone_forecast_upload]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
DECLARE @zoneDataLinkType dbo.zone_data_links_type;
DECLARE @linkDate DATETIME = GETDATE();

	-- INSERT NEW ROW
	INSERT INTO dbo.zone_data (
		[fk_zone_id]
	      ,[fk_metric_id]
	      ,[fk_attribute_id]
	      ,[fk_status_id]
	      ,[fk_privacy_id]
	      ,[date]
	      ,[date_type]
	      ,[val]
	      ,[fk_currency_id]
	      ,[fk_source_id]
	      ,[fk_confidence_id]
	      ,[has_flags]
	      ,[is_calculated]
	      ,[archive]
	      ,[is_spot_price])
	SELECT tv.[fk_zone_id]
	      ,tv.[fk_metric_id]
	      ,tv.[fk_attribute_id]
	      ,tv.[fk_status_id]
	      ,tv.[fk_privacy_id]
	      ,tv.[date]
	      ,tv.[date_type]
	      ,tv.[val]
	      ,tv.[fk_currency_id]
	      ,tv.[fk_source_id]
	      ,tv.[fk_confidence_id]
	      ,tv.[has_flags]
	      ,tv.[is_calculated]
	      ,tv.[archive]
	      ,tv.[is_spot_price]
	FROM @zoneDataType tv
	LEFT JOIN dbo.zone_data AS atbl 
		ON  atbl.fk_zone_id = tv.fk_zone_id
		AND atbl.fk_metric_id = tv.fk_metric_id
		AND atbl.fk_attribute_id = tv.fk_attribute_id
		AND atbl.fk_status_id = tv.fk_status_id
		AND atbl.[date] = tv.[date]
		AND atbl.date_type = tv.date_type
		AND atbl.val = tv.val
		AND atbl.has_flags = tv.has_flags
		AND atbl.fk_currency_id = tv.fk_currency_id
		AND atbl.fk_source_id = tv.fk_source_id
		AND atbl.fk_confidence_id = tv.fk_confidence_id
		AND atbl.is_spot_price = tv.is_spot_price
		AND atbl.is_calculated = tv.is_calculated
		AND atbl.archive = tv.archive
	WHERE atbl.id IS NULL
	
	-- Log TVP data count
	--DECLARE @count1 int = ( select count(*) from @zoneDataType )
	--DECLARE @message1 char(110) = '@zoneDataType count ' + CAST(@count1 as char(100))
	--execute [dbo].[collect_data_insert_errors] @query_string = @message1
	-----------------------



	
	-- Collect existing ROWS and the new rows with new ID's
	INSERT INTO @zoneDataLinkType
	SELECT atbl.[id],
		atbl.[fk_zone_id]
		  ,atbl.[fk_metric_id]
		  ,atbl.[fk_attribute_id]
		  ,atbl.[fk_status_id]
		  ,atbl.[fk_privacy_id]
		  ,atbl.[date]
		  ,atbl.[date_type]
		  ,atbl.[val]
		  ,atbl.[fk_currency_id]
		  ,atbl.[fk_source_id]
		  ,atbl.[fk_confidence_id]
		  ,atbl.[has_flags]
		  ,atbl.[is_calculated]
		  ,atbl.[archive]
		  ,atbl.[is_spot_price] FROM @zoneDataType tv
	LEFT JOIN dbo.zone_data AS atbl 
		ON  atbl.fk_zone_id = tv.fk_zone_id
		AND atbl.fk_metric_id = tv.fk_metric_id
		AND atbl.fk_attribute_id = tv.fk_attribute_id
		AND atbl.fk_status_id = tv.fk_status_id
		AND atbl.[date] = tv.[date]
		AND atbl.date_type = tv.date_type
		AND atbl.val = tv.val
		AND atbl.has_flags = tv.has_flags
		AND atbl.fk_currency_id = tv.fk_currency_id
		AND atbl.fk_source_id = tv.fk_source_id
		AND atbl.fk_confidence_id = tv.fk_confidence_id
		AND atbl.is_spot_price = tv.is_spot_price
		AND atbl.is_calculated = tv.is_calculated
		AND atbl.archive = tv.archive
	WHERE atbl.id IS NOT NULL

	-- Log TVP insert count
	--DECLARE @count int = ( select count(*) from @zoneDataLinkType )
	--DECLARE @message char(110) = '@zoneDataLinkType count ' + CAST(@count as char(100))
	--execute [dbo].[collect_data_insert_errors] @query_string = @message
	-----------------------
	
	EXEC [dbo].[proc_upsert_zone_data_view_link] @zoneDataLinkType = @zoneDataLinkType, @analystTeamViewId = @analystTeamViewId, @secondAnalystTeamViewId = @secondAnalystTeamViewId

		
	
	

END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[zone_data_links_type]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_privacy_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[val]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[archive]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[is_spot_price]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataType]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataType].[fk_zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataType].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataType].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataType].[fk_status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataType].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataType].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[val]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataType].[val]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataType].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataType].[fk_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataType].[fk_source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataType].[fk_confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[is_spot_price]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataType].[is_spot_price]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataType].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[archive]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataType].[archive]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataType].[fk_privacy_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_privacy_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_data_view_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_data_view_link].[@zoneDataLinkType]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_data_view_link].[@analystTeamViewId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_forecast_upload].[@analystTeamViewId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_data_view_link].[@secondAnalystTeamViewId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_forecast_upload].[@secondAnalystTeamViewId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataLinkType]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataLinkType].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataLinkType].[fk_zone_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataLinkType].[fk_metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataLinkType].[fk_attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataLinkType].[fk_status_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataLinkType].[fk_privacy_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataLinkType].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataLinkType].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataLinkType].[val]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataLinkType].[fk_currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataLinkType].[fk_source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataLinkType].[fk_confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataLinkType].[has_flags]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataLinkType].[is_calculated]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataLinkType].[archive]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataLinkType].[is_spot_price]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataType]" Disambiguator="17">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataType].[fk_zone_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataType].[fk_metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataType].[fk_attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataType].[fk_status_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataType].[fk_privacy_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataType].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataType].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataType].[val]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataType].[fk_currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataType].[fk_source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataType].[fk_confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataType].[has_flags]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataType].[is_calculated]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataType].[archive]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataType].[is_spot_price]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[proc_upsert_zone_forecast_upload].[@zoneDataType]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[dbo].[zone_data_type]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[proc_upsert_zone_forecast_upload].[@analystTeamViewId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[proc_upsert_zone_forecast_upload].[@secondAnalystTeamViewId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="3590" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROC [dbo].[proc_upsert_zone_forecast_upload]&#xD;&#xA;@zoneDataType dbo.zone_data_type READONLY,&#xD;&#xA;@analystTeamViewId INT,&#xD;&#xA;@secondAnalystTeamViewId INT = 0&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[proc_upsert_zone_reported_data_view_link]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN

DECLARE @now datetime = GETDATE()
	
	BEGIN TRY
		DELETE FROM dbo.zone_data_metadata where fk_zone_data_id IN (
			SELECT od.id FROM @zoneReportedDataLinkType as od
		)

		DELETE FROM dbo.zone_data_flags_link where fk_zone_data_id IN (
			SELECT od.id FROM @zoneReportedDataLinkType as od
		)
		
		DELETE FROM dbo.zone_data_view_link where fk_zone_data_id IN (
			SELECT od.id
			FROM dbo.zone_data_view_link as link
			LEFT JOIN @zoneReportedDataLinkType AS tlinkCheck ON (tlinkCheck.id=link.fk_zone_data_id and link.fk_data_view_id=@analystTeamViewId)
			LEFT JOIN dbo.zone_data as od ON od.id=link.fk_zone_data_id
			LEFT JOIN @zoneReportedDataLinkType AS tlink ON (
				od.fk_zone_id=tlink.fk_zone_id
				AND od.fk_metric_id=tlink.fk_metric_id
				AND od.fk_attribute_id=tlink.fk_attribute_id
				AND od.[date]=tlink.[date]
				AND od.date_type=tlink.date_type
			)
			where tlink.id IS NOT NULL
			and link.fk_data_view_id=@analystTeamViewId
			and tlinkCheck.id is null
		) AND fk_data_view_id = @analystTeamViewId
	END TRY  
	BEGIN CATCH  
		execute [dbo].[collect_data_insert_errors] @query_string = '[dbo].[proc_upsert_zone_reported_data_view_link] - DELETE FROM dbo.zone_data_view_link'
	END CATCH

	
	BEGIN TRY
		INSERT INTO dbo.zone_data_view_link_history
		SELECT tv.id AS "fk_zone_data_id", @analystTeamViewId AS "fk_data_view_id", @now AS "link_date" 
		FROM @zoneReportedDataLinkType as tv
		LEFT JOIN dbo.zone_data_view_link as link ON (tv.id=link.fk_zone_data_id and link.fk_data_view_id=@analystTeamViewId)
		where link.fk_zone_data_id is null
	END TRY  
	BEGIN CATCH  
		execute [dbo].[collect_data_insert_errors] @query_string = '[dbo].[proc_upsert_zone_reported_data_view_link] - INSERT INTO dbo.zone_data_view_link_history'
	END CATCH


	-- Insert link data
	BEGIN TRY
		INSERT INTO dbo.zone_data_view_link
		SELECT tv.id AS "fk_zone_data_id", @analystTeamViewId AS "fk_data_view_id", @now AS "link_date", 0 AS "archive"
		FROM @zoneReportedDataLinkType as tv
		LEFT JOIN dbo.zone_data_view_link as link ON (tv.id=link.fk_zone_data_id and link.fk_data_view_id=@analystTeamViewId)
		where link.fk_zone_data_id is null
	END TRY  
	BEGIN CATCH  
		execute [dbo].[collect_data_insert_errors] @query_string = '[dbo].[proc_upsert_zone_reported_data_view_link] - INSERT INTO dbo.zone_data_view_link'
	END CATCH

	
	BEGIN TRY
		INSERT INTO dbo.zone_data_metadata (fk_zone_data_id, location, location_cleaned, definition, notes)
		SELECT od.id, od.location, od.location_cleaned, od.definition, od.notes
		FROM @zoneReportedDataLinkType as od
		LEFT JOIN dbo.zone_data_metadata as link ON (od.id=link.fk_zone_data_id)
		where link.fk_zone_data_id is null
	END TRY  
	BEGIN CATCH  
		execute [dbo].[collect_data_insert_errors] @query_string = '[dbo].[proc_upsert_zone_reported_data_view_link] - INSERT INTO dbo.zone_data_metadata'
	END CATCH


	BEGIN TRY
		INSERT INTO dbo.zone_data_flags_link (fk_zone_data_id, fk_flag_id)
		SELECT od.id, od.fk_flag_id
		FROM @zoneReportedDataLinkType as od
		LEFT JOIN dbo.zone_data_flags_link as link ON (od.id=link.fk_zone_data_id)
		where link.fk_zone_data_id is null
	END TRY  
	BEGIN CATCH  
		execute [dbo].[collect_data_insert_errors] @query_string = '[dbo].[proc_upsert_zone_reported_data_view_link] - INSERT INTO dbo.zone_data_flags_link'
	END CATCH

END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_metadata]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_metadata].[fk_zone_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_flags_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_flags_link].[fk_zone_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_view_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_view_link].[fk_zone_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_view_link].[fk_zone_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_view_link].[fk_data_view_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@analystTeamViewId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_view_link].[fk_zone_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType].[fk_zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_view_link].[fk_data_view_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_view_link].[fk_data_view_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[collect_data_insert_errors]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[collect_data_insert_errors].[@query_string]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_view_link_history]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_view_link].[fk_zone_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_view_link].[fk_data_view_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_metadata].[location]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_metadata].[location_cleaned]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_metadata].[definition]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_metadata].[notes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_metadata].[fk_zone_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType].[location]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType].[location_cleaned]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType].[definition]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType].[notes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_flags_link].[fk_flag_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_flags_link].[fk_zone_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType].[fk_flag_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType]" Disambiguator="22">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType].[fk_zone_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType].[fk_metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType].[fk_attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType].[fk_status_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType].[fk_privacy_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType].[val]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType].[fk_currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType].[fk_source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType].[fk_confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType].[has_flags]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType].[is_calculated]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType].[archive]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType].[is_spot_price]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType].[location]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType].[location_cleaned]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType].[definition]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType].[notes]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType].[fk_flag_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[dbo].[zone_reported_data_links_type]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@analystTeamViewId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="3566" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[proc_upsert_zone_reported_data_view_link]&#xD;&#xA;@zoneReportedDataLinkType dbo.zone_reported_data_links_type READONLY,&#xD;&#xA;@analystTeamViewId INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[proc_upsert_zone_reported_upload]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN

DECLARE @zoneReportedDataLinkType dbo.zone_reported_data_links_type;
DECLARE @linkDate DATETIME = GETDATE();

	-- INSERT NEW ROW
	INSERT INTO dbo.zone_data (
		[fk_zone_id]
	      ,[fk_metric_id]
	      ,[fk_attribute_id]
	      ,[fk_status_id]
	      ,[fk_privacy_id]
	      ,[date]
	      ,[date_type]
	      ,[val]
	      ,[fk_currency_id]
	      ,[fk_source_id]
	      ,[fk_confidence_id]
	      ,[has_flags]
	      ,[is_calculated]
	      ,[archive]
	      ,[is_spot_price])
	SELECT tv.[fk_zone_id]
	      ,tv.[fk_metric_id]
	      ,tv.[fk_attribute_id]
	      ,tv.[fk_status_id]
	      ,tv.[fk_privacy_id]
	      ,tv.[date]
	      ,tv.[date_type]
	      ,tv.[val]
	      ,tv.[fk_currency_id]
	      ,tv.[fk_source_id]
	      ,tv.[fk_confidence_id]
	      ,tv.[has_flags]
	      ,tv.[is_calculated]
	      ,tv.[archive]
	      ,tv.[is_spot_price]
	FROM @zoneReportedDataType tv
	LEFT JOIN dbo.zone_data AS atbl 
		ON  atbl.fk_zone_id = tv.fk_zone_id
		AND atbl.fk_metric_id = tv.fk_metric_id
		AND atbl.fk_attribute_id = tv.fk_attribute_id
		AND atbl.fk_status_id = tv.fk_status_id
		AND atbl.[date] = tv.[date]
		AND atbl.date_type = tv.date_type
		AND atbl.val = tv.val
		AND atbl.has_flags = tv.has_flags
		AND atbl.fk_currency_id = tv.fk_currency_id
		AND atbl.fk_source_id = tv.fk_source_id
		AND atbl.fk_confidence_id = tv.fk_confidence_id
		AND atbl.is_spot_price = tv.is_spot_price
		AND atbl.is_calculated = tv.is_calculated
	WHERE atbl.id IS NULL



	-- Collect existing ROWS and the new rows with new ID's
	INSERT INTO @zoneReportedDataLinkType (
		  [id]
		  ,[fk_zone_id]
	      ,[fk_metric_id]
	      ,[fk_attribute_id]
	      ,[fk_status_id]
	      ,[fk_privacy_id]
	      ,[date]
	      ,[date_type]
	      ,[val]
	      ,[fk_currency_id]
	      ,[fk_source_id]
	      ,[fk_confidence_id]
	      ,[has_flags]
	      ,[is_calculated]
	      ,[archive]
	      ,[is_spot_price]
		,[location], [location_cleaned], [definition], [notes], [fk_flag_id]  )
	SELECT atbl.[id],
		atbl.[fk_zone_id]
	      ,atbl.[fk_metric_id]
	      ,atbl.[fk_attribute_id]
	      ,atbl.[fk_status_id]
	      ,atbl.[fk_privacy_id]
	      ,atbl.[date]
	      ,atbl.[date_type]
	      ,atbl.[val]
	      ,atbl.[fk_currency_id]
	      ,atbl.[fk_source_id]
	      ,atbl.[fk_confidence_id]
	      ,atbl.[has_flags]
	      ,atbl.[is_calculated]
	      ,atbl.[archive]
	      ,atbl.[is_spot_price],
		CASE WHEN tv.location IS NOT NULL THEN tv.location ELSE odm.location END AS "location", 
		CASE WHEN tv.location_cleaned IS NOT NULL THEN tv.location_cleaned ELSE odm.location_cleaned END AS "location_cleaned", 
		CASE WHEN tv.definition IS NOT NULL THEN tv.definition ELSE odm.definition END AS "definition", 
		CASE WHEN tv.notes IS NOT NULL THEN tv.notes ELSE odm.notes END AS "notes" ,
		CASE WHEN tv.fk_flag_id  IS NOT NULL THEN tv.fk_flag_id ELSE ofl.fk_flag_id END AS "fk_flag_id" 
	FROM @zoneReportedDataType tv
	LEFT JOIN dbo.zone_data AS atbl 
		ON  atbl.fk_zone_id = tv.fk_zone_id
		AND atbl.fk_metric_id = tv.fk_metric_id
		AND atbl.fk_attribute_id = tv.fk_attribute_id
		AND atbl.fk_status_id = tv.fk_status_id
		AND atbl.[date] = tv.[date]
		AND atbl.date_type = tv.date_type
		AND atbl.val = tv.val
		AND atbl.has_flags = tv.has_flags
		AND atbl.fk_currency_id = tv.fk_currency_id
		AND atbl.fk_source_id = tv.fk_source_id
		AND atbl.fk_confidence_id = tv.fk_confidence_id
		AND atbl.is_spot_price = tv.is_spot_price
		AND atbl.is_calculated = tv.is_calculated
	LEFT JOIN dbo.zone_data_metadata as odm ON odm.fk_zone_data_id=atbl.id
	LEFT JOIN dbo.zone_data_flags_link as ofl ON ofl.fk_zone_data_id=atbl.id
	WHERE atbl.id IS NOT NULL 

	EXEC [dbo].[proc_upsert_zone_reported_data_view_link] @zoneReportedDataLinkType = @zoneReportedDataLinkType, @analystTeamViewId = @analystTeamViewId

	
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[zone_reported_data_links_type]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_privacy_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[val]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[archive]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[is_spot_price]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType].[fk_zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType].[fk_status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[val]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType].[val]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType].[fk_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType].[fk_source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType].[fk_confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[is_spot_price]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType].[is_spot_price]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType].[fk_privacy_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType].[archive]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[fk_zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[fk_status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[fk_privacy_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[val]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[fk_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[fk_source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[fk_confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[archive]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[is_spot_price]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[location]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[location_cleaned]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[definition]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[notes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[fk_flag_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_metadata]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_metadata].[fk_zone_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_flags_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_flags_link].[fk_zone_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_privacy_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[val]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[archive]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[is_spot_price]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType].[location]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_metadata].[location]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType].[location_cleaned]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_metadata].[location_cleaned]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType].[definition]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_metadata].[definition]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType].[notes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_metadata].[notes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType].[fk_flag_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_flags_link].[fk_flag_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_data_view_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@zoneReportedDataLinkType]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_data_view_link].[@analystTeamViewId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[proc_upsert_zone_reported_upload].[@analystTeamViewId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[fk_zone_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[fk_metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[fk_attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[fk_status_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[fk_privacy_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[val]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[fk_currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[fk_source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[fk_confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[has_flags]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[is_calculated]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[archive]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[is_spot_price]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[location]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[location_cleaned]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[definition]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[notes]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataLinkType].[fk_flag_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType]" Disambiguator="21">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType].[fk_zone_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType].[fk_metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType].[fk_attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType].[fk_status_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType].[fk_privacy_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType].[val]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType].[fk_currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType].[fk_source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType].[fk_confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType].[has_flags]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType].[is_calculated]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType].[archive]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType].[is_spot_price]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType].[location]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType].[location_cleaned]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType].[definition]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType].[notes]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType].[fk_flag_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[proc_upsert_zone_reported_upload].[@zoneReportedDataType]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[dbo].[zone_reported_data_type]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[proc_upsert_zone_reported_upload].[@analystTeamViewId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="6" />
				<Property Name="Length" Value="4076" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [dbo].[proc_upsert_zone_reported_upload]&#xD;&#xA;@zoneReportedDataType dbo.zone_reported_data_type READONLY,&#xD;&#xA;@analystTeamViewId INT&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[process_create_hashes]">
			<Property Name="BodyScript">
				<Value><![CDATA[

IF @debug = 0
BEGIN
	-- Add new data point and metadata hashes
	UPDATE	wi_import.dbo.ds_organisation_data
	SET 	index_hash 	= HASHBYTES('MD5', CAST(organisation_id AS nvarchar(max)) + '-' + CAST(metric_id AS nvarchar(max)) + '-' + CAST(attribute_id AS nvarchar(max)) + '-' + CONVERT(nvarchar, date, 120) + '-' + CAST(date_type AS nvarchar(max))),
			hash 		= HASHBYTES('MD5', CAST(organisation_id AS nvarchar(max)) + '-' + CAST(metric_id AS nvarchar(max)) + '-' + CAST(attribute_id AS nvarchar(max)) + '-' + CONVERT(nvarchar, date, 120) + '-' + CAST(date_type AS nvarchar(max)) + CASE WHEN val_d IS null THEN ' ' ELSE CAST(val_d AS nvarchar(max)) END + CASE WHEN val_i IS null THEN ' ' ELSE CAST(val_i AS nvarchar(max)) END + CAST(currency_id AS nvarchar(max)) + CAST(source_id AS nvarchar(max)) + CAST(confidence_id AS nvarchar(max)) + CASE WHEN location IS null THEN ' ' ELSE CAST(location AS nvarchar(max)) END + CASE WHEN definition IS null THEN ' ' ELSE CAST(definition AS nvarchar(max)) END + CASE WHEN notes IS null THEN ' ' ELSE CAST(notes AS nvarchar(max)) END)
	WHERE 	hash IS null OR index_hash IS null

	UPDATE	wi_import.dbo.ds_zone_data
	SET 	index_hash 	= HASHBYTES('MD5', CAST(zone_id AS nvarchar(max)) + '-' + CAST(metric_id AS nvarchar(max)) + '-' + CAST(attribute_id AS nvarchar(max)) + '-' + CONVERT(nvarchar, date, 120) + '-' + CAST(date_type AS nvarchar(max))),
			hash 		= HASHBYTES('MD5', CAST(zone_id AS nvarchar(max)) + '-' + CAST(metric_id AS nvarchar(max)) + '-' + CAST(attribute_id AS nvarchar(max)) + '-' + CONVERT(nvarchar, date, 120) + '-' + CAST(date_type AS nvarchar(max)) + CASE WHEN val_d IS null THEN ' ' ELSE CAST(val_d AS nvarchar(max)) END + CASE WHEN val_i IS null THEN ' ' ELSE CAST(val_i AS nvarchar(max)) END + CAST(currency_id AS nvarchar(max)) + CAST(source_id AS nvarchar(max)) + CAST(confidence_id AS nvarchar(max)) + CASE WHEN location IS null THEN ' ' ELSE CAST(location AS nvarchar(max)) END + CASE WHEN definition IS null THEN ' ' ELSE CAST(definition AS nvarchar(max)) END + CASE WHEN notes IS null THEN ' ' ELSE CAST(notes AS nvarchar(max)) END)
	WHERE 	hash IS null OR index_hash IS null
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[process_create_hashes].[@debug]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[process_create_hashes].[@debug]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="2239" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[process_create_hashes] &#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@debug bit = 1&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[process_delete_duplicates]">
			<Property Name="BodyScript">
				<Value><![CDATA[

IF @debug = 0
BEGIN
	-- Add new data point and metadata hashes
	EXEC wi_import.dbo.process_create_hashes @debug
	
	
	-- Delete duplicates from data stores where only partial import sets should exist
	/*;WITH r AS
	(
		SELECT	id, index_hash, hash, created_on, rank = ROW_NUMBER() OVER (PARTITION BY index_hash ORDER BY created_on DESC)
		FROM	wi_import.dbo.ds_organisation_data
		WHERE	index_hash IS NOT null
	),
	r2 AS
	(
		SELECT	id, rank = ROW_NUMBER() OVER (PARTITION BY hash ORDER BY created_on)	-- ASC, to keep the original import
		FROM	r
		WHERE	rank IN (1,2)															-- Only the most recent import and its prior comparison
	)
	DELETE FROM wi_import.dbo.ds_organisation_data WHERE id IN (SELECT id FROM r2 WHERE rank <> 1)*/
	
	
	/*;WITH r AS
	(
		SELECT	id, index_hash, hash, created_on, rank = ROW_NUMBER() OVER (PARTITION BY index_hash ORDER BY created_on DESC)
		FROM	wi_import.dbo.ds_zone_data
		WHERE	index_hash IS NOT null
	),
	r2 AS
	(
		SELECT	id, rank = ROW_NUMBER() OVER (PARTITION BY hash ORDER BY created_on)	-- ASC, to keep the original import
		FROM	r
		WHERE	rank IN (1,2)															-- Only the most recent import and its prior comparison
	)
	DELETE FROM wi_import.dbo.ds_zone_data WHERE id IN (SELECT id FROM r2 WHERE rank <> 1)*/


	-- And auto-approve data that remains unchanged in all except its text metadata (source file, definition or notes) 
	;WITH r AS
	(
		SELECT	id, index_hash, hash, created_on, rank = ROW_NUMBER() OVER (PARTITION BY index_hash ORDER BY created_on DESC)
		FROM	wi_import.dbo.ds_organisation_data
		WHERE	index_hash IN (SELECT DISTINCT index_hash FROM wi_import.dbo.ds_organisation_data WHERE approved IS null)
	)

	UPDATE	ds

	SET		ds.approved = 1, ds.approval_hash = ds.import_hash, last_update_by = 11770

	FROM	(SELECT * FROM wi_import.dbo.ds_organisation_data WHERE id IN (SELECT id FROM r WHERE rank = 1)) ds INNER JOIN 
			(SELECT * FROM wi_import.dbo.ds_organisation_data WHERE id IN (SELECT id FROM r WHERE rank = 2)) ds2 ON ds.index_hash = ds2.index_hash

	WHERE	ds2.approved = 1 AND
			ds.currency_id = ds2.currency_id AND
			ds.source_id = ds2.source_id AND
			ds.confidence_id = ds2.confidence_id AND
			(
				(ds.val_i IS null AND ds.val_d = ds2.val_d) OR
				(ds.val_d IS null AND ds.val_i = ds2.val_i)
			)

	/*;WITH r AS
	(
		SELECT	id, index_hash, hash, created_on, rank = ROW_NUMBER() OVER (PARTITION BY index_hash ORDER BY created_on DESC)
		FROM	wi_import.dbo.ds_zone_data
		WHERE	index_hash IN (SELECT DISTINCT index_hash FROM wi_import.dbo.ds_zone_data WHERE approved IS null)
	)

	UPDATE	ds

	SET		ds.approved = 1, ds.approval_hash = ds.import_hash, last_update_by = 11770

	FROM	(SELECT * FROM wi_import.dbo.ds_zone_data WHERE id IN (SELECT id FROM r WHERE rank = 1)) ds INNER JOIN 
			(SELECT * FROM wi_import.dbo.ds_zone_data WHERE id IN (SELECT id FROM r WHERE rank = 2)) ds2 ON ds.index_hash = ds2.index_hash

	WHERE	ds2.approved = 1 AND
			ds.currency_id = ds2.currency_id AND
			ds.source_id = ds2.source_id AND
			ds.confidence_id = ds2.confidence_id AND
			(
				(ds.val_i IS null AND ds.val_d = ds2.val_d) OR
				(ds.val_d IS null AND ds.val_i = ds2.val_i)
			)*/
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[process_delete_duplicates].[@debug]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[process_delete_duplicates].[CTE1].[r]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[process_delete_duplicates].[CTE1].[r].[id]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[process_delete_duplicates].[CTE1].[r].[index_hash]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[process_delete_duplicates].[CTE1].[r].[hash]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[process_delete_duplicates].[CTE1].[r].[created_on]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[process_delete_duplicates].[CTE1].[r].[rank]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[process_delete_duplicates].[@debug]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="3333" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[process_delete_duplicates] &#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@debug bit = 1&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[process_legacy_hold_data]">
			<Property Name="BodyScript">
				<Value><![CDATA[

IF @debug = 0
BEGIN
	-- All data
	UPDATE	wi_import.dbo.ds_organisation_data
	SET		is_held_for_review = 1, approval_hash = null, last_update_by = 11770, last_update_on = GETDATE()
	WHERE	organisation_id IN (115,1981,2086,3135,3392,3944,4649,3414) AND approved = 1

	-- Operator-sourced connections, except M2M
	UPDATE	wi_import.dbo.ds_organisation_data
	SET 	is_held_for_review = 1, approval_hash = null, last_update_by = 11770, last_update_on = GETDATE()
	WHERE 	organisation_id IN (364,421) AND metric_id = 3 AND attribute_id <> 1251 AND source_id = 11 AND approved = 1

	-- M2M-impacted operator total/prepaid/contract connections
	UPDATE 	wi_import.dbo.ds_organisation_data
	SET 	is_held_for_review = 1, approval_hash = null, last_update_by = 11770, last_update_on = GETDATE()
	WHERE 	organisation_id IN (132,33,1197,408,676,167,119,706,175,473,189,47,222,828,832,393,176,488,634,561,140,402,465,521,295,317,404,362,105,467,532,212,778) AND metric_id = 3 AND attribute_id IN (0,99,822) AND approved = 1

	-- M2M-impacted operator total/prepaid connections
	UPDATE 	wi_import.dbo.ds_organisation_data
	SET 	is_held_for_review = 1, approval_hash = null, last_update_by = 11770, last_update_on = GETDATE()
	WHERE 	organisation_id IN (466,617) AND metric_id = 3 AND attribute_id IN (0,99) AND approved = 1

	-- M2M connections
	UPDATE 	wi_import.dbo.ds_organisation_data
	SET 	is_held_for_review = 1, approval_hash = null, last_update_by = 11770, last_update_on = GETDATE()
	WHERE 	organisation_id IN (638,636,431) AND metric_id IN (3,190) AND attribute_id = 1251 AND approved = 1
	
	-- Smartphone prepaid adoption
	UPDATE	wi_import.dbo.ds_organisation_data
	SET		is_held_for_review = 1, approval_hash = null, last_update_by = 11770, last_update_on = GETDATE()
	WHERE	organisation_id IN (107) AND metric_id IN (53) AND attribute_id = 1579 AND approved = 1
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[process_legacy_hold_data].[@debug]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[process_legacy_hold_data].[@debug]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1974" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[process_legacy_hold_data] &#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@debug bit = 1&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[process_legacy_map_dimvals]">
			<Property Name="BodyScript">
				<Value><![CDATA[

DECLARE @metric_id int, @attribute_id int

IF @debug = 0
BEGIN
	-- Fix for incorrect read-in files (incorrect wholesale dimension for connections)
	UPDATE wi_import.dbo.ds_organisation_forecast_data SET dimension_id = 1 WHERE metric_id IN (3,53) AND dimension_id = 7 AND dimension_val_id IN (987,1055)

	-- Remove ignored data and any lingering legacy technology-net-off data
	DELETE FROM wi_import.dbo.ds_organisation_forecast_data WHERE source_id = 24
	DELETE FROM wi_import.dbo.ds_organisation_forecast_data WHERE attribute_id IN (1398,1400,1402,1404,1406,1408,1410,1412,1414)

	-- Cross update dimensions with attributes in old-format import data tables
	UPDATE	ds
	SET		ds.attribute_id = d.attribute_id
	FROM	wi_import.dbo.ds_organisation_forecast_data ds INNER JOIN
			wi_master.dbo.attribute_dimval_legacy_link d ON (ds.dimension_id = d.dimension_id AND ds.dimension_val_id = d.dimval_id)
	WHERE	ds.attribute_id IS null AND ds.approved = 1

	-- Automatically create new dimvalue entries for new metrics since this schema is being depreciated
	CREATE TABLE #dimvals (metric_id int, attribute_id int, processed bit)

	INSERT INTO #dimvals
	SELECT	DISTINCT ds.metric_id, ds.attribute_id, 0
	FROM	wi_import.dbo.ds_organisation_data ds LEFT JOIN
			wi_master.dbo.attribute_dimval_legacy_link d ON (ds.metric_id = d.metric_id AND ds.attribute_id = d.attribute_id)
	WHERE	d.dimval_id IS null AND ds.attribute_id IS NOT null

	UNION

	SELECT	DISTINCT ds.metric_id, ds.attribute_id, 0
	FROM	wi_import.dbo.ds_organisation_forecast_data ds LEFT JOIN
			wi_master.dbo.attribute_dimval_legacy_link d ON (ds.metric_id = d.metric_id AND ds.attribute_id = d.attribute_id)
	WHERE	d.dimval_id IS null AND ds.attribute_id IS NOT null

	WHILE EXISTS (SELECT TOP 1 * FROM #dimvals WHERE processed = 0)
	BEGIN
		SET @metric_id		= (SELECT TOP 1 metric_id FROM #dimvals WHERE processed = 0)
		SET @attribute_id	= (SELECT TOP 1 attribute_id FROM #dimvals WHERE metric_id = @metric_id AND processed = 0)

		INSERT INTO wi_master.dbo.attribute_dimval_legacy_link (dimension_id, metric_id, attribute_id) VALUES (0, @metric_id, @attribute_id)
	
		UPDATE #dimvals SET processed = 1 WHERE metric_id = @metric_id AND attribute_id = @attribute_id
	END

	DROP TABLE #dimvals
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_legacy_map_dimvals].[@debug]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[dbo].[process_legacy_map_dimvals].[#dimvals]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[dbo].[process_legacy_map_dimvals].[#dimvals].[processed]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_legacy_map_dimvals].[#dimvals].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_legacy_map_dimvals].[#dimvals].[attribute_id]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[dbo].[process_legacy_map_dimvals].[#dimvals].[processed]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_legacy_map_dimvals].[#dimvals].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_legacy_map_dimvals].[#dimvals].[attribute_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[process_legacy_map_dimvals].[#dimvals]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_legacy_map_dimvals].[#dimvals].[metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_legacy_map_dimvals].[#dimvals].[attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_legacy_map_dimvals].[#dimvals].[processed]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[process_legacy_map_dimvals].[@debug]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="2383" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[process_legacy_map_dimvals] &#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@debug bit = 1&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[process_legacy_map_m2m_connections]">
			<Property Name="BodyScript">
				<Value><![CDATA[

IF @debug = 0
BEGIN
	-- Switch the metric_id for M2M connections imports from "excluding M2M" to "including M2M"
	-- TODO: remove when updating the import format/data set

	UPDATE wi_import.dbo.ds_organisation_data SET metric_id = 190 WHERE metric_id = 3 AND attribute_id IN (1251,1546,1547,1548,1549,1550)
	
	UPDATE wi_import.dbo.ds_organisation_forecast_data SET metric_id = 190 WHERE metric_id = 3 AND attribute_id IN (1251,1546,1547,1548,1549,1550)
	UPDATE wi_import.dbo.ds_organisation_forecast_data SET metric_id = 312 WHERE metric_id = 53 AND attribute_id IN (1251,1546,1547,1548,1549,1550)
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[process_legacy_map_m2m_connections].[@debug]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[process_legacy_map_m2m_connections].[@debug]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="705" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[process_legacy_map_m2m_connections] &#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@debug bit = 1&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[process_legacy_map_mobile_internet_subscribers]">
			<Property Name="BodyScript">
				<Value><![CDATA[

IF @debug = 0
BEGIN
	-- Make adjustments to imported legacy mobile internet subscriber data at the import phase
	-- TODO: remove when updating the import format/data set

	-- Add "Total" mobile internet subscribers by summing 2G and 3G+4G!
	INSERT INTO wi_import.dbo.ds_zone_forecast_data (zone_id, metric_id, attribute_id, date, date_type, val_d, val_i, currency_id, source_id, confidence_id, privacy_id, approved, approval_hash, import_hash, created_on, created_by, last_update_on, last_update_by)
	SELECT	zone_id, metric_id, 0, date, date_type, null, SUM(val_i), 0, MIN(source_id), MAX(confidence_id), 5, 1, approval_hash, import_hash, GETDATE(), 11770, GETDATE(), 11770
	FROM	wi_import.dbo.ds_zone_forecast_data
	WHERE	metric_id IN (307,330) AND attribute_id IN (796,1554) AND approved = 1
	GROUP BY approval_hash, import_hash, zone_id, metric_id, date, date_type

	-- Move mobile internet subscriber metrics into attributes of unique subscribers
	UPDATE wi_import.dbo.ds_zone_forecast_data SET metric_id = 1, attribute_id = CASE attribute_id WHEN 0 THEN 1581 WHEN 796 THEN 1582 WHEN 1554 THEN 1583 ELSE null END WHERE metric_id = 307 AND attribute_id IN (0,796,1554)
	UPDATE wi_import.dbo.ds_zone_forecast_data SET metric_id = 305, attribute_id = CASE attribute_id WHEN 0 THEN 1581 WHEN 796 THEN 1582 WHEN 1554 THEN 1583 ELSE null END WHERE metric_id = 306 AND attribute_id IN (0,796,1554)

	UPDATE wi_import.dbo.ds_zone_forecast_data SET metric_id = 322, attribute_id = CASE attribute_id WHEN 0 THEN 1581 WHEN 796 THEN 1582 WHEN 1554 THEN 1583 ELSE null END WHERE metric_id = 330 AND attribute_id IN (0,796,1554)
	UPDATE wi_import.dbo.ds_zone_forecast_data SET metric_id = 328, attribute_id = CASE attribute_id WHEN 0 THEN 1581 WHEN 796 THEN 1582 WHEN 1554 THEN 1583 ELSE null END WHERE metric_id = 329 AND attribute_id IN (0,796,1554)

	-- TODO: add benchmark by passing a start time to an audit function
	SELECT 'Finished: process_legacy_map_mobile_internet_subscribers (3s)'
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[process_legacy_map_mobile_internet_subscribers].[@debug]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[process_legacy_map_mobile_internet_subscribers].[@debug]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="2115" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[process_legacy_map_mobile_internet_subscribers] &#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@debug bit = 1&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[process_log_reported_data]">
			<Property Name="BodyScript">
				<Value><![CDATA[

IF @debug = 0
BEGIN
	-- Imports for ds_organisation_data
	INSERT INTO wi_import.dbo.log_organisation_data_reporting (organisation_id, metric_id, attribute_id, date, date_type, created_on)

	SELECT	ds.organisation_id, ds.metric_id, ds.attribute_id, ds.date, ds.date_type, MIN(ds.created_on)
	
	FROM	wi_import.dbo.ds_organisation_data ds LEFT JOIN
			wi_import.dbo.log_organisation_data_reporting lr ON (lr.organisation_id = ds.organisation_id AND lr.metric_id = ds.metric_id AND lr.attribute_id = ds.attribute_id AND lr.date = ds.date AND lr.date_type = ds.date_type)
	
	WHERE	ds.approved = 1 AND
			lr.id IS null
	
	GROUP BY ds.organisation_id, ds.metric_id, ds.attribute_id, ds.date, ds.date_type
	ORDER BY MIN(ds.created_on), ds.organisation_id, ds.metric_id, ds.attribute_id, ds.date_type, ds.date

	
	-- Imports for ds_zone_data
	INSERT INTO wi_import.dbo.log_zone_data_reporting (zone_id, metric_id, attribute_id, date, date_type, created_on)

	SELECT	ds.zone_id, ds.metric_id, ds.attribute_id, ds.date, ds.date_type, MIN(ds.created_on)

	FROM	wi_import.dbo.ds_zone_data ds LEFT JOIN
			wi_import.dbo.log_zone_data_reporting lr ON (lr.zone_id = ds.zone_id AND lr.metric_id = ds.metric_id AND lr.attribute_id = ds.attribute_id AND lr.date = ds.date AND lr.date_type = ds.date_type)
	
	WHERE	ds.approved = 1 AND
			lr.id IS null
	
	GROUP BY ds.zone_id, ds.metric_id, ds.attribute_id, ds.date, ds.date_type
	ORDER BY MIN(ds.created_on), ds.zone_id, ds.metric_id, ds.attribute_id, ds.date_type, ds.date
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[process_log_reported_data].[@debug]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[process_log_reported_data].[@debug]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1623" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[process_log_reported_data] &#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@debug bit = 1&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[process_map_imports]">
			<Property Name="BodyScript">
				<Value><![CDATA[

IF @debug = 0
BEGIN
	-- Add new data points to cleaning
	INSERT INTO wi_import.dbo.cleaning (ds, ds_id)
	SELECT	'organisation_data', ds.id
	FROM	wi_import.dbo.ds_organisation_data ds LEFT JOIN wi_import.dbo.cleaning c ON (c.ds = 'organisation_data' AND c.ds_id = ds.id)
	WHERE	c.ds_id IS null AND ds.approved = 1

	-- Mark the data set where flags have been parsed
	UPDATE wi_import.dbo.ds_organisation_data SET has_flags = 0

	UPDATE	ds
	SET		ds.has_flags = 1
	FROM	wi_import.dbo.ds_organisation_data ds INNER JOIN
			wi_import.dbo.flag_ds_link fdl ON (fdl.ds = 'organisation_data' AND fdl.ds_id = ds.id)
		
	-- Now cross-update the master data set to match import ids and flags
	UPDATE wi_master.dbo.ds_organisation_data SET import_merge_hash = null WHERE import_merge_hash = ''
	UPDATE wi_master.dbo.ds_organisation_data SET import_id = null

	;WITH di AS
	(
		SELECT	*, rank = ROW_NUMBER() OVER (PARTITION BY index_hash ORDER BY created_on DESC)
		FROM	wi_import.dbo.ds_organisation_data
		WHERE	approved = 1
	)

	UPDATE	ds
	SET		ds.import_id = di.id, ds.has_flags = di.has_flags
	FROM	wi_master.dbo.ds_organisation_data ds INNER JOIN
			di ON (di.rank = 1 AND ds.organisation_id = di.organisation_id AND ds.metric_id = di.metric_id AND ds.attribute_id = di.attribute_id AND ds.date = di.date AND ds.date_type = di.date_type AND (ds.val_i = di.val_i OR ds.val_d = di.val_d))
	WHERE	ds.import_id IS null

	-- Populate the master flag link where a referenced import has flags
	TRUNCATE TABLE wi_master.dbo.flag_ds_link

	INSERT INTO wi_master.dbo.flag_ds_link (ds, ds_id, flag_id)
	SELECT	'organisation_data', ds.id, fdl.flag_id
	FROM	wi_master.dbo.ds_organisation_data ds INNER JOIN
			wi_import.dbo.ds_organisation_data di ON ds.import_id = di.id INNER JOIN
			wi_import.dbo.flag_ds_link fdl ON (fdl.ds = 'organisation_data' AND fdl.ds_id = di.id)
	WHERE	ds.has_flags = 1
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[process_map_imports].[@debug]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[process_map_imports].[CTE1].[di]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[process_map_imports].[CTE1].[di].[*]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[process_map_imports].[CTE1].[di].[rank]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[process_map_imports].[@debug]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="2001" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[process_map_imports] &#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@debug bit = 1&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[process_merge_data]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[

DECLARE @today datetime, @yesterday datetime, @ds varchar(128), @hash nvarchar(128)

SET @today		= GETDATE()
SET @yesterday	= DATEADD(day, -1, @today)


-- Auto-unapproval conditions
EXEC wi_import.dbo.process_legacy_hold_data @debug

-- Map legacy data (pre metric_id/attribute_id combinations)
EXEC wi_import.dbo.process_legacy_map_dimvals @debug

-- Map legacy M2M data imports (TODO: remove when updating data _and_ forecast import files)
EXEC wi_import.dbo.process_legacy_map_m2m_connections @debug

-- Add new data point and metadata hashes
EXEC wi_import.dbo.process_create_hashes @debug

-- For partial time series stores, delete any duplicate data points
EXEC wi_import.dbo.process_delete_duplicates @debug


-- Delete existing data set for full time series imports (ie forecasting team imports)
CREATE TABLE #zones (triggered_by_import varchar(128), id int)
CREATE TABLE #organisations (triggered_by_import varchar(128), id int)
CREATE TABLE #data (ds varchar(128), id int)

-- Total subscribers
INSERT INTO #zones
SELECT DISTINCT 'subscribers-total', zone_id FROM wi_import.dbo.ds_zone_forecast_data WHERE metric_id IN (1,322) AND attribute_id = 0 AND approved = 1 AND last_update_on >= @yesterday

IF (SELECT COUNT(*) FROM #zones WHERE triggered_by_import = 'subscribers-total') > 0
BEGIN
	INSERT INTO #data
	SELECT	'ds_zone_data', id
	FROM	ds_zone_data
	WHERE	metric_id IN (1,178,179,180,181,182,322,323,324,325,326,327) AND
			attribute_id = 0 AND
			(
				zone_id IN (SELECT id FROM #zones WHERE triggered_by_import = 'subscribers-total') OR
				zone_id IN (SELECT DISTINCT id FROM zones WHERE type_id IN (3,39,42,43,44))
			)
END

-- Internet subscribers
INSERT INTO #zones
SELECT DISTINCT 'subscribers-internet', zone_id FROM wi_import.dbo.ds_zone_forecast_data WHERE metric_id IN (1,322) AND attribute_id = 1581 AND approved = 1 AND last_update_on >= @yesterday

IF (SELECT COUNT(*) FROM #zones WHERE triggered_by_import = 'subscribers-internet') > 0
BEGIN
	INSERT INTO #data
	SELECT	'ds_zone_data', id
	FROM	ds_zone_data
	WHERE	metric_id IN (1,178,179,180,181,182,305,306,307,322,323,324,325,326,327,328,329,330) AND -- Includes % subscribers, unlike total
			attribute_id IN (1581,1582,1583) AND
			(
				zone_id IN (SELECT id FROM #zones WHERE triggered_by_import = 'subscribers-internet') OR
				zone_id IN (SELECT DISTINCT id FROM zones WHERE type_id IN (3,39,42,43,44))
			)
END

-- Active connections
INSERT INTO #zones
SELECT DISTINCT 'connections-active', zone_id FROM wi_import.dbo.ds_zone_forecast_data WHERE metric_id = 3 AND attribute_id = 204 AND approved = 1 AND last_update_on >= @yesterday

IF (SELECT COUNT(*) FROM #zones WHERE triggered_by_import = 'connections-active') > 0
BEGIN
	INSERT INTO #data
	SELECT	'ds_zone_data', id
	FROM	ds_zone_data
	WHERE	metric_id IN (3,36,41,42,44,53,56,61) AND
			attribute_id = 204 AND
			(
				zone_id IN (SELECT id FROM #zones WHERE triggered_by_import = 'connections-active') OR
				zone_id IN (SELECT DISTINCT id FROM zones WHERE type_id IN (3,39,42,43,44))
			)
END

-- Population
INSERT INTO #zones
SELECT DISTINCT 'population-total', zone_id FROM wi_import.dbo.ds_zone_forecast_data WHERE metric_id = 43 AND attribute_id = 0 AND approved = 1 AND last_update_on >= @yesterday

IF (SELECT COUNT(*) FROM #zones WHERE triggered_by_import = 'population-total') > 0
BEGIN
	INSERT INTO #data
	SELECT	'ds_zone_data', id
	FROM	ds_zone_data
	WHERE	metric_id = 43 AND
			attribute_id = 0 AND
			(
				zone_id IN (SELECT id FROM #zones WHERE triggered_by_import = 'population-total') OR
				zone_id IN (SELECT DISTINCT id FROM zones WHERE type_id IN (3,39,42,43,44))
			)
END

-- Total connections
INSERT INTO #organisations
SELECT DISTINCT 'connections-total', organisation_id FROM wi_import.dbo.ds_organisation_forecast_data WHERE metric_id = 3 AND attribute_id = 0 AND approved = 1 AND last_update_on >= @yesterday

IF (SELECT COUNT(*) FROM #organisations WHERE triggered_by_import = 'connections-total') > 0
BEGIN
	INSERT INTO #data
	SELECT	'ds_zone_data', id
	FROM	ds_zone_data
	WHERE	metric_id IN (3,36,41,42,44,53,56,61,190,309,310,311,312) AND -- Deleting both including and excluding M2M metrics, _except_ the actual M2M connection split (below)
			attribute_id IN (0,99,822,836,1198,602,603,616,619,621,624,823,824,825,870,929,931,936,996,1124,1201,1245,1293,1307,1397,1399,1401,1403,1405,1407,1409,1411,1413,1472,1473,1474,755,796,799,951,952,959,1120,1292,1384,1385,1615,1616,1617,1618) AND
			(
				zone_id IN (SELECT DISTINCT zone_id FROM organisation_zone_link WHERE organisation_id IN (SELECT id FROM #organisations WHERE triggered_by_import = 'connections-total')) OR
				zone_id IN (SELECT DISTINCT id FROM zones WHERE type_id IN (3,39,42,43,44))
			)

	INSERT INTO #data
	SELECT	'ds_organisation_data', id
	FROM	ds_organisation_data
	WHERE	metric_id IN (3,36,41,42,44,53,56,61,190,309,310,311,312) AND -- Deleting both including and excluding M2M metrics, _except_ the actual M2M connection split (below)
			attribute_id IN (0,99,822,836,1198,602,603,616,619,621,624,823,824,825,870,929,931,936,996,1124,1201,1245,1293,1307,1397,1399,1401,1403,1405,1407,1409,1411,1413,1472,1473,1474,755,796,799,951,952,959,1120,1292,1384,1385,1615,1616,1617,1618) AND
			organisation_id IN (SELECT id FROM #organisations WHERE triggered_by_import = 'connections-total') AND
			date_type = 'Q'
END

-- M2M connections
INSERT INTO #organisations
SELECT DISTINCT 'connections-m2m', organisation_id FROM wi_import.dbo.ds_organisation_forecast_data WHERE metric_id = 190 AND attribute_id = 1251 AND approved = 1 AND last_update_on >= @yesterday

IF (SELECT COUNT(*) FROM #organisations WHERE triggered_by_import = 'connections-m2m') > 0
BEGIN
	INSERT INTO #data
	SELECT	'ds_zone_data', id
	FROM	ds_zone_data
	WHERE	metric_id IN (190,309,310,311,312) AND
			attribute_id IN (1251,1546,1547,1548,1549,1550,1619) AND
			(
				zone_id IN (SELECT DISTINCT zone_id FROM organisation_zone_link WHERE organisation_id IN (SELECT id FROM #organisations WHERE triggered_by_import = 'connections-m2m')) OR
				zone_id IN (SELECT DISTINCT id FROM zones WHERE type_id IN (3,39,42,43,44))
			)

	INSERT INTO #data
	SELECT	'ds_organisation_data', id
	FROM	ds_organisation_data
	WHERE	metric_id IN (190,309,310,311,312) AND
			attribute_id IN (1251,1546,1547,1548,1549,1550,1619) AND
			organisation_id IN (SELECT id FROM #organisations WHERE triggered_by_import = 'connections-m2m') AND
			date_type = 'Q'
END

-- Device connections
INSERT INTO #organisations
SELECT DISTINCT 'connections-devices', organisation_id FROM wi_import.dbo.ds_organisation_forecast_data WHERE metric_id = 3 AND attribute_id IN (1432,1555,1556) AND approved = 1 AND last_update_on >= @yesterday

IF (SELECT COUNT(*) FROM #organisations WHERE triggered_by_import = 'connections-devices') > 0
BEGIN
	INSERT INTO #data
	SELECT	'ds_zone_data', id
	FROM	ds_zone_data
	WHERE	metric_id IN (3,36,41,42,44,53,56,61) AND
			attribute_id IN (1432,1555,1556) AND
			(
				zone_id IN (SELECT DISTINCT zone_id FROM organisation_zone_link WHERE organisation_id IN (SELECT id FROM #organisations WHERE triggered_by_import = 'connections-devices')) OR
				zone_id IN (SELECT DISTINCT id FROM zones WHERE type_id IN (3,39,42,43,44))
			)

	INSERT INTO #data
	SELECT	'ds_organisation_data', id
	FROM	ds_organisation_data
	WHERE	metric_id IN (3,36,41,42,44,53,56,61) AND
			attribute_id IN (1432,1555,1556) AND
			organisation_id IN (SELECT id FROM #organisations WHERE triggered_by_import = 'connections-devices') AND
			date_type = 'Q'
END

-- Coverage
INSERT INTO #organisations
SELECT DISTINCT 'coverage', organisation_id FROM wi_import.dbo.ds_organisation_forecast_data WHERE metric_id = 162 AND attribute_id IN (755,799,1615,1615) AND approved = 1 AND last_update_on >= @yesterday

IF (SELECT COUNT(*) FROM #organisations WHERE triggered_by_import = 'coverage-3g') > 0
BEGIN
	INSERT INTO #data
	SELECT	'ds_zone_data', id
	FROM	ds_zone_data
	WHERE	metric_id = 162 AND
			attribute_id IN (755,799,1615,1615) AND
			(
				zone_id IN (SELECT DISTINCT zone_id FROM organisation_zone_link WHERE organisation_id IN (SELECT id FROM #organisations WHERE triggered_by_import = 'coverage')) OR
				zone_id IN (SELECT DISTINCT id FROM zones WHERE type_id IN (3,39,42,43,44))
			)

	INSERT INTO #data
	SELECT	'ds_organisation_data', id
	FROM	ds_organisation_data
	WHERE	metric_id = 162 AND
			attribute_id IN (755,799,1615,1615) AND
			organisation_id IN (SELECT id FROM #organisations WHERE triggered_by_import = 'coverage') AND
			date_type = 'Q'
END

IF @debug = 1
BEGIN
	SELECT * FROM #zones
	SELECT * FROM #organisations
	--SELECT * FROM #data
END

IF @debug = 0
BEGIN
	-- Delete superset of data
	DELETE	ds
	FROM	ds_zone_data ds INNER JOIN #data d ON (ds.id = d.id AND d.ds = 'ds_zone_data')

	DELETE	ds
	FROM	ds_organisation_data ds INNER JOIN #data d ON (ds.id = d.id AND d.ds = 'ds_organisation_data')
END

DROP TABLE #zones
DROP TABLE #organisations
DROP TABLE #data


-- Now merge each import table in turn with new data (those ordered last overwrite former imports)
CREATE TABLE #approval_hashes (ds varchar(128), hash nvarchar(128), processed bit)

-- Organisation-level forecast imports (full time series)
INSERT INTO #approval_hashes
SELECT 'ds_organisation_forecast_data', approval_hash, 0 FROM wi_import.dbo.ds_organisation_forecast_data WHERE approved = 1 AND approval_hash IS NOT null AND last_update_on >= @yesterday GROUP BY approval_hash ORDER BY MAX(created_on)

-- Country-level forecast imports (full time series)
INSERT INTO #approval_hashes
SELECT 'ds_zone_forecast_data', approval_hash, 0 FROM wi_import.dbo.ds_zone_forecast_data WHERE approved = 1 AND approval_hash IS NOT null AND last_update_on >= @yesterday GROUP BY approval_hash ORDER BY MAX(created_on)

-- Organisation-level imports
INSERT INTO #approval_hashes
SELECT 'ds_organisation_data', approval_hash, 0 FROM wi_import.dbo.ds_organisation_data WHERE approved = 1 AND approval_hash IS NOT null AND last_update_on >= @yesterday GROUP BY approval_hash ORDER BY MAX(created_on)

-- Country-level imports
INSERT INTO #approval_hashes
SELECT 'ds_zone_data', approval_hash, 0 FROM wi_import.dbo.ds_zone_data WHERE approved = 1 AND approval_hash IS NOT null AND last_update_on >= @yesterday GROUP BY approval_hash ORDER BY MAX(created_on)

IF @debug = 1
BEGIN
	SELECT * FROM #approval_hashes
END

IF @debug = 0
BEGIN
	-- Organisation-level forecast imports (full time series)
	SET @ds = 'ds_organisation_forecast_data'

	WHILE EXISTS (SELECT * FROM #approval_hashes WHERE ds = @ds AND processed = 0)
	BEGIN
		SET @hash = (SELECT TOP 1 hash FROM #approval_hashes WHERE ds = @ds AND processed = 0)
		EXEC process_merge_import_organisation_forecast_data @hash, @debug

		UPDATE #approval_hashes SET processed = 1 WHERE ds = @ds AND hash = @hash
	END

	-- Country-level forecast imports (full time series)
	SET @ds = 'ds_zone_forecast_data'

	WHILE EXISTS (SELECT * FROM #approval_hashes WHERE ds = @ds AND processed = 0)
	BEGIN
		SET @hash = (SELECT TOP 1 hash FROM #approval_hashes WHERE ds = @ds AND processed = 0)
		EXEC process_merge_import_zone_forecast_data @hash, @debug

		UPDATE #approval_hashes SET processed = 1 WHERE ds = @ds AND hash = @hash
	END

	-- Organisation-level imports
	SET @ds = 'ds_organisation_data'

	WHILE EXISTS (SELECT * FROM #approval_hashes WHERE ds = @ds AND processed = 0)
	BEGIN
		SET @hash = (SELECT TOP 1 hash FROM #approval_hashes WHERE ds = @ds AND processed = 0)
		EXEC process_merge_import_organisation_data @hash, @debug

		UPDATE #approval_hashes SET processed = 1 WHERE ds = @ds AND hash = @hash
	END

	-- Country-level forecast imports (full time series)
	SET @ds = 'ds_zone_data'

	WHILE EXISTS (SELECT * FROM #approval_hashes WHERE ds = @ds AND processed = 0)
	BEGIN
		SET @hash = (SELECT TOP 1 hash FROM #approval_hashes WHERE ds = @ds AND processed = 0)
		EXEC process_merge_import_zone_data @hash, @debug

		UPDATE #approval_hashes SET processed = 1 WHERE ds = @ds AND hash = @hash
	END
END

DROP TABLE #approval_hashes


-- Finally, map master to the latest import ids
EXEC wi_import.dbo.process_map_imports @debug]]></Value>
			</Property>
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[process_merge_data].[@debug]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[dbo].[process_merge_data].[#zones]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[dbo].[process_merge_data].[#zones].[triggered_by_import]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_data].[#data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_data].[#zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_data].[#zones].[triggered_by_import]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_data].[#organisations]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[dbo].[process_merge_data].[#organisations].[triggered_by_import]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_data].[#organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_data].[#organisations].[triggered_by_import]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_data].[#organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_data].[#organisations].[triggered_by_import]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_data].[#data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_data].[#data].[ds]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_data].[#data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_data].[#data].[ds]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_data].[#approval_hashes]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[dbo].[process_merge_data].[#approval_hashes].[ds]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_data].[#approval_hashes].[processed]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_data].[#approval_hashes].[hash]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_forecast_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_data].[#approval_hashes].[processed]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_data].[#approval_hashes].[ds]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_data].[#approval_hashes].[hash]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_data]" />
				</Entry>
				<Entry />
				<Entry />
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[process_merge_data].[#zones]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_data].[#zones].[triggered_by_import]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[varchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_data].[#zones].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[process_merge_data].[#organisations]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_data].[#organisations].[triggered_by_import]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[varchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_data].[#organisations].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[process_merge_data].[#data]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_data].[#data].[ds]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[varchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_data].[#data].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[process_merge_data].[#approval_hashes]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_data].[#approval_hashes].[ds]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[varchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_data].[#approval_hashes].[hash]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_data].[#approval_hashes].[processed]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[process_merge_data].[@debug]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="12517" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[process_merge_data]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@debug bit = 1&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[process_merge_import_organisation_data]">
			<Property Name="BodyScript">
				<Value><![CDATA[

-- Get the import data that corresponds to @approval_hash
CREATE TABLE #import (organisation_id int, metric_id int, attribute_id int, date datetime, date_type char(1) COLLATE DATABASE_DEFAULT, val_d decimal(22,4), val_i bigint, currency_id int, source_id int, confidence_id int, id bigint, import_id bigint, processed bit)

INSERT INTO #import
SELECT	organisation_id, metric_id, attribute_id, date, date_type, val_d, val_i, currency_id, source_id, confidence_id, null, id, 0
FROM 	wi_import.dbo.ds_organisation_data
WHERE 	approved = 1 AND is_held_for_review = 0 AND approval_hash = @approval_hash

-- Remove the ability to approve absolute zeros - for now...
DELETE FROM #import WHERE val_d = 0 OR val_i = 0

-- Get any existing ids for the corresponding data
UPDATE	i
SET		i.id = ds.id
FROM	ds_organisation_data ds INNER JOIN #import i ON (ds.organisation_id = i.organisation_id AND ds.metric_id = i.metric_id and ds.attribute_id = i.attribute_id AND ds.date = i.date AND ds.date_type = i.date_type)

IF @debug = 0
BEGIN
	-- Now merge the import with the data set, replacing those with existing ids
	UPDATE	ds
	SET		ds.val_d = i.val_d, ds.val_i = i.val_i, ds.currency_id = i.currency_id, ds.source_id = i.source_id, ds.confidence_id = i.confidence_id, ds.is_calculated = 0, ds.last_update_on = GETDATE(), ds.last_update_by = 11770 -- Don't merge the import id as this should only apply to data-team imports
	FROM	ds_organisation_data ds INNER JOIN #import i ON ds.id = i.id
	WHERE	i.id IS NOT null

	UPDATE #import SET processed = 1 WHERE id IS NOT null


	-- Now create any new data that doesn't have an existing id
	INSERT INTO ds_organisation_data (organisation_id, metric_id, attribute_id, date, date_type, val_d, val_i, currency_id, source_id, confidence_id, is_calculated, created_by)
	SELECT	DISTINCT organisation_id, metric_id, attribute_id, date, date_type, val_d, val_i, currency_id, source_id, confidence_id, 0, 11770
	FROM	#import
	WHERE	id IS null
END

IF @debug = 1
BEGIN
	SELECT * FROM #import
END

DROP TABLE #import]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_data].[#import]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_data].[@approval_hash]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_data].[#import].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_data].[#import].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_data].[#import].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_data].[#import].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_data].[#import].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_data].[#import].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_data].[#import].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_data].[#import].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_data].[@debug]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_data].[#import].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_data].[#import].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_data].[#import].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_data].[#import].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_data].[#import].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_data].[#import].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_data].[#import].[processed]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_data].[#import].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[created_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_data].[#import].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_data].[#import].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_data].[#import].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_data].[#import].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_data].[#import].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_data].[#import].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_data].[#import].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_data].[#import].[confidence_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[process_merge_import_organisation_data].[#import]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_import_organisation_data].[#import].[organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_import_organisation_data].[#import].[metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_import_organisation_data].[#import].[attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_import_organisation_data].[#import].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_import_organisation_data].[#import].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_import_organisation_data].[#import].[val_d]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_import_organisation_data].[#import].[val_i]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_import_organisation_data].[#import].[currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_import_organisation_data].[#import].[source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_import_organisation_data].[#import].[confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_import_organisation_data].[#import].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_import_organisation_data].[#import].[import_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_import_organisation_data].[#import].[processed]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[process_merge_import_organisation_data].[@approval_hash]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[process_merge_import_organisation_data].[@debug]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="2204" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[process_merge_import_organisation_data]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@approval_hash nvarchar(64),&#xD;&#xA;&#x9;@debug bit = 1&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[process_merge_import_organisation_forecast_data]">
			<Property Name="BodyScript">
				<Value><![CDATA[

-- Get the import data that corresponds to @approval_hash
CREATE TABLE #import (organisation_id int, metric_id int, attribute_id int, date datetime, date_type char(1) COLLATE DATABASE_DEFAULT, val_d decimal(22,4), val_i bigint, currency_id int, source_id int, confidence_id int, id bigint, import_id bigint, processed bit)

INSERT INTO #import
SELECT	organisation_id, metric_id, attribute_id, date, date_type, val_d, val_i, currency_id, source_id, confidence_id, null, id, 0
FROM 	wi_import.dbo.ds_organisation_forecast_data
WHERE 	approved = 1 AND approval_hash = @approval_hash

-- Remove the ability to approve absolute zeros - for now...
DELETE FROM #import WHERE val_d = 0 OR val_i = 0

-- Get any existing ids for the corresponding data
UPDATE	i
SET		i.id = ds.id
FROM	ds_organisation_data ds INNER JOIN #import i ON (ds.organisation_id = i.organisation_id AND ds.metric_id = i.metric_id and ds.attribute_id = i.attribute_id AND ds.date = i.date AND ds.date_type = i.date_type)

IF @debug = 0
BEGIN
	-- Now merge the import with the data set, replacing those with existing ids
	UPDATE	ds
	SET		ds.val_d = i.val_d, ds.val_i = i.val_i, ds.currency_id = i.currency_id, ds.source_id = i.source_id, ds.confidence_id = i.confidence_id, ds.is_calculated = 0, ds.last_update_on = GETDATE(), ds.last_update_by = 11770 -- Don't merge the import id as this should only apply to data-team imports
	FROM	ds_organisation_data ds INNER JOIN #import i ON ds.id = i.id
	WHERE	i.id IS NOT null

	UPDATE #import SET processed = 1 WHERE id IS NOT null


	-- Now create any new data that doesn't have an existing id
	INSERT INTO ds_organisation_data (organisation_id, metric_id, attribute_id, date, date_type, val_d, val_i, currency_id, source_id, confidence_id, is_calculated, created_by)
	SELECT	DISTINCT organisation_id, metric_id, attribute_id, date, date_type, val_d, val_i, currency_id, source_id, confidence_id, 0, 11770
	FROM	#import
	WHERE	id IS null
END

IF @debug = 1
BEGIN
	SELECT * FROM #import
END

DROP TABLE #import]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_forecast_data].[#import]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_forecast_data].[@approval_hash]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_forecast_data].[#import].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_forecast_data].[#import].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_forecast_data].[#import].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_forecast_data].[#import].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_forecast_data].[#import].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_forecast_data].[#import].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_forecast_data].[#import].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_forecast_data].[#import].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_forecast_data].[@debug]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_forecast_data].[#import].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_forecast_data].[#import].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_forecast_data].[#import].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_forecast_data].[#import].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_forecast_data].[#import].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_forecast_data].[#import].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_forecast_data].[#import].[processed]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_forecast_data].[#import].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[created_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_forecast_data].[#import].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_forecast_data].[#import].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_forecast_data].[#import].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_forecast_data].[#import].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_forecast_data].[#import].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_forecast_data].[#import].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_forecast_data].[#import].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_organisation_forecast_data].[#import].[confidence_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[process_merge_import_organisation_forecast_data].[#import]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_import_organisation_forecast_data].[#import].[organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_import_organisation_forecast_data].[#import].[metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_import_organisation_forecast_data].[#import].[attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_import_organisation_forecast_data].[#import].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_import_organisation_forecast_data].[#import].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_import_organisation_forecast_data].[#import].[val_d]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_import_organisation_forecast_data].[#import].[val_i]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_import_organisation_forecast_data].[#import].[currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_import_organisation_forecast_data].[#import].[source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_import_organisation_forecast_data].[#import].[confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_import_organisation_forecast_data].[#import].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_import_organisation_forecast_data].[#import].[import_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_import_organisation_forecast_data].[#import].[processed]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[process_merge_import_organisation_forecast_data].[@approval_hash]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[process_merge_import_organisation_forecast_data].[@debug]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="2195" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[process_merge_import_organisation_forecast_data]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@approval_hash nvarchar(64),&#xD;&#xA;&#x9;@debug bit = 1&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[process_merge_import_service_data]">
			<Property Name="BodyScript">
				<Value><![CDATA[

-- Get the import data that corresponds to @approval_hash
CREATE TABLE #import (service_id int, metric_id int, attribute_id int, date datetime, date_type char(1) COLLATE DATABASE_DEFAULT, val_d decimal(22,4), val_i bigint, currency_id int, source_id int, confidence_id int, id bigint, import_id bigint, processed bit)

INSERT INTO #import
SELECT	service_id, metric_id, attribute_id, date, date_type, val_d, val_i, currency_id, source_id, confidence_id, null, id, 0
FROM 	wi_import.dbo.ds_service_data
WHERE 	approved = 1 AND approval_hash = @approval_hash

-- Get any existing ids for the corresponding data
UPDATE	i
SET		i.id = ds.id
FROM	ds_service_data ds INNER JOIN #import i ON (ds.service_id = i.service_id AND ds.metric_id = i.metric_id and ds.attribute_id = i.attribute_id AND ds.date = i.date AND ds.date_type = i.date_type)

IF @debug = 0
BEGIN
	-- Now merge the import with the data set, replacing those with existing ids
	UPDATE	ds
	SET		ds.val_d = i.val_d, ds.val_i = i.val_i, ds.currency_id = i.currency_id, ds.source_id = i.source_id, ds.confidence_id = i.confidence_id, ds.import_id = i.import_id, ds.last_update_on = GETDATE(), ds.last_update_by = 11770
	FROM	ds_service_data ds INNER JOIN #import i ON ds.id = i.id
	WHERE	i.id IS NOT null

	UPDATE #import SET processed = 1 WHERE id IS NOT null


	-- Now create any new data that doesn't have an existing id
	INSERT INTO ds_service_data (service_id, metric_id, attribute_id, date, date_type, val_d, val_i, currency_id, source_id, confidence_id, import_id, created_by)
	SELECT	DISTINCT service_id, metric_id, attribute_id, date, date_type, val_d, val_i, currency_id, source_id, confidence_id, import_id, 11770
	FROM	#import
	WHERE	id IS null
END

IF @debug = 1
BEGIN
	SELECT * FROM #import
END

DROP TABLE #import]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[process_merge_import_service_data].[#import]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[dbo].[process_merge_import_service_data].[@approval_hash]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_service_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_service_data].[service_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_service_data].[#import].[service_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_service_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_service_data].[#import].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_service_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_service_data].[#import].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_service_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_service_data].[#import].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_service_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_service_data].[#import].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_service_data].[#import].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_service_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_service_data].[@debug]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_service_data].[#import].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_service_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_service_data].[#import].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_service_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_service_data].[#import].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_service_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_service_data].[#import].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_service_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_service_data].[#import].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_service_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_service_data].[#import].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_service_data].[import_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_service_data].[#import].[import_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_service_data].[last_update_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_service_data].[last_update_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_service_data].[#import].[processed]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_service_data].[#import].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_service_data].[service_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_service_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_service_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_service_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_service_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_service_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_service_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_service_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_service_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_service_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_service_data].[import_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_service_data].[created_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_service_data].[#import].[service_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_service_data].[#import].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_service_data].[#import].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_service_data].[#import].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_service_data].[#import].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_service_data].[#import].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_service_data].[#import].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_service_data].[#import].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_service_data].[#import].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_service_data].[#import].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_merge_import_service_data].[#import].[import_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[process_merge_import_service_data].[#import]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_import_service_data].[#import].[service_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_import_service_data].[#import].[metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_import_service_data].[#import].[attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_import_service_data].[#import].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_import_service_data].[#import].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_import_service_data].[#import].[val_d]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_import_service_data].[#import].[val_i]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_import_service_data].[#import].[currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_import_service_data].[#import].[source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_import_service_data].[#import].[confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_import_service_data].[#import].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_import_service_data].[#import].[import_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_merge_import_service_data].[#import].[processed]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[process_merge_import_service_data].[@approval_hash]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[process_merge_import_service_data].[@debug]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="1942" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[process_merge_import_service_data]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@approval_hash nvarchar(64),&#xD;&#xA;&#x9;@debug bit = 1&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[process_populate_report_metadata]">
			<Property Name="BodyScript">
				<Value><![CDATA[

DECLARE @id int, @sp nvarchar(128), @fk_id int, @fk nvarchar(128), @fk_id_2 int, @fk_2 nvarchar(128)

CREATE TABLE #reports (id int, sp nvarchar(128), processed bit)

-- Fetch all entries without fk metadata
INSERT INTO #reports
SELECT	r.id, r.sp, 0
FROM	reports r LEFT JOIN report_fk_link rf ON r.id = rf.report_id
WHERE	r.serialized IS NOT null AND r.sp <> '_content' AND r.sp = 'data_metrics_data' AND rf.report_id IS null
ORDER BY r.id DESC

--/markets/n/data/
SET @sp	= 'data_markets_data'
SET @fk = 'zone_id'

WHILE EXISTS (SELECT * FROM #reports WHERE sp = @sp AND processed = 0)
BEGIN
	SET @id		= (SELECT TOP 1 id FROM #reports WHERE sp = @sp AND processed = 0)
	SET @fk_id	= (SELECT TOP 1 s.value_int FROM reports r CROSS APPLY php_unserialize(r.serialized) s WHERE r.id = @id AND s.var_name = @fk)

	INSERT INTO report_fk_link (report_id, fk, fk_id) VALUES (@id, @fk, @fk_id)
	UPDATE #reports SET processed = 1 WHERE id = @id
END


--/metrics/n/n/data/
SET @sp	  = 'data_metrics_data'
SET @fk	  = 'metric_id'
SET @fk_2 = 'attribute_id'

WHILE EXISTS (SELECT * FROM #reports WHERE sp = @sp AND processed = 0)
BEGIN
	SET @id		 = (SELECT TOP 1 id FROM #reports WHERE sp = @sp AND processed = 0)
	SET @fk_id	 = (SELECT TOP 1 s.value_int FROM reports r CROSS APPLY php_unserialize(r.serialized) s WHERE r.id = @id AND s.var_name = @fk)
	SET @fk_id_2 = (SELECT TOP 1 s.value_int FROM reports r CROSS APPLY php_unserialize(r.serialized) s WHERE r.id = @id AND s.var_name = @fk_2)

	INSERT INTO report_fk_link (report_id, fk, fk_id, fk_2, fk_id_2) VALUES (@id, @fk, @fk_id, @fk_2, @fk_id_2)
	UPDATE #reports SET processed = 1 WHERE id = @id
END


DROP TABLE #reports]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_populate_report_metadata].[#reports]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[reports]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[report_fk_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[reports].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[report_fk_link].[report_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[reports].[sp]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[reports].[serialized]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_populate_report_metadata].[#reports].[sp]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_populate_report_metadata].[#reports].[processed]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_populate_report_metadata].[#reports].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[reports]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[reports].[serialized]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[php_unserialize]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[php_unserialize].[value_int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[reports].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[php_unserialize].[var_name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[report_fk_link].[report_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[report_fk_link].[fk]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[report_fk_link].[fk_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_populate_report_metadata].[#reports].[processed]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_populate_report_metadata].[#reports].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[report_fk_link].[fk_2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[report_fk_link].[fk_id_2]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[process_populate_report_metadata].[#reports]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_populate_report_metadata].[#reports].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_populate_report_metadata].[#reports].[sp]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_populate_report_metadata].[#reports].[processed]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="1778" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[process_populate_report_metadata]&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[process_populate_search]">
			<Property Name="BodyScript">
				<Value><![CDATA[

BEGIN
	-- Organisations with data
	INSERT INTO search (scheme_entity_id, entity_id, entity_type, term, metadata, [table], [order])
	SELECT	'organisations-' + CAST(o.id AS nvarchar),
			o.id,
			CASE o.type_id WHEN 9 THEN 'Group' ELSE 'Operator' END,
			o.name + CASE WHEN z.name IS NOT null THEN ', ' + z.name ELSE '' END,
			z.name,
			'organisations',
			2
			
	FROM	organisations o LEFT JOIN
			organisation_zone_link oz ON o.id = oz.organisation_id LEFT JOIN
			zones z ON oz.zone_id = z.id
			
	WHERE	o.id NOT IN (SELECT DISTINCT entity_id FROM search WHERE [table] = 'organisations') AND
			(
				o.id IN (SELECT DISTINCT organisation_id FROM ds_organisation_data) OR
				o.id IN (SELECT DISTINCT id FROM organisations WHERE type_id = 9)
			) AND
			o.type_id IN (9,1089)
			
	ORDER BY z.name, o.name


	-- Other organisational sets
	INSERT INTO search (scheme_entity_id, entity_id, entity_type, term, [table], [order])
	SELECT	'organisations-' + CAST(o.id AS nvarchar),
			o.id,
			'Company',
			o.name,
			'organisations',
			2
			
	FROM	organisations o
			
	WHERE	o.id NOT IN (SELECT DISTINCT entity_id FROM search WHERE [table] = 'organisations') AND
			o.type_id IN (283,993,1062,1217,1499)
			
	ORDER BY o.name
	
	
	-- Update organisations
	UPDATE	s
	SET		s.term = o.name + CASE o.type_id WHEN 283 THEN ' (MVNO)' WHEN 1217 THEN ' (MVNO)' ELSE '' END + CASE WHEN z.name IS NOT null THEN ', ' + z.name ELSE '' END
	FROM	search s INNER JOIN organisations o ON (s.entity_id = o.id AND s.[table] = 'organisations') LEFT JOIN organisation_zone_link oz ON o.id = oz.organisation_id LEFT JOIN zones z ON oz.zone_id = z.id


	-- Authors
	INSERT INTO search (scheme_entity_id, entity_id, entity_type, term, [table], [order])
	SELECT	'authors-' + CAST(a.id AS nvarchar), a.id, 'Author', a.name, 'authors', 100
	FROM	content_authors a
	WHERE	a.id NOT IN (SELECT DISTINCT entity_id FROM search WHERE [table] = 'authors')
	ORDER BY a.name

	-- Update authors
	UPDATE	s
	SET		s.term = a.name
	FROM	search s INNER JOIN content_authors a ON (s.entity_id = a.id AND s.[table] = 'authors')
	WHERE	s.is_alternate_term = 0 -- Exclude entities with multiple convenience names

	-- Delete orphaned authors
	DELETE	s
	FROM	search s LEFT JOIN content_authors a ON (s.entity_id = a.id AND s.[table] = 'authors')
	WHERE	s.[table] = 'authors' AND a.id IS null


	-- Tags
	INSERT INTO search (scheme_entity_id, entity_id, entity_type, term, [table], [order])
	SELECT	'tags-' + CAST(t.id AS nvarchar), t.id, 'Tag', t.name, 'tags', 10
	FROM	tags t
	WHERE	t.id NOT IN (SELECT DISTINCT entity_id FROM search WHERE [table] = 'tags')
	ORDER BY t.name
	
	-- Update tags
	UPDATE	s
	SET		s.term = t.name
	FROM	search s INNER JOIN tags t ON (s.entity_id = t.id AND s.[table] = 'tags')
	WHERE	s.is_alternate_term = 0 -- Exclude entities with multiple convenience names
	
	-- Delete orphaned tags
	DELETE	t
	FROM	tags t LEFT JOIN content_entry_tag_link et ON t.id = et.tag_id LEFT JOIN blog_entry_tag_link bt ON t.id = bt.tag_id LEFT JOIN document_tag_link dt ON t.id = dt.tag_id LEFT JOIN feed_tag_link ft ON t.id = ft.tag_id
	WHERE	et.tag_id IS null AND bt.tag_id IS null AND dt.tag_id IS null AND ft.tag_id IS null
	
	DELETE	s
	FROM	search s LEFT JOIN tags t ON (s.entity_id = t.id AND s.[table] = 'tags')
	WHERE	s.[table] = 'tags' AND t.id IS null


	-- Countries, UN and custom regions
	INSERT INTO search (scheme_entity_id, entity_id, entity_type, term, [table], [order])
	SELECT	'zones-' + CAST(z.id AS nvarchar),
			z.id,
			CASE z.type_id WHEN 10 THEN 'Country' ELSE 'Region' END,
			z.name,
			'zones',
			1
			
	FROM	zones z
			
	WHERE	z.id NOT IN (SELECT DISTINCT entity_id FROM search WHERE [table] = 'zones') AND
			(
				z.type_id = 10 OR
				z.id BETWEEN 3908 AND 3934 OR
				z.id IN (3824,3896,3899,3900,3902)
			)
			
	ORDER BY z.name
	
	-- Update zones
	UPDATE	s
	SET		s.term = z.name
	FROM	search s INNER JOIN zones z ON (s.entity_id = z.id AND s.[table] = 'zones')
	WHERE	s.is_alternate_term = 0 -- Exclude entities with multiple convenience names
	
	
	-- Flags
	UPDATE search SET has_content = 0, has_blogs = 0, has_documents = 0, has_feeds = 0

	-- Always mark regions as filterable
	UPDATE	s
	SET		s.has_data = 1, s.has_blogs = 1, s.has_documents = 1, s.has_feeds = 1 -- TODO: add has_content when find_by_fragments allows descendants
	FROM	search s
	WHERE	s.entity_type = 'Region' AND s.[table] = 'zones'

	-- Content
	UPDATE	s
	SET		s.has_content = 1
	FROM	search s INNER JOIN content_entry_author_link ea ON s.entity_id = ea.author_id
	WHERE	s.[table] = 'authors'
	
	UPDATE	s
	SET		s.has_content = 1
	FROM	search s INNER JOIN content_entry_entity_link ee ON (s.entity_id = ee.entity_id AND s.[table] = ee.[scheme])

	UPDATE	s
	SET		s.has_content = 1
	FROM	search s INNER JOIN content_entry_tag_link et ON s.entity_id = et.tag_id
	WHERE	s.[table] = 'tags'

	-- Blogs
	UPDATE	s
	SET		s.has_blogs = 1
	FROM	search s INNER JOIN blog_entry_tag_link bt ON s.entity_id = bt.tag_id
	WHERE	s.[table] = 'tags'
	
	-- Documents
	UPDATE	s
	SET		s.has_documents = 1
	FROM	search s INNER JOIN document_entity_link de ON (s.entity_id = de.entity_id AND s.[table] = de.[table])
	
	UPDATE	s
	SET		s.has_documents = 1
	FROM	search s INNER JOIN document_tag_link dt ON s.entity_id = dt.tag_id
	WHERE	s.[table] = 'tags'
	
	-- Feed
	UPDATE	s
	SET		s.has_feeds = 1
	FROM	search s INNER JOIN feed_entity_link fe ON (s.entity_id = fe.entity_id AND s.[table] = fe.[table])

	UPDATE	s
	SET		s.has_feeds = 1
	FROM	search s INNER JOIN feed_tag_link ft ON s.entity_id = ft.tag_id
	WHERE	s.[table] = 'tags'


	-- Update scheme_entity_id
	UPDATE search SET scheme_entity_id = [table] + '-' + CAST(entity_id AS nvarchar)
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[search]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[scheme_entity_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[entity_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[entity_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[term]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[metadata]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[table]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[entity_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[table]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[type_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[entity_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[table]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[entity_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[table]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[term]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[content_authors]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[content_authors].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[content_authors].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[entity_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[table]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[entity_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[content_authors].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[table]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[content_authors].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[is_alternate_term]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tags]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tags].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tags].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[entity_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[table]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[entity_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tags].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[table]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tags].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[is_alternate_term]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[content_entry_tag_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tags].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[content_entry_tag_link].[tag_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[blog_entry_tag_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tags].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[blog_entry_tag_link].[tag_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[document_tag_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tags].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[document_tag_link].[tag_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[feed_tag_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tags].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[feed_tag_link].[tag_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[content_entry_tag_link].[tag_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[blog_entry_tag_link].[tag_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[document_tag_link].[tag_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[entity_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[table]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[entity_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[table]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[is_alternate_term]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[has_content]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[has_blogs]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[has_documents]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[has_feeds]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[has_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[has_blogs]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[has_documents]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[has_feeds]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[entity_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[table]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[content_entry_author_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[entity_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[content_entry_author_link].[author_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[has_content]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[table]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[content_entry_entity_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[entity_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[content_entry_entity_link].[entity_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[table]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[content_entry_entity_link].[scheme]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[entity_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[content_entry_tag_link].[tag_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[table]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[entity_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[blog_entry_tag_link].[tag_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[table]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[document_entity_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[entity_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[document_entity_link].[entity_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[table]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[document_entity_link].[table]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[entity_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[document_tag_link].[tag_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[table]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[feed_entity_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[entity_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[feed_entity_link].[entity_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[table]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[feed_entity_link].[table]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[entity_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[feed_tag_link].[tag_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[search].[table]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="5919" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[process_populate_search]&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[process_recache_group_data]">
			<Property Name="BodyScript">
				<Value><![CDATA[

DECLARE @current_quarter datetime, @ds_date_min datetime, @ds_date_max datetime, @last_update_on datetime

SET @current_quarter	= dbo.current_reporting_quarter()

SET @last_update_on		= GETDATE()
SET @ds_date_min		= '2000-01-01'
SET @ds_date_max		= '2021-01-01'

-- Group data
IF @date_start = @ds_date_min AND @date_end = @ds_date_max
BEGIN
	TRUNCATE TABLE dc_group_data
END
ELSE
BEGIN
	DELETE FROM dc_group_data WHERE date >= @date_start AND date < @date_end
END

INSERT INTO dc_group_data (id, organisation_id, ownership_threshold, metric_id, metric_order, attribute_id, attribute_order, date, date_type, val_d, val_i, currency_id, source_id, confidence_id, definition_id, is_calculated, is_proportionate, is_spot, location, last_update_on, last_update_by)
SELECT	ds.id,
		ds.organisation_id,
		ds.ownership_threshold,
		m.id,
		m.[order],
		a.id,
		a.[order],
		ds.date,
		ds.date_type,
		ds.val_d,
		ds.val_i,
		ds.currency_id,
		ds.source_id,
		ds.confidence_id,
		d.id,
		ds.is_calculated,
		ds.is_proportionate,
		ds.is_spot,
		CASE di.cleaned WHEN 2 THEN di.location_cleaned ELSE null END,
		@last_update_on,
		19880

FROM	ds_group_data ds INNER JOIN
		metrics m ON ds.metric_id = m.id INNER JOIN
		attributes a ON ds.attribute_id = a.id INNER JOIN
		data_sets s ON (ds.metric_id = s.metric_id AND ds.attribute_id = s.attribute_id) LEFT JOIN
		definitions d ON (ds.metric_id = d.metric_id AND ds.attribute_id = d.attribute_id) LEFT JOIN
		wi_import.dbo.ds_organisation_data di ON ds.import_id = di.id

WHERE	ds.status_id = 3 AND
		ds.privacy_id = 5 AND
		ds.date >= @date_start AND
		ds.date < @date_end AND
		ds.date_type IN ('Q','H','Y') AND
		s.is_live_for_group_data = 1


-- Delete devices data prior to 2007
DELETE FROM dc_group_data WHERE metric_id IN (3,36,44,53,56,61,308) AND attribute_id IN (1432,1555,1556) AND date < '2007-01-01'


-- Group data sets
IF @date_start = @ds_date_min AND @date_end = @ds_date_max
BEGIN
	TRUNCATE TABLE dc_group_data_sets
	
	INSERT INTO dc_group_data_sets (organisation_id, metric_id, attribute_id)
	SELECT	DISTINCT organisation_id, metric_id, attribute_id
	FROM	dc_group_data
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[current_reporting_quarter]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_recache_group_data].[@date_start]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_recache_group_data].[@date_end]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[dc_group_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[ownership_threshold]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[metric_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[attribute_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[definition_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[is_proportionate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[is_spot]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[location]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[last_update_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data].[last_update_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[definitions]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[definitions].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[definitions].[attribute_id]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[ds_group_data].[import_id]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[ds_group_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[ownership_threshold]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[definitions].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[is_proportionate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[is_spot]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry>
					<References Name="[dbo].[ds_group_data].[status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_group_data].[privacy_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets].[is_live_for_group_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_sets]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_sets].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_sets].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[dc_group_data_sets].[attribute_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[process_recache_group_data].[@date_start]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[process_recache_group_data].[@date_end]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="2315" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[process_recache_group_data]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@date_start datetime,&#xD;&#xA;&#x9;@date_end datetime&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[process_remerge_data_since]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[

DECLARE @last_update_on datetime = GETDATE()

IF @debug = 1
BEGIN
	SELECT 'Data will be remerged if @debug = 0 from:'
	
	IF @organisation_data = 1
	BEGIN
		SELECT 'ds_organisatsion_data'
		SELECT * FROM wi_import.dbo.ds_organisation_data WHERE approved = 1 AND approval_hash IS NOT null AND last_update_on >= @date_since
	END
	
	IF @organisation_forecast_data = 1
	BEGIN
		SELECT 'ds_organisatsion_forecast_data'
		SELECT * FROM wi_import.dbo.ds_organisation_forecast_data WHERE approved = 1 AND approval_hash IS NOT null AND last_update_on >= @date_since
	END
	
	IF @zone_data = 1
	BEGIN
		SELECT 'ds_zone_data'
		SELECT * FROM wi_import.dbo.ds_zone_data WHERE approved = 1 AND approval_hash IS NOT null AND last_update_on >= @date_since
	END
	
	IF @zone_forecast_data = 1
	BEGIN
		SELECT 'ds_zone_forecast_data'
		SELECT * FROM wi_import.dbo.ds_zone_forecast_data WHERE approved = 1 AND approval_hash IS NOT null AND last_update_on >= @date_since
	END
END

IF @debug = 0
BEGIN
	IF @organisation_data = 1
	BEGIN
		UPDATE wi_import.dbo.ds_organisation_data SET last_update_on = @last_update_on WHERE approved = 1 AND approval_hash IS NOT null AND last_update_on >= @date_since
	END
	
	IF @organisation_forecast_data = 1
	BEGIN
		UPDATE wi_import.dbo.ds_organisation_forecast_data SET last_update_on = @last_update_on WHERE approved = 1 AND approval_hash IS NOT null AND last_update_on >= @date_since
	END
	
	IF @zone_data = 1
	BEGIN
		UPDATE wi_import.dbo.ds_zone_data SET last_update_on = @last_update_on WHERE approved = 1 AND approval_hash IS NOT null AND last_update_on >= @date_since
	END
	
	IF @zone_forecast_data = 1
	BEGIN
		UPDATE wi_import.dbo.ds_zone_forecast_data SET last_update_on = @last_update_on WHERE approved = 1 AND approval_hash IS NOT null AND last_update_on >= @date_since
	END
END]]></Value>
			</Property>
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_remerge_data_since].[@debug]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_remerge_data_since].[@organisation_data]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[dbo].[process_remerge_data_since].[@date_since]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_remerge_data_since].[@organisation_forecast_data]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[dbo].[process_remerge_data_since].[@zone_data]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[dbo].[process_remerge_data_since].[@zone_forecast_data]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[process_remerge_data_since].[@date_since]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[process_remerge_data_since].[@organisation_data]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[process_remerge_data_since].[@organisation_forecast_data]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[process_remerge_data_since].[@zone_data]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[process_remerge_data_since].[@zone_forecast_data]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[process_remerge_data_since].[@debug]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="2090" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[process_remerge_data_since]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@date_since datetime,&#xD;&#xA;&#x9;@organisation_data bit = 1,&#xD;&#xA;&#x9;@organisation_forecast_data bit = 1,&#xD;&#xA;&#x9;@zone_data bit = 1,&#xD;&#xA;&#x9;@zone_forecast_data bit = 1,&#xD;&#xA;&#x9;@debug bit = 1&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[process_replicate_from_aws_rds_migration]">
			<Property Name="BodyScript">
				<Value><![CDATA[


-- wi_import.dbo.ds_organisation_data
SET IDENTITY_INSERT wi_import.dbo.ds_organisation_data ON

INSERT INTO wi_import.dbo.ds_organisation_data (id, organisation_id, metric_id, attribute_id, date, date_type, val_d, val_i, currency_id, source_id, confidence_id, privacy_id, location, definition, notes, approved, approval_hash, import_hash, stasis, processed, created_on, created_by, last_update_on, last_update_by)
SELECT	id, organisation_id, metric_id, attribute_id, date, date_type, val_d, val_i, currency_id, source_id, confidence_id, privacy_id, location, definition, notes, approved, approval_hash, import_hash, stasis, processed, created_on, created_by, last_update_on, last_update_by
FROM	[aws_rds_migration].[wi_import].[dbo].[ds_organisation_data]
WHERE	id NOT IN (SELECT id FROM wi_import.dbo.ds_organisation_data)

SET IDENTITY_INSERT wi_import.dbo.ds_organisation_data OFF

/*DELETE	ds
FROM	wi_import.dbo.ds_organisation_data ds LEFT JOIN
		[aws_rds_migration].[wi_import].[dbo].[ds_organisation_data] ds2 ON ds.id = ds2.id
WHERE	ds2.id IS null*/


-- wi_import.dbo.ds_organisation_forecast_data
SET IDENTITY_INSERT wi_import.dbo.ds_organisation_forecast_data ON

INSERT INTO wi_import.dbo.ds_organisation_forecast_data (id, organisation_id, metric_id, attribute_id, dimension_id, dimension_val_id, date, date_type, val_d, val_i, currency_id, source_id, confidence_id, privacy_id, approved, approval_hash, import_hash, hash, created_on, created_by, last_update_on, last_update_by)
SELECT	id, organisation_id, metric_id, attribute_id, dimension_id, dimension_val_id, date, date_type, val_d, val_i, currency_id, source_id, confidence_id, privacy_id, approved, approval_hash, import_hash, hash, created_on, created_by, last_update_on, last_update_by
FROM	[aws_rds_migration].[wi_import].[dbo].[ds_organisation_forecast_data]
WHERE	id NOT IN (SELECT id FROM wi_import.dbo.ds_organisation_forecast_data)

SET IDENTITY_INSERT wi_import.dbo.ds_organisation_forecast_data OFF


-- wi_import.dbo.ds_zone_data
SET IDENTITY_INSERT wi_import.dbo.ds_zone_data ON

INSERT INTO wi_import.dbo.ds_zone_data (id, zone_id, metric_id, attribute_id, date, date_type, val_d, val_i, currency_id, source_id, confidence_id, privacy_id, location, definition, notes, approved, approval_hash, import_hash, processed, created_on, created_by, last_update_on, last_update_by)
SELECT	id, zone_id, metric_id, attribute_id, date, date_type, val_d, val_i, currency_id, source_id, confidence_id, privacy_id, location, definition, notes, approved, approval_hash, import_hash, processed, created_on, created_by, last_update_on, last_update_by
FROM	[aws_rds_migration].[wi_import].[dbo].[ds_zone_data]
WHERE	id NOT IN (SELECT id FROM wi_import.dbo.ds_zone_data)

SET IDENTITY_INSERT wi_import.dbo.ds_zone_data OFF


-- wi_import.dbo.ds_zone_forecast_data
SET IDENTITY_INSERT wi_import.dbo.ds_zone_forecast_data ON

INSERT INTO wi_import.dbo.ds_zone_forecast_data (id, zone_id, metric_id, attribute_id, date, date_type, val_d, val_i, currency_id, source_id, confidence_id, privacy_id, approved, approval_hash, import_hash, hash, created_on, created_by, last_update_on, last_update_by)
SELECT	id, zone_id, metric_id, attribute_id, date, date_type, val_d, val_i, currency_id, source_id, confidence_id, privacy_id, approved, approval_hash, import_hash, hash, created_on, created_by, last_update_on, last_update_by
FROM	[aws_rds_migration].[wi_import].[dbo].[ds_zone_forecast_data]
WHERE	id NOT IN (SELECT id FROM wi_import.dbo.ds_zone_forecast_data)

SET IDENTITY_INSERT wi_import.dbo.ds_zone_forecast_data OFF




-- Cross-update mismatched user ids between the old and new user tables
CREATE TABLE #users (id int, old_id int)

INSERT INTO #users
SELECT	u.id, u2.user_id
FROM	wi_master.dbo.users u INNER JOIN [aws_rds_migration].[wi_master].[dbo].[user_migration_link] u2 ON u.email = u2.email
WHERE	u.id IN (SELECT DISTINCT user_id FROM wi_master.dbo.user_organisation_link WHERE organisation_id = 1225) AND u.id <> u2.user_id

-- Import data sets
UPDATE ds SET ds.created_by = u.id FROM wi_import.dbo.ds_organisation_data ds INNER JOIN #users u ON ds.created_by = u.old_id
UPDATE ds SET ds.last_update_by = u.id FROM wi_import.dbo.ds_organisation_data ds INNER JOIN #users u ON ds.last_update_by = u.old_id

UPDATE ds SET ds.created_by = u.id FROM wi_import.dbo.ds_organisation_forecast_data ds INNER JOIN #users u ON ds.created_by = u.old_id
UPDATE ds SET ds.last_update_by = u.id FROM wi_import.dbo.ds_organisation_forecast_data ds INNER JOIN #users u ON ds.last_update_by = u.old_id

UPDATE ds SET ds.created_by = u.id FROM wi_import.dbo.ds_service_data ds INNER JOIN #users u ON ds.created_by = u.old_id
UPDATE ds SET ds.last_update_by = u.id FROM wi_import.dbo.ds_service_data ds INNER JOIN #users u ON ds.last_update_by = u.old_id

UPDATE ds SET ds.created_by = u.id FROM wi_import.dbo.ds_zone_data ds INNER JOIN #users u ON ds.created_by = u.old_id
UPDATE ds SET ds.last_update_by = u.id FROM wi_import.dbo.ds_zone_data ds INNER JOIN #users u ON ds.last_update_by = u.old_id

UPDATE ds SET ds.created_by = u.id FROM wi_import.dbo.ds_zone_forecast_data ds INNER JOIN #users u ON ds.created_by = u.old_id
UPDATE ds SET ds.last_update_by = u.id FROM wi_import.dbo.ds_zone_forecast_data ds INNER JOIN #users u ON ds.last_update_by = u.old_id

DROP TABLE #users]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[dbo].[process_replicate_from_aws_rds_migration].[#users]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[dbo].[process_replicate_from_aws_rds_migration].[#users].[old_id]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[process_replicate_from_aws_rds_migration].[#users].[id]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[dbo].[process_replicate_from_aws_rds_migration].[#users].[old_id]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[process_replicate_from_aws_rds_migration].[#users].[id]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[dbo].[process_replicate_from_aws_rds_migration].[#users].[old_id]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[process_replicate_from_aws_rds_migration].[#users].[id]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[dbo].[process_replicate_from_aws_rds_migration].[#users].[old_id]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[process_replicate_from_aws_rds_migration].[#users].[id]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[dbo].[process_replicate_from_aws_rds_migration].[#users].[old_id]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[process_replicate_from_aws_rds_migration].[#users].[id]" />
				</Entry>
				<Entry />
				<Entry />
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[process_replicate_from_aws_rds_migration].[#users]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_replicate_from_aws_rds_migration].[#users].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_replicate_from_aws_rds_migration].[#users].[old_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="5489" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[process_replicate_from_aws_rds_migration]&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[process_switch_smartphones]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[

CREATE TABLE #data (id bigint, organisation_id int, metric_id int, attribute_id int, date datetime, date_type char(1) COLLATE DATABASE_DEFAULT, value decimal(22,8), currency_id int, source_id int, confidence_id int, is_decimal bit, processed bit)

-- Get reported "installed base" and "penetration" data sets
INSERT INTO #data
SELECT	null, ds.organisation_id, ds.metric_id, ds.attribute_id, ds.date, ds.date_type, CASE WHEN ds.val_i IS null THEN ds.val_d ELSE ds.val_i END, ds.currency_id, ds.source_id, ds.confidence_id, null, 0
FROM	ds_organisation_data ds INNER JOIN organisations o ON ds.organisation_id = o.id
WHERE	ds.metric_id IN (183,184) AND ds.attribute_id = 0 AND ds.date >= @date_start AND ds.date < @date_end

-- Update metric/attribute id to connections/% connections
UPDATE #data SET metric_id = 3, attribute_id = 1432 WHERE metric_id = 183 AND attribute_id = 0
UPDATE #data SET metric_id = 53, attribute_id = 1432 WHERE metric_id = 184 AND attribute_id = 0

UPDATE #data SET is_decimal = dbo.metric_is_decimal(metric_id)


-- Overwrite with reported data that has been already updated to use the new metric/attribute ids
UPDATE	d
SET		d.value = CASE WHEN ds.val_i IS null THEN ds.val_d ELSE ds.val_i END, d.currency_id = ds.currency_id, d.source_id = ds.source_id, d.confidence_id = ds.confidence_id
FROM	#data d INNER JOIN
		ds_organisation_data ds ON (d.organisation_id = ds.organisation_id AND d.metric_id = ds.metric_id AND d.attribute_id = ds.attribute_id AND d.date = ds.date AND d.date_type = ds.date_type)
WHERE	ds.metric_id IN (3,53) AND ds.attribute_id = 1432 AND ds.is_calculated = 0


-- Fetch existing ids so we can UPDATE against these rows
UPDATE	d
SET		d.id = ds.id
FROM	#data d INNER JOIN ds_organisation_data ds ON (d.organisation_id = ds.organisation_id AND d.metric_id = ds.metric_id AND d.attribute_id = ds.attribute_id AND d.date = ds.date AND d.date_type = ds.date_type)

-- Remove any NULL data
DELETE FROM #data WHERE value IS null


IF @debug = 0
BEGIN
	-- UPDATE the values that already exist
	UPDATE	ds
	SET		ds.val_d = CASE d.is_decimal WHEN 1 THEN ROUND(d.value, 4) ELSE null END, ds.val_i = CASE d.is_decimal WHEN 1 THEN null ELSE ROUND(d.value, 0) END, ds.last_update_on = CASE WHEN ds.val_d = d.value THEN ds.last_update_on ELSE GETDATE() END, ds.last_update_by = CASE WHEN ds.val_d = d.value THEN ds.last_update_by ELSE 11770 END
	FROM	ds_organisation_data ds INNER JOIN #data d ON ds.id = d.id

	-- INSERT the remainder
	INSERT INTO ds_organisation_data (organisation_id, metric_id, attribute_id, date, date_type, val_d, val_i, currency_id, source_id, confidence_id, created_by)
	SELECT	organisation_id, metric_id, attribute_id, date, date_type, CASE is_decimal WHEN 1 THEN ROUND(value, 4) ELSE null END, CASE is_decimal WHEN 1 THEN null ELSE ROUND(value, 0) END, currency_id, source_id, confidence_id, 11770
	FROM	#data
	WHERE	id IS null
END

IF @debug = 1
BEGIN
	SELECT * FROM #data
END


-- TODO: add benchmark by passing a start time to an audit function
SELECT 'Finished: process_merge_smartphones (42s)'

DROP TABLE #data]]></Value>
			</Property>
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[process_switch_smartphones].[#data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_switch_smartphones].[@date_start]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_switch_smartphones].[@date_end]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_switch_smartphones].[#data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_switch_smartphones].[#data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_switch_smartphones].[#data].[is_decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metric_is_decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_switch_smartphones].[#data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_switch_smartphones].[#data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_switch_smartphones].[#data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_switch_smartphones].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_switch_smartphones].[#data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_switch_smartphones].[#data].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_switch_smartphones].[#data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_switch_smartphones].[#data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_switch_smartphones].[#data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_switch_smartphones].[#data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_switch_smartphones].[#data].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_switch_smartphones].[@debug]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_switch_smartphones].[#data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_switch_smartphones].[#data].[is_decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_switch_smartphones].[#data].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[last_update_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_organisation_data].[created_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_switch_smartphones].[#data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_switch_smartphones].[#data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_switch_smartphones].[#data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_switch_smartphones].[#data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_switch_smartphones].[#data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_switch_smartphones].[#data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_switch_smartphones].[#data].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[process_switch_smartphones].[#data]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_switch_smartphones].[#data].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_switch_smartphones].[#data].[organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_switch_smartphones].[#data].[metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_switch_smartphones].[#data].[attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_switch_smartphones].[#data].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_switch_smartphones].[#data].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_switch_smartphones].[#data].[value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="8" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_switch_smartphones].[#data].[currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_switch_smartphones].[#data].[source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_switch_smartphones].[#data].[confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_switch_smartphones].[#data].[is_decimal]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_switch_smartphones].[#data].[processed]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[process_switch_smartphones].[@date_start]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[process_switch_smartphones].[@date_end]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[process_switch_smartphones].[@debug]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="3267" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[process_switch_smartphones]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@date_start datetime,&#xD;&#xA;&#x9;@date_end datetime,&#xD;&#xA;&#x9;@debug bit = 1&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[process_update_currency_rates]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[

DECLARE @date datetime

IF @date_spot IS null
BEGIN
	SET @date_spot = dbo.current_reporting_quarter()
END

-- Ensure we have "forecast" exchange rates for all combinations through to @date_end where a value exists for the current period
CREATE TABLE #currencies (id int, processed bit)
CREATE TABLE #currency_rates (id int, from_currency_id int, to_currency_id int, date datetime, date_type char(1) COLLATE DATABASE_DEFAULT, processed bit)

INSERT INTO #currencies
SELECT DISTINCT from_currency_id, 0 FROM currency_rates WHERE date = @date_spot AND date_type = 'Q'

SET @date = DATEADD(month, 3, @date_spot)

WHILE @date < @date_end
BEGIN
	INSERT INTO #currency_rates
	SELECT null, id, 1, @date, 'Q', 0 FROM #currencies UNION ALL
	SELECT null, id, 2, @date, 'Q', 0 FROM #currencies UNION ALL
	SELECT null, id, 3, @date, 'Q', 0 FROM #currencies UNION ALL
	SELECT null, id, 73, @date, 'Q', 0 FROM #currencies

	SET @date = DATEADD(month, 3, @date)
END

UPDATE	cr1
SET		cr1.id = cr2.id
FROM	#currency_rates cr1 INNER JOIN currency_rates cr2 ON (cr1.from_currency_id = cr2.from_currency_id AND cr1.to_currency_id = cr2.to_currency_id AND cr1.date = cr2.date AND cr1.date_type = cr2.date_type)


IF @debug = 0
BEGIN
	-- Insert "forecast" exchange rates that don't yet exist
	INSERT INTO currency_rates (from_currency_id, to_currency_id, date, date_type, value, created_by)
	SELECT from_currency_id, to_currency_id, date, date_type, 0, 11770 FROM #currency_rates WHERE id IS null

	-- Update all future exchange rates to the most recent reported value
	UPDATE	cr2
	SET		cr2.value = cr1.value, cr2.last_update_on = CASE WHEN cr2.value = cr1.value THEN cr2.last_update_on ELSE GETDATE() END, cr2.last_update_by = CASE WHEN cr2.value = cr1.value THEN cr2.last_update_by ELSE 11770 END
	FROM	currency_rates cr1 INNER JOIN currency_rates cr2 ON (cr1.from_currency_id = cr2.from_currency_id AND cr1.to_currency_id = cr2.to_currency_id AND cr1.date_type = cr2.date_type)
	WHERE	cr1.date = @date_spot AND cr2.date > @date_spot AND cr1.date_type = 'Q'
END

IF @debug = 1
BEGIN
	SELECT * FROM #currency_rates WHERE id IS null
END

DROP TABLE #currencies
DROP TABLE #currency_rates]]></Value>
			</Property>
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_update_currency_rates].[@date_spot]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[current_reporting_quarter]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_update_currency_rates].[#currencies]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_update_currency_rates].[@date_end]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_update_currency_rates].[#currency_rates]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_update_currency_rates].[#currencies].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_update_currency_rates].[#currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_update_currency_rates].[#currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_update_currency_rates].[#currency_rates].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_update_currency_rates].[#currency_rates].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_update_currency_rates].[#currency_rates].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_update_currency_rates].[@debug]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[created_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_update_currency_rates].[#currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_update_currency_rates].[#currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_update_currency_rates].[#currency_rates].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_update_currency_rates].[#currency_rates].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[process_update_currency_rates].[#currency_rates].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[from_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[to_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[last_update_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[last_update_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rates].[date]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[process_update_currency_rates].[#currencies]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_update_currency_rates].[#currencies].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_update_currency_rates].[#currencies].[processed]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[process_update_currency_rates].[#currency_rates]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_update_currency_rates].[#currency_rates].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_update_currency_rates].[#currency_rates].[from_currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_update_currency_rates].[#currency_rates].[to_currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_update_currency_rates].[#currency_rates].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_update_currency_rates].[#currency_rates].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[process_update_currency_rates].[#currency_rates].[processed]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[process_update_currency_rates].[@date_end]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[process_update_currency_rates].[@date_spot]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[process_update_currency_rates].[@debug]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="2358" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[process_update_currency_rates]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@date_end datetime,&#xD;&#xA;&#x9;@date_spot datetime = null,&#xD;&#xA;&#x9;@debug bit = 1&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[process_update_log_model_versions]">
			<Property Name="BodyScript">
				<Value><![CDATA[

-- Track markets that have been "upgraded" to the 2017 forecast model (used to ignore certain legacy processes from v4 onwards)
INSERT INTO log_model_versions (zone_id, version, created_on)
SELECT DISTINCT zone_id, 4, GETDATE() FROM ds_zone_data WHERE zone_id NOT IN (SELECT zone_id FROM log_model_versions) AND metric_id = 3 AND attribute_id = 0 AND date >= '2021-01-01']]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[log_model_versions]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[log_model_versions].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[log_model_versions].[version]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[log_model_versions].[created_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[log_model_versions]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[log_model_versions].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[date]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="443" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[process_update_log_model_versions]&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[process_update_log_reporting]">
			<Property Name="BodyScript">
				<Value><![CDATA[WITH r AS
(
	SELECT	id, rank = ROW_NUMBER() OVER (PARTITION BY organisation_id, metric_id, attribute_id, date_type, date ORDER BY created_on DESC)
	FROM	wi_import.dbo.ds_organisation_data
	WHERE	approved = 1
)

INSERT	INTO log_reporting (metric_id, attribute_id, date, date_type)
SELECT	DISTINCT
		ds.metric_id,
		ds.attribute_id,
		ds.date,
		ds.date_type

FROM	wi_import.dbo.ds_organisation_data ds LEFT JOIN
		log_reporting l ON (ds.metric_id = l.metric_id AND ds.attribute_id = l.attribute_id AND ds.date = l.date AND ds.date_type = l.date_type)

WHERE	ds.id IN (SELECT id FROM r WHERE rank = 1) AND
		ds.date >= '2009-01-01' AND
		ds.date_type = 'Q' AND
		l.metric_id IS null


-- Update all entries with the latest count of organisations reporting that metric/attribute, and the corresponding (connections) market share
UPDATE log_reporting SET organisations_count = 0, organisations_market_share = 0

;WITH r AS
(
	SELECT	id, rank = ROW_NUMBER() OVER (PARTITION BY organisation_id, metric_id, attribute_id, date_type, date ORDER BY created_on DESC)
	FROM	wi_import.dbo.ds_organisation_data
)

UPDATE	l

SET		l.organisations_count = ds.count,
		l.organisations_market_share = CAST(ds.sum AS float)/CAST(ds2.val_i AS float)

FROM	log_reporting l INNER JOIN
		(
			SELECT	ds.metric_id, ds.attribute_id, ds.date, ds.date_type, COUNT(DISTINCT ds.organisation_id) count, SUM(ds2.val_i) sum
			FROM	wi_import.dbo.ds_organisation_data ds INNER JOIN wi_master.dbo.ds_organisation_data ds2 ON (ds.organisation_id = ds2.organisation_id AND ds2.metric_id = 3 AND ds2.attribute_id = 0 AND ds.date = ds2.date AND ds.date_type = ds2.date_type) INNER JOIN organisations o ON ds.organisation_id = o.id
			WHERE	ds.id IN (SELECT id FROM r WHERE rank = 1) AND o.type_id = 1089
			GROUP BY ds.metric_id, ds.attribute_id, ds.date, ds.date_type
		) ds ON (l.metric_id = ds.metric_id AND l.attribute_id = ds.attribute_id AND l.date = ds.date AND l.date_type = ds.date_type) INNER JOIN
		ds_zone_data ds2 ON (ds2.zone_id = 3826 AND ds2.metric_id = 3 AND ds2.attribute_id = 0 AND ds2.date = l.date AND ds2.date_type = l.date_type)]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[dbo].[log_reporting]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[log_reporting].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[log_reporting].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[log_reporting].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[log_reporting].[date_type]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[log_reporting].[metric_id]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[log_reporting].[attribute_id]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[log_reporting].[date]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[log_reporting].[date_type]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[log_reporting].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[log_reporting].[organisations_count]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[log_reporting].[organisations_market_share]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[log_reporting].[metric_id]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[log_reporting].[attribute_id]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[log_reporting].[date]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[log_reporting].[date_type]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[ds_zone_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[log_reporting].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[log_reporting].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[log_reporting].[organisations_count]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[log_reporting].[organisations_market_share]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[float]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[float]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ds_zone_data].[val_i]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[process_update_log_reporting].[CTE1].[r]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[process_update_log_reporting].[CTE1].[r].[id]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[process_update_log_reporting].[CTE1].[r].[rank]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[process_update_log_reporting].[CTE2].[r]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[process_update_log_reporting].[CTE2].[r].[id]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[process_update_log_reporting].[CTE2].[r].[rank]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="2276" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[process_update_log_reporting]&#xD;&#xA;&#xD;&#xA;AS&#xD;&#xA;&#xD;&#xA;-- Create missing metric/attribute/date combinations&#xD;&#xA;;" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[query_logs]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[query_logs].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[query_logs].[domain]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[query_logs].[query]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2096" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[query_logs].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="80" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[recache_dc_tables]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[

IF ( SELECT COUNT(*) FROM wi_master.dbo.sp_run_error_log WHERE date >= DATEADD(hour, -5, GETDATE()) ) = 0
BEGIN
	EXEC wi_master.dbo.process_recache_organisation_data @gsmaiStartDate, @reportingModel
	EXEC wi_master.dbo.process_recache_zone_data @beginingOfTimeDate, @reportingModel
	EXEC wi_master.dbo.process_recache_group_data @gsmaiStartDate, @reportingModel
	EXEC wi_master.dbo.process_recache_dashboard_data
	
	-- Removing CAPEX data - Business requirement came from Kavi
	DELETE FROM wi_master.dbo.dc_organisation_data WHERE metric_id=333 and attribute_id=0 and source_id IN (3,22)
	
	-- Clear up backup tables
	execute [dbo].[clear_backup_ds_tables];
END ELSE BEGIN
	
	-- Restore DS from backup
	--execute [dbo].[restore_ds_data_from_wi_backups];
	--execute [dbo].[clear_backup_ds_tables];

	execute wi_master.dbo.[collect_errors] @query_string = "Recache Failed"
END]]></Value>
			</Property>
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="BodyDependencies">
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[dbo].[recache_dc_tables].[@gsmaiStartDate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[recache_dc_tables].[@reportingModel]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[recache_dc_tables].[@beginingOfTimeDate]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[dbo].[clear_backup_ds_tables]" />
				</Entry>
				<Entry />
				<Entry />
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[recache_dc_tables].[@gsmaiStartDate]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA['2000-01-01']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="10" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[recache_dc_tables].[@beginingOfTimeDate]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA['1950-01-01']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="10" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[recache_dc_tables].[@reportingModel]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA['2026-01-01']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="10" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1085" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[recache_dc_tables]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@gsmaiStartDate char(10) = '2000-01-01',&#xD;&#xA;&#x9;@beginingOfTimeDate char(10) = '1950-01-01',&#xD;&#xA;&#x9;@reportingModel char(10) = '2026-01-01'&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[registrations]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[registrations].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[registrations].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[registrations].[email]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[registrations].[job_title]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[registrations].[telephone]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[registrations].[ref]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[registrations].[campaign]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[registrations].[organisation_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[registrations].[organisation]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[registrations].[country_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[registrations].[approved]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="393" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[registrations].[user_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[registrations].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="395" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[registrations].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="394" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[registrations].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="397" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[registrations].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="396" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="591" />
		</Element>
		<Element Type="SqlMultiStatementTableValuedFunction" Name="[dbo].[remove_outliers]">
			<Property Name="ReturnTableVariable" Value="@xy_outliers" />
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[float]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[float]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[remove_outliers].[@xy_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[excel_serial_to_datetime]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[remove_outliers].[@xy_data].[x]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[remove_outliers].[@xy_data].[x]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[excel_serial_to_datetime]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[remove_outliers].[@xy_data].[y]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[remove_outliers].[@xy_data].[y]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[remove_outliers].[@xy_data].[y]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[remove_outliers].[@xy_data].[y]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[excel_serial_to_datetime]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[remove_outliers].[@xy_data].[y]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[remove_outliers].[@xy_data].[y]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[remove_outliers].[@data].[row]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[remove_outliers].[@data].[diff]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[remove_outliers].[@data].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[remove_outliers].[@data].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[remove_outliers].[@data].[row]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[remove_outliers].[@data].[row]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[remove_outliers].[@data].[row]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[remove_outliers].[@data].[is_outlier]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[remove_outliers].[@data].[diff]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[remove_outliers].[@max_outlier_multiplier]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[remove_outliers].[@data].[diff]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[remove_outliers].[@data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[remove_outliers].[@data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[remove_outliers].[@data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[remove_outliers].[@data].[value_adjusted]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[remove_outliers].[@data].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[remove_outliers].[@data].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[remove_outliers].[@data].[is_outlier]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[remove_outliers].[@data].[is_outlier]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[remove_outliers].[@data].[input]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[remove_outliers].[@data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[remove_outliers].[@data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[remove_outliers].[@data].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[remove_outliers].[@data].[value_adjusted]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[remove_outliers].[@data].[processed]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[datetime_to_excel_serial]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[remove_outliers].[@data].[processed]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[remove_outliers].[@data].[date]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[remove_outliers].[x]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[remove_outliers].[y]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[remove_outliers].[@data]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[remove_outliers].[@data].[row]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[remove_outliers].[@data].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[remove_outliers].[@data].[input]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[remove_outliers].[@data].[input_2]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[remove_outliers].[@data].[value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[remove_outliers].[@data].[value_adjusted]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[remove_outliers].[@data].[diff]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[remove_outliers].[@data].[is_outlier]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[remove_outliers].[@data].[processed]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[remove_outliers].[@xy_data]" Disambiguator="7">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[remove_outliers].[@xy_data].[x]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[remove_outliers].[@xy_data].[y]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Precision" Value="53" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[float]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[

BEGIN
	DECLARE @row_midpoint float, @value float, @date datetime
	DECLARE @data TABLE (row int, date datetime, input float, input_2 float, value float, value_adjusted float, diff float, is_outlier bit, processed bit)

	INSERT INTO @data
	SELECT	ROW_NUMBER() OVER (ORDER BY xy.value), xy.date, xy.input, xy.input_2, xy.value, null, null, 0, 0
	FROM	(
				-- TODO: xy set manipulation without datetime dependency for traversing next/previous data point
				SELECT	dbo.excel_serial_to_datetime(xy2.x) date,
						xy.y input,
						xy2.y input_2,
						xy2.y - xy.y value

				FROM	@xy_data xy INNER JOIN
						@xy_data xy2 ON dbo.excel_serial_to_datetime(xy2.x) = DATEADD(quarter, 1, dbo.excel_serial_to_datetime(xy.x))
			) xy
	ORDER BY xy.value

	SET @row_midpoint = (SELECT AVG(row) FROM @data)

	-- Note: some semi-ridiculous use of inner queries/joins to satisfy SQL Server function requirement not to change state (disallows UPDATE)
	UPDATE @data SET diff = d.value - (SELECT AVG(d2.value) FROM @data d2 WHERE d2.row < d.row) FROM @data d WHERE d.row > @row_midpoint
	UPDATE @data SET diff = d.value - (SELECT AVG(d2.value) FROM @data d2 WHERE d2.row > d.row) FROM @data d WHERE d.row <= @row_midpoint

	UPDATE @data SET is_outlier = 1 FROM @data d WHERE d.row > @row_midpoint AND ABS(d.diff) > ABS(@max_outlier_multiplier * (SELECT d2.diff FROM @data d2 WHERE d2.row = d.row - 1))
	UPDATE @data SET is_outlier = 1 FROM @data d WHERE d.row <= @row_midpoint AND ABS(d.diff) > ABS(@max_outlier_multiplier * (SELECT d2.diff FROM @data d2 WHERE d2.row = d.row + 1))

	-- Adjust any outliers using surrounding values
	UPDATE @data SET value_adjusted = (d3.value - d2.value)/2 + d2.value FROM @data d INNER JOIN (SELECT * FROM @data) d2 ON d.date = DATEADD(quarter, 1, d2.date) INNER JOIN (SELECT * FROM @data) d3 ON d.date = DATEADD(quarter, -1, d3.date) WHERE d.is_outlier = 1

	IF (SELECT COUNT(*) FROM @data WHERE is_outlier = 1) > 0
	BEGIN
		-- Starting value is the y immediately prior to @period, net of any delta between the actual net additions and adjusted
		SET @value = (SELECT input FROM @data WHERE date = (SELECT MIN(date) FROM @data)) + (SELECT SUM(value) - SUM(value_adjusted) FROM @data WHERE is_outlier = 1)

		WHILE EXISTS (SELECT * FROM @data WHERE processed = 0)
		BEGIN
			SET @date = (SELECT TOP 1 date FROM @data WHERE processed = 0 ORDER BY date)

			-- Then each value here on is the current value plus the adjusted net additions
			SET @value = @value + (SELECT CASE WHEN value_adjusted IS null THEN value ELSE value_adjusted END FROM @data WHERE date = @date)

			INSERT INTO @xy_outliers
			SELECT dbo.datetime_to_excel_serial(@date), @value

			UPDATE @data SET processed = 1 WHERE date = @date
		END
	END

	RETURN
END]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="CreateOffset" Value="2" />
							<Property Name="Length" Value="3259" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE FUNCTION [dbo].[remove_outliers]&#xD;&#xA;(&#xD;&#xA;&#x9;@xy_data xy_data READONLY,&#x9;&#x9;&#x9;&#x9;-- NOTE: the first row will be dropped as the comparison is made on net additions, so should pass n+1 data points for the time series n required&#xD;&#xA;&#x9;@max_outlier_multiplier float = 2.5&#x9;&#x9;-- Maximum net additions multiplier for outlier detection&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;-- Flags outliers and rebuilds an (x, y) data set based on adjusted net additions&#xD;&#xA;RETURNS @xy_outliers TABLE (x float, y float)&#xD;&#xA;&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[remove_outliers].[@xy_data]">
						<Property Name="IsReadOnly" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References Name="[dbo].[xy_data]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[remove_outliers].[@max_outlier_multiplier]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[2.5]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[report_favourites]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[report_favourites].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[report_favourites].[report_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[report_favourites].[user_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[report_favourites].[type]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="16" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[report_favourites].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="398" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="592" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[report_fk_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[report_fk_link].[report_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[report_fk_link].[fk]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[report_fk_link].[fk_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[report_fk_link].[fk_2]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[report_fk_link].[fk_id_2]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="593" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[report_tracking]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[report_tracking].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[report_tracking].[report_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[report_tracking].[user_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[report_tracking].[type]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="16" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[report_tracking].[serialized]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[report_tracking].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="399" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="594" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[report_tracking].[IX_report_tracking_created_on]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Property Name="IsAscending" Value="False" />
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[report_tracking].[created_on]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[report_tracking]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[report_tracking].[IX_report_tracking_report_id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[report_tracking].[report_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[report_tracking]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[report_tracking].[IX_report_tracking_user_id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[report_tracking].[user_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[report_tracking]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[reports]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[reports].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[reports].[name]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[reports].[sp]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[reports].[url]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[reports].[hash]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[reports].[uniqid]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[reports].[serialized]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[reports].[metadata]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[reports].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="401" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[reports].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="400" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[reports].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="403" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[reports].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="402" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="595" />
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[restore_ds_data_from_wi_backups]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[

	
SET IDENTITY_INSERT [wi_master].[dbo].[ds_organisation_data] ON
SET IDENTITY_INSERT [wi_master].[dbo].[ds_zone_data] ON
SET IDENTITY_INSERT [wi_master].[dbo].[ds_group_data] ON
SET IDENTITY_INSERT [wi_master].[dbo].[ds_group_ownership] ON
SET IDENTITY_INSERT [wi_master].[dbo].[ds_mvnos] ON
SET IDENTITY_INSERT [wi_master].[dbo].[ds_service_data] ON
SET IDENTITY_INSERT [wi_master].[dbo].[ds_survey_data] ON

-- Restore DS tables
DECLARE @backupOrganisationCount int = (SELECT COUNT(*) FROM [wi_backups].[dbo].[ds_organisation_data])
DECLARE @backupZoneCount int = (SELECT COUNT(*) FROM [wi_backups].[dbo].[ds_zone_data])
DECLARE @backupGroupCount int = (SELECT COUNT(*) FROM [wi_backups].[dbo].[ds_group_data])
DECLARE @backupGroupOwnershipCount int = (SELECT COUNT(*) FROM [wi_backups].[dbo].[ds_group_ownership])
DECLARE @backupMVNOSCount int = (SELECT COUNT(*) FROM [wi_backups].[dbo].[ds_mvnos])
DECLARE @backupServiceCount int = (SELECT COUNT(*) FROM [wi_backups].[dbo].[ds_service_data])
DECLARE @backupSurveyCount int = (SELECT COUNT(*) FROM [wi_backups].[dbo].[ds_survey_data])


	
IF @backupOrganisationCount > 0
BEGIN
	TRUNCATE TABLE [wi_master].[dbo].[ds_organisation_data];
	
	insert into [wi_master].[dbo].[ds_organisation_data]([id], [organisation_id], [metric_id], [attribute_id],[status_id],[privacy_id],[date],[date_type],[val_d],[val_i],[currency_id],[source_id],[confidence_id],[has_flags],[is_calculated],[import_id],[import_merge_hash],[created_on],[created_by],[last_update_on], [last_update_by])
	SELECT [id], [organisation_id], [metric_id], [attribute_id],[status_id],[privacy_id],[date],[date_type],[val_d],[val_i],[currency_id],[source_id],[confidence_id],[has_flags],[is_calculated],[import_id],[import_merge_hash],[created_on],[created_by],[last_update_on], [last_update_by]
	FROM [wi_backups].[dbo].[ds_organisation_data];
END


IF @backupZoneCount > 0
BEGIN
	TRUNCATE TABLE [wi_master].[dbo].[ds_zone_data];
	
	insert into [wi_master].[dbo].[ds_zone_data]([id], [zone_id], [metric_id], [attribute_id], [status_id], [privacy_id], [date], [date_type], [val_d], [val_i], [currency_id], [source_id], [confidence_id], [has_flags], [is_calculated], [is_spot], [import_id], [created_on], [created_by], [last_update_on], [last_update_by])
	SELECT [id], [zone_id], [metric_id], [attribute_id], [status_id], [privacy_id], [date], [date_type], [val_d], [val_i], [currency_id], [source_id], [confidence_id], [has_flags], [is_calculated], [is_spot], [import_id], [created_on], [created_by], [last_update_on], [last_update_by]
	FROM [wi_backups].[dbo].[ds_zone_data];
END


IF @backupGroupCount > 0
BEGIN
	TRUNCATE TABLE [wi_master].[dbo].[ds_group_data];
	
	insert into [wi_master].[dbo].[ds_group_data]([id], [organisation_id], [ownership_threshold], [metric_id], [attribute_id], [status_id], [privacy_id], [date], [date_type], [val_d], [val_i], [currency_id], [source_id], [confidence_id], [has_flags], [is_calculated], [is_proportionate], [is_spot], [import_id], [created_on], [created_by], [last_update_on], [last_update_by])
	SELECT [id], [organisation_id], [ownership_threshold], [metric_id], [attribute_id], [status_id], [privacy_id], [date], [date_type], [val_d], [val_i], [currency_id], [source_id], [confidence_id], [has_flags], [is_calculated], [is_proportionate], [is_spot], [import_id], [created_on], [created_by], [last_update_on], [last_update_by]
	FROM [wi_backups].[dbo].[ds_group_data];
END


IF @backupGroupOwnershipCount > 0
BEGIN
	TRUNCATE TABLE [wi_master].[dbo].[ds_group_ownership];
	
	insert into [wi_master].[dbo].[ds_group_ownership]([id], [group_id], [organisation_id], [metric_id], [attribute_id], [date], [date_type], [value], [is_compound], [is_consolidated], [is_group], [is_joint_venture], [source_id], [confidence_id], [definition_id], [note], [created_on], [created_by], [last_update_on], [last_update_by])
	SELECT [id], [group_id], [organisation_id], [metric_id], [attribute_id], [date], [date_type], [value], [is_compound], [is_consolidated], [is_group], [is_joint_venture], [source_id], [confidence_id], [definition_id], [note], [created_on], [created_by], [last_update_on], [last_update_by]
	FROM [wi_backups].[dbo].[ds_group_ownership];
END

IF @backupMVNOSCount > 0
BEGIN
	TRUNCATE TABLE [wi_master].[dbo].[ds_mvnos];
	
	insert into [wi_master].[dbo].[ds_mvnos]([id], [mvno_id], [category_id], [tariff_type_id], [launch_date], [url], [is_brand], [is_data_only], [has_data], [has_group_data], [created_on], [created_by], [last_update_on], [last_update_by], [is_branded_reseller], [full_mvno], [note], [secondary_category_id])
	SELECT [id], [mvno_id], [category_id], [tariff_type_id], [launch_date], [url], [is_brand], [is_data_only], [has_data], [has_group_data], [created_on], [created_by], [last_update_on], [last_update_by], [is_branded_reseller], [full_mvno], [note], [secondary_category_id]
	FROM [wi_backups].[dbo].[ds_mvnos];
END

IF @backupServiceCount > 0
BEGIN
	TRUNCATE TABLE [wi_master].[dbo].[ds_service_data];
	
	insert into [wi_master].[dbo].[ds_service_data]([id], [service_id], [metric_id], [attribute_id], [status_id], [privacy_id], [date], [date_type], [val_d], [val_i], [currency_id], [source_id], [confidence_id], [has_flags], [is_calculated], [import_id], [import_merge_hash], [created_on], [created_by], [last_update_on], [last_update_by])
	SELECT [id], [service_id], [metric_id], [attribute_id], [status_id], [privacy_id], [date], [date_type], [val_d], [val_i], [currency_id], [source_id], [confidence_id], [has_flags], [is_calculated], [import_id], [import_merge_hash], [created_on], [created_by], [last_update_on], [last_update_by]
	FROM [wi_backups].[dbo].[ds_service_data];
END

IF @backupSurveyCount > 0
BEGIN
	TRUNCATE TABLE [wi_master].[dbo].[ds_survey_data];
	
	insert into [wi_master].[dbo].[ds_survey_data]([id], [survey_id], [zone_id], [respondent_id], [acquisition_type_id], [question_number_major], [question_number_minor], [val_i], [val_t])
	SELECT [id], [survey_id], [zone_id], [respondent_id], [acquisition_type_id], [question_number_major], [question_number_minor], [val_i], [val_t]
	FROM [wi_backups].[dbo].[ds_survey_data];
	
END

	
SET IDENTITY_INSERT [wi_master].[dbo].[ds_organisation_data] OFF
SET IDENTITY_INSERT [wi_master].[dbo].[ds_zone_data] OFF
SET IDENTITY_INSERT [wi_master].[dbo].[ds_group_data] OFF
SET IDENTITY_INSERT [wi_master].[dbo].[ds_group_ownership] OFF
SET IDENTITY_INSERT [wi_master].[dbo].[ds_mvnos] OFF
SET IDENTITY_INSERT [wi_master].[dbo].[ds_service_data] OFF
SET IDENTITY_INSERT [wi_master].[dbo].[ds_survey_data] OFF]]></Value>
			</Property>
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="6710" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[restore_ds_data_from_wi_backups]&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[result_forecast_upsert]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[result_forecast_upsert].[inserted_count]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[result_forecast_upsert].[duplicate_count]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[revision_membership_data]">
			<Property Name="BodyScript">
				<Value><![CDATA[

	DECLARE @revision_id int, @revision datetime

	SET @revision 		= GETDATE()
	SET @revision_id	= (SELECT MAX(revision_id) FROM wi_revisions.gsma.ds_membership_data) + 1

	INSERT INTO wi_revisions.gsma.ds_membership_data (revision_id, revision, organisation_id, group_id, date, date_type, connections, connections_source, connections_tier, revenue, revenue_currency, revenue_source, revenue_attribute, revenue_normalised, revenue_tier, tier, votes, votes_adjusted, dues, dues_adjusted, dues_currency, is_member, is_special_case, created_on, created_by, last_update_on, last_update_by)
	SELECT	@revision_id, @revision, organisation_id, group_id, date, date_type, connections, connections_source, connections_tier, revenue, revenue_currency, revenue_source, revenue_attribute, revenue_normalised, revenue_tier, tier, votes, votes_adjusted, dues, dues_adjusted, dues_currency, is_member, is_special_case, created_on, created_by, last_update_on, last_update_by
	FROM	gsma.ds_membership_data
	WHERE	date = @date AND date_type = @date_type

	-- Remove existing data set for this period
	DELETE FROM gsma.ds_membership_data WHERE date = @date]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[gsma].[ds_membership_data]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[group_id]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[connections]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[connections_source]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[connections_tier]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[revenue]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[revenue_currency]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[revenue_source]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[revenue_attribute]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[revenue_normalised]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[revenue_tier]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[tier]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[votes]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[votes_adjusted]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[dues]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[dues_adjusted]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[dues_currency]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[is_member]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[is_special_case]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[created_on]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[created_by]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[last_update_on]" />
				</Entry>
				<Entry>
					<References Name="[gsma].[ds_membership_data].[last_update_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[revision_membership_data].[@date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[revision_membership_data].[@date_type]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[revision_membership_data].[@date]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[revision_membership_data].[@date_type]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA['Q']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1256" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[revision_membership_data]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@date datetime,&#xD;&#xA;&#x9;@date_type char(1) = 'Q'&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[roles]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[roles].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[roles].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="596" />
		</Element>
		<Element Type="SqlScalarFunction" Name="[dbo].[safe_name_from_string]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[safe_name_from_string].[@string]" />
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[

BEGIN
	DECLARE @safe_characters varchar(max) = '%[^-a-z0-9]%'
	
	SET @string = REPLACE(REPLACE(REPLACE(REPLACE(RTRIM(LTRIM(@string)), '> ', ''), ' ', '-'), '/', '-'), '\', '-')
	
	WHILE PATINDEX(@safe_characters, @string) > 0
	BEGIN
		SET @string = STUFF(@string, PATINDEX(@safe_characters, @string), 1, '')
	END

	RETURN REPLACE(LOWER(@string), ' ', '-')
End]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="CreateOffset" Value="2" />
							<Property Name="Length" Value="472" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE FUNCTION [dbo].[safe_name_from_string] (@string varchar(max))&#xD;&#xA;RETURNS varchar(max)&#xD;&#xA;&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[safe_name_from_string].[@string]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Property Name="IsMax" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[varchar]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[salesforce_zone_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[salesforce_zone_link].[zone_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[salesforce_zone_link].[salesforce_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="30" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlFullTextIndex" Name="[dbo].[search]" Disambiguator="6">
			<Relationship Name="Catalog">
				<Entry>
					<References Name="[search]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlFullTextIndexColumnSpecifier">
						<Property Name="LanguageId" Value="0" />
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[search].[term]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[search]" />
				</Entry>
			</Relationship>
			<Relationship Name="KeyName">
				<Entry>
					<References Name="[dbo].[PK_search]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[search]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[search].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[search].[scheme_entity_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[search].[entity_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[search].[entity_type]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[search].[term]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[search].[metadata]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[search].[table]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[search].[order]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="410" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[search].[is_alternate_term]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="409" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[search].[has_data]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="406" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[search].[has_content]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="405" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[search].[has_blogs]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="404" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[search].[has_documents]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="407" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[search].[has_feeds]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="408" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="597" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[search].[IX_search_scheme_entity_id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[search].[scheme_entity_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[search]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[search].[IX_search_term]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[search].[term]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[search]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[sector_field_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[sector_field_link].[sector_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[sector_field_link].[field_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[sector_field_link].[is_required]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="411" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="564" />
			<AttachedAnnotation Disambiguator="565" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[sessions]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[sessions].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[sessions].[user_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[sessions].[series]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[sessions].[identifier]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[sessions].[hash]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[sessions].[active]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="415" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[sessions].[user_agent]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[sessions].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="416" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[sessions].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="417" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[sessions].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="418" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[sessions].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="419" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="598" />
			<AttachedAnnotation Disambiguator="566" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[sessions].[IX_sessions]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[sessions].[user_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[sessions].[series]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[sessions]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[source_organisation_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[source_organisation_link].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[source_organisation_link].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[source_organisation_link].[term]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[source_organisation_link].[organisation_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[source_organisation_link].[description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[source_organisation_link].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="421" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[source_organisation_link].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="420" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="599" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[sources]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[sources].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[sources].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[sources].[term]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[sources].[published]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="427" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[sources].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="424" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[sources].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="423" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[sources].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="426" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[sources].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="425" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="600" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[sp_run_error_log]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[sp_run_error_log].[errorNumber]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[sp_run_error_log].[errorSeverity]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[sp_run_error_log].[errorState]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[sp_run_error_log].[errorProcedure]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="250" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[sp_run_error_log].[errorLine]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[sp_run_error_log].[errorMessage]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2048" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[sp_run_error_log].[date]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="263" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[sp_run_error_log].[queryString]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2048" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[sp_run_log]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[sp_run_log].[name]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[sp_run_log].[date]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="39" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[sp_run_tracker]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[sp_run_tracker].[job_name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="40" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[sp_run_tracker].[date]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="64" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[sp_run_tracker].[data]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[sp_WhoIsActive]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON; 
	SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;

	IF
		@SPID IS NULL
		OR @SHOW_OWN_SPID IS NULL
		OR @GET_FULL_INNER_TEXT IS NULL
		OR @GET_PLANS IS NULL
		OR @GET_OUTER_COMMAND IS NULL
		OR @GET_TRANSACTION_INFO IS NULL
		OR @GET_LOCKS IS NULL
		OR @GET_AVG_TIME IS NULL
		OR @DELTA_INTERVAL IS NULL
		OR @SORT_COLUMN IS NULL
		OR @SORT_COLUMN_DIRECTION IS NULL
		OR @FORMAT_OUTPUT IS NULL
		OR @OUTPUT_COLUMN_LIST IS NULL
		OR @RETURN_SCHEMA IS NULL
		OR @DESTINATION_TABLE IS NULL
	BEGIN;
		RAISERROR('Input parameters cannot be NULL', 16, 1);
		RETURN;
	END;

	IF
		@SORT_COLUMN NOT IN
		(
			'[session_id]',
			'[physical_io]',
			'[reads]',
			'[physical_reads]',
			'[writes]',
			'[tempdb_writes]',
			'[tempdb_current]',
			'[CPU]',
			'[context_switches]',
			'[used_memory]',
			'[physical_io_delta]',
			'[reads_delta]',
			'[physical_reads_delta]',
			'[writes_delta]',
			'[tempdb_writes_delta]',
			'[tempdb_current_delta]',
			'[CPU_delta]',
			'[context_switches_delta]',
			'[used_memory_delta]',
			'[threads]',
			'[tran_start_time]',
			'[open_tran_count]',
			'[blocking_session_id]',
			'[percent_complete]',
			'[host_name]',
			'[login_name]',
			'[database_name]',
			'[start_time]'
		)
	BEGIN;
		RAISERROR('Invalid column passed to @SORT_COLUMN', 16, 1, @SORT_COLUMN);
		RETURN;
	END;

	IF @SORT_COLUMN_DIRECTION NOT IN ('ASC', 'DESC')
	BEGIN;
		RAISERROR('Valid values for @SORT_DIRECTION are: ASC and DESC', 16, 1);
		RETURN;
	END;

	SET @OUTPUT_COLUMN_LIST = 
		STUFF
		(
			(
				SELECT 
					',' + x.column_name AS [text()]
				FROM
				(
					SELECT '[session_id]' AS column_name, 1 AS default_order
					UNION ALL 
					SELECT '[dd hh:mm:ss.mss]', 2
					WHERE
						@FORMAT_OUTPUT = 1
					UNION ALL 
					SELECT '[dd hh:mm:ss.mss (avg)]', 3
					WHERE 
						@FORMAT_OUTPUT = 1
						AND @GET_AVG_TIME = 1
					UNION ALL 
					SELECT '[avg_elapsed_time]', 4
					WHERE 
						@FORMAT_OUTPUT = 0
						AND @GET_AVG_TIME = 1
					UNION ALL 
					SELECT '[physical_io]', 5
					UNION ALL 
					SELECT '[reads]', 6
					UNION ALL 
					SELECT '[physical_reads]', 7
					UNION ALL 
					SELECT '[writes]', 8
					UNION ALL 
					SELECT '[tempdb_writes]', 9
					UNION ALL 
					SELECT '[tempdb_current]', 10
					UNION ALL 
					SELECT '[CPU]', 11
					UNION ALL 
					SELECT '[context_switches]', 12
					UNION ALL 
					SELECT '[used_memory]', 13
					UNION ALL 
					SELECT '[physical_io_delta]', 14
					WHERE
						@DELTA_INTERVAL > 0	
					UNION ALL 
					SELECT '[reads_delta]', 15
					WHERE
						@DELTA_INTERVAL > 0
					UNION ALL 
					SELECT '[physical_reads_delta]', 16
					WHERE
						@DELTA_INTERVAL > 0
					UNION ALL 
					SELECT '[writes_delta]', 17
					WHERE
						@DELTA_INTERVAL > 0
					UNION ALL 
					SELECT '[tempdb_writes_delta]', 18
					WHERE
						@DELTA_INTERVAL > 0
					UNION ALL 
					SELECT '[tempdb_current_delta]', 19
					WHERE
						@DELTA_INTERVAL > 0
					UNION ALL 
					SELECT '[CPU_delta]', 20
					WHERE
						@DELTA_INTERVAL > 0
					UNION ALL 
					SELECT '[context_switches_delta]', 21
					WHERE
						@DELTA_INTERVAL > 0
					UNION ALL 
					SELECT '[used_memory_delta]', 22
					WHERE
						@DELTA_INTERVAL > 0
					UNION ALL 
					SELECT '[threads]', 23
					UNION ALL 
					SELECT '[status]', 24
					UNION ALL 
					SELECT '[wait_info]', 25
					UNION ALL 
					SELECT '[locks]', 26
					WHERE
						@GET_LOCKS = 1
					UNION ALL 
					SELECT '[tran_start_time]', 27
					WHERE
						@GET_TRANSACTION_INFO = 1
					UNION ALL 
					SELECT '[tran_log_writes]', 28
					WHERE
						@GET_TRANSACTION_INFO = 1
					UNION ALL 
					SELECT '[open_tran_count]', 29
					WHERE
						@GET_TRANSACTION_INFO = 1
					UNION ALL 
					SELECT '[sql_command]', 30
					WHERE
						@GET_OUTER_COMMAND = 1
					UNION ALL 
					SELECT '[sql_text]', 31
					UNION ALL 
					SELECT '[query_plan]', 32
					WHERE
						@GET_PLANS = 1
					UNION ALL 
					SELECT '[blocking_session_id]', 33
					UNION ALL 
					SELECT '[percent_complete]', 34
					UNION ALL 
					SELECT '[host_name]', 35
					UNION ALL 
					SELECT '[login_name]', 36
					UNION ALL 
					SELECT '[database_name]', 37
					UNION ALL 
					SELECT '[start_time]', 38
					UNION ALL 
					SELECT '[request_id]', 39
					UNION ALL 
					SELECT '[collection_time]', 40
				) x
				WHERE
					CHARINDEX(x.column_name, @OUTPUT_COLUMN_LIST) > 0
					OR RTRIM(@OUTPUT_COLUMN_LIST) = ''
				ORDER BY
					CASE 
						WHEN @OUTPUT_COLUMN_LIST = '' THEN x.default_order
						ELSE CHARINDEX(x.column_name, @OUTPUT_COLUMN_LIST)
					END
				FOR XML PATH('')
			),
			1,
			1,
			''
		);
	
	IF COALESCE(RTRIM(@OUTPUT_COLUMN_LIST), '') = ''
	BEGIN
		RAISERROR('No valid column matches found in @OUTPUT_COLUMN_LIST or no columns remain due to selected options.', 16, 1);
		RETURN;
	END;
	
	IF @DESTINATION_TABLE <> ''
	BEGIN
		SET @DESTINATION_TABLE = 
			--database
			COALESCE(QUOTENAME(PARSENAME(@DESTINATION_TABLE, 3)) + '.', '') +
			--schema
			COALESCE(QUOTENAME(PARSENAME(@DESTINATION_TABLE, 2)) + '.', '') +
			--table
			COALESCE(QUOTENAME(PARSENAME(@DESTINATION_TABLE, 1)), '');
			
		IF COALESCE(RTRIM(@DESTINATION_TABLE), '') = ''
		BEGIN
			RAISERROR('Destination table not properly formatted.', 16, 1);
			RETURN;
		END;
	END;

	CREATE TABLE #sessions
	(
		recursion SMALLINT NOT NULL,
		session_id SMALLINT NOT NULL,
		request_id INT NULL,
		session_number INT NOT NULL,
		elapsed_time INT NOT NULL,
		avg_elapsed_time INT NULL,
		physical_io INT NULL,
		reads BIGINT NOT NULL,
		physical_reads BIGINT NOT NULL,
		writes BIGINT NOT NULL,
		tempdb_writes BIGINT NOT NULL,
		tempdb_current BIGINT NOT NULL,
		CPU INT NOT NULL,
		context_switches INT NULL,
		used_memory INT NOT NULL, 
		threads SMALLINT NULL,
		status VARCHAR(30) NOT NULL,
		wait_info VARCHAR(4000) NULL,
		locks XML NULL,
		tran_start_time DATETIME NULL,
		tran_log_writes VARCHAR(4000) NULL,
		open_tran_count INT NULL,
		sql_command XML NULL,
		sql_handle VARBINARY(64) NULL,
		statement_start_offset INT NULL,
		statement_end_offset INT NULL,
		sql_text XML NULL,
		plan_handle VARBINARY(64) NULL,
		query_plan XML NULL,
		blocking_session_id SMALLINT NULL,
		percent_complete REAL NULL,
		host_name VARCHAR(128) NOT NULL,
		login_name VARCHAR(128) NOT NULL,
		database_name VARCHAR(128) NULL,
		start_time DATETIME NOT NULL,
		last_request_start_time DATETIME NOT NULL
	);

	IF @RETURN_SCHEMA = 0
	BEGIN;
		--Disable unnecessary autostats on the table
		CREATE STATISTICS s_session_id ON #sessions (session_id)
		WITH SAMPLE 0 ROWS, NORECOMPUTE;
		CREATE STATISTICS s_request_id ON #sessions (request_id)
		WITH SAMPLE 0 ROWS, NORECOMPUTE;
		CREATE STATISTICS s_session_number ON #sessions (session_number)
		WITH SAMPLE 0 ROWS, NORECOMPUTE;
		CREATE STATISTICS s_status ON #sessions (status)
		WITH SAMPLE 0 ROWS, NORECOMPUTE;
		CREATE STATISTICS s_start_time ON #sessions (start_time)
		WITH SAMPLE 0 ROWS, NORECOMPUTE;
		CREATE STATISTICS s_last_request_start_time ON #sessions (last_request_start_time)
		WITH SAMPLE 0 ROWS, NORECOMPUTE;
		CREATE STATISTICS s_recursion ON #sessions (recursion)
		WITH SAMPLE 0 ROWS, NORECOMPUTE;

		DECLARE @recursion SMALLINT;
		SET @recursion = 
			CASE @DELTA_INTERVAL
				WHEN 0 THEN 1
				ELSE -1
			END;

		--Used for the delta pull
		REDO:;
		
		IF 
			@GET_LOCKS = 1 
			AND @recursion = 1
			AND @OUTPUT_COLUMN_LIST LIKE '%|[locks|]%' ESCAPE '|'
		BEGIN;
			SELECT
				y.resource_type,
				y.db_name,
				y.object_id,
				y.file_id,
				y.page_type,
				y.hobt_id,
				y.allocation_unit_id,
				y.index_id,
				y.schema_id,
				y.principal_id,
				y.request_mode,
				y.request_status,
				y.session_id,
				y.resource_description,
				y.request_count,
				COALESCE(r.request_id, -1) AS request_id,
				COALESCE(r.start_time, s.last_request_start_time) AS start_time,
				CONVERT(sysname, NULL) AS object_name,
				CONVERT(sysname, NULL) AS index_name,
				CONVERT(sysname, NULL) AS schema_name,
				CONVERT(sysname, NULL) AS principal_name
			INTO #locks
			FROM
			(
				SELECT
					x.resource_type,
					x.db_name,
					x.object_id,
					x.file_id,
					CASE
						WHEN x.page_no = 1 OR x.page_no % 8088 = 0 THEN 'PFS'
						WHEN x.page_no = 2 OR x.page_no % 511232 = 0 THEN 'GAM'
						WHEN x.page_no = 3 OR x.page_no % 511233 = 0 THEN 'SGAM'
						WHEN x.page_no = 6 OR x.page_no % 511238 = 0 THEN 'DCM'
						WHEN x.page_no = 7 OR x.page_no % 511239 = 0 THEN 'BCM'
						WHEN x.page_no IS NOT NULL THEN '*'
						ELSE NULL
					END AS page_type,
					x.hobt_id,
					x.allocation_unit_id,
					x.index_id,
					x.schema_id,
					x.principal_id,
					x.request_mode,
					x.request_status,
					x.session_id,
					x.request_id,
					CASE
						WHEN COALESCE(x.object_id, x.file_id, x.hobt_id, x.allocation_unit_id, x.index_id, x.schema_id, x.principal_id) IS NULL THEN NULLIF(resource_description, '')
						ELSE NULL
					END AS resource_description,
					COUNT(*) AS request_count
				FROM
				(
					SELECT
						tl.resource_type + 
							CASE 
								WHEN tl.resource_subtype = '' THEN ''
								ELSE '.' + tl.resource_subtype 
							END AS resource_type,
						COALESCE(DB_NAME(tl.resource_database_id), '(null)') AS db_name,
						CONVERT 
						(
							INT,
							CASE 
								WHEN tl.resource_type = 'OBJECT' THEN tl.resource_associated_entity_id
								WHEN tl.resource_description LIKE '%object_id = %' THEN 
									(
										SELECT
											SUBSTRING
											(
												tl.resource_description, 
												(CHARINDEX(p.pattern, tl.resource_description) + DATALENGTH(p.pattern)), 
												COALESCE
												(
													NULLIF
													(
														CHARINDEX(',', tl.resource_description, CHARINDEX(p.pattern, tl.resource_description) + DATALENGTH(p.pattern)), 
														0
													), 
													DATALENGTH(tl.resource_description)+1
												) - (CHARINDEX(p.pattern, tl.resource_description) + DATALENGTH(p.pattern))
											)
										FROM (SELECT 'object_id = ' AS pattern) p
									)
								ELSE NULL
							END
						) AS object_id,
						CONVERT
						(
							INT,
							CASE 
								WHEN tl.resource_type = 'FILE' THEN CONVERT(INT, tl.resource_description) 
								WHEN tl.resource_type IN ('PAGE', 'EXTENT', 'RID') THEN LEFT(tl.resource_description, CHARINDEX(':', tl.resource_description)-1)
								ELSE NULL
							END 
						) AS file_id,
						CONVERT
						(
							INT,
							CASE
								WHEN tl.resource_type IN ('PAGE', 'EXTENT', 'RID') THEN 
									SUBSTRING
									(
										tl.resource_description, 
										CHARINDEX(':', tl.resource_description) + 1, 
										COALESCE
										(
											NULLIF
											(
												CHARINDEX(':', tl.resource_description, CHARINDEX(':', tl.resource_description) + 1), 
												0
											), 
											DATALENGTH(tl.resource_description)+1
										) - (CHARINDEX(':', tl.resource_description) + 1)
									)
								ELSE NULL
							END 
						) AS page_no,
						CASE 
							WHEN tl.resource_type IN ('PAGE', 'KEY', 'RID', 'HOBT') THEN tl.resource_associated_entity_id
							ELSE NULL
						END AS hobt_id,
						CASE 
							WHEN tl.resource_type = 'ALLOCATION_UNIT' THEN tl.resource_associated_entity_id
							ELSE NULL
						END AS allocation_unit_id,
						CONVERT
						(
							INT,
							CASE
								WHEN
									/*TODO: Deal with server principals*/ 
									tl.resource_subtype <> 'SERVER_PRINCIPAL' 
									AND tl.resource_description LIKE '%index_id or stats_id = %' THEN
									(
										SELECT
											SUBSTRING
											(
												tl.resource_description, 
												(CHARINDEX(p.pattern, tl.resource_description) + DATALENGTH(p.pattern)), 
												COALESCE
												(
													NULLIF
													(
														CHARINDEX(',', tl.resource_description, CHARINDEX(p.pattern, tl.resource_description) + DATALENGTH(p.pattern)), 
														0
													), 
													DATALENGTH(tl.resource_description)+1
												) - (CHARINDEX(p.pattern, tl.resource_description) + DATALENGTH(p.pattern))
											)
										FROM (SELECT 'index_id or stats_id = ' AS pattern) p
									)
								ELSE NULL
							END 
						) AS index_id,
						CONVERT
						(
							INT,
							CASE
								WHEN tl.resource_description LIKE '%schema_id = %' THEN
									(
										SELECT
											SUBSTRING
											(
												tl.resource_description, 
												(CHARINDEX(p.pattern, tl.resource_description) + DATALENGTH(p.pattern)), 
												COALESCE
												(
													NULLIF
													(
														CHARINDEX(',', tl.resource_description, CHARINDEX(p.pattern, tl.resource_description) + DATALENGTH(p.pattern)), 
														0
													), 
													DATALENGTH(tl.resource_description)+1
												) - (CHARINDEX(p.pattern, tl.resource_description) + DATALENGTH(p.pattern))
											)
										FROM (SELECT 'schema_id = ' AS pattern) p
									)
								ELSE NULL
							END 
						) AS schema_id,
						CONVERT
						(
							INT,
							CASE
								WHEN tl.resource_description LIKE '%principal_id = %' THEN
									(
										SELECT
											SUBSTRING
											(
												tl.resource_description, 
												(CHARINDEX(p.pattern, tl.resource_description) + DATALENGTH(p.pattern)), 
												COALESCE
												(
													NULLIF
													(
														CHARINDEX(',', tl.resource_description, CHARINDEX(p.pattern, tl.resource_description) + DATALENGTH(p.pattern)), 
														0
													), 
													DATALENGTH(tl.resource_description)+1
												) - (CHARINDEX(p.pattern, tl.resource_description) + DATALENGTH(p.pattern))
											)
										FROM (SELECT 'principal_id = ' AS pattern) p
									)
								ELSE NULL
							END
						) AS principal_id,
						tl.request_mode,
						tl.request_status,
						tl.request_session_id AS session_id,
						tl.request_request_id AS request_id,
										
						/*TODO: Applocks, other resource_descriptions*/
						RTRIM(tl.resource_description) AS resource_description,
						tl.resource_associated_entity_id
						/*********************************************/
					FROM sys.dm_tran_locks tl
					WHERE
						(
							@SPID = 0
							OR tl.request_session_id = @SPID
						)
						AND
						(
							@SHOW_OWN_SPID = 1
							OR tl.request_session_id <> @@SPID
						)
				) x
				GROUP BY
					x.resource_type,
					x.db_name,
					x.object_id,
					x.file_id,
					CASE
						WHEN x.page_no = 1 OR x.page_no % 8088 = 0 THEN 'PFS'
						WHEN x.page_no = 2 OR x.page_no % 511232 = 0 THEN 'GAM'
						WHEN x.page_no = 3 OR x.page_no % 511233 = 0 THEN 'SGAM'
						WHEN x.page_no = 6 OR x.page_no % 511238 = 0 THEN 'DCM'
						WHEN x.page_no = 7 OR x.page_no % 511239 = 0 THEN 'BCM'
						WHEN x.page_no IS NOT NULL THEN '*'
						ELSE NULL
					END,
					x.hobt_id,
					x.allocation_unit_id,
					x.index_id,
					x.schema_id,
					x.principal_id,
					x.request_mode,
					x.request_status,
					x.session_id,
					x.request_id,
					CASE
						WHEN COALESCE(x.object_id, x.file_id, x.hobt_id, x.allocation_unit_id, x.index_id, x.schema_id, x.principal_id) IS NULL THEN NULLIF(resource_description, '')
						ELSE NULL
					END
			) y
			JOIN sys.dm_exec_sessions s ON
				y.session_id = s.session_id
			LEFT OUTER JOIN sys.dm_exec_requests r ON
				s.session_id = r.session_id
				AND y.request_id = r.request_id;
			
			--Disable unnecessary autostats on the table
			CREATE STATISTICS s_db_name ON #locks (db_name)
			WITH SAMPLE 0 ROWS, NORECOMPUTE;
			CREATE STATISTICS s_object_id ON #locks (object_id)
			WITH SAMPLE 0 ROWS, NORECOMPUTE;
			CREATE STATISTICS s_hobt_id ON #locks (hobt_id)
			WITH SAMPLE 0 ROWS, NORECOMPUTE;
			CREATE STATISTICS s_allocation_unit_id ON #locks (allocation_unit_id)
			WITH SAMPLE 0 ROWS, NORECOMPUTE;
			CREATE STATISTICS s_index_id ON #locks (index_id)
			WITH SAMPLE 0 ROWS, NORECOMPUTE;
			CREATE STATISTICS s_schema_id ON #locks (schema_id)
			WITH SAMPLE 0 ROWS, NORECOMPUTE;
			CREATE STATISTICS s_principal_id ON #locks (principal_id)
			WITH SAMPLE 0 ROWS, NORECOMPUTE;
			CREATE STATISTICS s_request_id ON #locks (request_id)
			WITH SAMPLE 0 ROWS, NORECOMPUTE;
			CREATE STATISTICS s_start_time ON #locks (start_time)
			WITH SAMPLE 0 ROWS, NORECOMPUTE;
			CREATE STATISTICS s_resource_type ON #locks (resource_type)
			WITH SAMPLE 0 ROWS, NORECOMPUTE;
			CREATE STATISTICS s_object_name ON #locks (object_name)
			WITH SAMPLE 0 ROWS, NORECOMPUTE;
			CREATE STATISTICS s_schema_name ON #locks (schema_name)
			WITH SAMPLE 0 ROWS, NORECOMPUTE;
			CREATE STATISTICS s_page_type ON #locks (page_type)
			WITH SAMPLE 0 ROWS, NORECOMPUTE;
			CREATE STATISTICS s_request_mode ON #locks (request_mode)
			WITH SAMPLE 0 ROWS, NORECOMPUTE;
			CREATE STATISTICS s_request_status ON #locks (request_status)
			WITH SAMPLE 0 ROWS, NORECOMPUTE;
			CREATE STATISTICS s_resource_description ON #locks (resource_description)
			WITH SAMPLE 0 ROWS, NORECOMPUTE;
			CREATE STATISTICS s_index_name ON #locks (index_name)
			WITH SAMPLE 0 ROWS, NORECOMPUTE;
			CREATE STATISTICS s_principal_name ON #locks (principal_name)
			WITH SAMPLE 0 ROWS, NORECOMPUTE;
		END;
		
		DECLARE @sql NVARCHAR(MAX);

		SET @sql = CONVERT(NVARCHAR(MAX), '') +
			'SELECT ' +
				'@recursion AS recursion, ' +
				'x.session_id, ' +
				'x.request_id, ' +
				'DENSE_RANK() OVER  ' +
				'( ' +
					'ORDER BY ' +
						'x.session_id ' +
				') AS session_number, ' +
				CASE
					WHEN @OUTPUT_COLUMN_LIST LIKE '%|[dd hh:mm:ss.mss|]%' ESCAPE '|' THEN 'x.elapsed_time '
					ELSE CONVERT(NVARCHAR(MAX), '0 ')
				END + 'AS elapsed_time, ' +
				CASE
					WHEN
						(
							@OUTPUT_COLUMN_LIST LIKE '%|[dd hh:mm:ss.mss (avg)|]%' ESCAPE '|' OR 
							@OUTPUT_COLUMN_LIST LIKE '%|[avg_elapsed_time|]%' ESCAPE '|'
						)
						AND @recursion = 1
							THEN 'x.avg_elapsed_time / 1000 '
					ELSE CONVERT(NVARCHAR(MAX), 'NULL ')
				END + 'AS avg_elapsed_time, ' +
				CASE
					WHEN 
						@OUTPUT_COLUMN_LIST LIKE '%|[physical_io|]%' ESCAPE '|'
						OR @OUTPUT_COLUMN_LIST LIKE '%|[physical_io_delta|]%' ESCAPE '|'
							THEN 'x.physical_io '
					ELSE CONVERT(NVARCHAR(MAX), 'NULL ')
				END + 'AS physical_io, ' +
				CASE
					WHEN 
						@OUTPUT_COLUMN_LIST LIKE '%|[reads|]%' ESCAPE '|'
						OR @OUTPUT_COLUMN_LIST LIKE '%|[reads_delta|]%' ESCAPE '|'
							THEN 'x.reads '
					ELSE CONVERT(NVARCHAR(MAX), '0 ')
				END + 'AS reads, ' +
				CASE
					WHEN 
						@OUTPUT_COLUMN_LIST LIKE '%|[physical_reads|]%' ESCAPE '|'
						OR @OUTPUT_COLUMN_LIST LIKE '%|[physical_reads_delta|]%' ESCAPE '|'
							THEN 'x.physical_reads '
					ELSE CONVERT(NVARCHAR(MAX), '0 ')
				END + 'AS physical_reads, ' +
				CASE
					WHEN 
						@OUTPUT_COLUMN_LIST LIKE '%|[writes|]%' ESCAPE '|'
						OR @OUTPUT_COLUMN_LIST LIKE '%|[writes_delta|]%' ESCAPE '|'
							THEN 'x.writes '
					ELSE CONVERT(NVARCHAR(MAX), '0 ')
				END + 'AS writes, ' +
				CASE
					WHEN 
						@OUTPUT_COLUMN_LIST LIKE '%|[tempdb_writes|]%' ESCAPE '|'
						OR @OUTPUT_COLUMN_LIST LIKE '%|[tempdb_writes_delta|]%' ESCAPE '|'
							THEN 'x.tempdb_writes '
					ELSE CONVERT(NVARCHAR(MAX), '0 ')
				END + 'AS tempdb_writes, ' +
				CASE
					WHEN 
						@OUTPUT_COLUMN_LIST LIKE '%|[tempdb_current|]%' ESCAPE '|'
						OR @OUTPUT_COLUMN_LIST LIKE '%|[tempdb_current_delta|]%' ESCAPE '|'
							THEN 'x.tempdb_current '
					ELSE CONVERT(NVARCHAR(MAX), '0 ')
				END + 'AS tempdb_current, ' +
				CASE
					WHEN 
						@OUTPUT_COLUMN_LIST LIKE '%|[CPU|]%' ESCAPE '|'
						OR @OUTPUT_COLUMN_LIST LIKE '%|[CPU_delta|]%' ESCAPE '|'
							THEN 'x.CPU '
					ELSE CONVERT(NVARCHAR(MAX), '0 ')
				END + 'AS CPU, ' +
				CASE
					WHEN 
						@OUTPUT_COLUMN_LIST LIKE '%|[context_switches|]%' ESCAPE '|'
						OR @OUTPUT_COLUMN_LIST LIKE '%|[context_switches_delta|]%' ESCAPE '|'
							THEN 'x.context_switches '
					ELSE CONVERT(NVARCHAR(MAX), 'NULL ')
				END + 'AS context_switches, ' +
				CASE
					WHEN 
						@OUTPUT_COLUMN_LIST LIKE '%|[used_memory|]%' ESCAPE '|'
						OR @OUTPUT_COLUMN_LIST LIKE '%|[used_memory_delta|]%' ESCAPE '|'
							THEN 'x.used_memory '
					ELSE CONVERT(NVARCHAR(MAX), '0 ')
				END + 'AS used_memory, ' +
				CASE
					WHEN 
						@OUTPUT_COLUMN_LIST LIKE '%|[threads|]%' ESCAPE '|'
						AND @recursion = 1
							THEN 'x.threads '
					ELSE CONVERT(NVARCHAR(MAX), 'NULL ')
				END + 'AS threads, ' +
				CASE
					WHEN 
						@OUTPUT_COLUMN_LIST LIKE '%|[status|]%' ESCAPE '|' 
						AND @recursion = 1
							THEN 'x.status '
					ELSE CONVERT(NVARCHAR(MAX), ''''' ')
				END + 'AS status, ' +
				CASE
					WHEN 
						@OUTPUT_COLUMN_LIST LIKE '%|[wait_info|]%' ESCAPE '|' 
						AND @recursion = 1
							THEN 'x.wait_info '
					ELSE CONVERT(NVARCHAR(MAX), 'NULL ')
				END + 'AS wait_info, ' +
				CASE
					WHEN 
						@OUTPUT_COLUMN_LIST LIKE '%|[tran_start_time|]%' ESCAPE '|' 
						AND @recursion = 1
							THEN 
							'CONVERT ' +
							'( ' +
								'DATETIME, ' +
								'LEFT ' +
								'( ' +
									'x.tran_log_writes, ' +
									'NULLIF(CHARINDEX(CHAR(254), x.tran_log_writes) - 1, -1) ' +
								') ' +
							') '
					ELSE CONVERT(NVARCHAR(MAX), 'NULL ')
				END + 'AS tran_start_time, ' +				
				CASE
					WHEN 
						@OUTPUT_COLUMN_LIST LIKE '%|[tran_log_writes|]%' ESCAPE '|' 
						AND @recursion = 1
							THEN 
							'RIGHT ' +
							'( ' +
								'x.tran_log_writes, ' +
								'LEN(x.tran_log_writes) - CHARINDEX(CHAR(254), x.tran_log_writes) ' +
							') '
					ELSE CONVERT(NVARCHAR(MAX), 'NULL ')
				END + 'AS tran_log_writes, ' +
				CASE
					WHEN 
						@OUTPUT_COLUMN_LIST LIKE '%|[open_tran_count|]%' ESCAPE '|' 
						AND @recursion = 1
							THEN 'x.open_tran_count '
					ELSE CONVERT(NVARCHAR(MAX), 'NULL ')
				END + 'AS open_tran_count, ' + 
				CASE
					WHEN 
						@OUTPUT_COLUMN_LIST LIKE '%|[sql_text|]%' ESCAPE '|' 
						AND @recursion = 1
							THEN 'x.sql_handle '
					ELSE CONVERT(NVARCHAR(MAX), 'NULL ')
				END + 'AS sql_handle, ' +
				CASE
					WHEN 
						@OUTPUT_COLUMN_LIST LIKE '%|[sql_text|]%' ESCAPE '|' 
						AND @recursion = 1
							THEN 'x.statement_start_offset '
					ELSE CONVERT(NVARCHAR(MAX), 'NULL ')
				END + 'AS statement_start_offset, ' +
				CASE
					WHEN 
						@OUTPUT_COLUMN_LIST LIKE '%|[sql_text|]%' ESCAPE '|' 
						AND @recursion = 1
							THEN 'x.statement_end_offset '
					ELSE CONVERT(NVARCHAR(MAX), 'NULL ')
				END + 'AS statement_end_offset, ' +
				'NULL AS sql_text, ' +
				CASE
					WHEN 
						@OUTPUT_COLUMN_LIST LIKE '%|[query_plan|]%' ESCAPE '|' 
						AND @recursion = 1
							THEN 'x.plan_handle '
					ELSE CONVERT(NVARCHAR(MAX), 'NULL ')
				END + 'AS plan_handle, ' +
				CASE
					WHEN 
						@OUTPUT_COLUMN_LIST LIKE '%|[blocking_session_id|]%' ESCAPE '|' 
						AND @recursion = 1
							THEN 'NULLIF(x.blocking_session_id, 0) '
					ELSE CONVERT(NVARCHAR(MAX), 'NULL ')
				END + 'AS blocking_session_id, ' +
				CASE
					WHEN 
						@OUTPUT_COLUMN_LIST LIKE '%|[percent_complete|]%' ESCAPE '|'
						AND @recursion = 1
							THEN 'x.percent_complete '
					ELSE CONVERT(NVARCHAR(MAX), 'NULL ')
				END + 'AS percent_complete, ' +
				CASE
					WHEN 
						@OUTPUT_COLUMN_LIST LIKE '%|[host_name|]%' ESCAPE '|' 
						AND @recursion = 1
							THEN 'x.host_name '
					ELSE CONVERT(NVARCHAR(MAX), ''''' ')
				END + 'AS host_name, ' +
				CASE
					WHEN 
						@OUTPUT_COLUMN_LIST LIKE '%|[login_name|]%' ESCAPE '|' 
						AND @recursion = 1
							THEN 'x.login_name '
					ELSE CONVERT(NVARCHAR(MAX), ''''' ')
				END + 'AS login_name, ' +
				CASE
					WHEN 
						@OUTPUT_COLUMN_LIST LIKE '%|[database_name|]%' ESCAPE '|' 
						AND @recursion = 1
							THEN 'DB_NAME(x.database_id) '
					ELSE CONVERT(NVARCHAR(MAX), 'NULL ')
				END + 'AS database_name, ' +
				'x.start_time, ' +
				'x.last_request_start_time ' +
			'FROM ' +
			'( ' +
				'SELECT ' +
					'y.*, ' +
					'tasks.physical_io, ' +
					'tempdb_info.tempdb_writes, ' +
					'tempdb_info.tempdb_current, ' +
					'tasks.context_switches, ' + 
					'tasks.threads, ' +
					'tasks.wait_info, ' +
					'tasks.blocking_session_id, ' +
					CASE 
						WHEN NOT (@GET_AVG_TIME = 1 AND @recursion = 1) THEN CONVERT(NVARCHAR(MAX), 'CONVERT(INT, NULL) ')
						ELSE 'qs.total_elapsed_time / qs.execution_count '
					END + 'AS avg_elapsed_time ' +
				'FROM ' +
				'( ' +
					'SELECT ' +
						's.session_id, ' +
						'r.request_id, ' +
						--r.total_elapsed_time AS elapsed_time,
						--total_elapsed_time appears to be way off in some cases
						'CASE ' +
							--if there are more than 24 days, return a negative number of seconds rather than
							--positive milliseconds, in order to avoid overflow errors
							'WHEN DATEDIFF(day, COALESCE(r.start_time, s.login_time), GETDATE()) > 24 THEN ' +
								'DATEDIFF(second, GETDATE(), COALESCE(r.start_time, s.login_time)) ' +
							'ELSE DATEDIFF(ms, COALESCE(r.start_time, s.login_time), GETDATE()) ' +
						'END AS elapsed_time, ' +
						'COALESCE(r.logical_reads, s.logical_reads) AS reads, ' +
						'COALESCE(r.reads, s.reads) AS physical_reads, ' +
						'COALESCE(r.writes, s.writes) AS writes, ' +
						'COALESCE(r.CPU_time, s.CPU_time) AS CPU, ' +
						'COALESCE(CONVERT(INT, mg.used_memory_kb / 8192), s.memory_usage) AS used_memory, ' +
						'LOWER(COALESCE(r.status, s.status)) AS status, ' +
						'COALESCE(r.sql_handle, c.most_recent_sql_handle) AS sql_handle, ' +
						'r.statement_start_offset, ' +
						'r.statement_end_offset, ' +
						'r.plan_handle, ' +
						'NULLIF(r.percent_complete, 0) AS percent_complete, ' +
						's.host_name, ' +
						's.login_name, ' +
						'COALESCE(r.start_time, s.login_time) AS start_time, ' +
						's.last_request_start_time, ' +
						'r.transaction_id, ' +
						'COALESCE ' +
						'( ' +
							'r.database_id, ' +
							'( ' +
								CASE 
									WHEN NOT (@GET_TRANSACTION_INFO = 1 AND @recursion = 1) THEN CONVERT(NVARCHAR(MAX), 'CONVERT(INT, NULL) ')
									ELSE 'sp.dbid '
								END +
							') ' +
						') AS database_id, ' +
						CASE 
							WHEN NOT (@GET_TRANSACTION_INFO = 1 AND @recursion = 1) THEN CONVERT(NVARCHAR(MAX), 'CONVERT(INT, NULL) ')
							ELSE 'sp.open_tran_count ' 
						END + 'AS open_tran_count, ' + 
						'( ' +
							CASE 
								WHEN NOT (@GET_TRANSACTION_INFO = 1 AND @recursion = 1) THEN CONVERT(NVARCHAR(MAX), 'CONVERT(VARCHAR(4000), NULL) ')
								ELSE
									'SELECT ' +
										'REPLACE ' +
										'( ' +
											'REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE( ' +
											'REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE( ' +
											'REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE( ' +
												'CONVERT ' +
												'( ' +
													'VARCHAR(MAX), ' +
													'CASE ' +
														'WHEN u_trans.database_id IS NOT NULL THEN ' +
															'CASE u_trans.r ' +
																'WHEN 1 THEN COALESCE(CONVERT(VARCHAR, u_trans.transaction_start_time, 121) + CHAR(254), '''') ' +
																'ELSE '''' ' +
															'END + ' + 
															'COALESCE(DB_NAME(u_trans.database_id), ''(null)'') + '':'' + ' +
															'CONVERT(VARCHAR, u_trans.log_record_count) + ' +
															''','' ' +
														'ELSE ' +
															'''N/A,'' ' +
													'END COLLATE Latin1_General_BIN2 ' +
												'), ' +
												'CHAR(31),''''),CHAR(30),''''),CHAR(29),''''),CHAR(28),''''),CHAR(27),''''),CHAR(26),''''),CHAR(25),''''),CHAR(24),''''),CHAR(23),''''),CHAR(22),''''), ' +
												'CHAR(21),''''),CHAR(20),''''),CHAR(19),''''),CHAR(18),''''),CHAR(17),''''),CHAR(16),''''),CHAR(15),''''),CHAR(14),''''),CHAR(12),''''), ' +											'CHAR(11),''''),CHAR(8),''''),CHAR(7),''''),CHAR(6),''''),CHAR(5),''''),CHAR(4),''''),CHAR(3),''''),CHAR(2),''''),CHAR(1),''''), ' +
											'CHAR(0), ' +
											''''' ' +
										') AS [text()] ' +
									'FROM ' +
									'( ' +
										'SELECT ' +
											'trans.*, ' +
											'ROW_NUMBER() OVER (ORDER BY trans.transaction_start_time DESC) AS r ' +
										'FROM ' +
										'( ' +
											'SELECT ' +
												's_tran.database_id, ' +
												'COALESCE(SUM(s_tran.database_transaction_log_record_count), 0) AS log_record_count, ' +
												'MIN(s_tran.database_transaction_begin_time) AS transaction_start_time ' +
											'FROM sys.dm_tran_database_transactions s_tran ' +
											'LEFT OUTER JOIN sys.dm_tran_session_transactions tst ON ' +
												's_tran.transaction_id = tst.transaction_id ' +
												'AND s_tran.database_id < 32767 ' +
											'WHERE ' +
												's_tran.transaction_id = r.transaction_id ' + 
												'OR ' +
												'( ' +
													'COALESCE(r.request_id, 0) = 0 ' +
													'AND s.session_id = tst.session_id ' +
												') ' +
											'GROUP BY ' +
												's_tran.database_id ' +
										') trans ' +
									') u_trans ' +
									'FOR XML PATH('''') '
							END +
						') AS tran_log_writes ' +
					'FROM sys.dm_exec_sessions s ' +					
					'LEFT OUTER JOIN sys.dm_exec_requests r ON ' + 
						's.session_id = r.session_id ' +
					CASE 
						WHEN NOT (@GET_TRANSACTION_INFO = 1 AND @recursion = 1) THEN CONVERT(NVARCHAR(MAX), '')
						ELSE
						'INNER JOIN ' +
						'(' + 
							'SELECT ' +
								'sp1.spid, ' +
								'sp1.request_id, ' +
								'MIN(sp1.dbid) AS dbid, ' +
								'SUM(sp1.open_tran) AS open_tran_count ' +
							'FROM sys.sysprocesses sp1 ' +
							'GROUP BY ' +
								'sp1.spid, ' +
								'sp1.request_id ' +
						') sp ON ' +
							's.session_id = sp.spid ' +
							'AND COALESCE(NULLIF(r.request_id, -1), 0) = sp.request_id ' + 
							'AND ' +
							'( ' + 
								'r.request_id IS NOT NULL ' +
								'OR sp.open_tran_count > 0 ' +
							') '
					END +
					'LEFT OUTER JOIN sys.dm_exec_connections c ON ' +
						's.session_id = c.session_id ' +
					'LEFT OUTER JOIN sys.dm_exec_query_memory_grants mg ON ' +
						'r.session_id = mg.session_id ' +
						'AND r.request_id = mg.request_id ' +
					'WHERE ' +
						's.host_name IS NOT NULL ' +
						'AND ' +
						'( ' +
							'r.session_id IS NULL ' +
							'OR c.connection_id = r.connection_id ' +
						') ' +
						CASE 
							WHEN @GET_TRANSACTION_INFO = 1 AND @recursion = 1 THEN CONVERT(NVARCHAR(MAX), '')
							ELSE
								'AND r.request_id IS NOT NULL '
						END +
						CASE @SPID
							WHEN 0 THEN CONVERT(NVARCHAR(MAX), '')
							ELSE
								'AND s.session_id = @SPID ' 
						END + 
						CASE @SHOW_OWN_SPID
							WHEN 1 THEN CONVERT(NVARCHAR(MAX), '')
							ELSE
								'AND s.session_id <> @@SPID '
						END +
				') AS y ' +
				'LEFT OUTER JOIN ' +
				'( ' +
					'SELECT ' +
						'session_id, ' +
						'request_id, ' +
						'SUM(tempdb_writes) AS tempdb_writes, ' +
						'SUM(tempdb_current) AS tempdb_current ' +
					'FROM ' +
					'( ' +
						'SELECT ' +
							'tsu.session_id, ' +
							'tsu.request_id, ' +
							'tsu.user_objects_alloc_page_count + ' +
								'tsu.internal_objects_alloc_page_count AS tempdb_writes,' +
							'tsu.user_objects_alloc_page_count + ' +
								'tsu.internal_objects_alloc_page_count - ' +
								'tsu.user_objects_dealloc_page_count - ' +
								'tsu.internal_objects_dealloc_page_count AS tempdb_current ' +
						'FROM sys.dm_db_task_space_usage tsu ' +
						CASE 
							WHEN NOT (@GET_TRANSACTION_INFO = 1 AND @recursion = 1) THEN CONVERT(NVARCHAR(MAX), '')
							ELSE
								'UNION ALL ' +
								'' +
								'SELECT ' +
									'ssu.session_id, ' +
									'NULL AS request_id, ' +
									'ssu.user_objects_alloc_page_count + ' +
										'ssu.internal_objects_alloc_page_count AS tempdb_writes, ' +
									'ssu.user_objects_alloc_page_count + ' +
										'ssu.internal_objects_alloc_page_count - ' +
										'ssu.user_objects_dealloc_page_count - ' +
										'ssu.internal_objects_dealloc_page_count AS tempdb_current ' +
								'FROM sys.dm_db_session_space_usage ssu '
						END +
					') t_info ' +
					'GROUP BY ' +
						'session_id, ' +
						'request_id ' +
				') tempdb_info ON ' +
					'tempdb_info.session_id = y.session_id ' +
					'AND COALESCE(tempdb_info.request_id, -1) = COALESCE(y.request_id, -1) ' +
				'OUTER APPLY ' +
				'( ' +
					'SELECT ' +
						'tasks_final.task_xml.value(''(tasks/physical_io/text())[1]'', ''INT'') AS physical_io, ' +
						'tasks_final.task_xml.value(''(tasks/context_switches/text())[1]'', ''INT'') AS context_switches, ' +
						'tasks_final.task_xml.value(''(tasks/threads/text())[1]'', ''INT'') AS threads, ' +
						'tasks_final.task_xml.value(''(tasks/blocking_session_id/text())[1]'', ''SMALLINT'') AS blocking_session_id, ' +								
						'tasks_final.task_xml.value(''(tasks/text())[1]'', ''VARCHAR(8000)'') AS wait_info ' +
					'FROM ' +
					'( ' +
						'SELECT ' +
							'CONVERT ' +
							'( ' +
								'XML, ' +
								'REPLACE(REPLACE(REPLACE( ' +
									'tasks_raw.task_xml_raw, ''</tasks><tasks>'', ''''), ' +
									'''<waits>'', ''''), ' +
									'''</waits>'', '', '') ' +
							') AS task_xml ' +
						'FROM ' +
						'( ' +
							'SELECT ' +
								'CASE waits.r ' +
									'WHEN 1 THEN waits.physical_io ' +
									'ELSE NULL ' +
								'END AS [physical_io], ' +
								'CASE waits.r ' +
									'WHEN 1 THEN waits.context_switches ' +
									'ELSE NULL ' +
								'END AS [context_switches], ' +
								'CASE waits.r ' +
									'WHEN 1 THEN waits.threads ' +
									'ELSE NULL ' +
								'END AS [threads], ' +
								'CASE waits.r ' +
									'WHEN 1 THEN waits.blocking_session_id ' +
									'ELSE NULL ' +
								'END AS [blocking_session_id], ' +
								'REPLACE ' +
								'( ' +
									'REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE( ' +
									'REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE( ' +
									'REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE( ' +
										'CONVERT ' +
										'( ' +
											'VARCHAR(MAX), ' +
											'''('' + ' +
												'CONVERT(VARCHAR, num_waits) + ''x: '' + ' +
												'CASE num_waits ' +
													'WHEN 1 THEN CONVERT(VARCHAR, min_wait_time) + ''ms'' ' +
													'WHEN 2 THEN ' +
														'CASE ' +
															'WHEN min_wait_time <> max_wait_time THEN CONVERT(VARCHAR, min_wait_time) + ''/'' + CONVERT(VARCHAR, max_wait_time) + ''ms'' ' +
															'ELSE CONVERT(VARCHAR, max_wait_time) + ''ms'' ' +
														'END ' +
													'ELSE ' +
														'CASE ' +
															'WHEN min_wait_time <> max_wait_time THEN CONVERT(VARCHAR, min_wait_time) + ''/'' + CONVERT(VARCHAR, avg_wait_time) + ''/'' + CONVERT(VARCHAR, max_wait_time) + ''ms'' ' +
															'ELSE CONVERT(VARCHAR, max_wait_time) + ''ms'' ' +
														'END ' +
												'END + ' +
											''')'' + wait_type COLLATE Latin1_General_BIN2 ' +
										'), ' +
										'CHAR(31),''''),CHAR(30),''''),CHAR(29),''''),CHAR(28),''''),CHAR(27),''''),CHAR(26),''''),CHAR(25),''''),CHAR(24),''''),CHAR(23),''''),CHAR(22),''''), ' +
										'CHAR(21),''''),CHAR(20),''''),CHAR(19),''''),CHAR(18),''''),CHAR(17),''''),CHAR(16),''''),CHAR(15),''''),CHAR(14),''''),CHAR(12),''''), ' +
										'CHAR(11),''''),CHAR(8),''''),CHAR(7),''''),CHAR(6),''''),CHAR(5),''''),CHAR(4),''''),CHAR(3),''''),CHAR(2),''''),CHAR(1),''''), ' +
									'CHAR(0), ' +
									''''' ' +
								') AS [waits] ' +
							'FROM ' +
							'( ' +
								'SELECT ' +
									'w2.*, ' +
									'ROW_NUMBER() OVER (ORDER BY w2.num_waits, w2.wait_type) AS r ' +
								'FROM ' +
								'( ' +
									'SELECT DISTINCT ' +
										'w1.physical_io, ' +
										'w1.context_switches, ' +
										'MAX(w1.num_threads) OVER () AS threads, ' +
										'w1.wait_type, ' +
										'MAX(w1.num_waits) OVER (PARTITION BY w1.wait_type) AS num_waits, ' +
										'w1.min_wait_time, ' +
										'w1.avg_wait_time, ' +
										'w1.max_wait_time, ' +
										'w1.blocking_session_id ' +
									'FROM ' +
									'( ' +
										'SELECT ' +
											'SUM(t.pending_io_count) OVER () AS physical_io, ' +
											'SUM(t.context_switches_count) OVER () AS context_switches, ' +
											'DENSE_RANK() OVER (ORDER BY t.exec_context_id) AS num_threads, ' +
											'wt2.wait_type, ' +
											'CASE ' +
												'WHEN wt2.waiting_task_address IS NOT NULL THEN ' +
													'DENSE_RANK() OVER (PARTITION BY wt2.wait_type ORDER BY wt2.waiting_task_address)  ' +
												'ELSE NULL ' +
											'END AS num_waits, ' +
											'MIN(wt2.wait_duration_ms) OVER (PARTITION BY wt2.wait_type) AS min_wait_time, ' +
											'AVG(wt2.wait_duration_ms) OVER (PARTITION BY wt2.wait_type) AS avg_wait_time, ' +
											'MAX(wt2.wait_duration_ms) OVER (PARTITION BY wt2.wait_type) AS max_wait_time, ' +
											'MAX(wt2.blocking_session_id) OVER () AS blocking_session_id ' +
										'FROM sys.dm_os_tasks t ' +
										'LEFT OUTER JOIN ' +
										'( ' +
											'SELECT ' +
												'wt1.wait_type, ' +
												'wt1.session_id, ' +
												'wt1.waiting_task_address, ' +
												'SUM(wt1.wait_duration_ms) AS wait_duration_ms, ' +
												'MAX(wt1.blocking_session_id) AS blocking_session_id ' +
											'FROM ' +
											'( ' +
												'SELECT DISTINCT ' +
													'wt.wait_type + ' +
														--TODO: What else can be pulled from the resource_description?
														'CASE ' +
															'WHEN wt.wait_type LIKE ''PAGE%LATCH_%'' THEN ' +
																''':'' + ' +
																--database name
																'COALESCE(DB_NAME(CONVERT(INT, LEFT(wt.resource_description, CHARINDEX('':'', wt.resource_description) - 1))), ''(null)'') + ' +
																''':'' + ' +
																--file id
																'SUBSTRING(wt.resource_description, CHARINDEX('':'', wt.resource_description) + 1, LEN(wt.resource_description) - CHARINDEX('':'', REVERSE(wt.resource_description)) - CHARINDEX('':'', wt.resource_description)) + ' +
																--page # for special pages
																'''('' + ' +
																	'CASE ' +
																		'WHEN ' +
																			'CONVERT(INT, RIGHT(wt.resource_description, CHARINDEX('':'', REVERSE(wt.resource_description)) - 1)) = 1 OR ' +
																			'CONVERT(INT, RIGHT(wt.resource_description, CHARINDEX('':'', REVERSE(wt.resource_description)) - 1)) % 8088 = 0 THEN ''PFS'' ' +
																		'WHEN ' +
																			'CONVERT(INT, RIGHT(wt.resource_description, CHARINDEX('':'', REVERSE(wt.resource_description)) - 1)) = 2 OR ' +
																			'CONVERT(INT, RIGHT(wt.resource_description, CHARINDEX('':'', REVERSE(wt.resource_description)) - 1)) % 511232 = 0 THEN ''GAM'' ' +
																		'WHEN ' +
																			'CONVERT(INT, RIGHT(wt.resource_description, CHARINDEX('':'', REVERSE(wt.resource_description)) - 1)) = 3 OR ' +
																			'CONVERT(INT, RIGHT(wt.resource_description, CHARINDEX('':'', REVERSE(wt.resource_description)) - 1)) % 511233 = 0 THEN ''SGAM'' ' +
																		'WHEN ' +
																			'CONVERT(INT, RIGHT(wt.resource_description, CHARINDEX('':'', REVERSE(wt.resource_description)) - 1)) = 6 OR ' +
																			'CONVERT(INT, RIGHT(wt.resource_description, CHARINDEX('':'', REVERSE(wt.resource_description)) - 1)) % 511238 = 0 THEN ''DCM'' ' +
																		'WHEN ' +
																			'CONVERT(INT, RIGHT(wt.resource_description, CHARINDEX('':'', REVERSE(wt.resource_description)) - 1)) = 7 OR ' +
																			'CONVERT(INT, RIGHT(wt.resource_description, CHARINDEX('':'', REVERSE(wt.resource_description)) - 1)) % 511239 = 0 THEN ''BCM'' ' +
																		'ELSE ''*'' ' +
																	'END + ' +
																''')'' ' +
															'ELSE '''' ' + 
														'END AS wait_type, ' + 
													'wt.wait_duration_ms, ' +
													'wt.session_id, ' +
													'wt.waiting_task_address, ' +
													'CASE ' +
														'WHEN wt.blocking_session_id <> wt.session_id THEN wt.blocking_session_id ' +
														'ELSE NULL ' +
													'END AS blocking_session_id ' + 
												'FROM sys.dm_os_waiting_tasks wt ' +
											') wt1 ' +
											'GROUP BY ' +
												'wt1.wait_type, ' +
												'wt1.session_id, ' +
												'wt1.waiting_task_address ' +
										') wt2 ON ' + 
											'wt2.session_id = t.session_id ' +
											'AND wt2.waiting_task_address = t.task_address ' +
										'WHERE ' +
											't.session_id = y.session_id ' +
											'AND t.request_id = y.request_id ' +
									') w1 ' +
								') w2 ' +
							') waits ' +
							'ORDER BY ' +
								'waits.r ' +
							'FOR XML PATH(''tasks'') ' +
						') tasks_raw (task_xml_raw) ' +
					') tasks_final ' +
				') AS tasks ' +
				CASE 
					WHEN NOT (@GET_AVG_TIME = 1 AND @recursion = 1) THEN CONVERT(NVARCHAR(MAX), '')
					ELSE
						'LEFT OUTER JOIN sys.dm_exec_query_stats qs ON ' +
							'qs.sql_handle = y.sql_handle ' + 
							'AND qs.plan_handle = y.plan_handle ' + 
							'AND qs.statement_start_offset = y.statement_start_offset ' +
							'AND qs.statement_end_offset = y.statement_end_offset '
					END + 
			') x; ';

		INSERT #sessions
		(
			recursion,
			session_id,
			request_id,
			session_number,
			elapsed_time,
			avg_elapsed_time,
			physical_io,
			reads,
			physical_reads,
			writes,
			tempdb_writes,
			tempdb_current,
			CPU,
			context_switches,
			used_memory,
			threads,
			status,
			wait_info,
			tran_start_time,
			tran_log_writes,
			open_tran_count,
			sql_handle,
			statement_start_offset,
			statement_end_offset,		
			sql_text,
			plan_handle,
			blocking_session_id,
			percent_complete,
			host_name,
			login_name,
			database_name,
			start_time,
			last_request_start_time
		)
		EXEC sp_executesql 
			@sql,
			N'@recursion SMALLINT, @SPID SMALLINT',
			@recursion, @SPID;

		IF 
			@recursion = 1
			AND @OUTPUT_COLUMN_LIST LIKE '%|[sql_text|]%' ESCAPE '|'
		BEGIN
			DECLARE	
				@sql_handle VARBINARY(64),
				@statement_start_offset INT,
				@statement_end_offset INT;

			DECLARE sql_cursor
			CURSOR LOCAL FORWARD_ONLY DYNAMIC OPTIMISTIC
			FOR 
				SELECT 
					sql_handle,
					statement_start_offset,
					statement_end_offset
				FROM #sessions
				WHERE
					recursion = 1
			FOR UPDATE OF 
				sql_text
			OPTION (KEEPFIXED PLAN);

			OPEN sql_cursor;

			FETCH NEXT FROM sql_cursor
			INTO 
				@sql_handle,
				@statement_start_offset,
				@statement_end_offset;

			--Wait up to 5 ms for the SQL text, then give up
			SET LOCK_TIMEOUT 5;

			WHILE @@FETCH_STATUS = 0
			BEGIN;
				BEGIN TRY;
					UPDATE s
					SET
						s.sql_text =
						(
							SELECT
								REPLACE
								(
									REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(
									REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(
									REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(
										CONVERT
										(
											VARCHAR(MAX),
											'--' + CHAR(13) + CHAR(10) +
											CASE @GET_FULL_INNER_TEXT
												WHEN 1 THEN est.text
												ELSE
													CASE
														WHEN @statement_start_offset > 0 THEN
															SUBSTRING
															(
																CONVERT(VARCHAR(MAX), est.text),
																((@statement_start_offset/2) + 1),
																(
																	CASE
																		WHEN @statement_end_offset = -1 THEN 2147483647
																		ELSE ((@statement_end_offset - @statement_start_offset)/2) + 1
																	END
																)
															)
														ELSE RTRIM(LTRIM(est.text))
													END
											END +
											CHAR(13) + CHAR(10) + '--' COLLATE Latin1_General_BIN2
										),
										CHAR(31),''),CHAR(30),''),CHAR(29),''),CHAR(28),''),CHAR(27),''),CHAR(26),''),CHAR(25),''),CHAR(24),''),CHAR(23),''),CHAR(22),''),
										CHAR(21),''),CHAR(20),''),CHAR(19),''),CHAR(18),''),CHAR(17),''),CHAR(16),''),CHAR(15),''),CHAR(14),''),CHAR(12),''),
										CHAR(11),''),CHAR(8),''),CHAR(7),''),CHAR(6),''),CHAR(5),''),CHAR(4),''),CHAR(3),''),CHAR(2),''),CHAR(1),''),
									CHAR(0),
									''
								) AS [processing-instruction(query)]
							FROM sys.dm_exec_sql_text(@sql_handle) est
							FOR XML PATH(''), TYPE
					)
					FROM #sessions s
					WHERE 
						CURRENT OF sql_cursor
					OPTION (KEEPFIXED PLAN);
				END TRY
				BEGIN CATCH;
					UPDATE s
					SET
						s.sql_text = '<timeout_exceeded />'
					FROM #sessions s
					WHERE 
						CURRENT OF sql_cursor
					OPTION (KEEPFIXED PLAN);
				END CATCH;

				FETCH NEXT FROM sql_cursor
				INTO
					@sql_handle,
					@statement_start_offset,
					@statement_end_offset;
			END;

			--Return this to the default
			SET LOCK_TIMEOUT -1;

			CLOSE sql_cursor;
			DEALLOCATE sql_cursor;
		END;

		IF 
			@GET_OUTER_COMMAND = 1 
			AND @recursion = 1
			AND @OUTPUT_COLUMN_LIST LIKE '%|[sql_command|]%' ESCAPE '|'
		BEGIN;
			DECLARE 
				@session_id INT,
				@start_time DATETIME;

			DECLARE @buffer_results TABLE
			(
				EventType VARCHAR(30),
				Parameters INT,
				EventInfo VARCHAR(4000),
				start_time DATETIME,
				session_number INT IDENTITY(1,1) NOT NULL PRIMARY KEY
			);

			DECLARE buffer_cursor
			CURSOR LOCAL FAST_FORWARD
			FOR 
				SELECT 
					session_id,
					MAX(start_time) AS start_time
				FROM #sessions
				WHERE
					recursion = 1
				GROUP BY
					session_id
				ORDER BY
					session_id
				OPTION (KEEPFIXED PLAN);

			OPEN buffer_cursor;

			FETCH NEXT FROM buffer_cursor
			INTO 
				@session_id,
				@start_time;

			WHILE @@FETCH_STATUS = 0
			BEGIN;
				BEGIN TRY;
					--In SQL Server 2008, DBCC INPUTBUFFER will throw 
					--an exception if the session no longer exists
					INSERT @buffer_results
					(
						EventType,
						Parameters,
						EventInfo
					)
					EXEC sp_executesql
						N'DBCC INPUTBUFFER(@session_id) WITH NO_INFOMSGS;',
						N'@session_id INT',
						@session_id;

					UPDATE br
					SET
						br.start_time = @start_time
					FROM @buffer_results br
					WHERE
						br.session_number = 
						(
							SELECT MAX(br2.session_number)
							FROM @buffer_results br2
						);
				END TRY
				BEGIN CATCH
				END CATCH;

				FETCH NEXT FROM buffer_cursor
				INTO 
					@session_id,
					@start_time;
			END;

			UPDATE s
			SET
				sql_command = 
				(
					SELECT 
						REPLACE
						(
							REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(
							REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(
							REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(
								CONVERT
								(
									VARCHAR(MAX),
									'--' + CHAR(13) + CHAR(10) + br.EventInfo + CHAR(13) + CHAR(10) + '--' COLLATE Latin1_General_BIN2
								),
								CHAR(31),''),CHAR(30),''),CHAR(29),''),CHAR(28),''),CHAR(27),''),CHAR(26),''),CHAR(25),''),CHAR(24),''),CHAR(23),''),CHAR(22),''),
								CHAR(21),''),CHAR(20),''),CHAR(19),''),CHAR(18),''),CHAR(17),''),CHAR(16),''),CHAR(15),''),CHAR(14),''),CHAR(12),''),
								CHAR(11),''),CHAR(8),''),CHAR(7),''),CHAR(6),''),CHAR(5),''),CHAR(4),''),CHAR(3),''),CHAR(2),''),CHAR(1),''),
							CHAR(0),
							''
						) AS [processing-instruction(query)]
					FROM @buffer_results br
					WHERE 
						br.session_number = s.session_number
						AND br.start_time = s.start_time
						AND 
						(
							(
								s.start_time = s.last_request_start_time
								AND EXISTS
								(
									SELECT *
									FROM sys.dm_exec_requests r2
									WHERE
										r2.session_id = s.session_id
										AND r2.request_id = s.request_id
										AND r2.start_time = s.start_time
								)
							)
							OR 
							(
								s.status = 'sleeping'
								AND EXISTS
								(
									SELECT *
									FROM sys.dm_exec_sessions s2
									WHERE
										s2.session_id = s.session_id
										AND s2.last_request_start_time = s.last_request_start_time
								)
							)
						)
					FOR XML PATH(''), TYPE
				)
			FROM #sessions s
			WHERE
				recursion = 1
			OPTION (KEEPFIXED PLAN);

			CLOSE buffer_cursor;
			DEALLOCATE buffer_cursor;
		END;

		IF 
			@GET_PLANS = 1 
			AND @recursion = 1
			AND @OUTPUT_COLUMN_LIST LIKE '%|[query_plan|]%' ESCAPE '|'
		BEGIN;
			DECLARE	@plan_handle VARBINARY(64);

			DECLARE plan_cursor
			CURSOR LOCAL FORWARD_ONLY DYNAMIC OPTIMISTIC
			FOR 
				SELECT 
					plan_handle
				FROM #sessions
				WHERE
					recursion = 1
			FOR UPDATE OF 
				query_plan
			OPTION (KEEPFIXED PLAN);

			OPEN plan_cursor;

			FETCH NEXT FROM plan_cursor
			INTO 
				@plan_handle;

			--Wait up to 5 ms for a query plan, then give up
			SET LOCK_TIMEOUT 5;

			WHILE @@FETCH_STATUS = 0
			BEGIN;
				BEGIN TRY;
					UPDATE s
					SET
						s.query_plan =
						(
							SELECT query_plan
							FROM sys.dm_exec_query_plan(@plan_handle)
						)
					FROM #sessions s
					WHERE 
						CURRENT OF plan_cursor
					OPTION (KEEPFIXED PLAN);
				END TRY
				BEGIN CATCH;
					UPDATE s
					SET
						s.query_plan = '<timeout_exceeded />'
					FROM #sessions s
					WHERE 
						CURRENT OF plan_cursor
					OPTION (KEEPFIXED PLAN);
				END CATCH;

				FETCH NEXT FROM plan_cursor
				INTO
					@plan_handle;
			END;

			--Return this to the default
			SET LOCK_TIMEOUT -1;

			CLOSE plan_cursor;
			DEALLOCATE plan_cursor;
		END;

		IF 
			@GET_LOCKS = 1 
			AND @recursion = 1
			AND @OUTPUT_COLUMN_LIST LIKE '%|[locks|]%' ESCAPE '|'
		BEGIN;
			DECLARE @DB_NAME sysname;

			DECLARE locks_cursor
			CURSOR LOCAL FAST_FORWARD
			FOR 
				SELECT DISTINCT
					db_name
				FROM #locks
				WHERE
					EXISTS
					(
						SELECT *
						FROM #sessions s
						WHERE
							s.session_id = #locks.session_id
							AND recursion = 1
					)
					AND db_name <> '(null)'
				OPTION (KEEPFIXED PLAN);

			OPEN locks_cursor;

			FETCH NEXT  FROM locks_cursor
			INTO @DB_NAME;

			WHILE @@FETCH_STATUS = 0
			BEGIN;
				BEGIN TRY;
					SET @sql = CONVERT(NVARCHAR(MAX), '') +
						'UPDATE l ' +
						'SET ' +
							'object_name = o.name, ' +
							'index_name = i.name, ' +
							'schema_name = s.name, ' +
							'principal_name = dp.name ' +
						'FROM #locks l ' +
						'LEFT OUTER JOIN ' + QUOTENAME(@DB_NAME) + '.sys.allocation_units au ON ' +
							'au.allocation_unit_id = l.allocation_unit_id ' +
						'LEFT OUTER JOIN ' + QUOTENAME(@DB_NAME) + '.sys.partitions p ON ' +
							'p.hobt_id = ' +
								'COALESCE ' +
								'( ' +
									'l.hobt_id, ' +
									'CASE ' +
										'WHEN au.type IN (1, 3) THEN au.container_id ' +
										'ELSE NULL ' +
									'END ' +
								') ' +
						'LEFT OUTER JOIN ' + QUOTENAME(@DB_NAME) + '.sys.partitions p1 ON ' +
							'l.hobt_id IS NULL ' +
							'AND au.type = 2 ' +
							'AND p1.partition_id = au.container_id ' +
						'LEFT OUTER JOIN ' + QUOTENAME(@DB_NAME) + '.sys.objects o ON ' +
							'o.object_id = COALESCE(l.object_id, p.object_id, p1.object_id) ' +
						'LEFT OUTER JOIN ' + QUOTENAME(@DB_NAME) + '.sys.indexes i ON ' +
							'i.object_id = COALESCE(l.object_id, p.object_id, p1.object_id) ' +
							'AND i.index_id = COALESCE(l.index_id, p.index_id, p1.index_id) ' +
						'LEFT OUTER JOIN ' + QUOTENAME(@DB_NAME) + '.sys.schemas s ON ' +
							's.schema_id = COALESCE(l.schema_id, o.schema_id) ' +
						'LEFT OUTER JOIN ' + QUOTENAME(@DB_NAME) + '.sys.database_principals dp ON ' +
							'dp.principal_id = l.principal_id ' +
						'WHERE ' +
							'l.db_name = @DB_NAME ' +
						'OPTION (KEEPFIXED PLAN); ';

					EXEC sp_executesql
						@sql,
						N'@DB_NAME sysname',
						@DB_NAME;
				END TRY
				BEGIN CATCH;
					UPDATE #locks
					SET 
						object_name = '(db_inaccessible)'
					WHERE 
						db_name = @DB_NAME
					OPTION (KEEPFIXED PLAN);
				END CATCH;

				FETCH NEXT  FROM locks_cursor
				INTO @DB_NAME;
			END;

			CLOSE locks_cursor;
			DEALLOCATE locks_cursor;

			CREATE CLUSTERED INDEX IX_SRD ON #locks (session_id, request_id, db_name);

			UPDATE s
			SET 
				s.locks =
				(
					SELECT 
						REPLACE
						(
							REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(
							REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(
							REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(
								CONVERT
								(
									VARCHAR(MAX), 
									l1.db_name COLLATE Latin1_General_BIN2
								),
								CHAR(31),''),CHAR(30),''),CHAR(29),''),CHAR(28),''),CHAR(27),''),CHAR(26),''),CHAR(25),''),CHAR(24),''),CHAR(23),''),CHAR(22),''),
								CHAR(21),''),CHAR(20),''),CHAR(19),''),CHAR(18),''),CHAR(17),''),CHAR(16),''),CHAR(15),''),CHAR(14),''),CHAR(12),''),
								CHAR(11),''),CHAR(8),''),CHAR(7),''),CHAR(6),''),CHAR(5),''),CHAR(4),''),CHAR(3),''),CHAR(2),''),CHAR(1),''),
							CHAR(0),
							''
						) AS [Database/@name],
						(
							SELECT 
								l2.request_mode AS [Lock/@request_mode],
								l2.request_status AS [Lock/@request_status]
							FROM #locks l2
							WHERE 
								l1.session_id = l2.session_id
								AND l1.request_id = l2.request_id
								AND l2.db_name = l1.db_name
								AND l2.resource_type = 'DATABASE'
							FOR XML PATH(''), TYPE
						) AS [Database/Locks],
						(
							SELECT
								COALESCE(l3.object_name, '(null)') AS [Object/@name],
								l3.schema_name AS [Object/@schema_name],
								(
									SELECT
										l4.resource_type AS [Lock/@resource_type],
										l4.page_type AS [Lock/@page_type],
										REPLACE
										(
											REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(
											REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(
											REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(
												CONVERT
												(
													VARCHAR(MAX), 
													l4.index_name COLLATE Latin1_General_BIN2
												),
												CHAR(31),''),CHAR(30),''),CHAR(29),''),CHAR(28),''),CHAR(27),''),CHAR(26),''),CHAR(25),''),CHAR(24),''),CHAR(23),''),CHAR(22),''),
												CHAR(21),''),CHAR(20),''),CHAR(19),''),CHAR(18),''),CHAR(17),''),CHAR(16),''),CHAR(15),''),CHAR(14),''),CHAR(12),''),
												CHAR(11),''),CHAR(8),''),CHAR(7),''),CHAR(6),''),CHAR(5),''),CHAR(4),''),CHAR(3),''),CHAR(2),''),CHAR(1),''),
											CHAR(0),
											''
										) AS [Lock/@index_name],
										REPLACE
										(
											REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(
											REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(
											REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(
												CONVERT
												(
													VARCHAR(MAX), 								
													CASE 
														WHEN l4.object_name IS NULL THEN l4.schema_name
														ELSE NULL
													END COLLATE Latin1_General_BIN2
												),
												CHAR(31),''),CHAR(30),''),CHAR(29),''),CHAR(28),''),CHAR(27),''),CHAR(26),''),CHAR(25),''),CHAR(24),''),CHAR(23),''),CHAR(22),''),
												CHAR(21),''),CHAR(20),''),CHAR(19),''),CHAR(18),''),CHAR(17),''),CHAR(16),''),CHAR(15),''),CHAR(14),''),CHAR(12),''),
												CHAR(11),''),CHAR(8),''),CHAR(7),''),CHAR(6),''),CHAR(5),''),CHAR(4),''),CHAR(3),''),CHAR(2),''),CHAR(1),''),
											CHAR(0),
											''
										) AS [Lock/@schema_name],
										REPLACE
										(
											REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(
											REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(
											REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(
												CONVERT
												(
													VARCHAR(MAX), 								
													l4.principal_name COLLATE Latin1_General_BIN2
												),
												CHAR(31),''),CHAR(30),''),CHAR(29),''),CHAR(28),''),CHAR(27),''),CHAR(26),''),CHAR(25),''),CHAR(24),''),CHAR(23),''),CHAR(22),''),
												CHAR(21),''),CHAR(20),''),CHAR(19),''),CHAR(18),''),CHAR(17),''),CHAR(16),''),CHAR(15),''),CHAR(14),''),CHAR(12),''),
												CHAR(11),''),CHAR(8),''),CHAR(7),''),CHAR(6),''),CHAR(5),''),CHAR(4),''),CHAR(3),''),CHAR(2),''),CHAR(1),''),
											CHAR(0),
											''
										) AS [Lock/@principal_name],
										l4.resource_description AS [Lock/@resource_description],
										l4.request_mode AS [Lock/@request_mode],
										l4.request_status AS [Lock/@request_status],
										SUM(l4.request_count) AS [Lock/@request_count]
									FROM #locks l4
									WHERE 
										l4.session_id = l3.session_id
										AND l4.request_id = l3.request_id
										AND l3.db_name = l4.db_name
										AND COALESCE(l3.object_name, '(null)') = COALESCE(l4.object_name, '(null)')
										AND COALESCE(l3.schema_name, '') = COALESCE(l4.schema_name, '')
										AND l4.resource_type <> 'DATABASE'
									GROUP BY
										l4.resource_type,
										l4.page_type,
										l4.index_name,
										CASE 
											WHEN l4.object_name IS NULL THEN l4.schema_name
											ELSE NULL
										END,
										l4.principal_name,
										l4.resource_description,
										l4.request_mode,
										l4.request_status
									FOR XML PATH(''), TYPE
								) AS [Object/Locks]
							FROM #locks l3
							WHERE 
								l3.session_id = l1.session_id
								AND l3.request_id = l1.request_id
								AND l3.db_name = l1.db_name
								AND l3.resource_type <> 'DATABASE'
							GROUP BY 
								l3.session_id,
								l3.request_id,
								l3.db_name,
								COALESCE(l3.object_name, '(null)'),
								l3.schema_name
							FOR XML PATH(''), TYPE
						) AS [Database/Objects]
					FROM #locks l1
					WHERE
						l1.session_id = s.session_id
						AND l1.request_id = COALESCE(s.request_id, -1)
						AND 
						(
							(
								s.request_id IS NULL 
								AND l1.start_time = s.last_request_start_time
							)
							OR
							(
								s.request_id IS NOT NULL 
								AND l1.start_time = s.start_time
							)
						)
						AND s.recursion = 1
					GROUP BY 
						l1.session_id,
						l1.request_id,
						l1.db_name
					FOR XML PATH(''), TYPE
				)
			FROM #sessions s
			OPTION (KEEPFIXED PLAN);
		END;
		
		IF 
			@DELTA_INTERVAL > 0 
			AND @recursion <> 1
		BEGIN;
			SET @recursion = 1;

			DECLARE @delay_time CHAR(12);
			SET @delay_time = CONVERT(VARCHAR, DATEADD(second, @DELTA_INTERVAL, 0), 114);
			WAITFOR DELAY @delay_time;

			GOTO REDO;
		END;
	END;

	SET @sql = CONVERT(NVARCHAR(MAX), '') +
		CASE
			WHEN 
				@DESTINATION_TABLE <> '' 
				AND @RETURN_SCHEMA = 0 
					THEN 'INSERT ' + @DESTINATION_TABLE + ' '
			ELSE CONVERT(NVARCHAR(MAX), '') 
		END +
		'SELECT ' +
			@OUTPUT_COLUMN_LIST + ' ' +
		CASE @RETURN_SCHEMA
			WHEN 1 THEN 'INTO #session_schema '
			ELSE CONVERT(NVARCHAR(MAX), '')
		END + 
		'FROM ' +
		'( ' +
			'SELECT ' +
				'session_id, ' +
				--[dd hh:mm:ss.mss]
				CASE @FORMAT_OUTPUT
					WHEN 1 THEN
						'CASE ' +
							'WHEN elapsed_time < 0 THEN ' +
								'RIGHT ' +
								'( ' +
									'''00'' + CONVERT(VARCHAR, (-1 * elapsed_time) / 86400), ' +
									'2 ' +
								') + ' +
									'RIGHT ' +
									'( ' +
										'CONVERT(VARCHAR, DATEADD(second, (-1 * elapsed_time), 0), 120), ' +
										'9 ' +
									') + ' +
									'''.000'' ' +
							'ELSE ' +
								'RIGHT ' +
								'( ' +
									'''00'' + CONVERT(VARCHAR, elapsed_time / 86400000), ' +
									'2 ' +
								') + ' +
									'RIGHT ' +
									'( ' +
										'CONVERT(VARCHAR, DATEADD(second, elapsed_time / 1000, 0), 120), ' +
										'9 ' +
									') + ' +
									'''.'' + ' + 
									'RIGHT(''000'' + CONVERT(VARCHAR, elapsed_time % 1000), 3) ' +
						'END AS [dd hh:mm:ss.mss], '
					ELSE
						CONVERT(NVARCHAR(MAX), '')
				END +
				--[dd hh:mm:ss.mss (avg)] / avg_elapsed_time
				CASE @FORMAT_OUTPUT
					WHEN 1 THEN 
						'RIGHT ' +
						'( ' +
							'''00'' + CONVERT(VARCHAR, avg_elapsed_time / 86400000), ' +
							'2 ' +
						') + ' +
							'RIGHT ' +
							'( ' +
								'CONVERT(VARCHAR, DATEADD(second, avg_elapsed_time / 1000, 0), 120), ' +
								'9 ' +
							') + ' +
							'''.'' + ' +
							'RIGHT(''000'' + CONVERT(VARCHAR, avg_elapsed_time % 1000), 3) AS [dd hh:mm:ss.mss (avg)], '
					ELSE
						CONVERT(NVARCHAR(MAX), 'avg_elapsed_time, ')
				END +
				--physical_io
				CASE @FORMAT_OUTPUT
					WHEN 1 THEN 'LTRIM(LEFT(CONVERT(CHAR(30), CONVERT(MONEY, physical_io), 1), 27)) AS '
					ELSE CONVERT(NVARCHAR(MAX), '')
				END + 'physical_io, ' +
				--reads
				CASE @FORMAT_OUTPUT
					WHEN 1 THEN 'LTRIM(LEFT(CONVERT(CHAR(30), CONVERT(MONEY, reads), 1), 27)) AS '
					ELSE CONVERT(NVARCHAR(MAX), '')
				END + 'reads, ' +
				--physical_reads
				CASE @FORMAT_OUTPUT
					WHEN 1 THEN 'LTRIM(LEFT(CONVERT(CHAR(30), CONVERT(MONEY, physical_reads), 1), 27)) AS '
					ELSE CONVERT(NVARCHAR(MAX), '')
				END + 'physical_reads, ' +
				--writes
				CASE @FORMAT_OUTPUT
					WHEN 1 THEN 'LTRIM(LEFT(CONVERT(CHAR(30), CONVERT(MONEY, writes), 1), 27)) AS '
					ELSE CONVERT(NVARCHAR(MAX), '')
				END + 'writes, ' +
				--tempdb_writes
				CASE @FORMAT_OUTPUT
					WHEN 1 THEN 'LTRIM(LEFT(CONVERT(CHAR(30), CONVERT(MONEY, tempdb_writes), 1), 27)) AS '
					ELSE CONVERT(NVARCHAR(MAX), '')
				END + 'tempdb_writes, ' +
				--tempdb_current
				CASE @FORMAT_OUTPUT
					WHEN 1 THEN 'LTRIM(LEFT(CONVERT(CHAR(30), CONVERT(MONEY, tempdb_current), 1), 27)) AS '
					ELSE CONVERT(NVARCHAR(MAX), '')
				END + 'tempdb_current, ' +
				--CPU
				CASE @FORMAT_OUTPUT
					WHEN 1 THEN 'LTRIM(LEFT(CONVERT(CHAR(30), CONVERT(MONEY, CPU), 1), 27)) AS '
					ELSE CONVERT(NVARCHAR(MAX), '')
				END + 'CPU, ' +
				--context_switches
				CASE @FORMAT_OUTPUT
					WHEN 1 THEN 'LTRIM(LEFT(CONVERT(CHAR(30), CONVERT(MONEY, context_switches), 1), 27)) AS '
					ELSE CONVERT(NVARCHAR(MAX), '')
				END + 'context_switches, ' +
				--used_memory
				CASE @FORMAT_OUTPUT
					WHEN 1 THEN 'LTRIM(LEFT(CONVERT(CHAR(30), CONVERT(MONEY, used_memory), 1), 27)) AS '
					ELSE CONVERT(NVARCHAR(MAX), '')
				END + 'used_memory, ' +
				--physical_io_delta			
				'CASE ' +
					'WHEN ' +
						'first_request_start_time = last_request_start_time ' + 
						'AND num_events = 2 ' +
						'AND physical_io_delta >= 0 ' +
							'THEN ' +
							CASE @FORMAT_OUTPUT
								WHEN 1 THEN 'LTRIM(LEFT(CONVERT(CHAR(30), CONVERT(MONEY, physical_io_delta), 1), 27)) ' 
								ELSE CONVERT(NVARCHAR(MAX), 'physical_io_delta ')
							END +
					'ELSE NULL ' +
				'END AS physical_io_delta, ' +
				--reads_delta
				'CASE ' +
					'WHEN ' +
						'first_request_start_time = last_request_start_time ' + 
						'AND num_events = 2 ' +
						'AND reads_delta >= 0 ' +
							'THEN ' +
							CASE @FORMAT_OUTPUT
								WHEN 1 THEN 'LTRIM(LEFT(CONVERT(CHAR(30), CONVERT(MONEY, reads_delta), 1), 27)) '
								ELSE CONVERT(NVARCHAR(MAX), 'reads_delta ')
							END +
					'ELSE NULL ' +
				'END AS reads_delta, ' +
				--physical_reads_delta
				'CASE ' +
					'WHEN ' +
						'first_request_start_time = last_request_start_time ' + 
						'AND num_events = 2 ' +
						'AND physical_reads_delta >= 0 ' +
							'THEN ' +
							CASE @FORMAT_OUTPUT
								WHEN 1 THEN 'LTRIM(LEFT(CONVERT(CHAR(30), CONVERT(MONEY, physical_reads_delta), 1), 27)) '
								ELSE CONVERT(NVARCHAR(MAX), 'physical_reads_delta ')
							END + 
					'ELSE NULL ' +
				'END AS physical_reads_delta, ' +
				--writes_delta
				'CASE ' +
					'WHEN ' +
						'first_request_start_time = last_request_start_time ' + 
						'AND num_events = 2 ' +
						'AND writes_delta >= 0 ' +
							'THEN ' +
							CASE @FORMAT_OUTPUT
								WHEN 1 THEN 'LTRIM(LEFT(CONVERT(CHAR(30), CONVERT(MONEY, writes_delta), 1), 27)) '
								ELSE CONVERT(NVARCHAR(MAX), 'writes_delta ')
							END + 
					'ELSE NULL ' +
				'END AS writes_delta, ' +
				--tempdb_writes_delta
				'CASE ' +
					'WHEN ' +
						'first_request_start_time = last_request_start_time ' + 
						'AND num_events = 2 ' +
						'AND tempdb_writes_delta >= 0 ' +
							'THEN ' +
							CASE @FORMAT_OUTPUT
								WHEN 1 THEN 'LTRIM(LEFT(CONVERT(CHAR(30), CONVERT(MONEY, tempdb_writes_delta), 1), 27)) '
								ELSE CONVERT(NVARCHAR(MAX), 'tempdb_writes_delta ')
							END + 
					'ELSE NULL ' +
				'END AS tempdb_writes_delta, ' +
				--tempdb_current_delta
				--this is the only one that can (legitimately) go negative 
				'CASE ' +
					'WHEN ' +
						'first_request_start_time = last_request_start_time ' + 
						'AND num_events = 2 ' +
							'THEN ' +
							CASE @FORMAT_OUTPUT
								WHEN 1 THEN 'LTRIM(LEFT(CONVERT(CHAR(30), CONVERT(MONEY, tempdb_current_delta), 1), 27)) '
								ELSE CONVERT(NVARCHAR(MAX), 'tempdb_current_delta ')
							END + 
					'ELSE NULL ' +
				'END AS tempdb_current_delta, ' +
				--CPU_delta
				'CASE ' +
					'WHEN ' +
						'first_request_start_time = last_request_start_time ' + 
						'AND num_events = 2 ' +
						'AND CPU_delta >= 0 ' +
							'THEN ' +
							CASE @FORMAT_OUTPUT
								WHEN 1 THEN 'LTRIM(LEFT(CONVERT(CHAR(30), CONVERT(MONEY, CPU_delta), 1), 27)) '
								ELSE CONVERT(NVARCHAR(MAX), 'CPU_delta ')
							END + 
					'ELSE NULL ' +
				'END AS CPU_delta, ' +
				--context_switches_delta
				'CASE ' +
					'WHEN ' +
						'first_request_start_time = last_request_start_time ' + 
						'AND num_events = 2 ' +
						'AND context_switches_delta >= 0 ' +
							'THEN ' +
							CASE @FORMAT_OUTPUT
								WHEN 1 THEN 'LTRIM(LEFT(CONVERT(CHAR(30), CONVERT(MONEY, context_switches_delta), 1), 27)) '
								ELSE CONVERT(NVARCHAR(MAX), 'context_switches_delta ')
							END + 
					'ELSE NULL ' +
				'END AS context_switches_delta, ' +
				--used_memory_delta
				'CASE ' +
					'WHEN ' +
						'first_request_start_time = last_request_start_time ' + 
						'AND num_events = 2 ' +
						'AND used_memory_delta >= 0 ' +
							'THEN ' +
							CASE @FORMAT_OUTPUT
								WHEN 1 THEN 'LTRIM(LEFT(CONVERT(CHAR(30), CONVERT(MONEY, used_memory_delta), 1), 27)) '
								ELSE CONVERT(NVARCHAR(MAX), 'used_memory_delta ')
							END + 
					'ELSE NULL ' +
				'END AS used_memory_delta, ' +			
				'threads, ' +
				'status, ' +
				'LEFT(wait_info, LEN(wait_info) - 1) AS wait_info, ' +
				'locks, ' +
				'tran_start_time, ' +
				'LEFT(tran_log_writes, LEN(tran_log_writes) - 1) AS tran_log_writes, ' +
				'open_tran_count, ' +
				--sql_command
				CASE @FORMAT_OUTPUT 
					WHEN 0 THEN 'REPLACE(REPLACE(CONVERT(VARCHAR(MAX), sql_command), ''<?query --''+CHAR(13)+CHAR(10), ''''), CHAR(13)+CHAR(10)+''--?>'', '''') AS '
					ELSE CONVERT(NVARCHAR(MAX), '')
				END + 'sql_command, ' +
				--sql_text
				CASE @FORMAT_OUTPUT 
					WHEN 0 THEN 'REPLACE(REPLACE(CONVERT(VARCHAR(MAX), sql_text), ''<?query --''+CHAR(13)+CHAR(10), ''''), CHAR(13)+CHAR(10)+''--?>'', '''') AS '
					ELSE CONVERT(NVARCHAR(MAX), '')
				END + 'sql_text, ' +
				'query_plan, ' +
				'blocking_session_id, ' +
				'percent_complete, ' +
				'host_name, ' +
				'login_name, ' +
				'database_name, ' +
				'start_time, ' +
				'request_id, ' +
				'GETDATE() AS collection_time ' +
			'FROM ' +
			'( ' + 
				'SELECT TOP(2147483647) ' +
					'*, ' +
					'MAX(physical_io * recursion) OVER (PARTITION BY session_id, request_id) + ' +
						'MIN(physical_io * recursion) OVER (PARTITION BY session_id, request_id) AS physical_io_delta, ' +
					'MAX(reads * recursion) OVER (PARTITION BY session_id, request_id) + ' +
						'MIN(reads * recursion) OVER (PARTITION BY session_id, request_id) AS reads_delta, ' +
					'MAX(physical_reads * recursion) OVER (PARTITION BY session_id, request_id) + ' +
						'MIN(physical_reads * recursion) OVER (PARTITION BY session_id, request_id) AS physical_reads_delta, ' +
					'MAX(writes * recursion) OVER (PARTITION BY session_id, request_id) + ' +
						'MIN(writes * recursion) OVER (PARTITION BY session_id, request_id) AS writes_delta, ' +
					'MAX(tempdb_writes * recursion) OVER (PARTITION BY session_id, request_id) + ' +
						'MIN(tempdb_writes * recursion) OVER (PARTITION BY session_id, request_id) AS tempdb_writes_delta, ' +
					'MAX(tempdb_current * recursion) OVER (PARTITION BY session_id, request_id) + ' +
						'MIN(tempdb_current * recursion) OVER (PARTITION BY session_id, request_id) AS tempdb_current_delta, ' +
					'MAX(CPU * recursion) OVER (PARTITION BY session_id, request_id) + ' +
						'MIN(CPU * recursion) OVER (PARTITION BY session_id, request_id) AS CPU_delta, ' +
					'MAX(context_switches * recursion) OVER (PARTITION BY session_id, request_id) + ' +
						'MIN(context_switches * recursion) OVER (PARTITION BY session_id, request_id) AS context_switches_delta, ' +
					'MAX(used_memory * recursion) OVER (PARTITION BY session_id, request_id) + ' +
						'MIN(used_memory * recursion) OVER (PARTITION BY session_id, request_id) AS used_memory_delta, ' +
					'MIN(last_request_start_time) OVER (PARTITION BY session_id, request_id) AS first_request_start_time, ' +
					'COUNT(*) OVER (PARTITION BY session_id, request_id) AS num_events ' +
				'FROM #sessions s1 ' +
				'ORDER BY ' +
					@SORT_COLUMN + ' ' +
					@SORT_COLUMN_DIRECTION + ' ' +
			') s ' +
			'WHERE ' +
				's.recursion = 1 ' +
		') x ' +
		'OPTION (KEEPFIXED PLAN); ' +
		'' +
		CASE @RETURN_SCHEMA
			WHEN 1 THEN 
				'SET @SCHEMA = ' +
					'''CREATE TABLE <table_name> ( '' + ' + 
						'STUFF ' +
						'( ' +
							'( ' +
								'SELECT ' +
									''','' + ' +
									'QUOTENAME(COLUMN_NAME) + '' '' + ' +
									'DATA_TYPE + ' + 
									'CASE DATA_TYPE ' +
										'WHEN ''varchar'' THEN ''('' + COALESCE(NULLIF(CONVERT(VARCHAR, CHARACTER_MAXIMUM_LENGTH), ''-1''), ''max'') + '') '' ' +
										'ELSE '' '' ' +
									'END + ' +
									'CASE IS_NULLABLE ' +
										'WHEN ''NO'' THEN ''NOT '' ' +
										'ELSE '''' ' +
									'END + ''NULL'' AS [text()] ' +
								'FROM tempdb.INFORMATION_SCHEMA.COLUMNS ' +
								'WHERE ' +
									'TABLE_NAME = OBJECT_NAME(OBJECT_ID(''tempdb..#session_schema''), 2) ' +
									'ORDER BY ' +
										'ORDINAL_POSITION ' +
								'FOR XML PATH('''') ' +
							'), + ' +
							'1, ' +
							'1, ' +
							''''' ' +
						') + ' +
					''')''; ' 
			ELSE CONVERT(NVARCHAR(MAX), '')
		END;

	EXEC sp_executesql
		@sql,
		N'@SORT_COLUMN sysname, @SORT_COLUMN_DIRECTION VARCHAR(4), @OUTPUT_COLUMN_LIST VARCHAR(8000), @SCHEMA VARCHAR(MAX) OUTPUT',
		@SORT_COLUMN, @SORT_COLUMN_DIRECTION, @OUTPUT_COLUMN_LIST, @SCHEMA OUTPUT;
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[smallint]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varbinary]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varbinary]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[sys].[sysname]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[char]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[@SPID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[@SHOW_OWN_SPID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[@GET_FULL_INNER_TEXT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[@GET_PLANS]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[@GET_OUTER_COMMAND]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[@GET_TRANSACTION_INFO]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[@GET_LOCKS]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[@GET_AVG_TIME]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[@DELTA_INTERVAL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[@SORT_COLUMN]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[@SORT_COLUMN_DIRECTION]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[@FORMAT_OUTPUT]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[@OUTPUT_COLUMN_LIST]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[@RETURN_SCHEMA]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[@DESTINATION_TABLE]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[session_id]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[request_id]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[session_number]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[status]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[start_time]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[last_request_start_time]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[recursion]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[sys].[sysname]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[sys].[sysname]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[sys].[sysname]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[sys].[sysname]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[db_name]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[object_id]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[hobt_id]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[allocation_unit_id]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[index_id]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[schema_id]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[principal_id]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[request_id]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[start_time]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[resource_type]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[object_name]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[schema_name]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[page_type]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[request_mode]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[request_status]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[resource_description]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[index_name]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[principal_name]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[elapsed_time]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[avg_elapsed_time]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[physical_io]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[reads]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[physical_reads]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[writes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[tempdb_writes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[tempdb_current]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[CPU]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[context_switches]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[used_memory]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[threads]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[wait_info]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[tran_start_time]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[tran_log_writes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[open_tran_count]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[sql_handle]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[statement_start_offset]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[statement_end_offset]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[sql_text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[plan_handle]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[blocking_session_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[percent_complete]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[host_name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[login_name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[database_name]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[sql_text]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[@buffer_results].[EventType]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[@buffer_results].[Parameters]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[@buffer_results].[EventInfo]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[@buffer_results].[start_time]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[@buffer_results].[session_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[@buffer_results].[session_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[sql_command]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[@buffer_results].[EventInfo]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[@buffer_results].[session_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[session_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[@buffer_results].[start_time]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[start_time]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[last_request_start_time]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[session_id]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[request_id]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[start_time]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[status]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[session_id]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[last_request_start_time]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[query_plan]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[query_plan]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[query_plan]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[session_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[session_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[recursion]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[session_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[locks]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[db_name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[request_mode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[request_status]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[session_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[session_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[request_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[request_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[db_name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[db_name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[resource_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[object_name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[schema_name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[resource_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[page_type]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[index_name]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[object_name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[schema_name]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[principal_name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[resource_description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[request_mode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[request_status]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[request_count]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[session_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[session_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[request_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[request_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[db_name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[db_name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[object_name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[schema_name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[resource_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[page_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[resource_description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[request_mode]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[request_status]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[session_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[request_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[db_name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[resource_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[schema_name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[session_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[session_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[request_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[request_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#locks].[start_time]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[last_request_start_time]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[start_time]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[#sessions].[recursion]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sp_WhoIsActive].[@SCHEMA]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[sp_WhoIsActive].[#sessions]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[sp_WhoIsActive].[#sessions].[recursion]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[smallint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[sp_WhoIsActive].[#sessions].[session_id]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[smallint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[sp_WhoIsActive].[#sessions].[request_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[sp_WhoIsActive].[#sessions].[session_number]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[sp_WhoIsActive].[#sessions].[elapsed_time]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[sp_WhoIsActive].[#sessions].[avg_elapsed_time]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[sp_WhoIsActive].[#sessions].[physical_io]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[sp_WhoIsActive].[#sessions].[reads]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[sp_WhoIsActive].[#sessions].[physical_reads]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[sp_WhoIsActive].[#sessions].[writes]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[sp_WhoIsActive].[#sessions].[tempdb_writes]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[sp_WhoIsActive].[#sessions].[tempdb_current]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bigint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[sp_WhoIsActive].[#sessions].[CPU]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[sp_WhoIsActive].[#sessions].[context_switches]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[sp_WhoIsActive].[#sessions].[used_memory]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[sp_WhoIsActive].[#sessions].[threads]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[smallint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[sp_WhoIsActive].[#sessions].[status]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="30" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[varchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[sp_WhoIsActive].[#sessions].[wait_info]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="4000" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[varchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[sp_WhoIsActive].[#sessions].[locks]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlXmlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[xml]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[sp_WhoIsActive].[#sessions].[tran_start_time]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[sp_WhoIsActive].[#sessions].[tran_log_writes]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="4000" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[varchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[sp_WhoIsActive].[#sessions].[open_tran_count]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[sp_WhoIsActive].[#sessions].[sql_command]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlXmlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[xml]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[sp_WhoIsActive].[#sessions].[sql_handle]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[varbinary]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[sp_WhoIsActive].[#sessions].[statement_start_offset]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[sp_WhoIsActive].[#sessions].[statement_end_offset]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[sp_WhoIsActive].[#sessions].[sql_text]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlXmlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[xml]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[sp_WhoIsActive].[#sessions].[plan_handle]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[varbinary]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[sp_WhoIsActive].[#sessions].[query_plan]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlXmlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[xml]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[sp_WhoIsActive].[#sessions].[blocking_session_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[smallint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[sp_WhoIsActive].[#sessions].[percent_complete]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[real]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[sp_WhoIsActive].[#sessions].[host_name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[varchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[sp_WhoIsActive].[#sessions].[login_name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[varchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[sp_WhoIsActive].[#sessions].[database_name]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[varchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[sp_WhoIsActive].[#sessions].[start_time]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[sp_WhoIsActive].[#sessions].[last_request_start_time]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[sp_WhoIsActive].[@buffer_results]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[sp_WhoIsActive].[@buffer_results].[EventType]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="30" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[varchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[sp_WhoIsActive].[@buffer_results].[Parameters]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[sp_WhoIsActive].[@buffer_results].[EventInfo]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="4000" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[varchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[sp_WhoIsActive].[@buffer_results].[start_time]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[sp_WhoIsActive].[@buffer_results].[session_number]">
									<Property Name="IsNullable" Value="False" />
									<Property Name="IsIdentity" Value="True" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[sp_WhoIsActive].[#locks]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[sp_WhoIsActive].[#locks].[resource_type]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[sp_WhoIsActive].[#locks].[db_name]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[sp_WhoIsActive].[#locks].[object_id]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[sp_WhoIsActive].[#locks].[file_id]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[sp_WhoIsActive].[#locks].[page_type]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[sp_WhoIsActive].[#locks].[hobt_id]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[sp_WhoIsActive].[#locks].[allocation_unit_id]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[sp_WhoIsActive].[#locks].[index_id]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[sp_WhoIsActive].[#locks].[schema_id]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[sp_WhoIsActive].[#locks].[principal_id]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[sp_WhoIsActive].[#locks].[request_mode]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[sp_WhoIsActive].[#locks].[request_status]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[sp_WhoIsActive].[#locks].[session_id]">
									<Relationship Name="ExpressionDependencies">
										<Entry />
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[sp_WhoIsActive].[#locks].[resource_description]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[sp_WhoIsActive].[#locks].[request_count]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[sp_WhoIsActive].[#locks].[request_id]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[sp_WhoIsActive].[#locks].[start_time]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[sp_WhoIsActive].[#locks].[object_name]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[sp_WhoIsActive].[#locks].[index_name]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[sp_WhoIsActive].[#locks].[schema_name]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[sp_WhoIsActive].[#locks].[principal_name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[sp_WhoIsActive].[@SPID]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[sp_WhoIsActive].[@SHOW_OWN_SPID]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[sp_WhoIsActive].[@GET_FULL_INNER_TEXT]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[sp_WhoIsActive].[@GET_PLANS]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[sp_WhoIsActive].[@GET_OUTER_COMMAND]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[sp_WhoIsActive].[@GET_TRANSACTION_INFO]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[sp_WhoIsActive].[@GET_LOCKS]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[sp_WhoIsActive].[@GET_AVG_TIME]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[sp_WhoIsActive].[@DELTA_INTERVAL]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[tinyint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[sp_WhoIsActive].[@SORT_COLUMN]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA['[start_time]']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[sys].[sysname]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[sp_WhoIsActive].[@SORT_COLUMN_DIRECTION]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA['DESC']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="4" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[sp_WhoIsActive].[@FORMAT_OUTPUT]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[sp_WhoIsActive].[@OUTPUT_COLUMN_LIST]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA['']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="8000" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[sp_WhoIsActive].[@DESTINATION_TABLE]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA['']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="4000" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[sp_WhoIsActive].[@RETURN_SCHEMA]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[sp_WhoIsActive].[@SCHEMA]">
						<Property Name="IsOutput" Value="True" />
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="166" />
				<Property Name="Length" Value="85505" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;/***********************************&#xD;&#xA;Who Is Active? v.8.40 (2009-03-25)&#xD;&#xA;(C) 2007-2009, Adam Machanic&#xD;&#xA;&#x9;amachanic@gmail.com&#xD;&#xA;***********************************/&#xD;&#xA;CREATE PROC dbo.sp_WhoIsActive&#xD;&#xA;(&#xD;&#xA;&#x9;--Set to 0 to get information about all active SPIDs&#xD;&#xA;&#x9;--Set to a specific SPID to get information only about that SPID&#xD;&#xA;&#x9;@SPID SMALLINT = 0,&#xD;&#xA;&#xD;&#xA;&#x9;--Show your own SPID?&#xD;&#xA;&#x9;@SHOW_OWN_SPID BIT = 0,&#xD;&#xA;&#xD;&#xA;&#x9;--If 1, gets the full stored procedure or running batch, when available&#xD;&#xA;&#x9;--If 0, gets only the actual statement that is currently running in the batch or procedure&#xD;&#xA;&#x9;@GET_FULL_INNER_TEXT BIT = 0,&#xD;&#xA;&#xD;&#xA;&#x9;--Get associated query plans for running tasks, if available&#xD;&#xA;&#x9;@GET_PLANS BIT = 0,&#xD;&#xA;&#xD;&#xA;&#x9;--Get the associated outer ad hoc query or stored procedure call, if available&#xD;&#xA;&#x9;@GET_OUTER_COMMAND BIT = 0,&#xD;&#xA;&#xD;&#xA;&#x9;--Enables pulling sleeping SPIDs w/ open transactions,&#xD;&#xA;&#x9;--in addition to transaction log write info and transaction duration&#xD;&#xA;&#x9;@GET_TRANSACTION_INFO BIT = 0,&#xD;&#xA;&#xD;&#xA;&#x9;--Gets associated locks for each request, aggregated in an XML format&#xD;&#xA;&#x9;@GET_LOCKS BIT = 0,&#xD;&#xA;&#xD;&#xA;&#x9;--Get average time for past runs of an active query&#xD;&#xA;&#x9;--(based on the combination of plan handle, sql handle, and offset)&#xD;&#xA;&#x9;@GET_AVG_TIME BIT = 0,&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;--Pull deltas on various metrics&#xD;&#xA;&#x9;--Interval in seconds to wait before doing the second data pull&#xD;&#xA;&#x9;@DELTA_INTERVAL TINYINT = 0,&#xD;&#xA;&#xD;&#xA;&#x9;--Column by which to sort output. Valid choices:&#xD;&#xA;&#x9;&#x9;--session_id, physical_io, reads, physical_reads, writes, tempdb_writes,&#xD;&#xA;&#x9;&#x9;--tempdb_current, CPU, context_switches, used_memory, physical_io_delta, &#xD;&#xA;&#x9;&#x9;--reads_delta, physical_reads_delta, writes_delta, tempdb_writes_delta, &#xD;&#xA;&#x9;&#x9;--tempdb_current_delta, CPU_delta, context_switches_delta, used_memory_delta, &#xD;&#xA;&#x9;&#x9;--threads, tran_start_time, open_tran_count, blocking_session_id, percent_complete, &#xD;&#xA;&#x9;&#x9;--host_name, login_name, database_name, start_time&#xD;&#xA;&#x9;@SORT_COLUMN sysname = '[start_time]',&#xD;&#xA;&#xD;&#xA;&#x9;--Sort direction. Valid choices are ASC or DESC&#xD;&#xA;&#x9;@SORT_COLUMN_DIRECTION VARCHAR(4) = 'DESC',&#xD;&#xA;&#xD;&#xA;&#x9;--Formats some of the output columns in a more &quot;human readable&quot; form&#xD;&#xA;&#x9;@FORMAT_OUTPUT BIT = 1,&#xD;&#xA;&#xD;&#xA;&#x9;--List of desired output columns, in desired order&#xD;&#xA;&#x9;--Note that the final output will be the intersection of all enabled features and all &#xD;&#xA;&#x9;--columns in the list. Therefore, only columns associated with enabled features will &#xD;&#xA;&#x9;--actually appear in the output. Likewise, removing columns from this list may effectively&#xD;&#xA;&#x9;--disable features, even if they are turned on&#xD;&#xA;&#x9;--&#xD;&#xA;&#x9;--Each element in this list must be one of the valid output column names. Names must be&#xD;&#xA;&#x9;--delimited by square brackets. White space, formatting, and additional characters are&#xD;&#xA;&#x9;--allowed, as long as the list contains exact matches of delimited valid column names.&#xD;&#xA;&#x9;@OUTPUT_COLUMN_LIST VARCHAR(8000) = '',&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;--If set to a non-blank value, the script will attempt to insert into the specified &#xD;&#xA;&#x9;--destination table. Please note that the script will not verify that the table exists, &#xD;&#xA;&#x9;--or that it has the correct schema, before doing the insert.&#xD;&#xA;&#x9;--Table can be specified in one, two, or three-part format&#xD;&#xA;&#x9;@DESTINATION_TABLE VARCHAR(4000) = '',&#xD;&#xA;&#xD;&#xA;&#x9;--If set to 1, no data collection will happen and no result set will be returned; instead,&#xD;&#xA;&#x9;--a CREATE TABLE statement will be returned via the @SCHEMA parameter, which will match &#xD;&#xA;&#x9;--the schema of the result set that would be returned by using the same collection of the&#xD;&#xA;&#x9;--rest of the parameters. The CREATE TABLE statement will have a placeholder token of &#xD;&#xA;&#x9;--&lt;table_name&gt; in place of an actual table name.&#xD;&#xA;&#x9;@RETURN_SCHEMA BIT = 0,&#xD;&#xA;&#x9;@SCHEMA VARCHAR(MAX) = NULL OUTPUT&#xD;&#xA;)&#xD;&#xA;/*&#xD;&#xA;OUTPUT COLUMNS&#xD;&#xA;--------------&#xD;&#xA;[session_id] [smallint] NOT NULL&#xD;&#xA;&#x9;Session ID (a.k.a. SPID)&#xD;&#xA;&#xD;&#xA;Formatted:&#x9;&#x9;[dd hh:mm:ss.mss] [varchar](15) NULL&#xD;&#xA;Non-Formatted:&#x9;&lt;not returned&gt;&#xD;&#xA;&#x9;For an active request, time the query has been running&#xD;&#xA;&#x9;For a sleeping session, time the session has been connected&#xD;&#xA;&#xD;&#xA;Formatted:&#x9;&#x9;[dd hh:mm:ss.mss (avg)] [varchar](15) NULL&#xD;&#xA;Non-Formatted:&#x9;[avg_elapsed_time] [int] NULL&#xD;&#xA;&#x9;(Requires @GET_AVG_TIME option)&#xD;&#xA;&#x9;How much time has the active portion of the query taken in the past, on average?&#xD;&#xA;&#x9;Note: This column's name becomes [avg_elapsed_time] in non-formatted mode&#xD;&#xA;&#xD;&#xA;Formatted:&#x9;&#x9;[physical_io] [varchar](27) NULL&#xD;&#xA;Non-Formatted:&#x9;[physical_io] [int] NULL&#xD;&#xA;&#x9;Shows the number of physical I/Os, for active requests&#xD;&#xA;&#xD;&#xA;Formatted:&#x9;&#x9;[reads] [varchar](27) NOT NULL&#xD;&#xA;Non-Formatted:&#x9;[reads] [bigint] NOT NULL&#xD;&#xA;&#x9;For an active request, number of reads done for the current query&#xD;&#xA;&#x9;For a sleeping session, total number of reads done over the lifetime of the session&#xD;&#xA;&#xD;&#xA;Formatted:&#x9;&#x9;[physical_reads] [varchar](27) NOT NULL&#xD;&#xA;Non-Formatted:&#x9;[physical_reads] [bigint] NOT NULL&#xD;&#xA;&#x9;For an active request, number of physical reads done for the current query&#xD;&#xA;&#x9;For a sleeping session, total number of physical reads done over the lifetime of the session&#xD;&#xA;&#xD;&#xA;Formatted:&#x9;&#x9;[writes] [varchar](27) NOT NULL&#xD;&#xA;Non-Formatted:&#x9;[writes] [bigint] NOT NULL&#xD;&#xA;&#x9;For an active request, number of writes done for the current query&#xD;&#xA;&#x9;For a sleeping session, total number of writes done over the lifetime of the session&#xD;&#xA;&#xD;&#xA;Formatted:&#x9;&#x9;[tempdb_writes] [varchar](27) NOT NULL&#xD;&#xA;Non-Formatted:&#x9;[tempdb_writes] [bigint] NOT NULL&#xD;&#xA;&#x9;For an active request, number of TempDB writes done for the current query&#xD;&#xA;&#x9;For a sleeping session, total number of TempDB writes done over the lifetime of the session&#xD;&#xA;&#xD;&#xA;Formatted:&#x9;&#x9;[tempdb_current] [varchar](27) NOT NULL&#xD;&#xA;Non-Formatted:&#x9;[tempdb_current] [bigint] NOT NULL&#xD;&#xA;&#x9;For an active request, number of TempDB pages currently allocated for the query&#xD;&#xA;&#x9;For a sleeping session, number of TempDB pages currently allocated for the session&#xD;&#xA;&#xD;&#xA;Formatted:&#x9;&#x9;[CPU] [varchar](27) NOT NULL&#xD;&#xA;Non-Formatted:&#x9;[CPU] [int] NOT NULL&#xD;&#xA;&#x9;For an active request, total CPU time consumed by the current query&#xD;&#xA;&#x9;For a sleeping session, total CPU time consumed over the lifetime of the session&#xD;&#xA;&#xD;&#xA;Formatted:&#x9;&#x9;[context_switches] [varchar](27) NULL&#xD;&#xA;Non-Formatted:&#x9;[context_switches] [int] NULL&#xD;&#xA;&#x9;Shows the number of context switches, for active requests&#xD;&#xA;&#xD;&#xA;Formatted:&#x9;&#x9;[used_memory] [varchar](27) NOT NULL&#xD;&#xA;Non-Formatted:&#x9;[used_memory] [int] NOT NULL&#xD;&#xA;&#x9;For an active request, total memory consumption for the current query&#xD;&#xA;&#x9;For a sleeping session, total current memory consumption&#xD;&#xA;&#xD;&#xA;Formatted:&#x9;&#x9;[physical_io_delta] [varchar](27) NULL&#xD;&#xA;Non-Formatted:&#x9;[physical_io_delta] [int] NULL&#xD;&#xA;&#x9;(Requires @DELTA_INTERVAL option)&#xD;&#xA;&#x9;Difference between the number of physical I/Os reported on the first and second collections. &#xD;&#xA;&#x9;If the request started after the first collection, the value will be NULL&#xD;&#xA;&#xD;&#xA;Formatted:&#x9;&#x9;[reads_delta] [varchar](27) NULL&#xD;&#xA;Non-Formatted:&#x9;[reads_delta] [bigint] NULL&#xD;&#xA;&#x9;(Requires @DELTA_INTERVAL option)&#xD;&#xA;&#x9;Difference between the number of reads reported on the first and second collections. &#xD;&#xA;&#x9;If the request started after the first collection, the value will be NULL&#xD;&#xA;&#xD;&#xA;Formatted:&#x9;&#x9;[physical_reads_delta] [varchar](27) NULL&#xD;&#xA;Non-Formatted:&#x9;[physical_reads_delta] [bigint] NULL&#xD;&#xA;&#x9;(Requires @DELTA_INTERVAL option)&#xD;&#xA;&#x9;Difference between the number of physical reads reported on the first and second collections. &#xD;&#xA;&#x9;If the request started after the first collection, the value will be NULL&#xD;&#xA;&#xD;&#xA;Formatted:&#x9;&#x9;[writes_delta] [varchar](27) NULL&#xD;&#xA;Non-Formatted:&#x9;[writes_delta] [bigint] NULL&#xD;&#xA;&#x9;(Requires @DELTA_INTERVAL option)&#xD;&#xA;&#x9;Difference between the number of writes reported on the first and second collections. &#xD;&#xA;&#x9;If the request started after the first collection, the value will be NULL&#xD;&#xA;&#xD;&#xA;Formatted:&#x9;&#x9;[tempdb_writes_delta] [varchar](27) NULL&#xD;&#xA;Non-Formatted:&#x9;[tempdb_writes_delta] [bigint] NULL&#xD;&#xA;&#x9;(Requires @DELTA_INTERVAL option)&#xD;&#xA;&#x9;Difference between the number of TempDB writes reported on the first and second collections. &#xD;&#xA;&#x9;If the request started after the first collection, the value will be NULL&#xD;&#xA;&#xD;&#xA;Formatted:&#x9;&#x9;[tempdb_current_delta] [varchar](27) NULL&#xD;&#xA;Non-Formatted:&#x9;[tempdb_current_delta] [bigint] NULL&#xD;&#xA;&#x9;(Requires @DELTA_INTERVAL option)&#xD;&#xA;&#x9;Difference between the number of allocated TempDB pages reported on the first and second collections. &#xD;&#xA;&#x9;If the request started after the first collection, the value will be NULL&#xD;&#xA;&#xD;&#xA;Formatted:&#x9;&#x9;[CPU_delta] [varchar](27) NULL&#xD;&#xA;Non-Formatted:&#x9;[CPU_delta] [int] NULL&#xD;&#xA;&#x9;(Requires @DELTA_INTERVAL option)&#xD;&#xA;&#x9;Difference between the CPU time reported on the first and second collections. &#xD;&#xA;&#x9;If the request started after the first collection, the value will be NULL&#xD;&#xA;&#xD;&#xA;Formatted:&#x9;&#x9;[context_switches_delta] [varchar](27) NULL&#xD;&#xA;Non-Formatted:&#x9;[context_switches_delta] [int] NULL&#xD;&#xA;&#x9;(Requires @DELTA_INTERVAL option)&#xD;&#xA;&#x9;Difference between the context switches count reported on the first and second collections&#xD;&#xA;&#x9;If the request started after the first collection, the value will be NULL&#xD;&#xA;&#xD;&#xA;Formatted:&#x9;&#x9;[used_memory_delta] [varchar](27) NULL&#xD;&#xA;Non-Formatted:&#x9;[used_memory_delta] [int] NULL&#xD;&#xA;&#x9;Difference between the memory usage reported on the first and second collections&#xD;&#xA;&#x9;If the request started after the first collection, the value will be NULL&#xD;&#xA;&#xD;&#xA;Formatted/Non:&#x9;[threads] [smallint] NULL&#xD;&#xA;&#x9;Number of worker threads currently allocated, for active requests&#xD;&#xA;&#xD;&#xA;Formatted/Non:&#x9;[status] [varchar](30) NOT NULL&#xD;&#xA;&#x9;Activity status for the session (running, sleeping, etc)&#xD;&#xA;&#x9;&#xD;&#xA;Formatted/Non:&#x9;[wait_info] [varchar](4000) NULL&#xD;&#xA;&#x9;Aggregates wait information, in the following format:&#xD;&#xA;&#x9;&#x9;(Ax: Bms/Cms/Dms)E&#xD;&#xA;&#x9;A is the number of waiting threads currently waiting on resource type E&#xD;&#xA;&#x9;If only one thread is waiting, its wait time will be shown, in milliseconds&#xD;&#xA;&#x9;If two threads are waiting, each of their wait times will be shown, in milliseconds&#xD;&#xA;&#x9;If three or more threads are waiting, the minimum, average, and maximum wait times will be shown&#xD;&#xA;&#x9;If more than one thread is waiting on the same type and the wait times are equal, only one number will be shown&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;If wait type E is a page latch wait and the page is of a &quot;special&quot; type (e.g. PFS, GAM, SGAM), the page type will be identified.&#xD;&#xA;&#x9;&#xD;&#xA;Formatted/Non:&#x9;[locks] [xml] NULL&#xD;&#xA;&#x9;(Requires @GET_LOCKS option)&#xD;&#xA;&#x9;Aggregates lock information, in XML format.&#xD;&#xA;&#x9;The lock XML includes the lock mode, locked object, and aggregates the number of requests. &#xD;&#xA;&#x9;Attempts are made to identify locked objects by name&#xD;&#xA;&#xD;&#xA;Formatted/Non:&#x9;[tran_start_time] [datetime] NULL&#xD;&#xA;&#x9;(Requires @GET_TRANSACTION_INFO option)&#xD;&#xA;&#x9;Date and time that the first transaction opened by a session caused a transaction log write to occur&#xD;&#xA;&#xD;&#xA;Formatted/Non:&#x9;[tran_log_writes] [varchar](4000) NULL&#xD;&#xA;&#x9;(Requires @GET_TRANSACTION_INFO option)&#xD;&#xA;&#x9;Aggregates transaction log write information, in the following format:&#xD;&#xA;&#x9;A:B&#xD;&#xA;&#x9;A is a database that has been touched by an active transaction&#xD;&#xA;&#x9;B is the number of log writes that have been made in the database as a result of the transaction&#xD;&#xA;&#x9;&#xD;&#xA;Formatted/Non:&#x9;[open_tran_count] [int] NULL&#xD;&#xA;&#x9;(Requires @GET_TRANSACTION_INFO option)&#xD;&#xA;&#x9;Shows the number of open transactions the session has open&#xD;&#xA;&#xD;&#xA;Formatted:&#x9;&#x9;[sql_command] [xml] NULL&#xD;&#xA;Non-Formatted:&#x9;[sql_command] [varchar](max) NULL&#xD;&#xA;&#x9;(Requires @GET_OUTER_COMMAND option)&#xD;&#xA;&#x9;Shows the &quot;outer&quot; SQL command, i.e. the text of the batch or RPC sent to the server, if available&#xD;&#xA;&#xD;&#xA;Formatted:&#x9;&#x9;[sql_text] [xml] NULL&#xD;&#xA;Non-Formatted:&#x9;[sql_text] [varchar](max) NULL&#xD;&#xA;&#x9;Shows the SQL text for active requests or the last statement executed&#xD;&#xA;&#x9;for sleeping sessions, if available in either case.&#xD;&#xA;&#x9;If @GET_FULL_INNER_TEXT option is set, shows the full text of the batch.&#xD;&#xA;&#x9;Otherwise, shows only the active statement within the batch.&#xD;&#xA;&#xD;&#xA;Formatted/Non:&#x9;[query_plan] [xml] NULL&#xD;&#xA;&#x9;(Requires @GET_PLANS option)&#xD;&#xA;&#x9;Shows the query plan for the request, if available.&#xD;&#xA;&#x9;If the plan is locked, a special timeout message will be sent, in the following format:&#xD;&#xA;&#x9;&#x9;&lt;timeout_exceeded /&gt;&#xD;&#xA;&#xD;&#xA;Formatted/Non:&#x9;[blocking_session_id] [int] NULL&#xD;&#xA;&#x9;When applicable, shows the blocking SPID&#xD;&#xA;&#xD;&#xA;Formatted/Non:&#x9;[percent_complete] [real] NULL&#xD;&#xA;&#x9;When applicable, shows the percent complete (e.g. for backups, restores, and some rollbacks)&#xD;&#xA;&#xD;&#xA;Formatted/Non:&#x9;[host_name] [varchar](128) NOT NULL&#xD;&#xA;&#x9;Shows the host name for the connection&#xD;&#xA;&#xD;&#xA;Formatted/Non:&#x9;[login_name] [varchar](128) NOT NULL&#xD;&#xA;&#x9;Shows the login name for the connection&#xD;&#xA;&#xD;&#xA;Formatted/Non:&#x9;[database_name] [varchar](128) NULL&#xD;&#xA;&#x9;Shows the connected database&#xD;&#xA;&#xD;&#xA;Formatted/Non:&#x9;[start_time] [datetime] NOT NULL&#xD;&#xA;&#x9;For active requests, shows the time the request started&#xD;&#xA;&#x9;For sleeping sessions, shows the time the connection was made&#xD;&#xA;&#x9;&#xD;&#xA;Formatted/Non:&#x9;[request_id] [int] NULL&#xD;&#xA;&#x9;For active requests, shows the request_id&#xD;&#xA;&#x9;Should be 0 unless MARS is being used&#xD;&#xA;&#xD;&#xA;Formatted/Non:&#x9;[collection_time] [datetime] NOT NULL&#xD;&#xA;&#x9;Time that this script's final SELECT ran&#xD;&#xA;*/&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[status]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[status].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[status].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[status].[term]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[status].[published]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="432" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[status].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="429" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[status].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="428" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[status].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="431" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[status].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="430" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="601" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[subscription_domain_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[subscription_domain_link].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[subscription_domain_link].[subscription_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[subscription_domain_link].[domain]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[subscription_domain_link].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="434" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[subscription_domain_link].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="433" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="602" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[subscription_domain_link].[IX_subscription_domain_link]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[subscription_domain_link].[subscription_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[subscription_domain_link]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[subscriptions]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[subscriptions].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[subscriptions].[organisation_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[subscriptions].[expiry]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[subscriptions].[archived]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="435" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[subscriptions].[suspended]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="452" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[subscriptions].[has_subscription]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="448" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[subscriptions].[has_feed]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="447" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[subscriptions].[is_commercial]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="449" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[subscriptions].[default_role_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="444" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[subscriptions].[default_duration]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="16" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="441" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[subscriptions].[default_show_forecasts]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="445" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[subscriptions].[default_date_type]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="440" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[subscriptions].[default_currency_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="438" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[subscriptions].[default_currency_type]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="439" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[subscriptions].[default_local_currencies]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="443" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[subscriptions].[default_geoscheme_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="442" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[subscriptions].[enable_keyboard_shortcuts]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="446" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[subscriptions].[note]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[subscriptions].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="437" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[subscriptions].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="436" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[subscriptions].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="451" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[subscriptions].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="450" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[subscriptions].[with_multiplay_operator]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="510" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[subscriptions].[with_multiplay_non_operator]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="509" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[subscriptions].[with_consumer_operator]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="506" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[subscriptions].[with_consumer_non_operator]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="505" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[subscriptions].[with_iot_operator]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="508" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[subscriptions].[with_iot_non_operator]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="507" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="603" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[subscriptions].[IX_subscriptions]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[subscriptions].[organisation_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[subscriptions]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[surveys]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[surveys].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[surveys].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="604" />
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[system_job_status]">
			<Property Name="BodyScript">
				<Value AnsiNulls="False"><![CDATA[

DECLARE @is_sysadmin int, @job_owner sysname

CREATE TABLE #jobs
(
	id uniqueidentifier NOT NULL,
	last_run_date int NOT NULL,
	last_run_time int NOT NULL,
	next_run_date int NOT NULL,
	next_run_time int NOT NULL,
	next_run_schedule_id int NOT NULL,
	requested_to_run int NOT NULL, -- BOOL
	request_source int NOT NULL,
	request_source_id sysname NULL,
	running int NOT NULL, -- BOOL
	current_step int NOT NULL,
	current_retry_attempt int NOT NULL,
	status int NOT NULL
)

SELECT @is_sysadmin = ISNULL(IS_SRVROLEMEMBER(N'sysadmin'), 0)
SELECT @job_owner = SUSER_SNAME()

INSERT INTO #jobs
EXECUTE master.dbo.xp_sqlagent_enum_jobs @is_sysadmin, @job_owner

SELECT id, status, running FROM #jobs WHERE id = @job_id

DROP TABLE #jobs]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[sys].[sysname]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[system_job_status].[#jobs]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[system_job_status].[#jobs].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[system_job_status].[#jobs].[status]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[system_job_status].[#jobs].[running]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[system_job_status].[@job_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[system_job_status].[#jobs]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[system_job_status].[#jobs].[id]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[system_job_status].[#jobs].[last_run_date]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[system_job_status].[#jobs].[last_run_time]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[system_job_status].[#jobs].[next_run_date]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[system_job_status].[#jobs].[next_run_time]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[system_job_status].[#jobs].[next_run_schedule_id]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[system_job_status].[#jobs].[requested_to_run]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[system_job_status].[#jobs].[request_source]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[system_job_status].[#jobs].[request_source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[sys].[sysname]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[system_job_status].[#jobs].[running]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[system_job_status].[#jobs].[current_step]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[system_job_status].[#jobs].[current_retry_attempt]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[system_job_status].[#jobs].[status]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[system_job_status].[@job_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="846" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [dbo].[system_job_status]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@job_id uniqueidentifier&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[tags]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[tags].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[tags].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[tags].[url]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="605" />
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[test_job]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[

IF @debug = 0
BEGIN
	SELECT * FROM NonexistentTable;
END]]></Value>
			</Property>
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[test_job].[@debug]" />
				</Entry>
				<Entry />
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[test_job].[@debug]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="127" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[test_job]&#xD;&#xA;&#xD;&#xA;(&#xD;&#xA;&#x9;@debug bit = 1&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[test_links_ids]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[test_links_ids].[fk_group_data_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[test_links_ids].[fk_data_view_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[test_links_ids].[link_date]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[test_links_ids].[archive]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[test_links_ids].[ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="606" />
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[test_proc_upsert_forecast_upload]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
DECLARE @organisationDataType dbo.organisation_data_type;

INSERT INTO @organisationDataType ( 
	fk_organisation_id, 
	fk_metric_id, 
	fk_attribute_id, 
	fk_status_id, 
	fk_privacy_id, 
	[date], 
	date_type, 
	val, 
	fk_currency_id, 
	fk_confidence_id,
	has_flags,
	is_calculated,
	created_on,
	created_by,
	archive,
	is_forecast_upload )
select top 1 
	od.fk_organisation_id, 
	od.fk_metric_id, 
	od.fk_attribute_id, 
	od.fk_status_id, 
	od.fk_privacy_id, 
	od.[date], 
	od.date_type, 
	od.val, 
	od.fk_currency_id, 
	od.fk_confidence_id,
	od.has_flags,
	od.is_calculated,
	od.created_on,
	od.created_by,
	od.archive,
	od.is_forecast_upload
from organisation_data as od

exec [dbo].[proc_upsert_forecast_upload] @organisationDataType, @analystTeamViewId = 1
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[organisation_data_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[test_proc_upsert_forecast_upload].[@organisationDataType].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[test_proc_upsert_forecast_upload].[@organisationDataType].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[test_proc_upsert_forecast_upload].[@organisationDataType].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[test_proc_upsert_forecast_upload].[@organisationDataType].[fk_status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[test_proc_upsert_forecast_upload].[@organisationDataType].[fk_privacy_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[test_proc_upsert_forecast_upload].[@organisationDataType].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[test_proc_upsert_forecast_upload].[@organisationDataType].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[test_proc_upsert_forecast_upload].[@organisationDataType].[val]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[test_proc_upsert_forecast_upload].[@organisationDataType].[fk_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[test_proc_upsert_forecast_upload].[@organisationDataType].[fk_confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[test_proc_upsert_forecast_upload].[@organisationDataType].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[test_proc_upsert_forecast_upload].[@organisationDataType].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[test_proc_upsert_forecast_upload].[@organisationDataType].[created_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[test_proc_upsert_forecast_upload].[@organisationDataType].[created_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[test_proc_upsert_forecast_upload].[@organisationDataType].[archive]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[test_proc_upsert_forecast_upload].[@organisationDataType].[is_forecast_upload]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_status_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_privacy_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[val]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[is_calculated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[created_on]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[created_by]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[archive]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[is_forecast_upload]" />
				</Entry>
				<Entry />
				<Entry />
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[test_proc_upsert_forecast_upload].[@organisationDataType]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[test_proc_upsert_forecast_upload].[@organisationDataType].[fk_organisation_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[test_proc_upsert_forecast_upload].[@organisationDataType].[fk_metric_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[test_proc_upsert_forecast_upload].[@organisationDataType].[fk_attribute_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[test_proc_upsert_forecast_upload].[@organisationDataType].[fk_status_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[test_proc_upsert_forecast_upload].[@organisationDataType].[fk_privacy_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[test_proc_upsert_forecast_upload].[@organisationDataType].[date]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[test_proc_upsert_forecast_upload].[@organisationDataType].[date_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[char]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[test_proc_upsert_forecast_upload].[@organisationDataType].[val]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="4" />
												<Property Name="Precision" Value="22" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[test_proc_upsert_forecast_upload].[@organisationDataType].[fk_currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[test_proc_upsert_forecast_upload].[@organisationDataType].[fk_source_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[test_proc_upsert_forecast_upload].[@organisationDataType].[fk_confidence_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[test_proc_upsert_forecast_upload].[@organisationDataType].[has_flags]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[test_proc_upsert_forecast_upload].[@organisationDataType].[is_calculated]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[test_proc_upsert_forecast_upload].[@organisationDataType].[created_on]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[datetime]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[test_proc_upsert_forecast_upload].[@organisationDataType].[created_by]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[test_proc_upsert_forecast_upload].[@organisationDataType].[archive]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[test_proc_upsert_forecast_upload].[@organisationDataType].[is_forecast_upload]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[test_proc_upsert_forecast_upload].[@organisationDataType].[file_source]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[varchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="868" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROC [dbo].[test_proc_upsert_forecast_upload]&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[type_permission_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[type_permission_link].[type_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[type_permission_link].[permission_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[types]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[types].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[types].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[types].[display_name]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[types].[term]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[types].[scheme]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[types].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="454" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[types].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="453" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[types].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="456" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[types].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="455" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[types].[source_organisation_link_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="264" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="607" />
		</Element>
		<Element Type="SqlUniqueConstraint" Name="[dbo].[UNIQUE_KEY_DEPLOYMENT_ORGANISATION_LINK]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[deployment_organisation_link].[deployment_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[deployment_organisation_link].[organisation_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[deployment_organisation_link].[type_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[deployment_organisation_link]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="251" />
		</Element>
		<Element Type="SqlUniqueConstraint" Name="[dbo].[UNIQUE_KEY_DEPLOYMENT_SECTOR_LINK]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[deployment_sector_link].[deployment_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[deployment_sector_link].[sector_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[deployment_sector_link]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="254" />
		</Element>
		<Element Type="SqlUniqueConstraint" Name="[dbo].[UNIQUE_KEY_DEPLOYMENT_ZONE_LINK]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[deployment_zone_link].[deployment_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[deployment_zone_link].[zone_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[deployment_zone_link]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="257" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[units]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[units].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[units].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[units].[term]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[units].[symbol]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="16" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[units].[quantity]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[units].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="458" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[units].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="457" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[units].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="460" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[units].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="459" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[units].[multiplication]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="74" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="608" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[user_email_verification]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[user_email_verification].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[user_email_verification].[user_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[user_email_verification].[hash]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[user_email_verification].[return_url]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[user_email_verification].[status]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="463" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[user_email_verification].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="462" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[user_email_verification].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="461" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="609" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[user_email_verification].[IX_user_email_verification]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[user_email_verification].[user_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[user_email_verification]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[user_logs]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[user_logs].[user_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[user_logs].[action]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="30" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[user_logs].[date]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="52" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[user_logs].[note]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1048" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[user_organisation_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[user_organisation_link].[user_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[user_organisation_link].[organisation_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="610" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[user_organisation_link].[IX_user_organisation_link]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[user_organisation_link].[organisation_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[user_organisation_link]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[user_password_resets]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[user_password_resets].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[user_password_resets].[user_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[user_password_resets].[hash]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[user_password_resets].[status]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="466" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[user_password_resets].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="465" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[user_password_resets].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="464" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="611" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[user_password_resets].[IX_user_password_resets]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[user_password_resets].[hash]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[user_password_resets]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[user_permissions_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[user_permissions_link].[user_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[user_permissions_link].[permission_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[user_permissions_link].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="468" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[user_permissions_link].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="467" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[user_permissions_link].[IX_user_permissions_link]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[user_permissions_link].[user_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[user_permissions_link].[permission_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[user_permissions_link]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[user_preferences]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[user_preferences].[user_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[user_preferences].[default_duration]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="16" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="472" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[user_preferences].[default_show_forecasts]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="479" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[user_preferences].[default_date_type]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="471" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[user_preferences].[default_currency_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="469" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[user_preferences].[default_currency_type]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="470" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[user_preferences].[default_local_currencies]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="474" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[user_preferences].[default_geoscheme_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="473" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[user_preferences].[enable_keyboard_shortcuts]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="475" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[user_preferences].[receive_email]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="478" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[user_preferences].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="477" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[user_preferences].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="476" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="612" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[user_registrations]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[user_registrations].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[user_registrations].[user_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[user_registrations].[hash]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[user_registrations].[status]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="482" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[user_registrations].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="481" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[user_registrations].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="480" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="613" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[users]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[users].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[users].[role_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="490" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[users].[login]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[users].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[users].[email]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[users].[job_title]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[users].[hash]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[users].[salt]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="10" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[users].[archived]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="483" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[users].[suspended]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="492" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[users].[sso]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="491" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[users].[is_verified]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="487" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[users].[verified_on]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[users].[has_set_own_password]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="486" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[users].[expiry]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[users].[last_session]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[users].[note]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[users].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="484" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[users].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="485" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[users].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="488" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[users].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="489" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[users].[revalidated_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="54" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="614" />
			<AttachedAnnotation Disambiguator="569" />
		</Element>
		<Element Type="SqlView" Name="[dbo].[view_organisation_data_reported_forecast]">
			<Property Name="QueryScript">
				<Value><![CDATA[ select 
distinct od.id as org_data_id, 
od.fk_organisation_id AS "organisation_id", 
o.name as "organisation_name", 
o.type_id AS "organisation_type_id", 
m.term AS "metric", 
att.term AS "attribute", 
od.date, 
od.date_type,
od.has_flags, 
od.val AS "value", 
s.term AS "source", 
conf.term AS "confidence", 
cur.iso_code AS "currency_iso_code", 
z.id AS "zone_id", 
z.name AS "zone_name", 
z.type_id AS "zone_type_id", 
odv.fk_data_view_id AS "view_id"
from dbo.organisation_data_view_link as odv
left join organisation_data as od ON od.id=odv.fk_organisation_data_id
left join dbo.organisations as o ON o.id=od.fk_organisation_id
left join dbo.metrics as m ON m.id=od.fk_metric_id
left join dbo.attributes as att ON att.id=od.fk_attribute_id
left join dbo.sources as s ON s.id=od.fk_source_id
left join dbo.confidence as conf ON conf.id=od.fk_confidence_id
left join dbo.currencies as cur ON cur.id=od.fk_currency_id
left join dbo.organisation_zone_link as ozl ON ozl.organisation_id=od.fk_organisation_id
left join dbo.zones as z ON z.id=ozl.zone_id
left join dbo.data_sets_master as ds ON (ds.fk_metric_id=od.fk_metric_id and ds.fk_attribute_id=od.fk_attribute_id)
where odv.fk_data_view_id IN (1, 2)
and odv.archive=0
and ds.has_organisation_data=1
and ds.id is not null
and o.id is not null]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[view_organisation_data_reported_forecast].[org_data_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[view_organisation_data_reported_forecast].[organisation_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data].[fk_organisation_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[view_organisation_data_reported_forecast].[organisation_name]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisations].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[view_organisation_data_reported_forecast].[organisation_type_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisations].[type_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[view_organisation_data_reported_forecast].[metric]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[metrics].[term]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[view_organisation_data_reported_forecast].[attribute]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[attributes].[term]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[view_organisation_data_reported_forecast].[date]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[view_organisation_data_reported_forecast].[date_type]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data].[date_type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[view_organisation_data_reported_forecast].[has_flags]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data].[has_flags]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[view_organisation_data_reported_forecast].[value]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data].[val]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[view_organisation_data_reported_forecast].[source]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[sources].[term]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[view_organisation_data_reported_forecast].[confidence]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[confidence].[term]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[view_organisation_data_reported_forecast].[currency_iso_code]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[currencies].[iso_code]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[view_organisation_data_reported_forecast].[zone_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zones].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[view_organisation_data_reported_forecast].[zone_name]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zones].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[view_organisation_data_reported_forecast].[zone_type_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zones].[type_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[view_organisation_data_reported_forecast].[view_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisation_data_view_link].[fk_data_view_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References Name="[dbo].[organisation_data_view_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_view_link].[fk_organisation_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[fk_organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[term]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[term]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data].[val]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources].[term]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence].[term]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[iso_code]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_view_link].[fk_data_view_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_view_link].[fk_data_view_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_data_view_link].[archive]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[has_organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1394" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE VIEW [dbo].[view_organisation_data_reported_forecast] AS" />
			</Annotation>
		</Element>
		<Element Type="SqlView" Name="[dbo].[view_zone_data_reported]">
			<Property Name="QueryScript">
				<Value><![CDATA[ select distinct od.id as org_data_id, od.fk_zone_id AS "zone_id", o.name as "zone_name", ot.id AS "zone_type_id", ot.term AS "zone_type", m.term AS "metric", 
att.term AS "attribute", od.date, od.date_type,
od.has_flags, od.val AS "value", s.term AS "source", conf.term AS "confidence", cur.iso_code AS "currency_iso_code", 
odv.fk_data_view_id AS "view_id", od.is_spot_price AS "is_spot_price"
from dbo.zone_data_view_link as odv
left join zone_data as od ON od.id=odv.fk_zone_data_id
left join dbo.zones as o ON o.id=od.fk_zone_id
left join dbo.types as ot ON ot.id=o.fk_type_id
left join dbo.metrics as m ON m.id=od.fk_metric_id
left join dbo.attributes as att ON att.id=od.fk_attribute_id
left join dbo.sources as s ON s.id=od.fk_source_id
left join dbo.confidence as conf ON conf.id=od.fk_confidence_id
left join dbo.currencies as cur ON cur.id=od.fk_currency_id
left join dbo.data_sets_master as ds ON (ds.fk_metric_id=od.fk_metric_id and ds.fk_attribute_id=od.fk_attribute_id)
where odv.fk_data_view_id IN (1, 2)
and odv.archive=0
and ds.has_zone_data=1
and ds.id is not null
and o.id is not null]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[view_zone_data_reported].[org_data_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[view_zone_data_reported].[zone_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[fk_zone_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[view_zone_data_reported].[zone_name]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zones].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[view_zone_data_reported].[zone_type_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[types].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[view_zone_data_reported].[zone_type]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[types].[term]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[view_zone_data_reported].[metric]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[metrics].[term]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[view_zone_data_reported].[attribute]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[attributes].[term]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[view_zone_data_reported].[date]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[view_zone_data_reported].[date_type]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[date_type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[view_zone_data_reported].[has_flags]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[has_flags]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[view_zone_data_reported].[value]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[val]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[view_zone_data_reported].[source]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[sources].[term]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[view_zone_data_reported].[confidence]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[confidence].[term]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[view_zone_data_reported].[currency_iso_code]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[currencies].[iso_code]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[view_zone_data_reported].[view_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data_view_link].[fk_data_view_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[view_zone_data_reported].[is_spot_price]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zone_data].[is_spot_price]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References Name="[dbo].[zone_data_view_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_view_link].[fk_zone_data_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[types]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[types].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[fk_type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[fk_zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[types].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[types].[term]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[term]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[term]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[has_flags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[val]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources].[term]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence].[term]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[iso_code]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_view_link].[fk_data_view_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data].[is_spot_price]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_view_link].[fk_data_view_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zone_data_view_link].[archive]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[has_zone_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[data_sets_master].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1168" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE VIEW [dbo].[view_zone_data_reported] AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[wiki_categories]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[wiki_categories].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[wiki_categories].[wiki_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[wiki_categories].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[wiki_categories].[order]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[wiki_categories].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="494" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[wiki_categories].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="493" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[wiki_categories].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="496" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[wiki_categories].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="495" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="615" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[wiki_categories].[IX_wiki_categories]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[wiki_categories].[wiki_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[wiki_categories]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[wiki_entries]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[wiki_entries].[id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[wiki_entries].[wiki_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[wiki_entries].[category_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[wiki_entries].[title]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[wiki_entries].[permalink]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[wiki_entries].[body]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[wiki_entries].[status]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[tinyint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="502" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[wiki_entries].[order]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[wiki_entries].[published_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="501" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[wiki_entries].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="498" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[wiki_entries].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="497" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[wiki_entries].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="500" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[wiki_entries].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="499" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="616" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[wiki_entries].[IX_wiki_entries]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[wiki_entries].[wiki_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[wiki_entries].[category_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[wiki_entries]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[wikis]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[wikis].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[wikis].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[wikis].[url]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[wikis].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="504" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[wikis].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="503" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="617" />
		</Element>
		<Element Type="SqlView" Name="[dbo].[workflow_data_history_simple_view]">
			<Property Name="QueryScript">
				<Value><![CDATA[ SELECT	ds.id, ds.val_d, ds.val_i, ds.currency_id, ds.privacy_id, ds.location, ds.approved, ds.import_hash,
		z.id country_id,
		z.name country,
		o.id organisationId,
		o.name organisationName,
		m.id metricId,
		m.name metric,
		a.id attributeId,
		a.name attribute,
		c.name currency,
		c.iso_code currency_iso_code,
		s.name source,
		c2.name confidence,
		ds.created_on,
		ds.date reported_date,
		ds.date_type,
		u.name unit_name, 
		u.symbol, 
		u.quantity
FROM	[$(wi_import)].dbo.ds_organisation_data ds INNER JOIN
		organisations o ON ds.organisation_id = o.id INNER JOIN
		organisation_zone_link oz ON o.id = oz.organisation_id INNER JOIN
		zones z ON oz.zone_id = z.id INNER JOIN
		metrics m ON ds.metric_id = m.id INNER JOIN
		attributes a ON ds.attribute_id = a.id INNER JOIN
		currencies c ON ds.currency_id = c.id INNER JOIN
		sources s ON ds.source_id = s.id INNER JOIN
		confidence c2 ON ds.confidence_id = c2.id INNER JOIN 
		units u ON u.id = m.unit_id]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_history_simple_view].[id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_history_simple_view].[val_d]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[val_d]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_history_simple_view].[val_i]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[val_i]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_history_simple_view].[currency_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[currency_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_history_simple_view].[privacy_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[privacy_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_history_simple_view].[location]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[location]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_history_simple_view].[approved]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[approved]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_history_simple_view].[import_hash]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[import_hash]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_history_simple_view].[country_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zones].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_history_simple_view].[country]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zones].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_history_simple_view].[organisationId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisations].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_history_simple_view].[organisationName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisations].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_history_simple_view].[metricId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[metrics].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_history_simple_view].[metric]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[metrics].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_history_simple_view].[attributeId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[attributes].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_history_simple_view].[attribute]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[attributes].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_history_simple_view].[currency]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[currencies].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_history_simple_view].[currency_iso_code]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[currencies].[iso_code]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_history_simple_view].[source]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[sources].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_history_simple_view].[confidence]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[confidence].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_history_simple_view].[created_on]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[created_on]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_history_simple_view].[reported_date]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_history_simple_view].[date_type]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[date_type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_history_simple_view].[unit_name]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[units].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_history_simple_view].[symbol]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[units].[symbol]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_history_simple_view].[quantity]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[units].[quantity]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[units]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[units].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[unit_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[val_d]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[val_i]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[privacy_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[location]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[approved]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[import_hash]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[iso_code]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence].[name]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[created_on]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[units].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[units].[symbol]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[units].[quantity]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1055" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE VIEW [dbo].[workflow_data_history_simple_view] AS" />
			</Annotation>
		</Element>
		<Element Type="SqlView" Name="[dbo].[workflow_data_import_approvals_view]">
			<Property Name="QueryScript">
				<Value><![CDATA[ SELECT	ds.*,
		z.id country_id,
		z.name country,
		m.name metric,
		a.name attribute,
		c.name currency,
		c.iso_code currency_iso_code,
		s.name source,
		c2.name confidence,
		o.name organisationName,
		m.[order] metricOrder,
		a.[order] attributeOrder,
		ds.date_type orgDataDataType,
		ds.date orgDataDate

FROM	[$(wi_import)].dbo.ds_organisation_data ds INNER JOIN
		organisations o ON ds.organisation_id = o.id INNER JOIN
		organisation_zone_link oz ON o.id = oz.organisation_id INNER JOIN
		zones z ON oz.zone_id = z.id INNER JOIN
		metrics m ON ds.metric_id = m.id INNER JOIN
		attributes a ON ds.attribute_id = a.id INNER JOIN
		currencies c ON ds.currency_id = c.id INNER JOIN
		sources s ON ds.source_id = s.id INNER JOIN
		confidence c2 ON ds.confidence_id = c2.id

WHERE	ds.approved IS null]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[organisation_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[organisation_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[metric_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[metric_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[attribute_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[attribute_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[date]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[date_type]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[date_type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[val_d]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[val_d]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[val_i]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[val_i]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[currency_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[currency_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[source_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[source_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[confidence_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[confidence_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[privacy_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[privacy_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[has_flags]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[has_flags]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[location]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[location]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[location_cleaned]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[location_cleaned]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[definition]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[definition]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[notes]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[notes]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[approved]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[approved]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[approval_hash]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[approval_hash]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[import_hash]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[import_hash]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[stasis]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[stasis]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[processed]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[processed]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[cleaned]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[cleaned]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[is_latest]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[is_latest]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[is_held_for_review]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[is_held_for_review]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[hash]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[hash]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[index_hash]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[index_hash]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[created_on]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[created_on]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[created_by]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[created_by]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[last_update_on]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[last_update_on]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[last_update_by]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[last_update_by]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[archive]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[archive]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[country_id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zones].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[country]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[zones].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[metric]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[metrics].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[attribute]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[attributes].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[currency]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[currencies].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[currency_iso_code]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[currencies].[iso_code]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[source]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[sources].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[confidence]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[confidence].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[organisationName]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[organisations].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[metricOrder]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[metrics].[order]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[attributeOrder]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[attributes].[order]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[orgDataDataType]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[date_type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[workflow_data_import_approvals_view].[orgDataDate]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[organisation_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisation_zone_link].[zone_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[metric_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[attribute_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[source_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[confidence_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[zones].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currencies].[iso_code]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[sources].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[confidence].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[organisations].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[metrics].[order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[attributes].[order]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[date_type]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[date]" />
				</Entry>
				<Entry>
					<References ExternalSource="wi_import.dacpac" Name="[$(wi_import)]|[dbo].[ds_organisation_data].[approved]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="888" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE VIEW [dbo].[workflow_data_import_approvals_view] AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTableType" Name="[dbo].[xy_coefficients]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[xy_coefficients].[type]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="8" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[xy_coefficients].[a]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[xy_coefficients].[b]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[xy_coefficients].[c]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[xy_coefficients].[d]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[xy_coefficients].[r2]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTableType" Name="[dbo].[xy_data]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[xy_data].[x]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[xy_data].[y]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[zone_benchmark_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_benchmark_link].[zone_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_benchmark_link].[benchmark_zone_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[zone_benchmark_link].[IX_zone_benchmark_link]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zone_benchmark_link].[zone_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[zone_benchmark_link]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[zone_currency_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_currency_link].[zone_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_currency_link].[currency_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_currency_link].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="514" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_currency_link].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="513" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_currency_link].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="516" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_currency_link].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="515" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[zone_data]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_data].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_data].[fk_zone_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_data].[fk_metric_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_data].[fk_attribute_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_data].[fk_status_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_data].[fk_privacy_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_data].[date]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_data].[date_type]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_data].[val]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_data].[fk_currency_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_data].[fk_source_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_data].[fk_confidence_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_data].[has_flags]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_data].[is_calculated]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_data].[archive]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="66" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_data].[is_spot_price]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="67" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="97" />
			<AttachedAnnotation Disambiguator="540" />
			<AttachedAnnotation Disambiguator="541" />
			<AttachedAnnotation Disambiguator="542" />
			<AttachedAnnotation Disambiguator="543" />
			<AttachedAnnotation Disambiguator="544" />
			<AttachedAnnotation Disambiguator="545" />
			<AttachedAnnotation Disambiguator="546" />
			<AttachedAnnotation Disambiguator="547" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[zone_data].[idx_zonedata_row_check]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zone_data].[fk_zone_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zone_data].[fk_metric_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zone_data].[fk_attribute_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zone_data].[fk_status_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zone_data].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zone_data].[date_type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zone_data].[val]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zone_data].[fk_currency_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zone_data].[fk_confidence_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zone_data].[is_spot_price]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zone_data].[fk_source_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zone_data].[is_calculated]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zone_data].[archive]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zone_data].[has_flags]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[zone_data]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[zone_data].[PT_zone_data_comb]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zone_data].[fk_zone_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zone_data].[fk_metric_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zone_data].[fk_attribute_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zone_data].[fk_status_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zone_data].[fk_privacy_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zone_data].[date]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zone_data].[date_type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zone_data].[fk_currency_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zone_data].[fk_source_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zone_data].[fk_confidence_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zone_data].[has_flags]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zone_data].[is_calculated]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zone_data].[archive]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zone_data].[is_spot_price]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[zone_data]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[zone_data_flags_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_data_flags_link].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_data_flags_link].[fk_zone_data_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_data_flags_link].[fk_flag_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="92" />
			<AttachedAnnotation Disambiguator="553" />
			<AttachedAnnotation Disambiguator="570" />
		</Element>
		<Element Type="SqlTableType" Name="[dbo].[zone_data_links_type]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_data_links_type].[id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_data_links_type].[fk_zone_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_data_links_type].[fk_metric_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_data_links_type].[fk_attribute_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_data_links_type].[fk_status_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_data_links_type].[fk_privacy_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_data_links_type].[date]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_data_links_type].[date_type]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_data_links_type].[val]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_data_links_type].[fk_currency_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_data_links_type].[fk_source_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_data_links_type].[fk_confidence_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_data_links_type].[has_flags]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_data_links_type].[is_calculated]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_data_links_type].[archive]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_data_links_type].[is_spot_price]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[zone_data_metadata]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_data_metadata].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_data_metadata].[fk_zone_data_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_data_metadata].[location]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_data_metadata].[location_cleaned]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_data_metadata].[definition]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_data_metadata].[notes]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_data_metadata].[approved]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[tinyint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_data_metadata].[approval_hash]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_data_metadata].[import_hash]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_data_metadata].[is_held_for_review]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="99" />
			<AttachedAnnotation Disambiguator="572" />
		</Element>
		<Element Type="SqlTableType" Name="[dbo].[zone_data_type]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_data_type].[fk_zone_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_data_type].[fk_metric_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_data_type].[fk_attribute_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_data_type].[fk_status_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_data_type].[fk_privacy_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_data_type].[date]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_data_type].[date_type]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_data_type].[val]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_data_type].[fk_currency_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_data_type].[fk_source_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_data_type].[fk_confidence_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_data_type].[has_flags]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_data_type].[is_calculated]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_data_type].[archive]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_data_type].[is_spot_price]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[zone_data_view_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_data_view_link].[fk_zone_data_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_data_view_link].[fk_data_view_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_data_view_link].[created]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_data_view_link].[archive]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="73" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="571" />
			<AttachedAnnotation Disambiguator="573" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[zone_data_view_link].[idx_zone_view_links]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zone_data_view_link].[fk_zone_data_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zone_data_view_link].[fk_data_view_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[zone_data_view_link]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[zone_data_view_link_history]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_data_view_link_history].[fk_zone_data_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_data_view_link_history].[fk_data_view_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_data_view_link_history].[created]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[zone_data_view_link_history].[PT_zone_data_view_link_history_comb]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zone_data_view_link_history].[fk_zone_data_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zone_data_view_link_history].[fk_data_view_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zone_data_view_link_history].[created]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[zone_data_view_link_history]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[zone_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_link].[zone_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zone_link].[subzone_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[zone_link].[IX_zone_link]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zone_link].[zone_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zone_link].[subzone_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[zone_link]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[zone_link].[IX_zone_link_subzone]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zone_link].[subzone_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[zone_link].[zone_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[zone_link]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTableType" Name="[dbo].[zone_reported_data_links_type]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_reported_data_links_type].[id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_reported_data_links_type].[fk_zone_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_reported_data_links_type].[fk_metric_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_reported_data_links_type].[fk_attribute_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_reported_data_links_type].[fk_status_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_reported_data_links_type].[fk_privacy_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_reported_data_links_type].[date]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_reported_data_links_type].[date_type]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_reported_data_links_type].[val]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_reported_data_links_type].[fk_currency_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_reported_data_links_type].[fk_source_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_reported_data_links_type].[fk_confidence_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_reported_data_links_type].[has_flags]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_reported_data_links_type].[is_calculated]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_reported_data_links_type].[archive]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_reported_data_links_type].[is_spot_price]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_reported_data_links_type].[location]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_reported_data_links_type].[location_cleaned]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_reported_data_links_type].[definition]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_reported_data_links_type].[notes]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_reported_data_links_type].[fk_flag_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTableType" Name="[dbo].[zone_reported_data_type]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_reported_data_type].[fk_zone_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_reported_data_type].[fk_metric_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_reported_data_type].[fk_attribute_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_reported_data_type].[fk_status_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_reported_data_type].[fk_privacy_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_reported_data_type].[date]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_reported_data_type].[date_type]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_reported_data_type].[val]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_reported_data_type].[fk_currency_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_reported_data_type].[fk_source_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_reported_data_type].[fk_confidence_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_reported_data_type].[has_flags]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_reported_data_type].[is_calculated]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_reported_data_type].[archive]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_reported_data_type].[is_spot_price]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_reported_data_type].[location]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_reported_data_type].[location_cleaned]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_reported_data_type].[definition]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_reported_data_type].[notes]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[dbo].[zone_reported_data_type].[fk_flag_id]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[zones]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zones].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zones].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zones].[status_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zones].[type_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zones].[fk_type_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zones].[economic_type_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zones].[iso_code]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="3" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zones].[iso_short_code]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zones].[lat]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="7" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zones].[lon]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="7" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zones].[note]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zones].[published]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="519" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zones].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="512" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zones].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="511" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zones].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="518" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[zones].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="517" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="618" />
		</Element>
		<Element Type="SqlSchema" Name="[gsma]">
			<Relationship Name="Authorizer">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[gsma].[DF__ic_organi__creat__39018098]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[gsma].[ic_organisation_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[gsma].[ic_organisation_link].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="619" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[gsma].[DF__ic_organi__creat__39F5A4D1]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[gsma].[ic_organisation_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[gsma].[ic_organisation_link].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="620" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[gsma].[DF__ic_organi__is_or__380D5C5F]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[gsma].[ic_organisation_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[gsma].[ic_organisation_link].[is_orphaned]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="621" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[gsma].[DF_ds_membership_data_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[gsma].[ds_membership_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[gsma].[ds_membership_data].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="622" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[gsma].[DF_ds_membership_data_is_member]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[gsma].[ds_membership_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[gsma].[ds_membership_data].[is_member]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="623" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[gsma].[DF_ds_membership_data_is_special_case]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[gsma].[ds_membership_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[gsma].[ds_membership_data].[is_special_case]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="624" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[gsma].[DF_ds_membership_data_last_update_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[gsma].[ds_membership_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[gsma].[ds_membership_data].[last_update_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="625" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[gsma].[DF_ds_membership_fees_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[gsma].[ds_membership_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[gsma].[ds_membership_data].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="626" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[gsma].[DF_ds_membership_fees_last_updated_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[gsma].[ds_membership_data]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[gsma].[ds_membership_data].[last_update_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="627" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[gsma].[DF_ic_network_link_created_by]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[gsma].[ic_network_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[gsma].[ic_network_link].[created_by]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="628" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[gsma].[DF_ic_network_link_created_on]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[gsma].[ic_network_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[gsma].[ic_network_link].[created_on]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="629" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[gsma].[DF_ic_network_roaming_relationship_link_is_hubbed]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[gsma].[ic_network_roaming_relationship_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[gsma].[ic_network_roaming_relationship_link].[is_hubbed]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="630" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[gsma].[DF_ic_organisation_link_is_member]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[gsma].[ic_organisation_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[gsma].[ic_organisation_link].[is_member]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="631" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[gsma].[DF_ic_organisation_link_is_special_case]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[gsma].[ic_organisation_link]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[gsma].[ic_organisation_link].[is_special_case]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="632" />
		</Element>
		<Element Type="SqlTable" Name="[gsma].[ds_membership_data]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ds_membership_data].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ds_membership_data].[organisation_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ds_membership_data].[group_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ds_membership_data].[date]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ds_membership_data].[date_type]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ds_membership_data].[connections]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ds_membership_data].[connections_source]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ds_membership_data].[connections_tier]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[tinyint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ds_membership_data].[revenue]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ds_membership_data].[revenue_currency]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ds_membership_data].[revenue_source]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ds_membership_data].[revenue_attribute]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ds_membership_data].[revenue_normalised]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ds_membership_data].[revenue_tier]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[tinyint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ds_membership_data].[tier]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[tinyint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ds_membership_data].[votes]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ds_membership_data].[votes_adjusted]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ds_membership_data].[dues]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ds_membership_data].[dues_adjusted]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="22" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ds_membership_data].[dues_currency]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ds_membership_data].[is_member]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="623" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ds_membership_data].[is_special_case]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="624" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ds_membership_data].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="626" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ds_membership_data].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="622" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ds_membership_data].[last_update_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="627" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ds_membership_data].[last_update_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="625" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[gsma]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="633" />
		</Element>
		<Element Type="SqlTable" Name="[gsma].[ic_network_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_network_link].[id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_network_link].[organisation_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_network_link].[licence]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_network_link].[ref_network_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_network_link].[ref_technology_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_network_link].[ref_status_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_network_link].[launch_date]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_network_link].[frequencies]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_network_link].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="628" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_network_link].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="629" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_network_link].[last_update_by]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_network_link].[last_update_on]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[gsma]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[gsma].[ic_network_roaming_relationship_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_network_roaming_relationship_link].[network_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_network_roaming_relationship_link].[tadig_code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="10" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_network_roaming_relationship_link].[rel_network_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_network_roaming_relationship_link].[rel_tadig_code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="10" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_network_roaming_relationship_link].[rel_hub_network_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_network_roaming_relationship_link].[rel_hub_tadig_code]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="10" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_network_roaming_relationship_link].[status]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_network_roaming_relationship_link].[ref_status_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_network_roaming_relationship_link].[is_hubbed]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="630" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[gsma]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[gsma].[ic_network_tadig_codes]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_network_tadig_codes].[organisation_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_network_tadig_codes].[network_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_network_tadig_codes].[tadig_code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="10" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_network_tadig_codes].[type]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_network_tadig_codes].[ref_type_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[gsma]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[gsma].[ic_organisation_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_organisation_link].[id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_organisation_link].[finance_code]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_organisation_link].[name]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_organisation_link].[type]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_organisation_link].[organisation_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_organisation_link].[ref_organisation_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_organisation_link].[mapped_organisation_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_organisation_link].[ref_rel_organisation_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_organisation_link].[is_member]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="631" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_organisation_link].[is_special_case]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="632" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_organisation_link].[is_orphaned]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="621" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_organisation_link].[created_by]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="619" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_organisation_link].[created_on]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="620" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_organisation_link].[last_update_by]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_organisation_link].[last_update_on]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[gsma]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[gsma].[ic_organisation_link].[IX_ic_organisation_link]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[gsma].[ic_organisation_link].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[gsma].[ic_organisation_link].[organisation_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[gsma].[ic_organisation_link]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[gsma].[ic_organisation_link].[IX_ic_organisation_link_organisation_id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[gsma].[ic_organisation_link].[organisation_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[gsma].[ic_organisation_link].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[gsma].[ic_organisation_link]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[gsma].[ic_technology_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_technology_link].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_technology_link].[ref_technology_family_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[ic_technology_link].[ref_technology_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[gsma]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[gsma].[PK_ds_membership_data]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[gsma].[ds_membership_data].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[gsma].[ds_membership_data]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="633" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[gsma].[PK_sf_zone_link]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[gsma].[sf_zone_link].[zone_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[gsma].[sf_zone_link]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="634" />
		</Element>
		<Element Type="SqlTable" Name="[gsma].[sf_zone_link]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[sf_zone_link].[zone_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[gsma].[sf_zone_link].[fk_name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[gsma]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="634" />
		</Element>
		<Element Type="SqlDatabaseDdlTrigger" Name="[rds_deny_backups_trigger]">
			<Property Name="SqlTriggerType" Value="1" />
			<Property Name="BodyScript">
				<Value><![CDATA[ BEGIN
   SET NOCOUNT ON;
   SET ANSI_PADDING ON;
 
   DECLARE @data xml;
   DECLARE @user sysname;
   DECLARE @role sysname;
   DECLARE @type sysname;
   DECLARE @sql NVARCHAR(MAX);
   DECLARE @permissions TABLE(name sysname PRIMARY KEY);
   
   SELECT @data = EVENTDATA();
   SELECT @type = @data.value('(/EVENT_INSTANCE/EventType)[1]', 'sysname');
    
   IF @type = 'ADD_ROLE_MEMBER' BEGIN
      SELECT @user = @data.value('(/EVENT_INSTANCE/ObjectName)[1]', 'sysname'),
       @role = @data.value('(/EVENT_INSTANCE/RoleName)[1]', 'sysname');

      IF @role IN ('db_owner', 'db_backupoperator') BEGIN
         SELECT @sql = 'DENY BACKUP DATABASE, BACKUP LOG TO ' + QUOTENAME(@user);
         EXEC(@sql);
      END
   END ELSE IF @type = 'GRANT_DATABASE' BEGIN
      INSERT INTO @permissions(name)
      SELECT Permission.value('(text())[1]', 'sysname') FROM
       @data.nodes('/EVENT_INSTANCE/Permissions/Permission')
      AS DatabasePermissions(Permission);
      
      IF EXISTS (SELECT * FROM @permissions WHERE name IN ('BACKUP DATABASE',
       'BACKUP LOG'))
         RAISERROR('Cannot grant backup database or backup log', 15, 1) WITH LOG;       
   END
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Property Name="IsCaller" Value="False" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[xml]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[sys].[sysname]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[sys].[sysname]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[sys].[sysname]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[rds_deny_backups_trigger].[@permissions].[name]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[rds_deny_backups_trigger].[@permissions].[name]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[rds_deny_backups_trigger].[@permissions]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[rds_deny_backups_trigger].[@permissions].[name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[sys].[sysname]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="EventType">
				<Entry>
					<Element Type="SqlTriggerEventTypeSpecifier">
						<Property Name="EventType" Value="207" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTriggerEventTypeSpecifier">
						<Property Name="EventType" Value="170" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="User">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1319" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE TRIGGER [rds_deny_backups_trigger] ON DATABASE WITH EXECUTE AS 'dbo' FOR&#xD;&#xA; ADD_ROLE_MEMBER, GRANT_DATABASE AS" />
			</Annotation>
		</Element>
		<Element Type="SqlFullTextCatalog" Name="[search]">
			<Property Name="IsAccentSensitive" Value="False" />
			<Relationship Name="Authorizer">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlFullTextCatalog" Name="[search_documents]">
			<Property Name="IsAccentSensitive" Value="False" />
			<Relationship Name="Authorizer">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlExtendedProperty" Name="[SqlView].[dbo].[data_financials_local_currencies].[MS_DiagramPane1]">
			<Property Name="Value">
				<Value><![CDATA[N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[40] 4[20] 2[20] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "ds"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 114
               Right = 213
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "m"
            Begin Extent = 
               Top = 6
               Left = 251
               Bottom = 114
               Right = 408
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "a"
            Begin Extent = 
               Top = 6
               Left = 446
               Bottom = 114
               Right = 601
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "o"
            Begin Extent = 
               Top = 6
               Left = 639
               Bottom = 114
               Right = 851
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "oz"
            Begin Extent = 
               Top = 114
               Left = 38
               Bottom = 192
               Right = 191
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "z"
            Begin Extent = 
               Top = 114
               Left = 229
               Bottom = 222
               Right = 395
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "cr"
            Begin Extent = 
               Top = 114
               Left = 433
               Bottom = 222
               Right = 597
            End
            DisplayFlags = 280
            TopColumn = 0
         End
']]></Value>
			</Property>
			<Relationship Name="Host">
				<Entry>
					<References Name="[dbo].[data_financials_local_currencies]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlExtendedProperty" Name="[SqlView].[dbo].[data_financials_local_currencies].[MS_DiagramPane2]">
			<Property Name="Value">
				<Value><![CDATA[N'         Begin Table = "cr2"
            Begin Extent = 
               Top = 114
               Left = 635
               Bottom = 222
               Right = 799
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "zc"
            Begin Extent = 
               Top = 114
               Left = 837
               Bottom = 222
               Right = 992
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "c"
            Begin Extent = 
               Top = 192
               Left = 38
               Bottom = 300
               Right = 193
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "c2"
            Begin Extent = 
               Top = 222
               Left = 231
               Bottom = 330
               Right = 386
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
']]></Value>
			</Property>
			<Relationship Name="Host">
				<Entry>
					<References Name="[dbo].[data_financials_local_currencies]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlExtendedProperty" Name="[SqlView].[dbo].[data_financials_local_currencies].[MS_DiagramPaneCount]">
			<Property Name="Value">
				<Value><![CDATA[2]]></Value>
			</Property>
			<Relationship Name="Host">
				<Entry>
					<References Name="[dbo].[data_financials_local_currencies]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlExtendedProperty" Name="[SqlView].[dbo].[multiplay_input_cl].[MS_DiagramPane1]">
			<Property Name="Value">
				<Value><![CDATA[N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[40] 4[20] 2[20] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "ol"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 136
               Right = 251
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "o"
            Begin Extent = 
               Top = 6
               Left = 289
               Bottom = 136
               Right = 475
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "zl"
            Begin Extent = 
               Top = 6
               Left = 513
               Bottom = 102
               Right = 683
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "os"
            Begin Extent = 
               Top = 6
               Left = 721
               Bottom = 136
               Right = 955
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "zn"
            Begin Extent = 
               Top = 6
               Left = 993
               Bottom = 136
               Right = 1178
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "m"
            Begin Extent = 
               Top = 6
               Left = 1216
               Bottom = 136
               Right = 1421
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "a"
            Begin Extent = 
               Top = 102
               Left = 513
               Bottom = 232
               Right = 683
            End
            DisplayFlags = 280
            TopColumn = 0
         End']]></Value>
			</Property>
			<Relationship Name="Host">
				<Entry>
					<References Name="[dbo].[multiplay_input_cl]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlExtendedProperty" Name="[SqlView].[dbo].[multiplay_input_cl].[MS_DiagramPane2]">
			<Property Name="Value">
				<Value><![CDATA[N'
         Begin Table = "s"
            Begin Extent = 
               Top = 138
               Left = 38
               Bottom = 268
               Right = 208
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "c"
            Begin Extent = 
               Top = 138
               Left = 246
               Bottom = 268
               Right = 416
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "co"
            Begin Extent = 
               Top = 138
               Left = 721
               Bottom = 268
               Right = 891
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "omd"
            Begin Extent = 
               Top = 138
               Left = 929
               Bottom = 268
               Right = 1142
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
']]></Value>
			</Property>
			<Relationship Name="Host">
				<Entry>
					<References Name="[dbo].[multiplay_input_cl]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlExtendedProperty" Name="[SqlView].[dbo].[multiplay_input_cl].[MS_DiagramPaneCount]">
			<Property Name="Value">
				<Value><![CDATA[2]]></Value>
			</Property>
			<Relationship Name="Host">
				<Entry>
					<References Name="[dbo].[multiplay_input_cl]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlExtendedProperty" Name="[SqlView].[dbo].[multiplay_input_ol].[MS_DiagramPane1]">
			<Property Name="Value">
				<Value><![CDATA[N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[40] 4[20] 2[20] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "ol"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 136
               Right = 251
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "o"
            Begin Extent = 
               Top = 6
               Left = 289
               Bottom = 136
               Right = 475
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "zl"
            Begin Extent = 
               Top = 6
               Left = 513
               Bottom = 102
               Right = 683
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "os"
            Begin Extent = 
               Top = 6
               Left = 721
               Bottom = 136
               Right = 955
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "zn"
            Begin Extent = 
               Top = 6
               Left = 993
               Bottom = 136
               Right = 1178
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "m"
            Begin Extent = 
               Top = 6
               Left = 1216
               Bottom = 136
               Right = 1421
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "a"
            Begin Extent = 
               Top = 102
               Left = 513
               Bottom = 232
               Right = 683
            End
            DisplayFlags = 280
            TopColumn = 0
         End']]></Value>
			</Property>
			<Relationship Name="Host">
				<Entry>
					<References Name="[dbo].[multiplay_input_ol]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlExtendedProperty" Name="[SqlView].[dbo].[multiplay_input_ol].[MS_DiagramPane2]">
			<Property Name="Value">
				<Value><![CDATA[N'
         Begin Table = "s"
            Begin Extent = 
               Top = 138
               Left = 38
               Bottom = 268
               Right = 208
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "c"
            Begin Extent = 
               Top = 138
               Left = 246
               Bottom = 268
               Right = 416
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "co"
            Begin Extent = 
               Top = 138
               Left = 721
               Bottom = 268
               Right = 891
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "omd"
            Begin Extent = 
               Top = 138
               Left = 929
               Bottom = 268
               Right = 1142
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
']]></Value>
			</Property>
			<Relationship Name="Host">
				<Entry>
					<References Name="[dbo].[multiplay_input_ol]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlExtendedProperty" Name="[SqlView].[dbo].[multiplay_input_ol].[MS_DiagramPaneCount]">
			<Property Name="Value">
				<Value><![CDATA[2]]></Value>
			</Property>
			<Relationship Name="Host">
				<Entry>
					<References Name="[dbo].[multiplay_input_ol]" />
				</Entry>
			</Relationship>
		</Element>
	</Model>
</DataSchemaModel>